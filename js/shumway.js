/*
 * Copyright 2013 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// This file is automatically generated

(function(a){function b(a,d,b,r,u){void 0===r&&e("Missing required offset argument");(0>r||r+b>a.byteLength)&&e("Invalid index: "+r);if(1===b||!!u===f){if(0===(a.byteOffset+r)%b)return(new d(a.buffer,a.byteOffset+r,1))[0];for(u=0;u<b;u++)g[u]=a._bytes[r+u];return(new d(g.buffer))[0]}for(u=0;u<b;u++)g[b-u-1]=a._bytes[r+u];return(new d(g.buffer))[0]}function d(a,d,b,r,u,v){void 0===r&&e("Missing required offset argument");void 0===u&&e("Missing required value argument");(0>r||r+b>a.byteLength)&&e("Invalid index: "+
r);if(1===b||!!v===f)if(0===(a.byteOffset+r)%b)(new d(a.buffer,a.byteOffset+r,1))[0]=u;else{(new d(g.buffer))[0]=u;for(d=0;d<b;d++)a._bytes[d+r]=g[d]}else{(new d(g.buffer))[0]=u;for(d=0;d<b;d++)a._bytes[r+d]=g[b-1-d]}}function e(a){throw Error(a);}if(!a.DataView){a.ArrayBuffer||e("ArrayBuffer not supported");Object.defineProperties||e("This module requires ECMAScript 5");var f=1===(new Int8Array((new Int32Array([1])).buffer))[0],g=new Uint8Array(8);a.DataView=function(a,d,b){a instanceof ArrayBuffer||
e("Bad ArrayBuffer");d=d||0;b=b||a.byteLength-d;(0>d||0>b||d+b>a.byteLength)&&e("Illegal offset and/or length");Object.defineProperties(this,{buffer:{value:a,enumerable:!1,writable:!1,configurable:!1},byteOffset:{value:d,enumerable:!1,writable:!1,configurable:!1},byteLength:{value:b,enumerable:!1,writable:!1,configurable:!1},_bytes:{value:new Uint8Array(a,d,b),enumerable:!1,writable:!1,configurable:!1}})};a.DataView.prototype={constructor:DataView,getInt8:function(a){return b(this,Int8Array,1,a)},
getUint8:function(a){return b(this,Uint8Array,1,a)},getInt16:function(a,d){return b(this,Int16Array,2,a,d)},getUint16:function(a,d){return b(this,Uint16Array,2,a,d)},getInt32:function(a,d){return b(this,Int32Array,4,a,d)},getUint32:function(a,d){return b(this,Uint32Array,4,a,d)},getFloat32:function(a,d){return b(this,Float32Array,4,a,d)},getFloat64:function(a,d){return b(this,Float64Array,8,a,d)},setInt8:function(a,b){d(this,Int8Array,1,a,b)},setUint8:function(a,b){d(this,Uint8Array,1,a,b)},setInt16:function(a,
b,e){d(this,Int16Array,2,a,b,e)},setUint16:function(a,b,e){d(this,Uint16Array,2,a,b,e)},setInt32:function(a,b,e){d(this,Int32Array,4,a,b,e)},setUint32:function(a,b,e){d(this,Uint32Array,4,a,b,e)},setFloat32:function(a,b,e){d(this,Float32Array,4,a,b,e)},setFloat64:function(a,b,e){d(this,Float64Array,8,a,b,e)}}}})(this);
var ByteArray=ByteArray||function(){function a(d){if(d instanceof ByteArray)return d;(d=d||this.symbol&&this.symbol.data)?(this.a=new ArrayBuffer(d.length),this.length=d.length,(new Uint8Array(this.a)).set(d)):(this.a=new ArrayBuffer(a.INITIAL_SIZE),this.length=0);this.position=0;this.cacheViews();this.le=this.nativele=1===(new Int8Array((new Int32Array([])).buffer))[0];this.objectEncoding=a.DEFAULT_OBJECT_ENCODING;this.bitLength=this.bitBuffer=0}function b(){runtime.throwErrorFromVM("flash.errors.EOFError",
"End of file was encountered.")}function d(){var a=Errors.ParamRangeError;runtime.throwErrorFromVM("RangeError",getErrorMessage(a.code),a.code)}function e(){var a=Errors.CompressedDataError;runtime.throwErrorFromVM("CompressedDataError",getErrorMessage(a.code),a.code)}function f(a,d,e){a.position+e>a.length&&b();d=a.view[d](a.position,a.le);a.position+=e;return d}function g(a,d,b,e){b=a.position+b;a.ensureCapacity(b);a.view[d](a.position,e,a.le);a.position=b;b>a.length&&(a.length=b)}function l(a){for(var d=
Math.max.apply(null,a),b=a.length,e=1<<d,f=new Uint32Array(e),g=0,l=1,m=2;l<=d;g<<=1,++l,m<<=1)for(var s=0;s<b;++s)if(a[s]===l){for(var u=0,r=0;r<l;++r)u=2*u+(g>>r&1);for(r=u;r<e;r+=m)f[r]=l<<16|s;++g}return{codes:f,maxBits:d}}function m(a,d){for(var b=a.bitBuffer,e=a.bitLength;d>e;)b|=a.readUnsignedByte()<<e,e+=8;a.bitBuffer=b>>>d;a.bitLength=e-d;return b&(1<<d)-1}function p(a,d,b,e){for(var f;256!==(f=r(a,b));)if(256>f)d.writeUnsignedByte(f);else{f-=257;var g=D[f]+m(a,G[f]);f=r(a,e);f=z[f]+m(a,
y[f]);d.writeBytes(d,d.position-f,g)}}function r(a,d){for(var b=a.bitBuffer,f=a.bitLength,g=d.maxBits;g>f;)b|=a.readUnsignedByte()<<f,f+=8;var g=d.codes[b&(1<<g)-1],l=g>>16;l||e();a.bitBuffer=b>>>l;a.bitLength=f-l;return g&65535}function u(a,d,b){for(var e=1,f=0;d<b;++d)e=(e+(a[d]&255))%65521,f=(f+e)%65521;return f<<16|e}a.INITIAL_SIZE=128;a.DEFAULT_OBJECT_ENCODING=3;var v=a.prototype;v.cacheViews=function(){var a=this.a;this.int8v=new Int8Array(a);this.uint8v=new Uint8Array(a);this.view=new DataView(a)};
v.getBytes=function(){return new Uint8Array(this.a,0,this.length)};v.ensureCapacity=function(a){var d=this.a;if(d.byteLength<a){for(d=d.byteLength;d<a;)d*=2;a=new ArrayBuffer(d);d=this.int8v;this.a=a;this.cacheViews();this.int8v.set(d)}};v.clear=function(){this.position=this.length=0};v.readBoolean=function(){this.position+1>this.length&&b();return 0!==this.int8v[this.position++]};v.readByte=function(){this.position+1>this.length&&b();return this.int8v[this.position++]};v.readUnsignedByte=function(){this.position+
1>this.length&&b();return this.uint8v[this.position++]};v.readBytes=function(a,d,e){var f=this.position;d||(d=0);e||(e=this.length-f);f+e>this.length&&b();a.length<d+e&&(a.ensureCapacity(d+e),a.length=d+e);a.int8v.set(new Int8Array(this.a,f,e),d);this.position+=e};v.writeBoolean=function(a){var d=this.position+1;this.ensureCapacity(d);this.int8v[this.position++]=a?1:0;d>this.length&&(this.length=d)};v.writeByte=function(a){var d=this.position+1;this.ensureCapacity(d);this.int8v[this.position++]=a;
d>this.length&&(this.length=d)};v.writeUnsignedByte=function(a){var d=this.position+1;this.ensureCapacity(d);this.uint8v[this.position++]=a;d>this.length&&(this.length=d)};v.writeRawBytes=function(a){var d=this.position+a.length;this.ensureCapacity(d);this.int8v.set(a,this.position);this.position=d;d>this.length&&(this.length=d)};v.readRawBytes=function(){return new Int8Array(this.a,0,this.length)};v.writeBytes=function(a,b,e){2>arguments.length&&(b=0);3>arguments.length&&(e=0);b!==clamp(b,0,a.length)&&
d();var f=b+e;f!==clamp(f,0,a.length)&&d();0===e&&(e=a.length-b);this.writeRawBytes(new Int8Array(a.a,b,e))};v.readDouble=function(){return f(this,"getFloat64",8)};v.readFloat=function(){return f(this,"getFloat32",4)};v.readInt=function(){return f(this,"getInt32",4)};v.readShort=function(){return f(this,"getInt16",2)};v.readUnsignedInt=function(){return f(this,"getUint32",4)};v.readUnsignedShort=function(){return f(this,"getUint16",2)};v.writeDouble=function(a){g(this,"setFloat64",8,a)};v.writeFloat=
function(a){g(this,"setFloat32",4,a)};v.writeInt=function(a){g(this,"setInt32",4,a)};v.writeShort=function(a){g(this,"setInt16",2,a)};v.writeUnsignedInt=function(a){g(this,"setUint32",4,a)};v.writeUnsignedShort=function(a){g(this,"setUint16",2,a)};for(var w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[],y=[],B=0,A=0,s=1;30>B;++B)z[B]=s,s+=1<<(y[B]=~~((A+=2<B?1:0)/2));for(var E=[],B=0;32>B;++B)E[B]=5;for(var H=l(E),D=[],G=[],A=B=0,s=3;29>B;++B)D[B]=s-(28==B?1:0),s+=1<<(G[B]=~~((A+=4<B?1:0)/
4%6));for(B=0;288>B;++B)E[B]=144>B||279<B?8:256>B?9:7;var F=l(E);v.compress=function(a){this.position=0;var d=new ByteArray;switch(a){case "zlib":d.writeUnsignedByte(120),d.writeUnsignedByte(156);case "deflate":d.le=!0;var b=this.length;for(d.ensureCapacity(b+5*Math.ceil(b/65535)+4);65535<b;)d.writeUnsignedByte(0),d.writeUnsignedShort(65535),d.writeUnsignedShort(0),d.writeBytes(this,this.position,65535),this.position+=65535,b-=65535;d.writeUnsignedByte(0);d.writeUnsignedShort(b);d.writeUnsignedShort(~b&
65535);d.writeBytes(this,this.position,b);"zlib"===a&&d.writeUnsignedInt(u(this.uint8v,0,this.length));break;default:return}this.ensureCapacity(d.uint8v.length);this.uint8v.set(d.uint8v);this.length=d.length;this.position=0};v.uncompress=function(a){var d=new ByteArray;switch(a){case "zlib":a=this.readUnsignedShort(),(2048!==(a&3840)||0!==a%31||a&32)&&e();case "deflate":a=this.le;for(this.le=!0;this.position<this.length-6;){var b=d;switch(m(this,3)>>1){case 0:this.bitBuffer=this.bitLength=0;var f=
this.readUnsignedShort();(~this.readUnsignedShort()&65535)!==f&&e();b.writeBytes(this,this.position,f);this.position+=f;break;case 1:p(this,b,F,H);break;case 2:for(var f=[],g=m(this,5)+257,s=m(this,5)+1,u=g+s,v=m(this,4)+4,B=0;19>B;++B)f[w[B]]=B<v?m(this,3):0;for(var v=l(f),f=[],y=B=0;B<u;){var z=1,D=r(this,v);switch(D){case 16:z=m(this,2)+3;D=y;break;case 17:z=m(this,3)+3;D=0;break;case 18:z=m(this,7)+11;D=0;break;default:y=D}for(;z--;)f[B++]=D}g=l(f.splice(g,s));f=l(f);p(this,b,f,g);break;default:fail("unknown block type",
"inflate")}}this.le=a;break;default:return}this.ensureCapacity(d.uint8v.length);this.uint8v.set(d.uint8v);this.length=d.length;this.position=0};return a}(),jsGlobal=function(){return this||(0,eval)("this")}(),inBrowser="undefined"!=typeof console,release=!0,debug=!1;jsGlobal.performance||(jsGlobal.performance={});jsGlobal.performance.now||(jsGlobal.performance.now=dateNow);function log(a){for(var b=0;b<arguments.length-1;b++);jsGlobal.print(a)}
function warn(a){for(var b=0;b<arguments.length-1;b++);inBrowser?console.warn(a):jsGlobal.print(a)}var Shumway;
(function(a){function b(a){return String(Number(a))===a}function d(d){var b=0;if("number"===typeof d)return b=d|0,d===b&&0<=b?!0:d>>>0===d;if("string"!==typeof d)return!1;var e=d.length;if(0===e)return!1;if("0"===d)return!0;if(e>a.UINT32_CHAR_BUFFER_LENGTH)return!1;var f=0,b=d.charCodeAt(f++)-48;if(1>b||9<b)return!1;for(var g=0,l=0;f<e;){l=d.charCodeAt(f++)-48;if(0>l||9<l)return!1;g=b;b=10*b+l}return g<a.UINT32_MAX_DIV_10||g===a.UINT32_MAX_DIV_10&&l<=a.UINT32_MAX_MOD_10?!0:!1}var e=a.CharacterCodes||
(a.CharacterCodes={});e[e._0=48]="_0";e[e._1=49]="_1";e[e._2=50]="_2";e[e._3=51]="_3";e[e._4=52]="_4";e[e._5=53]="_5";e[e._6=54]="_6";e[e._7=55]="_7";e[e._8=56]="_8";e[e._9=57]="_9";a.UINT32_CHAR_BUFFER_LENGTH=10;a.UINT32_MAX=4294967295;a.UINT32_MAX_DIV_10=429496729;a.UINT32_MAX_MOD_10=5;a.isString=function(a){return"string"===typeof a};a.isFunction=function(a){return"function"===typeof a};a.isNumber=function(a){return"number"===typeof a};a.isNumberOrString=function(a){return"number"===typeof a||
"string"===typeof a};a.isObject=function(a){return"object"===typeof a||"function"===typeof a};a.toNumber=function(a){return+a};a.isNumericString=b;a.isNumeric=function(a){if("number"===typeof a)return!0;if("string"===typeof a)return d(a)||b(a);g.notImplemented(typeof a)};a.isIndex=d;a.isNullOrUndefined=function(a){return void 0==a};var f=a.Debug||(a.Debug={});f.backtrace=function(){try{throw Error();}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}};f.error=function(a){inBrowser||
warn(f.backtrace());throw Error(a);};f.assert=function(a){for(var d=0;d<arguments.length-1;d++);""===a&&(a=!0);a||(d=Array.prototype.slice.call(arguments),d.shift(),f.error(d.join("")))};f.assertNotImplemented=function(a,d){a||f.error("NotImplemented: "+d)};f.warning=function(){!0};f.notUsed=function(){!0};f.notImplemented=function(){!0};f.somewhatImplemented=function(a){f.warning("somewhatImplemented: "+a)};f.unexpected=function(a){f.assert(!1,"Unexpected: "+a)};var g=a.Debug;a.getTicks=function(){return performance.now()};
(a.ArrayUtilities||(a.ArrayUtilities={})).popManyInto=function(a,d,b){!0;for(var e=d-1;0<=e;e--)b[e]=a.pop();b.length=d};var l=a.ObjectUtilities||(a.ObjectUtilities={});l.boxValue=function(d){return a.isNullOrUndefined(d)||a.isObject(d)?d:Object(d)};l.toKeyValueArray=function(a){var d=Object.prototype.hasOwnProperty,b=[],e;for(e in a)d.call(a,e)&&b.push([e,a[e]]);return b};l.hasOwnProperty=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};l.createEmptyObject=function(){return Object.create(null)};
l.createMap=function(){return Object.create(null)};l.createArrayMap=function(){return[]};l.defineReadOnlyProperty=function(a,d,b){Object.defineProperty(a,d,{value:b,writable:!1,configurable:!0,enumerable:!1})};l.getOwnPropertyDescriptors=function(a){for(var d=l.createMap(),b=Object.getOwnPropertyNames(a),e=0;e<b.length;e++)d[b[e]]=Object.getOwnPropertyDescriptor(a,b[e]);return d};l.cloneObject=function(a){var d=l.createEmptyObject(),b;for(b in a)d[b]=a[b];return d};l.copyProperties=function(a,d){for(var b in d)a[b]=
d[b]};l.getLatestGetterOrSetterPropertyDescriptor=function(a,d){for(var b={};a;){var e=Object.getOwnPropertyDescriptor(a,d);e&&(b.get=b.get||e.get,b.set=b.set||e.set);if(b.get&&b.set)break;a=Object.getPrototypeOf(a)}return b};l.defineNonEnumerableGetterOrSetter=function(a,d,b,e){var f=l.getLatestGetterOrSetterPropertyDescriptor(a,d);f.configurable=!0;f.enumerable=!1;e?f.get=b:f.set=b;Object.defineProperty(a,d,f)};l.defineNonEnumerableGetter=function(a,d,b){Object.defineProperty(a,d,{get:b,configurable:!0,
enumerable:!1})};l.defineNonEnumerableSetter=function(a,d,b){Object.defineProperty(a,d,{set:b,configurable:!0,enumerable:!1})};l.defineNonEnumerableProperty=function(a,d,b){Object.defineProperty(a,d,{value:b,writable:!0,configurable:!0,enumerable:!1})};l.defineNonEnumerableForwardingProperty=function(a,d,b){Object.defineProperty(a,d,{get:m.makeForwardingGetter(b),set:m.makeForwardingSetter(b),writable:!0,configurable:!0,enumerable:!1})};l.defineNewNonEnumerableProperty=function(a,d,b){!0;l.defineNonEnumerableProperty(a,
d,b)};e=a.FunctionUtilities||(a.FunctionUtilities={});e.makeForwardingGetter=function(a){return new Function('return this["'+a+'"]')};e.makeForwardingSetter=function(a){return new Function("value",'this["'+a+'"] = value;')};e.bindSafely=function(a,d){!0;var b=a.bind(d);b.boundTo=d;return b};var m=a.FunctionUtilities,p=a.StringUtilities||(a.StringUtilities={}),r=function(a){return"string"===typeof a?'"'+a+'"':"number"===typeof a||"boolean"===typeof a?String(a):typeof a};p.toSafeString=r;p.toSafeArrayString=
function(a){for(var d=[],b=0;b<a.length;b++)d.push(r(a[b]));return d.join(", ")};p.utf8decode=function(a){for(var d=new Uint8Array(4*a.length),b=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);if(127>=g)d[b++]=g;else{if(55296<=g&&56319>=g){var l=a.charCodeAt(e+1);56320<=l&&57343>=l&&(g=((g&1023)<<10)+(l&1023)+65536,++e)}0!==(g&4292870144)?(d[b++]=248|g>>>24&3,d[b++]=128|g>>>18&63,d[b++]=128|g>>>12&63,d[b++]=128|g>>>6&63):0!==(g&4294901760)?(d[b++]=240|g>>>18&7,d[b++]=128|g>>>12&63,d[b++]=128|g>>>
6&63):0!==(g&4294965248)?(d[b++]=224|g>>>12&15,d[b++]=128|g>>>6&63):d[b++]=192|g>>>6&31;d[b++]=128|g&63}}return d.subarray(0,b)};p.utf8encode=function(a){for(var d=0,b="";d<a.length;){var e=a[d++]&255;if(127>=e)b+=String.fromCharCode(e);else{var f=192,g=5;do{if((e&(f>>1|128))===f)break;f=f>>1|128;--g}while(0<=g);if(0>=g)b+=String.fromCharCode(e);else{for(var e=e&(1<<g)-1,f=!1,l=5;l>=g;--l){var m=a[d++];if(128!=(m&192)){f=!0;break}e=e<<6|m&63}if(f)for(g=d-(7-l);g<d;++g)b+=String.fromCharCode(a[g]&
255);else b=65536<=e?b+String.fromCharCode(e-65536>>10&1023|55296,e&1023|56320):b+String.fromCharCode(e)}}}return b};p.base64ArrayBuffer=function(a){var d="";a=new Uint8Array(a);for(var b=a.byteLength,e=b%3,b=b-e,f,g,l,m,u=0;u<b;u+=3)m=a[u]<<16|a[u+1]<<8|a[u+2],f=(m&16515072)>>18,g=(m&258048)>>12,l=(m&4032)>>6,m&=63,d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==e?(m=a[b],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&3)<<4]+"=="):2==e&&(m=a[b]<<8|a[b+1],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&
15)<<2]+"=");return d};p.escapeString=function(a){void 0!==a&&(a=a.replace(/[^\w$]/gi,"$"),/^\d/.test(a)&&(a="$"+a));return a};p.fromCharCodeArray=function(a){for(var d="",b=0;b<a.length;b+=16384)var e=Math.min(a.length-b,16384),d=d+String.fromCharCode.apply(null,a.subarray(b,b+e));return d};p.variableLengthEncodeInt32=function(a){for(var d=32-z.leadingZeros(a),b=Math.ceil(d/6),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[b],b=b-1;0<=b;b--)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[a>>
6*b&63];!0;return d};p.toEncoding=function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[a]};p.fromEncoding=function(a){a=a.charCodeAt(0);if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-71;if(48<=a&&57>=a)return a+4;if(36===a)return 62;if(95===a)return 63};p.variableLengthDecodeInt32=function(a){for(var d=p.fromEncoding(a[0]),b=0,e=0;e<d;e++)var f=6*(d-e-1),b=b|p.fromEncoding(a[1+e])<<f;return b};var e=a.HashUtilities||(a.HashUtilities={}),u=new Uint8Array([7,12,
17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),v=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,
-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);e.hashBytesTo32BitsMD5=function(a,d,b){var e=1732584193,f=-271733879,g=-1732584194,l=271733878,m=b+72&-64,r=new Uint8Array(m),
p;for(p=0;p<b;++p)r[p]=a[d++];r[p++]=128;for(a=m-8;p<a;)r[p++]=0;r[p++]=b<<3&255;r[p++]=b>>5&255;r[p++]=b>>13&255;r[p++]=b>>21&255;r[p++]=b>>>29&255;r[p++]=0;r[p++]=0;r[p++]=0;a=new Int32Array(16);for(p=0;p<m;){for(b=0;16>b;++b,p+=4)a[b]=r[p]|r[p+1]<<8|r[p+2]<<16|r[p+3]<<24;var B=e;d=f;var y=g,w=l,z,A;for(b=0;64>b;++b){16>b?(z=d&y|~d&w,A=b):32>b?(z=w&d|~w&y,A=5*b+1&15):48>b?(z=d^y^w,A=3*b+5&15):(z=y^(d|~w),A=7*b&15);var L=w,B=B+z+v[b]+a[A]|0;z=u[b];w=y;y=d;d=d+(B<<z|B>>>32-z)|0;B=L}e=e+B|0;f=f+d|
0;g=g+y|0;l=l+w|0}return e};e.hashBytesTo32BitsAdler=function(a,d,b){var e=1,f=0;for(b=d+b;d<b;++d)e=(e+(a[d]&255))%65521,f=(f+e)%65521;return f<<16|e};var w=a.IntegerUtilities||(a.IntegerUtilities={});w.bitCount=function(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24};w.ones=function(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24};w.leadingZeros=function(a){a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;return 32-
w.ones(a|a>>16)};w.trailingZeros=function(a){return w.ones((a&-a)-1)};w.getFlags=function(a,d){var b="";for(a=0;a<d.length;a++)a&1<<a&&(b+=d[a]+" ");return 0===b.length?"":b.trim()};w.isPowerOfTwo=function(a){return a&&0===(a&a-1)};var z=a.IntegerUtilities,y=function(a,d){"undefined"===typeof a&&(a=!1);this._tab="  ";this._padding="";this._suppressOutput=a;this._out=d||y._consoleOutFn};y.prototype.writeLn=function(a){this._suppressOutput||this._out(this._padding+a)};y.prototype.writeLns=function(a){a=
a.split("\n");for(var d=0;d<a.length;d++)this.writeLn(a[d])};y.prototype.debugLn=function(a){this.colorLn(y.PURPLE,a)};y.prototype.yellowLn=function(a){this.colorLn(y.YELLOW,a)};y.prototype.greenLn=function(a){this.colorLn(y.GREEN,a)};y.prototype.redLn=function(a){this.colorLn(y.RED,a)};y.prototype.colorLn=function(a,d){this._suppressOutput||(inBrowser?this._out(this._padding+d):this._out(this._padding+a+d+y.ENDC))};y.prototype.enter=function(a){this._suppressOutput||this._out(this._padding+a);this.indent()};
y.prototype.leaveAndEnter=function(a){this.leave(a);this.indent()};y.prototype.leave=function(a){this.outdent();this._suppressOutput||this._out(this._padding+a)};y.prototype.indent=function(){this._padding+=this._tab};y.prototype.outdent=function(){0<this._padding.length&&(this._padding=this._padding.substring(0,this._padding.length-this._tab.length))};y.prototype.writeArray=function(a,d,b){"undefined"===typeof d&&(d=!1);"undefined"===typeof b&&(b=!1);d=d||!1;for(var e=0,f=a.length;e<f;e++){var g=
"";d&&(g=null===a[e]?"null":void 0===a[e]?"undefined":a[e].constructor.name,g+=" ");var l=b?"":(""+e).padRight(" ",4);this.writeLn(l+g+a[e])}};y.PURPLE="\u001b[94m";y.YELLOW="\u001b[93m";y.GREEN="\u001b[92m";y.RED="\u001b[91m";y.ENDC="\u001b[0m";y._consoleOutFn=inBrowser?console.info.bind(console):print;a.IndentingWriter=y;var B;B=function(a,d){this.value=a;this.next=d};var A=function(a){!0;this._compare=a;this._head=null;this._length=0};A.prototype.push=function(a){!0;this._length++;if(this._head){var d=
this._head,b=null;a=new B(a,null);for(var e=this._compare;d;){if(0<e(d.value,a.value)){b?(a.next=d,b.next=a):(a.next=this._head,this._head=a);return}b=d;d=d.next}b.next=a}else this._head=new B(a,null)};A.prototype.forEach=function(a){for(var d=this._head,b=null;d;){var e=a(d.value);if(e===A.RETURN)break;else e===A.DELETE?d=b?b.next=d.next:this._head=this._head.next:(b=d,d=d.next)}};A.prototype.isEmpty=function(){return!this._head};A.prototype.pop=function(){if(this._head){this._length--;var a=this._head;
this._head=this._head.next;return a.value}};A.prototype.contains=function(a){for(var d=this._head;d;){if(d.value===a)return!0;d=d.next}return!1};A.prototype.toString=function(){for(var a="[",d=this._head;d;)a+=d.value.toString(),(d=d.next)&&(a+=",");return a+"]"};A.RETURN=1;A.DELETE=2;a.SortedList=A;e=function(a){this.start=this.index=0;this.array=new a(4096)};e.prototype.get=function(a){return this.array[a]};e.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var d=0===this.index?4095:
this.index-1;d!==this.start&&!a(this.array[d],d);)d=0===d?4095:d-1};e.prototype.write=function(a){this.array[this.index]=a;this.index=this.index+1&4095;this.index===this.start&&(this.start=this.start+1&4095)};e.prototype.isFull=function(){return(this.index+1&4095)===this.start};e.prototype.isEmpty=function(){return this.index===this.start};a.CircularBuffer=e})(Shumway||(Shumway={}));var assert=Shumway.Debug.assert,IndentingWriter=Shumway.IndentingWriter;
(function(a){var b=a.Options||(a.Options={}),d=a.isObject,e=function(a,d,b,e){this.shortName=a;this.longName=d;this.type=b;e=e||{};this.positional=e.positional;this.parseFn=e.parse;this.value=e.defaultValue};e.prototype.parse=function(a){"boolean"===this.type?(!0,this.value=a):"number"===this.type?(!0,this.value=parseInt(a,10)):this.value=a;this.parseFn&&this.parseFn(this.value)};b.Argument=e;a=function(){this.args=[]};a.prototype.addArgument=function(a,d,b,f){a=new e(a,d,b,f);this.args.push(a);return a};
a.prototype.addBoundOption=function(a){this.args.push(new e(a.shortName,a.longName,a.type,{parse:function(d){a.value=d}}))};a.prototype.addBoundOptionSet=function(a){var d=this;a.options.forEach(function(a){a instanceof f?d.addBoundOptionSet(a):(!0,d.addBoundOption(a))})};a.prototype.getUsage=function(){var a="";this.args.forEach(function(d){a=d.positional?a+d.longName:a+("[-"+d.shortName+"|--"+d.longName+("boolean"===d.type?"":" "+d.type[0].toUpperCase())+"]");a+=" "});return a};a.prototype.parse=
function(a){var d={},b=[];this.args.forEach(function(a){a.positional?b.push(a):(d["-"+a.shortName]=a,d["--"+a.longName]=a)});for(var e=[];a.length;){var f=a.shift(),g=null,w=f;if("--"==f){e=e.concat(a);break}else if("-"==f.slice(0,1)||"--"==f.slice(0,2)){g=d[f];!0;if(!g)continue;"boolean"!==g.type?(w=a.shift(),!0):w=!0}else b.length?g=b.shift():e.push(w);g&&g.parse(w)}!0;return e};b.ArgumentParser=a;var f,g=function(a,d){"undefined"===typeof d&&(d=null);this.open=!1;this.name=a;this.settings=d||{};
this.options=[]};g.prototype.register=function(a){if(a instanceof g)for(var b=0;b<this.options.length;b++){var e=this.options[b];if(e instanceof g&&e.name===a.name)return e}this.options.push(a);if(this.settings)if(a instanceof g)b=this.settings[a.name],d(b)&&(a.settings=b.settings,a.open=b.open);else if("undefined"!==typeof this.settings[a.longName])switch(a.type){case "boolean":a.value=!!this.settings[a.longName];break;default:a.value=this.settings[a.longName]}return a};g.prototype.trace=function(a){a.enter(this.name+
" {");this.options.forEach(function(d){d.trace(a)});a.leave("}")};g.prototype.getSettings=function(){var a={};this.options.forEach(function(d){d instanceof g?a[d.name]={settings:d.getSettings(),open:d.open}:a[d.longName]=d.value});return a};f=g;b.OptionSet=f;a=function(a,d,b,e,f,g){"undefined"===typeof g&&(g=null);this.longName=d;this.shortName=a;this.type=b;this.value=this.defaultValue=e;this.description=f;this.config=g};a.prototype.parse=function(a){this.value=a};a.prototype.trace=function(a){a.writeLn(("-"+
this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")};b.Option=a})(Shumway||(Shumway={}));"undefined"!==typeof exports&&(exports.Shumway=Shumway);var ArgumentParser=Shumway.Options.ArgumentParser,Option=Shumway.Options.Option,OptionSet=Shumway.Options.OptionSet;
(function(a){var b=a.Settings||(a.Settings={}),d=function(){try{return window&&"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},e=function(a){"undefined"===typeof a&&(a="Shumway Options");var b={};if(d()&&(a=window.localStorage[a]))try{b=JSON.parse(a)}catch(e){}return b};b.shumwayOptions=new a.Options.OptionSet("Shumway Options",e());b.isStorageSupported=d;b.load=e;b.save=function(a,e){"undefined"===typeof a&&(a=null);"undefined"===typeof e&&(e="Shumway Options");if(d())try{window.localStorage[e]=
JSON.stringify(a?a:b.shumwayOptions.getSettings())}catch(l){}}})(Shumway||(Shumway={}));
var shumwayOptions=Shumway.Settings.shumwayOptions,Timeline=function(){function a(a){this.index=this.start=this.depth=0;this.marks=new Shumway.CircularBuffer(Int32Array);this.times=new Shumway.CircularBuffer(Float64Array);this.frameRate=12;this.maxFrameTime=2E3/this.frameRate;this.refreshFrequency=10;this.count=this.refreshCounter=0;this.kinds=createEmptyObject();this.kindCount=0;this.canvas=a;this.context=a.getContext("2d",{original:!0});this.fillStyles=["rgb(85, 152, 213)","#bfd8a7","#d906d7"];
window.addEventListener("resize",this.resizeHandler.bind(this),!1);this.resizeHandler()}a.prototype.setFrameRate=function(a){this.frameRate=a;this.maxFrameTime=2E3/a};a.prototype.refreshEvery=function(a){this.refreshFrequency=a;this.refreshCounter=0};a.prototype.registerKind=function(a,d){void 0===this.kinds[a]?(this.fillStyles[this.kindCount]=d,this.kinds[a]=this.kindCount++):this.fillStyles[this.kinds[a]]=d};a.prototype.getKind=function(a){void 0===this.kinds[a]&&(this.kinds[a]=this.kindCount++,
this.kindCount>this.fillStyles.length&&this.fillStyles.push(randomStyle()));return this.kinds[a]};a.prototype.enter=function(a){this.depth++;this.marks.write(-1091633152|this.getKind(a));this.times.write(performance.now())};a.prototype.leave=function(a){this.marks.write(-559087616|this.getKind(a));this.times.write(performance.now());this.depth--;0===this.depth&&(this.count++,++this.refreshCounter==this.refreshFrequency&&(this.refreshCounter=0,this.paint()))};a.prototype.gatherFrames=function(a){var d=
[],e=[],f=this.times;a++;this.marks.forEachInReverse(function(g,l){var m=f.get(l);if(-1091633152===(g&4294901760)){var p=d.pop();p.startTime=m;d.length?(m=d.top(),m.children?m.children.push(p):m.children=[p]):(e.length&&!e[0].total&&(e[0].total=e[0].startTime-m),e.unshift(p))}else if(-559087616===(g&4294901760)){if(e.length>a)return!0;d.push({kind:g&65535,endTime:m})}});return e};a.prototype.resizeHandler=function(){var a=this.canvas.parentElement;this.cw=a.offsetWidth;this.ch=a.offsetHeight-1;var a=
window.devicePixelRatio||1,d=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;a!==d?(a/=d,this.canvas.width=this.cw*a,this.canvas.height=this.ch*a,this.canvas.style.width=this.cw+"px",this.canvas.style.height=this.ch+"px",this.context.scale(a,a)):(this.canvas.width=this.cw,this.canvas.height=this.ch);this.context.font='10px Consolas, "Liberation Mono", Courier, monospace'};
a.prototype.paint=function(){function a(e,g){var m=e.endTime-e.startTime,u=e.startTime-g;f.fillStyle=l[e.kind];f.fillRect(v,u,d,m);if(e.children)for(var m=e.children,u=0,r=m.length;u<r;u++)a(m[u],g)}var d=10,e=this.gatherFrames(this.cw/(d+1)|0),f=this.context,g=this.maxFrameTime,l=this.fillStyles;f.clearRect(0,0,this.cw,this.ch);var m=0,p=0,r=0,u=0,v;f.save();f.translate(0,this.ch);f.scale(1,-this.ch/g);for(g=0;g<e.length-1;g++){var w=e[g],m=m+(w.endTime-w.startTime);p++;w.total&&(r+=w.total,u++);
v=g*(d+1);f.fillStyle="rgba(255,255,255, 0.075)";f.fillRect(v,0,d,e[g+1].startTime-w.startTime);a(w,w.startTime)}e=1E3/this.frameRate;f.beginPath();f.lineWidth=0.5;f.moveTo(0,e);f.lineTo(this.cw,e);f.strokeStyle="rgb(255,64,0)";f.stroke();f.restore();f.fillStyle="rgba(0,0,0, 0.85)";f.fillRect(0,0,this.cw,20);e=this.count;m=Math.round(1E3*p/m);u=Math.round(1E3*u/r);r=5;f.fillStyle="#ccc";f.fillText(e,r,13);r+=f.measureText(e).width+5;f.fillText(m,r,13);r+=f.measureText(m).width+5;f.fillText(u,r,13);
var u=r+f.measureText(u).width+5,r=this.cw,z;for(z in this.kinds)f.fillStyle=this.fillStyles[this.getKind(z)],r-=f.measureText(z).width+5,r>u&&this.context.fillText(z,r,13)};return a}(),create=Object.create,defineProperty=Object.defineProperty,keys=Object.keys,isArray=Array.isArray,fromCharCode=String.fromCharCode,logE=Math.log,max=Math.max,min=Math.min,pow=Math.pow,push=Array.prototype.push,slice=Array.prototype.slice,splice=Array.prototype.splice;
function fail(a,b){throw Error((b?b+": ":"")+a);}function assert(a,b,d){a||fail(b,d)}function scriptProperties(a,b){return b.reduce(function(d,b){d[b]=a+" "+b;return d},{})}function cloneObject(a){var b=Object.create(null),d;for(d in a)b[d]=a[d];return b}function sortNumeric(a,b){return a-b}function sortByZindex(a,b){return a._zindex-b._zindex}function rgbaObjToStr(a){return"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha/255+")"}
function rgbIntAlphaToStr(a,b){a|=0;if(1<=b){for(var d=a.toString(16);6>d.length;)d="0"+d;return"#"+d}return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"}function argbUintToStr(a){return"rgba("+(a>>>16&255)+","+(a>>>8&255)+","+(a&255)+","+(a>>>24&255)/255+")"}
(function(){eval("function t() {} t.name === 't'")||Object.defineProperty(Function.prototype,"name",{get:function(){if(this.__name)return this.__name;var a=/function\s([^\(]+)/.exec(this.toString());return this.__name=a=a&&"anonymous"!==a[1]?a[1]:null},configurable:!0,enumerable:!1})})();var randomStyleCache,nextStyle=0;
function randomStyle(){randomStyleCache||(randomStyleCache="#ff5e3a #ff9500 #ffdb4c #87fc70 #52edc7 #1ad6fd #c644fc #ef4db6 #4a4a4a #dbddde #ff3b30 #ff9500 #ffcc00 #4cd964 #34aadc #007aff #5856d6 #ff2d55 #8e8e93 #c7c7cc #5ad427 #c86edf #d1eefc #e0f8d8 #fb2b69 #f7f7f7 #1d77ef #d6cec3 #55efcb #ff4981 #ffd3e0 #f7f7f7 #ff1300 #1f1f21 #bdbec2 #ff3a2d".split(" "));return randomStyleCache[nextStyle++%randomStyleCache.length]}
(function(){function a(a){if("function"!==typeof a)throw new TypeError("Invalid deferred constructor");var d,b=function(a,d){b.resolve=a;b.reject=d};d=b;a=new a(d);var e=d.resolve;if("function"!==typeof e)throw new TypeError("Invalid resolve construction function");d=d.reject;if("function"!==typeof d)throw new TypeError("Invalid reject construction function");return{promise:a,resolve:e,reject:d}}function b(a,d){if("object"!==typeof a||null===a)return!1;try{var b=a.then;if("function"!==typeof b)return!1;
b.call(a,d.resolve,d.reject)}catch(e){b=d.reject,b(e)}return!0}function d(a){return"object"===typeof a&&null!==a&&"undefined"!==typeof a.promiseStatus}function e(a,d){if("unresolved"===a.promiseStatus){var b=a.rejectReactions;a.result=d;a.resolveReactions=void 0;a.rejectReactions=void 0;a.promiseStatus="has-rejection";f(b,d)}}function f(a,d){for(var b=0;b<a.length;b++)g({reaction:a[b],argument:d})}function g(a){0===w.length&&setTimeout(m,0);w.push(a)}function l(a,d){var e=a.deferred,f=a.handler,g,
l;try{g=f(d)}catch(m){return e=e.reject,e(m)}if(g===e.promise)return e=e.reject,e(new TypeError("Self resolution"));try{if(l=b(g,e),!l){var u=e.resolve;return u(g)}}catch(r){return e=e.reject,e(r)}}function m(){for(;0<w.length;){var a=w[0];try{l(a.reaction,a.argument)}catch(d){if("function"===typeof u.onerror)u.onerror(d)}w.shift()}}function p(a){throw a;}function r(a){return a}function u(a){if("function"!==typeof a)throw new TypeError("resolver is not a function");if("object"!==typeof this)throw new TypeError("Promise to initialize is not an object");
this.promiseStatus="unresolved";this.resolveReactions=[];this.rejectReactions=[];this.result=void 0;var d,b=this;d=function(a){if("unresolved"===b.promiseStatus){var d=b.resolveReactions;b.result=a;b.resolveReactions=void 0;b.rejectReactions=void 0;b.promiseStatus="has-resolution";f(d,a)}};var g,l=this;g=function(a){e(l,a)};try{a(d,g)}catch(m){e(this,m)}this.promiseConstructor=u;return this}var v=Function("return this")();if(v.Promise)"function"!==typeof v.Promise.all&&(v.Promise.all=function(a){var d=
0,b=[],e,f,g=new v.Promise(function(a,d){e=a;f=d});a.forEach(function(a,g){d++;a.then(function(a){b[g]=a;d--;0===d&&e(b)},f)});0===d&&e(b);return g}),"function"!==typeof v.Promise.resolve&&(v.Promise.resolve=function(a){return new v.Promise(function(d){d(a)})});else{var w=[];u.all=function(d){var b=a(this),e=[],f=0,g=0;d.forEach(function(a){a=this.cast(a);var d=g;a.then(function(a){e[d]=a;f--;0===f&&b.resolve(e)},b.reject);g++;f++},this);0===g&&b.resolve(e);return b.promise};u.cast=function(b){if(d(b))return b;
var e=a(this);e.resolve(b);return e.promise};u.reject=function(d){var b=a(this);b.reject(d);return b.promise};u.resolve=function(d){var b=a(this);b.resolve(d);return b.promise};u.prototype={"catch":function(a){this.then(void 0,a)},then:function(e,f){if(!d(this))throw new TypeError("this is not a Promises");var l=a(this.promiseConstructor),m="function"===typeof f?f:p,u=this,v="function"===typeof e?e:r,w={deferred:l,handler:function(e){if(e===u)return m(new TypeError("Self resolution"));var f=u.promiseConstructor;
if(d(e)&&e.promiseConstructor===f)return e.then(v,m);f=a(f);return b(e,f)?f.promise.then(v,m):v(e)}},D={deferred:l,handler:m};switch(this.promiseStatus){case "unresolved":this.resolveReactions.push(w);this.rejectReactions.push(D);break;case "has-resolution":g({reaction:w,argument:this.result});break;case "has-rejection":g({reaction:D,argument:this.result})}return l.promise}};v.Promise=u}})();
var QuadTree=function(a,b,d,e,f){this.x=a|0;this.y=b|0;this.width=d|0;this.height=e|0;f?(this.root=f.root,this.parent=f,this.level=f.level+1):(this.root=this,this.parent=null,this.level=0);this.reset()};QuadTree.prototype.reset=function(){this.objects=this.stuckObjects=null;this.nodes=[]};QuadTree.prototype._findIndex=function(a,b,d,e){var f=this.x+(this.width/2|0),g=this.y+(this.height/2|0);e=d<g&&e<g;d=d>g;if(a<f&&b<f){if(e)return 1;if(d)return 2}else if(a>f){if(e)return 0;if(d)return 3}return-1};
QuadTree.prototype.insert=function(a){var b=this.nodes;if(b.length){var d=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<d?b[d].insert(a):(a.prev=null,this.stuckObjects?(a.next=this.stuckObjects,this.stuckObjects.prev=a):a.next=null,this.stuckObjects=a,a.parent=this)}else{d=1;if(b=this.objects){for(;b.next;)d++,b=b.next;a.prev=b;a.next=null;b.next=a}else a.prev=null,a.next=null,this.objects=a;if(4<d&&10>this.level){this._subdivide();for(b=this.objects;b;)a=b.next,this.insert(b),b=a;this.objects=
null}else a.parent=this}};QuadTree.prototype.update=function(a){var b=a.parent;if(b){if(a.xMin>=b.x&&a.xMax<=b.x+b.width&&a.yMin>=b.y&&a.yMax<=b.y+b.height){if(b.nodes.length){var d=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<d&&(b.remove(a),b=this.nodes[d],b.insert(a))}else b.remove(a),b.insert(a);return}b.remove(a)}this.root.insert(a)};
QuadTree.prototype.remove=function(a){var b=a.prev,d=a.next;if(b)b.next=d,a.prev=null;else{var e=a.parent;e.objects===a?e.objects=d:e.stuckObjects===a&&(e.stuckObjects=d)}d&&(d.prev=b,a.next=null);a.parent=null};
QuadTree.prototype.retrieve=function(a,b,d,e){var f=[],g=[],l=this;do{if(l.nodes.length){var m=l._findIndex(a,b,d,e);-1<m?f.push(l.nodes[m]):f.push.apply(f,l.nodes)}for(var m=l.objects,p=0;2>p;p++){for(;m;)m.xMin>b||(m.xMax<a||m.yMin>e||m.yMax<d)||g.push(m),m=m.next;m=l.stuckObjects}l=f.pop()}while(l);return g};
QuadTree.prototype._subdivide=function(){var a=this.width/2|0,b=this.height/2|0,d=this.x+a,e=this.y+b;this.nodes[0]=new QuadTree(d,this.y,a,b,this);this.nodes[1]=new QuadTree(this.x,this.y,a,b,this);this.nodes[2]=new QuadTree(this.x,e,a,b,this);this.nodes[3]=new QuadTree(d,e,a,b,this)};var RegionCluster=function(){this.regions=[]};RegionCluster.prototype.reset=function(){this.regions.length=0};
RegionCluster.prototype.insert=function(a){var b=this.regions;if(3>b.length)b.push({xMin:a.xMin,xMax:a.xMax,yMin:a.yMin,yMax:a.yMax});else{var d=b[0],e=b[1],f=b[2],g=(max(a.xMax,d.xMax)-min(a.xMin,d.xMin))*(max(a.yMax,d.yMax)-min(a.yMin,d.yMin)),l=b[0],m=(max(a.xMax,e.xMax)-min(a.xMin,e.xMin))*(max(a.yMax,e.yMax)-min(a.yMin,e.yMin)),p=(max(a.xMax,f.xMax)-min(a.xMin,f.xMin))*(max(a.yMax,f.yMax)-min(a.yMin,f.yMin));m<g&&(g=m,l=e);p<g&&(g=p,l=f);m=(max(d.xMax,e.xMax)-min(d.xMin,e.xMin))*(max(d.yMax,
e.yMax)-min(d.yMin,e.yMin));d=(max(d.xMax,f.xMax)-min(d.xMin,f.xMin))*(max(d.yMax,f.yMax)-min(d.yMin,f.yMin));e=(max(e.xMax,f.xMax)-min(e.xMin,f.xMin))*(max(e.yMax,f.yMax)-min(e.yMin,f.yMin));g<m&&g<d&&g<e?(a.xMin<l.xMin&&(l.xMin=a.xMin),a.xMax>l.xMax&&(l.xMax=a.xMax),a.yMin<l.yMin&&(l.yMin=a.yMin),a.yMax>l.yMax&&(l.yMax=a.yMax)):(l=b[0],g=b[1],d<m&&(m=d,g=b[2]),e<m&&(l=b[1],g=b[2]),g.xMin<l.xMin&&(l.xMin=g.xMin),g.xMax>l.xMax&&(l.xMax=g.xMax),g.yMin<l.yMin&&(l.yMin=g.yMin),g.yMax>l.yMax&&(l.yMax=
g.yMax),g.xMin=a.xMin,g.xMax=a.xMax,g.yMin=a.yMin,g.yMax=a.yMax)}};RegionCluster.prototype.retrieve=function(){return this.regions};var EXTERNAL_INTERFACE_FEATURE=1,CLIPBOARD_FEATURE=2,SHAREDOBJECT_FEATURE=3,VIDEO_FEATURE=4,SOUND_FEATURE=5,NETCONNECTION_FEATURE=6;this.performance||(this.performance={});this.performance.now||(this.performance.now=Date.now);
var SWF_TAG_CODE_CSM_TEXT_SETTINGS=74,SWF_TAG_CODE_DEFINE_BINARY_DATA=87,SWF_TAG_CODE_DEFINE_BITS=6,SWF_TAG_CODE_DEFINE_BITS_JPEG2=21,SWF_TAG_CODE_DEFINE_BITS_JPEG3=35,SWF_TAG_CODE_DEFINE_BITS_JPEG4=90,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS=20,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2=36,SWF_TAG_CODE_DEFINE_BUTTON=7,SWF_TAG_CODE_DEFINE_BUTTON2=34,SWF_TAG_CODE_DEFINE_BUTTON_CXFORM=23,SWF_TAG_CODE_DEFINE_BUTTON_SOUND=17,SWF_TAG_CODE_DEFINE_EDIT_TEXT=37,SWF_TAG_CODE_DEFINE_FONT=10,SWF_TAG_CODE_DEFINE_FONT2=48,SWF_TAG_CODE_DEFINE_FONT3=
75,SWF_TAG_CODE_DEFINE_FONT4=91,SWF_TAG_CODE_DEFINE_FONT_ALIGN_ZONES=73,SWF_TAG_CODE_DEFINE_FONT_INFO=13,SWF_TAG_CODE_DEFINE_FONT_INFO2=62,SWF_TAG_CODE_DEFINE_FONT_NAME=88,SWF_TAG_CODE_DEFINE_MORPH_SHAPE=46,SWF_TAG_CODE_DEFINE_MORPH_SHAPE2=84,SWF_TAG_CODE_DEFINE_SCALING_GRID=78,SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA=86,SWF_TAG_CODE_DEFINE_SHAPE=2,SWF_TAG_CODE_DEFINE_SHAPE2=22,SWF_TAG_CODE_DEFINE_SHAPE3=32,SWF_TAG_CODE_DEFINE_SHAPE4=83,SWF_TAG_CODE_DEFINE_SOUND=14,SWF_TAG_CODE_DEFINE_SPRITE=
39,SWF_TAG_CODE_DEFINE_TEXT=11,SWF_TAG_CODE_DEFINE_TEXT2=33,SWF_TAG_CODE_DEFINE_VIDEO_STREAM=60,SWF_TAG_CODE_DO_ABC=82,SWF_TAG_CODE_DO_ABC_=72,SWF_TAG_CODE_DO_ACTION=12,SWF_TAG_CODE_DO_INIT_ACTION=59,SWF_TAG_CODE_ENABLE_DEBUGGER=58,SWF_TAG_CODE_ENABLE_DEBUGGER2=64,SWF_TAG_CODE_END=0,SWF_TAG_CODE_EXPORT_ASSETS=56,SWF_TAG_CODE_FILE_ATTRIBUTES=69,SWF_TAG_CODE_FRAME_LABEL=43,SWF_TAG_CODE_IMPORT_ASSETS=57,SWF_TAG_CODE_IMPORT_ASSETS2=71,SWF_TAG_CODE_JPEG_TABLES=8,SWF_TAG_CODE_METADATA=77,SWF_TAG_CODE_PLACE_OBJECT=
4,SWF_TAG_CODE_PLACE_OBJECT2=26,SWF_TAG_CODE_PLACE_OBJECT3=70,SWF_TAG_CODE_PROTECT=24,SWF_TAG_CODE_REMOVE_OBJECT=5,SWF_TAG_CODE_REMOVE_OBJECT2=28,SWF_TAG_CODE_SCRIPT_LIMITS=65,SWF_TAG_CODE_SET_BACKGROUND_COLOR=9,SWF_TAG_CODE_SET_TAB_INDEX=66,SWF_TAG_CODE_SHOW_FRAME=1,SWF_TAG_CODE_SOUND_STREAM_BLOCK=19,SWF_TAG_CODE_SOUND_STREAM_HEAD=18,SWF_TAG_CODE_SOUND_STREAM_HEAD2=45,SWF_TAG_CODE_START_SOUND=15,SWF_TAG_CODE_START_SOUND2=89,SWF_TAG_CODE_SYMBOL_CLASS=76,SWF_TAG_CODE_VIDEO_FRAME=61;self.SWF={};
for(var codeLengthOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],distanceCodes=[],distanceExtraBits=[],i=0,j=0,code=1;30>i;++i)distanceCodes[i]=code,code+=1<<(distanceExtraBits[i]=~~((j+=2<i?1:0)/2));for(var bitLengths=[],i=0;32>i;++i)bitLengths[i]=5;for(var fixedDistanceTable=makeHuffmanTable(bitLengths),lengthCodes=[],lengthExtraBits=[],j=i=0,code=3;29>i;++i)lengthCodes[i]=code-(28==i?1:0),code+=1<<(lengthExtraBits[i]=~~((j+=4<i?1:0)/4%6));
for(i=0;288>i;++i)bitLengths[i]=144>i||279<i?8:256>i?9:7;var fixedLiteralTable=makeHuffmanTable(bitLengths);function makeHuffmanTable(a){for(var b=Math.max.apply(null,a),d=a.length,e=1<<b,f=new Uint32Array(e),g=0,l=1,m=2;l<=b;g<<=1,++l,m<<=1)for(var p=0;p<d;++p)if(a[p]===l){for(var r=0,u=0;u<l;++u)r=2*r+(g>>u&1);for(u=r;u<e;u+=m)f[u]=l<<16|p;++g}return{codes:f,maxBits:b}}function verifyDeflateHeader(){}
function createInflatedStream(a,b){verifyDeflateHeader(a);var d=new Stream(a,2),e={data:new Uint8Array(b),available:0,completed:!1},f={header:null,distanceTable:null,literalTable:null,sym:null,len:null,sym2:null};do inflateBlock(d,e,f);while(!e.completed&&d.pos<d.end);return new Stream(e.data,0,e.available)}var InflateNoDataError={};
function inflateBlock(a,b,d){var e=null!==d.header?d.header:d.header=readBits(a.bytes,a,3);switch(e>>1){case 0:a.align();var f=a.pos;if(4>a.end-f)throw InflateNoDataError;var g=a.getUint16(f,!0);a.getUint16(f+2,!0);if(a.end-f<4+g)throw InflateNoDataError;var l=f+4,m=a.pos=l+g,f=a.bytes;b.data.set(f.subarray(l,m),b.available);b.available+=g;break;case 1:inflate(a,b,fixedLiteralTable,fixedDistanceTable,d);break;case 2:if(null!==d.distanceTable)f=d.distanceTable,g=d.literalTable;else{var f=a.bytes,l=
a.pos,m=a.bitBuffer,p=a.bitLength,g=[],r,u;try{r=readBits(f,a,5)+257;u=readBits(f,a,5)+1;for(var v=r+u,w=readBits(f,a,4)+4,z=0;19>z;++z)g[codeLengthOrder[z]]=z<w?readBits(f,a,3):0;for(var y=makeHuffmanTable(g),g=[],w=z=0;z<v;){var B=1,A=readCode(f,a,y);switch(A){case 16:B=readBits(f,a,2)+3;A=w;break;case 17:B=readBits(f,a,3)+3;A=0;break;case 18:B=readBits(f,a,7)+11;A=0;break;default:w=A}for(;B--;)g[z++]=A}}catch(s){throw a.pos=l,a.bitBuffer=m,a.bitLength=p,s;}f=d.distanceTable=makeHuffmanTable(g.splice(r,
u));g=d.literalTable=makeHuffmanTable(g)}inflate(a,b,g,f,d);d.distanceTable=null;d.literalTable=null;break;default:fail("unknown block type","inflate")}d.header=null;b.completed=!!(e&1)}function readBits(a,b,d){var e=b.bitBuffer,f=b.bitLength;if(d>f){var g=b.pos,l=b.end;do{if(g>=l)throw b.pos=g,b.bitBuffer=e,b.bitLength=f,InflateNoDataError;e|=a[g++]<<f;f+=8}while(d>f);b.pos=g}b.bitBuffer=e>>>d;b.bitLength=f-d;return e&(1<<d)-1}
function inflate(a,b,d,e,f){for(var g=b.available,l=b.data,m=a.bytes,p=null!==f.sym?f.sym:readCode(m,a,d);256!==p;){if(256>p)l[g++]=p;else{f.sym=p;for(var p=p-257,p=null!==f.len?f.len:f.len=lengthCodes[p]+readBits(m,a,lengthExtraBits[p]),r=null!==f.sym2?f.sym2:f.sym2=readCode(m,a,e),r=distanceCodes[r]+readBits(m,a,distanceExtraBits[r]),r=g-r;p--;)l[g++]=l[r++];f.sym2=null;f.len=null;f.sym=null}b.available=g;p=readCode(m,a,d)}}
function readCode(a,b,d){var e=b.bitBuffer,f=b.bitLength,g=d.maxBits;if(g>f){var l=b.pos,m=b.end;do{if(l>=m)throw b.pos=l,b.bitBuffer=e,b.bitLength=f,InflateNoDataError;e|=a[l++]<<f;f+=8}while(g>f);b.pos=l}a=d.codes[e&(1<<g)-1];d=a>>16;b.bitBuffer=e>>>d;b.bitLength=f-d;return a&65535}
for(var StreamNoDataError={},Stream=function(){function a(){this.bitBuffer=this.bitLength=0}function b(a){if(this.pos+a>this.end)throw StreamNoDataError;}function d(){return this.end-this.pos}function e(a,d){var b=new g(this.bytes);b.pos=a;b.end=d;return b}function f(a){var d=this.bytes,b=this.end+a.length;if(b>d.length)throw"stream buffer overfow";d.set(a,this.end);this.end=b}function g(g,m,p,r){void 0===m&&(m=0);g.buffer instanceof ArrayBuffer&&(m+=g.byteOffset,g=g.buffer);void 0===p&&(p=g.byteLength-
m);void 0===r&&(r=p);var u=new Uint8Array(g,m,r);g=new DataView(g,m,r);g.bytes=u;g.pos=0;g.end=p;g.bitBuffer=0;g.bitLength=0;g.align=a;g.ensure=b;g.remaining=d;g.substream=e;g.push=f;return g}return g}(),FORMAT_COLORMAPPED=3,FORMAT_15BPP=4,FORMAT_24BPP=5,FACTOR_5BBP=255/31,crcTable=[],i=0;256>i;i++){for(var c=i,h=0;8>h;h++)c=c&1?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function crc32(a,b,d){for(var e=-1;b<d;b++)e=e>>>8^crcTable[(e^a[b])&255];return e^-1}
function createPngChunk(a,b){var d=new Uint8Array(12+b.length),e=0,f=b.length;d[e]=f>>24&255;d[e+1]=f>>16&255;d[e+2]=f>>8&255;d[e+3]=f&255;d[e+4]=a.charCodeAt(0)&255;d[e+5]=a.charCodeAt(1)&255;d[e+6]=a.charCodeAt(2)&255;d[e+7]=a.charCodeAt(3)&255;b instanceof Uint8Array&&d.set(b,8);e=8+f;f=crc32(d,4,e);d[e]=f>>24&255;d[e+1]=f>>16&255;d[e+2]=f>>8&255;d[e+3]=f&255;return d}function adler32(a,b,d){for(var e=1,f=0;b<d;++b)e=(e+(a[b]&255))%65521,f=(f+e)%65521;return f<<16|e}
function defineBitmap(a){var b=a.width,d=a.height,e=a.hasAlpha,f="",g="",l,m=a.bmpData;switch(a.format){case 3:var p=3,r=b+3&-4;l=(a.colorTableSize+1)*(a.hasAlpha?4:3);var u=l+r*d,v=createInflatedStream(m,u),w=v.bytes,m=0;v.ensure(l);if(e){for(var f=new Uint8Array(3*(l/4)),z=0,g=new Uint8Array(l/4),e=0;m<l;)f[z++]=w[m],f[z++]=w[m+1],f[z++]=w[m+2],g[e++]=w[m+3],m+=4;f=createPngChunk("PLTE",f);g=createPngChunk("tRNS",g)}else f=createPngChunk("PLTE",w.subarray(m,m+l)),m+=l;l=new Uint8Array(b*d+d);for(z=
0;m<u;){v.ensure(r);var e=m,y=e+b;z++;l.set(w.subarray(e,y),z);z+=y-e;v.pos=m+=r}break;case 4:p=2;r=2*b+3&-4;v=createInflatedStream(m,r*d);m=0;l=new Uint8Array(3*b*d+d);for(u=z=0;u<d;++u){z++;v.ensure(r);for(y=0;y<b;++y)w=v.getUint16(m),m+=2,l[z++]=0|FACTOR_5BBP*(w>>10&31),l[z++]=0|FACTOR_5BBP*(w>>5&31),l[z++]=0|FACTOR_5BBP*(w&31);v.pos=m+=r}break;case 5:var B;e?(p=6,B=0,l=new Uint8Array(4*b*d+d)):(p=2,B=1,l=new Uint8Array(3*b*d+d));r=4*b;v=createInflatedStream(m,r*d);w=v.bytes;for(u=z=m=0;u<d;++u){v.ensure(r);
z++;for(y=0;y<b;++y){m+=B;if(e){var A=w[m];if(A){var s=A/255;l[z++]=0|w[m+1]/s;l[z++]=0|w[m+2]/s;l[z++]=0|w[m+3]/s;l[z++]=A}else z+=4}else l[z++]=w[m],l[z++]=w[m+1],l[z++]=w[m+2];m+=4-B}v.pos=m}break;default:fail("invalid format","bitmap")}p=new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,d>>24&255,d>>16&255,d>>8&255,d&255,8,p,0,0,0]);w=l.length;r=new Uint8Array(2+w+5*Math.ceil(w/65535)+4);v=0;r[v++]=120;r[v++]=156;for(m=0;65535<w;)r[v++]=0,r[v++]=255,r[v++]=255,r[v++]=0,r[v++]=0,r.set(l.subarray(m,
m+65535),v),v+=65535,m+=65535,w-=65535;r[v++]=1;r[v++]=w&255;r[v++]=w>>8&255;r[v++]=~w&255;r[v++]=(~w&65535)>>8&255;r.set(l.subarray(m),v);v+=l.length-m;m=adler32(l,0,l.length);r[v++]=m>>24&255;r[v++]=m>>16&255;r[v++]=m>>8&255;r[v++]=m&255;m=[new Uint8Array([137,80,78,71,13,10,26,10]),createPngChunk("IHDR",p),f,g,createPngChunk("IDAT",r),createPngChunk("IEND","")];return{type:"image",id:a.id,width:b,height:d,mimeType:"image/png",data:new Blob(m,{type:"image/png"})}}
function defineButton(a,b){for(var d=a.characters,e={up:{},over:{},down:{},hitTest:{}},f=0,g;(g=d[f++])&&!g.eob;){var l={symbolId:b[g.symbolId].id,hasMatrix:!!g.matrix,matrix:g.matrix};g.stateUp&&(e.up[g.depth]=l);g.stateOver&&(e.over[g.depth]=l);g.stateDown&&(e.down[g.depth]=l);g.stateHitTest&&(e.hitTest[g.depth]=l)}return{type:"button",id:a.id,buttonActions:a.buttonActions,states:e}}var nextFontId=1;function maxPower2(a){for(var b=0;2<=a;)a/=2,++b;return pow(2,b)}
function toString16(a){return fromCharCode(a>>8&255,a&255)}function toString32(a){return toString16(a>>16)+toString16(a)}
function defineFont(a){var b={},d=[],e={},f=[],g=a.glyphs,l=g.length;if(a.codes){for(var d=d.concat(a.codes),m=0,p;p=d[m];++m)e[p]=m;d.sort(function(a,d){return a-d});for(m=0;p=d[m++];){for(var r=p,u=r,v=[m-1];(p=d[m])&&u+1===p;)++u,v.push(m),++m;f.push([r,u,v])}}else{v=[];for(m=0;m<l;m++)p=57344+m,d.push(p),e[p]=m,v.push(m);f.push([57344,57344+l-1,v])}var w=a.resolution||1,v=Math.ceil(a.ascent/w)||1024,z=-Math.ceil(a.descent/w)|0,y=a.leading/w|0;b["OS/2"]="\x00\u0001\x00\x00"+toString16(a.bold?700:
400)+"\x00\u0005\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00ALF "+toString16((a.italic?1:0)|(a.bold?32:0))+toString16(d[0])+toString16(d[d.length-1])+toString16(v)+toString16(z)+toString16(y)+toString16(v)+toString16(-z)+"\x00\x00\x00\x00\x00\x00\x00\x00";for(var B="",A="",s="",E="",m=0,H;H=f[m++];)r=H[0],u=H[1],p=H[2][0],B+=toString16(r),A+=toString16(u),
s+=toString16(p-r+1&65535),E+=toString16(0);A+="\u00ff\u00ff";B+="\u00ff\u00ff";s+="\x00\u0001";E+="\x00\x00";f=f.length+1;m=2*maxPower2(f);r=2*f-m;m="\x00\x00"+toString16(2*f)+toString16(m)+toString16(logE(f)/logE(2))+toString16(r)+A+"\x00\x00"+B+s+E;b.cmap="\x00\x00\x00\u0001\x00\u0003\x00\u0001\x00\x00\x00\f\x00\u0004"+toString16(m.length+4)+m;f="\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x001\x00";A="\x00\x00";B=16;s=0;r=[];u=[];H=[];for(var D=[],m=E=0;p=d[m++];){var G=g[e[p]].records;
p=1;for(var F=0,Q="",T="",S="",Y="",I=0,J=0,O=1024,V=-1024,M=1024,L=-1024,P=0,K;K=G[P];++P)if(K.type){if(K.isStraight)if(K.isGeneral){var T=T+"\u0001",R=K.deltaX/w;K=-K.deltaY/w;S+=toString16(R);Y+=toString16(K);I+=R;J+=K}else K.isVertical?(T+="\u0011",K=-K.deltaY/w,Y+=toString16(K),J+=K):(T+="!",R=K.deltaX/w,S+=toString16(R),I+=R);else{var T=T+"\x00",U=K.controlDeltaX/w,ga=-K.controlDeltaY/w,S=S+toString16(U),Y=Y+toString16(ga),T=T+"\u0001",R=K.anchorDeltaX/w;K=-K.anchorDeltaY/w;S+=toString16(R);
Y+=toString16(K);++F;I+=U+R;J+=ga+K}I<O&&(O=I);I>V&&(V=I);J<M&&(M=J);J>L&&(L=J);++F}else{if(K.eos)break;K.move&&(F&&(++p,Q+=toString16(F-1)),T+="\u0001",U=K.moveX/w,ga=-K.moveY/w,R=U-I,K=ga-J,S+=toString16(R),Y+=toString16(K),I=U,J=ga,F>s&&(s=F),I<O&&(O=I),I>V&&(V=I),J<M&&(M=J),J>L&&(L=J),++F)}Q+=toString16((F||1)-1);P||(O=V=M=L=0,T+="1");G=toString16(p)+toString16(O)+toString16(M)+toString16(V)+toString16(L)+Q+"\x00\x00"+T+S+Y;G.length&1&&(G+="\x00");f+=G;A+=toString16(B/2);B+=G.length;r.push(O);
u.push(V);H.push(M);D.push(L);p>E&&(E=p);F>s&&(s=F)}A+=toString16(B/2);b.glyf=f;b.head="\x00\u0001\x00\x00\x00\u0001\x00\x00\x00\x00\x00\x00_\u000f<\u00f5\x00\v\u0004\x00\x00\x00\x00\x00"+toString32(Date.now())+"\x00\x00\x00\x00"+toString32(Date.now())+toString16(min.apply(null,r))+toString16(min.apply(null,H))+toString16(max.apply(null,u))+toString16(max.apply(null,D))+toString16((a.italic?2:0)|(a.bold?1:0))+"\x00\b\x00\u0002\x00\x00\x00\x00";g=a.advance;b.hhea="\x00\u0001\x00\x00"+toString16(v)+
toString16(z)+toString16(y)+toString16(g?max.apply(null,g):1024)+"\x00\x00\x00\x00\u0003\u00b8\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"+toString16(l+1);B="\x00\x00\x00\x00";for(m=0;m<l;++m)B+=toString16(g?g[m]/w:1024)+"\x00\x00";b.hmtx=B;if(a.kerning){w=a.kerning;g=w.length;m=2*maxPower2(g);g="\x00\x00\x00\u0001\x00\x00"+toString16(14+6*g)+"\x00\u0001"+toString16(g)+toString16(m)+toString16(logE(g)/logE(2))+toString16(2*g-m);for(m=0;K=w[m++];)g+=toString16(e[K.code1])+toString16(e[K.code2])+
toString16(K.adjustment);b.kern=g}b.loca=A;b.maxp="\x00\u0001\x00\x00"+toString16(l+1)+toString16(s)+toString16(E)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";e="swf-font-"+nextFontId++;l=a.name||e;w=l.replace(/ /g,"");A=[a.copyright||"Original licence",l,"Unknown",e,l,"1.0",w,"Unknown","Unknown","Unknown"];m=A.length;g="\x00\x00"+toString16(m)+toString16(12*m+6);for(m=B=0;s=A[m++];)g+="\x00\u0001\x00\x00\x00\x00"+toString16(m-1)+toString16(s.length)+
toString16(B),B+=s.length;b.name=g+A.join("");b.post="\x00\u0003\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";A=keys(b);m=A.length;s="\x00\u0001\x00\x00"+toString16(m)+"\x00\u0080\x00\u0003\x00 ";E="";B=16*m+s.length;for(m=0;g=A[m++];){f=b[g];r=f.length;for(s+=g+"\x00\x00\x00\x00"+toString32(B)+toString32(r);r&3;)f+="\x00",++r;for(E+=f;B&3;)++B;B+=r}return{type:"font",id:a.id,name:l,uniqueName:w+e,codes:d,metrics:{ascent:v/
1024,descent:-z/1024,leading:y/1024},bold:1===a.bold,italic:1===a.italic,data:s+E}}function getUint16(a,b){return a[b]<<8|a[b+1]}function parseJpegChunks(a,b){var d=0,e=b.length,f=[],g;do{for(var l=d;d<e&&255!==b[d];)++d;for(;d<e&&255===b[d];)++d;g=b[d++];if(218===g)d=e;else if(217===g){d+=2;continue}else if(208>g||216<g){var m=getUint16(b,d);192<=g&&195>=g&&(a.height=getUint16(b,d+3),a.width=getUint16(b,d+5));d+=m}f.push(b.subarray(l,d))}while(d<e);return f}
function defineImage(a,b){var d={type:"image",id:a.id,mimeType:a.mimeType},e=a.imgData;if("image/jpeg"===a.mimeType){var e=parseJpegChunks(d,e),f=a.alphaData;f&&(d.mask=createInflatedStream(f,d.width*d.height).bytes);if(a.incomplete&&(f=b[0].data)&&f.size)e[0]=e[0].subarray(2),e.unshift(f.slice(0,f.size-2))}else e=[e];d.data=new Blob(e,{type:a.mimeType});return d}
function defineLabel(a,b){for(var d=a.records,e=a.matrix,f=["c.save()","c.transform("+[e.a,e.b,e.c,e.d,e.tx/20,e.ty/20].join()+")","c.scale(0.05, 0.05)"],e=[],g=0,l=0,m=0,p,r;(p=d[m++])&&!p.eot;){if(p.hasFont){var u=b[p.fontId];r=u.codes;f.push('c.font="'+p.fontHeight+"px '"+u.uniqueName+"'\"");e.push(u.id)}p.hasColor?(f.push('ct.setFillStyle(c,"'+rgbaObjToStr(p.color)+'")'),f.push("ct.setAlpha(c)")):f.push("ct.setAlpha(c,true)");p.hasMoveX&&(g=p.moveX);p.hasMoveY&&(l=p.moveY);p=p.entries;for(var u=
0,v;v=p[u++];){var w=r[v.glyphIndex],w=32<=w&&34!=w&&92!=w?fromCharCode(w):"\\u"+(w+65536).toString(16).substring(1);f.push('c.fillText("'+w+'",'+g+","+l+")");g+=v.advance}}f.push("c.restore()");d={type:"label",id:a.id,bbox:a.bbox,data:f.join("\n")};e.length&&(d.require=e);return d}
var GRAPHICS_FILL_CLIPPED_BITMAP=65,GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT=19,GRAPHICS_FILL_LINEAR_GRADIENT=16,GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP=67,GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP=66,GRAPHICS_FILL_RADIAL_GRADIENT=18,GRAPHICS_FILL_REPEATING_BITMAP=64,GRAPHICS_FILL_SOLID=0;
function applySegmentToStyles(a,b,d,e,f){if(a){var g=a.commands,l=a.data;a=a.morphData;var m,p;if(b.fill0){e=e[b.fill0-1];!b.fill1&&!b.line?(m=e.head(),m.commands=[],m.data=[],m.morphData=f?[]:null):m=e.addSegment([],[],f?[]:null);e=m.commands;var r=m.data,u=m.morphData;e.push(SHAPE_MOVE_TO);var v=l.length-2;r.push(l[v],l[v+1]);f&&u.push(a[v],a[v+1]);for(p=g.length;1<p--;v-=2)m=g[p],e.push(m),r.push(l[v-2],l[v-1]),f&&u.push(a[v-2],a[v-1]),m===SHAPE_CURVE_TO&&(r.push(l[v-4],l[v-3]),f&&u.push(a[v-4],
a[v-3]),v-=2)}b.line&&b.fill1&&(e=d[b.line-1],e.addSegment(g,l,a))}}
function convertRecordsToStyledPaths(a,b,d,e,f,g,l){for(var m=null!==g,p={fill0:0,fill1:0,line:0},r=null,u,v,w=a.length-1,z=0,y=0,B=0,A=0,s,E=0,H=0;E<w;E++){var D=a[E],G;m&&(G=g[H++]);if(0===D.type)r&&applySegmentToStyles(r,p,d,b,m),D.hasNewStyles&&(u||(u=[]),push.apply(u,b),b=createPathsList(D.fillStyles,!1,e,f),push.apply(u,d),d=createPathsList(D.lineStyles,!0,e,f),v&&(u.push(v),v=null),p={fill0:0,fill1:0,line:0}),D.hasFillStyle0&&(p.fill0=D.fillStyle0),D.hasFillStyle1&&(p.fill1=D.fillStyle1),D.hasLineStyle&&
(p.line=D.lineStyle),p.fill1?s=b[p.fill1-1]:p.line?s=d[p.line-1]:p.fill0&&(s=b[p.fill0-1]),D.move&&(z=D.moveX|0,y=D.moveY|0),s&&(r=s.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,y),m&&(0===G.type?(B=G.moveX|0,A=G.moveY|0):(B=z,A=y,H--),r.morphData.push(B,A)));else{r||(v||(v=new SegmentedPath(null,processStyle({color:{red:0,green:0,blue:0,alpha:255},width:20},!0))),r=v.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,y),m&&r.morphData.push(B,A));
if(m){for(;G&&0===G.type;)G=g[H++];G||(G=D)}if(D.isStraight&&(!m||G.isStraight))z+=D.deltaX|0,y+=D.deltaY|0,r.commands.push(SHAPE_LINE_TO),r.data.push(z,y),m&&(B+=G.deltaX|0,A+=G.deltaY|0,r.morphData.push(B,A));else{var F,Q,T;D.isStraight?(T=D.deltaX|0,D=D.deltaY|0,F=z+(T>>1),Q=y+(D>>1),z+=T,y+=D):(F=z+D.controlDeltaX|0,Q=y+D.controlDeltaY|0,z=F+D.anchorDeltaX|0,y=Q+D.anchorDeltaY|0);r.commands.push(SHAPE_CURVE_TO);r.data.push(F,Q,z,y);m&&(G.isStraight?(T=G.deltaX|0,D=G.deltaY|0,F=B+(T>>1),Q=A+(D>>
1),B+=T,A+=D):(F=B+G.controlDeltaX|0,Q=A+G.controlDeltaY|0,B=F+G.anchorDeltaX|0,A=Q+G.anchorDeltaY|0),r.morphData.push(F,Q,B,A))}}}applySegmentToStyles(r,p,d,b,m);u?push.apply(u,b):u=b;push.apply(u,d);v&&u.push(v);for(E=a=0;E<u.length;E++)s=u[E],s.head()?u[E-a]=segmentedPathToShapePath(s,m,l):a++;u.length-=a;return u}
function segmentedPathToShapePath(a,b,d){for(var e=a.head(),f=e,g=null,l=null,m=0,p=e.prev;e;){for(;p;)a.segmentsConnect(p,e)?(p.next!==e&&(a.removeSegment(p),a.insertSegment(p,e)),e=p,p=e.prev,m++):a.segmentsConnect(f,p)?(a.removeSegment(p),f.next=p,p=p.prev,f.next.prev=f,f.next.next=null,f=f.next,m++):p=p.prev;p=e.prev;g?(l.next=e,e.prev=l,l=f,l.next=null):(g=e,l=f);if(!p)break;e=f=p;p=e.prev}e=-m;m=-m<<1;for(p=g;p;)e+=p.commands.length,m+=p.data.length,p=p.next;a=new ShapePath(a.fillStyle,a.lineStyle,
e,m,b,d);d=a.commands;m=a.data;e=a.morphData;l=f=0;for(p=g;p;){for(var g=p.commands,r=p.data,u=p.morphData,v=+(r[0]===m[l-2]&&r[1]===m[l-1]),w=v;w<g.length;w++,f++)d[f]=g[w];for(w=v<<1;w<r.length;w++,l++)m[l]=r[w],b&&(e[l]=u[w]);p=p.next}return a}var CAPS_STYLE_TYPES=["round","none","square"],JOIN_STYLE_TYPES=["round","bevel","miter"];
function processStyle(a,b,d,e){if(b&&(a.lineCap=CAPS_STYLE_TYPES[a.endCapStyle|0],a.lineJoin=JOIN_STYLE_TYPES[a.joinStyle|0],a.miterLimit=2*(a.miterLimitFactor||1.5),!a.color&&a.hasFill)){var f=processStyle(a.fillStyle,!1,d,e);a.style=f.style;a.type=f.type;a.transform=f.transform;a.records=f.records;a.focalPoint=f.focalPoint;a.bitmapId=f.bitmapId;a.repeat=f.repeat;a.fillStyle=null;return a}if(void 0===a.type||0===a.type)return f=a.color,a.style="rgba("+f.red+","+f.green+","+f.blue+","+f.alpha/255+
")",a.color=null,a;switch(a.type){case 16:case 18:case 19:f=819.2;break;case 64:case 65:case 66:case 67:d[a.bitmapId]&&(e.push(d[a.bitmapId].id),f=0.05);break;default:fail("invalid fill style","shape")}if(!a.matrix)return a;b=a.matrix;a.transform={a:b.a*f,b:b.b*f,c:b.c*f,d:b.d*f,e:b.tx,f:b.ty};a.matrix=null;return a}function createPathsList(a,b,d,e){for(var f=[],g=0;g<a.length;g++){var l=processStyle(a[g],b,d,e);f[g]=b?new SegmentedPath(null,l):new SegmentedPath(l,null)}return f}
function defineShape(a,b){var d=[],e=[],f=createPathsList(a.fillStyles,!1,b,d),g=createPathsList(a.lineStyles,!0,b,d),f=convertRecordsToStyledPaths(a.records,f,g,b,d,a.recordsMorph||null,e);if(a.bboxMorph&&(g=a.bboxMorph,extendBoundsByPoint(a.bbox,g.xMin,g.yMin),extendBoundsByPoint(a.bbox,g.xMax,g.yMax),g=a.strokeBboxMorph))extendBoundsByPoint(a.strokeBbox,g.xMin,g.yMin),extendBoundsByPoint(a.strokeBbox,g.xMax,g.yMax);return{type:"shape",id:a.id,strokeBbox:a.strokeBbox,strokeBboxMorph:a.strokeBboxMorph,
bbox:a.bbox,bboxMorph:a.bboxMorph,isMorph:a.isMorph,paths:f,require:d.length?d:null,transferables:e}}function logShape(a,b){var d='{"bounds":'+JSON.stringify(b)+',"paths":['+a.map(function(a){return a.serialize()}).join()+"]}";console.log(d)}function SegmentedPath(a,b){this.fillStyle=a;this.lineStyle=b;this._head=null}
SegmentedPath.prototype={addSegment:function(a,b,d){a={commands:a,data:b,morphData:d,prev:this._head,next:null};this._head&&(this._head.next=a);return this._head=a},removeSegment:function(a){a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev)},insertSegment:function(a,b){var d=b.prev;a.prev=d;a.next=b;d&&(d.next=a);b.prev=a},head:function(){return this._head},segmentsConnect:function(a,b){var d=a.data.length;return a.data[d-2]===b.data[0]&&a.data[d-1]===b.data[1]}};
var SHAPE_MOVE_TO=1,SHAPE_LINE_TO=2,SHAPE_CURVE_TO=3,SHAPE_WIDE_MOVE_TO=4,SHAPE_WIDE_LINE_TO=5,SHAPE_CUBIC_CURVE_TO=6,SHAPE_CIRCLE=7,SHAPE_ELLIPSE=8;
function ShapePath(a,b,d,e,f,g){this.fillStyle=a;this.lineStyle=b;d?(this.commands=new Uint8Array(d),this.data=new Int32Array(e),this.morphData=f?new Int32Array(e):null):(this.commands=[],this.data=[]);this.strokeBounds=this.bounds=null;this.isMorph=!!f;this.fullyInitialized=!1;inWorker?(this.buffers=[this.commands.buffer,this.data.buffer],g.push(this.commands.buffer,this.data.buffer),f&&(this.buffers.push(this.morphData.buffer),g.push(this.morphData.buffer))):this.buffers=null}
ShapePath.prototype={get isEmpty(){return 0===this.commands.length},moveTo:function(a,b){1===this.commands[this.commands.length-1]?(this.data[this.data.length-2]=a,this.data[this.data.length-1]=b):(this.commands.push(1),this.data.push(a,b))},lineTo:function(a,b){this.commands.push(2);this.data.push(a,b)},curveTo:function(a,b,d,e){this.commands.push(3);this.data.push(a,b,d,e)},cubicCurveTo:function(a,b,d,e,f,g){this.commands.push(6);this.data.push(a,b,d,e,f,g)},rect:function(a,b,d,e){d=a+d;e=b+e;this.commands.push(1,
2,2,2,2);this.data.push(a,b,d,b,d,e,a,e,a,b)},circle:function(a,b,d){this.commands.push(7);this.data.push(a,b,d)},ellipse:function(a,b,d,e){this.commands.push(8);this.data.push(a,b,d,e)},draw:function(a,b,d,e){if(!b||this.fillStyle){a.beginPath();var f=this.commands,g=this.data,l=this.morphData,m=!1,p=0,r=0;if(this.isMorph)for(v=u=0;u<f.length;u++)switch(f[u]){case 1:a.moveTo(morph(g[v]/20,l[v++]/20,d),morph(g[v]/20,l[v++]/20,d));break;case 2:a.lineTo(morph(g[v]/20,l[v++]/20,d),morph(g[v]/20,l[v++]/
20,d));break;case 3:a.quadraticCurveTo(morph(g[v]/20,l[v++]/20,d),morph(g[v]/20,l[v++]/20,d),morph(g[v]/20,l[v++]/20,d),morph(g[v]/20,l[v++]/20,d));break;default:console.warn("Drawing command not supported for morph shapes: "+f[u])}else for(var u=0,v=0;u<f.length;u++)switch(f[u]){case 1:m=!0;p=g[v++]/20;r=g[v++]/20;a.moveTo(p,r);break;case 4:a.moveTo(g[v++]/20,g[v++]/20);v+=2;break;case 2:a.lineTo(g[v++]/20,g[v++]/20);break;case 5:a.lineTo(g[v++]/20,g[v++]/20);v+=2;break;case 3:a.quadraticCurveTo(g[v++]/
20,g[v++]/20,g[v++]/20,g[v++]/20);break;case 6:a.bezierCurveTo(g[v++]/20,g[v++]/20,g[v++]/20,g[v++]/20,g[v++]/20,g[v++]/20);break;case 7:m&&(a.lineTo(p,r),m=!1);a.moveTo((g[v]+g[v+2])/20,g[v+1]/20);a.arc(g[v++]/20,g[v++]/20,g[v++]/20,0,2*Math.PI,!1);break;case 8:m&&(a.lineTo(p,r),m=!1);d=g[v++];var l=g[v++],w=g[v++],z=g[v++],y;if(w!==z){a.save();var B;w>z?(B=w/z,y=z,d/=B,a.scale(B,1)):(B=z/w,y=w,l/=B,a.scale(1,B))}a.moveTo((d+y)/20,l/20);a.arc(d/20,l/20,y/20,0,2*Math.PI,!1);w!==z&&a.restore();break;
default:if(0===f[u]&&u===f.length-1)break;console.warn("Unknown drawing command encountered: "+f[u])}if(b)a.fill();else{if(b=this.fillStyle)e.setFillStyle(a,b.style),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=b.smooth,b=b.transform,a.save(),e.setAlpha(a),b&&a.transform(b.a,b.b,b.c,b.d,b.e/20,b.f/20),a.fill(),a.restore();if(b=this.lineStyle)e.setStrokeStyle(a,b.style),a.save(),e.setAlpha(a),a.lineWidth=Math.max(b.width/20,1),a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.miterLimit=b.miterLimit,
a.stroke(),a.restore()}a.closePath()}},isPointInPath:function(a,b){if(!this.fillStyle&&!this.lineStyle)return!1;var d=this.strokeBounds||this.bounds||this._calculateBounds();return a<d.xMin||a>d.xMax||b<d.yMin||b>d.yMax?!1:this.fillStyle&&this.isPointInFill(a,b)?!0:this.lineStyle&&void 0!==this.lineStyle.width&&this.isPointInStroke(a,b)},isPointInFill:function(a,b){for(var d=this.commands,e=this.data,f=d.length,g=!1,l=0,m=0,p=0,r=0,u,v,w=!1,z=0,y=0,B=0,A=0;B<f;B++){switch(d[B]){case 4:A+=2;case 1:p=
e[A++];r=e[A++];w&&intersectsLine(a,b,l,m,z,y)&&(g=!g);w=!0;z=p;y=r;break;case 5:A+=2;case 2:p=e[A++];r=e[A++];intersectsLine(a,b,l,m,p,r)&&(g=!g);break;case 3:u=e[A++];v=e[A++];p=e[A++];r=e[A++];if(v>b===m>b&&r>b===m>b)break;if(l>=a&&u>=a&&p>=a){g=!g;break}var s=m-2*v+r;v=2*(v-m);var E=v*v-4*s*(m-b);if(0>E)break;E=Math.sqrt(E);s=1/(s+s);m=(E-v)*s;v=(-v-E)*s;0<=m&&(1>=m&&quadraticBezier(l,u,p,m)>a)&&(g=!g);0<=v&&(1>=v&&quadraticBezier(l,u,p,v)>a)&&(g=!g);break;case 6:u=e[A++];v=e[A++];s=e[A++];E=
e[A++];p=e[A++];r=e[A++];if(v>b===m>b&&E>b===m>b&&r>b===m>b)break;if(l>=a&&u>=a&&s>=a&&p>=a){g=!g;break}u=cubicXAtY(l,m,u,v,s,E,p,r,b);for(l=u.length;l--;)u[l]>=a&&(g=!g);break;case 7:p=e[A++];r=e[A++];u=e[A++];l=a-p;m=b-r;l*l+m*m<u*u&&(g=!g);p+=u;break;case 8:u=e[A++];v=e[A++];p=e[A++];r=e[A++];l=a-u;m=b-v;1>=l*l/(p*p)+m*m/(r*r)&&(g=!g);p=u+p;r=v;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+d[B])}l=p;m=r}w&&intersectsLine(a,b,l,m,z,y)&&(g=!g);return g},isPointInStroke:function(a,
b){for(var d=this.commands,e=this.data,f=d.length,g=this.lineStyle.width,l=g/2,m=l*l,p=a-l,r=a+l,u=b-l,v=b+l,w=0,z=0,y=0,B=0,A,s,E,H,D,G=0,F=0;G<f;G++){switch(d[G]){case 4:F+=2;case 1:y=e[F++];B=e[F++];break;case 5:F+=2;case 2:y=e[F++];B=e[F++];if(w===y&&z===B)break;if(r<w&&r<y||p>w&&p>y||v<z&&v<B||u>z&&u>B)break;if(y===w||B===z)return!0;D=((a-w)*(y-w)+(b-z)*(B-z))/distanceSq(w,z,y,B);if(0>D){if(distanceSq(a,b,w,z)<=m)return!0;break}if(1<D){if(distanceSq(a,b,y,B)<=m)return!0;break}if(distanceSq(a,
b,w+D*(y-w),z+D*(B-z))<=m)return!0;break;case 3:A=e[F++];s=e[F++];var y=e[F++],B=e[F++],Q=quadraticBezierExtreme(w,A,y);if(r<w&&r<Q&&r<y||p>w&&p>Q&&p>y)break;Q=quadraticBezierExtreme(z,s,B);if(v<z&&v<Q&&v<B||u>z&&u>Q&&u>B)break;for(D=0;1>D;D+=0.02)if(E=quadraticBezier(w,A,y,D),!(E<p||E>r))if(H=quadraticBezier(z,s,B,D),!(H<u||H>v)&&(a-E)*(a-E)+(b-H)*(b-H)<m)return!0;break;case 6:A=e[F++];s=e[F++];var Q=e[F++],T=e[F++],y=e[F++],B=e[F++];for(E=cubicBezierExtremes(w,A,Q,y);2>E.length;)E.push(y);if(r<
w&&r<y&&r<E[0]&&r<E[1]||p>w&&p>y&&p>E[0]&&p>E[1])break;for(E=cubicBezierExtremes(z,s,T,B);2>E.length;)E.push(B);if(v<z&&v<B&&v<E[0]&&v<E[1]||u>z&&u>B&&u>E[0]&&u>E[1])break;for(D=0;1>D;D+=0.02)if(E=cubicBezier(w,A,Q,y,D),!(E<p||E>r))if(H=cubicBezier(z,s,T,B,D),!(H<u||H>v)&&(a-E)*(a-E)+(b-H)*(b-H)<m)return!0;break;case 7:A=e[F++];s=e[F++];w=e[F++];y=A+w;B=s;if(r<A-w||p>A+w||v<s-w||u>s+w)break;A=a-A;s=b-s;z=w-l;w+=l;s=A*A+s*s;if(s>=z*z&&s<=w*w)return!0;break;case 8:A=e[F++];s=e[F++];w=e[F++];z=e[F++];
y=A+w;B=s;A=Math.abs(a-A);s=Math.abs(b-s);A-=l;s-=l;if(1<A*A/(w*w)+s*s/(z*z))break;A+=g;s+=g;if(1<A*A/(w*w)+s*s/(z*z))return!0;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+d[G])}w=y;z=B}return!1},getBounds:function(a){var b=a?this.strokeBounds:this.bounds;b||(this._calculateBounds(),b=a?this.strokeBounds:this.bounds);return b},_calculateBounds:function(){var a=this.commands,b=this.data,d=a.length,e;e=1===a[0]||6<a[0]?{xMin:b[0],yMin:b[1]}:{xMin:0,yMin:0};e.xMax=
e.xMin;e.yMax=e.yMin;for(var f=e.xMin,g=e.yMin,l=0,m=0;l<d;l++){var p,r,u,v;switch(a[l]){case 4:m+=2;case 1:p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);break;case 5:m+=2;case 2:p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);break;case 3:u=b[m++];v=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);(u<f||u>p)&&extendBoundsByX(e,quadraticBezierExtreme(f,u,p));(v<g||v>r)&&extendBoundsByY(e,quadraticBezierExtreme(g,v,r));break;case 6:u=b[m++];v=b[m++];var w=b[m++],z=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(e,
p,r);if(u<f||w<f||u>p||w>p){f=cubicBezierExtremes(f,u,w,p);for(u=f.length;u--;)extendBoundsByX(e,f[u])}if(v<g||z<g||v>r||z>r){f=cubicBezierExtremes(g,v,z,r);for(u=f.length;u--;)extendBoundsByY(e,f[u])}break;case 7:p=b[m++];r=b[m++];g=b[m++];extendBoundsByPoint(e,p-g,r-g);extendBoundsByPoint(e,p+g,r+g);p+=g;break;case 8:p=b[m++];r=b[m++];g=b[m++];v=b[m++];extendBoundsByPoint(e,p-g,r-v);extendBoundsByPoint(e,p+g,r+v);p+=g;break;default:inWorker||console.warn("Drawing command not handled in bounds calculation: "+
a[l])}f=p;g=r}this.bounds=e;return this.lineStyle?(a=this.lineStyle.width/2,this.strokeBounds={xMin:e.xMin-a,yMin:e.yMin-a,xMax:e.xMax+a,yMax:e.yMax+a}):this.strokeBounds=e},serialize:function(){var a="{";this.fillStyle&&(a+='"fill":'+JSON.stringify(this.fillStyle)+",");this.lineStyle&&(a+='"stroke":'+JSON.stringify(this.lineStyle)+",");a+='"commands":['+Array.apply([],this.commands).join()+"],";a+='"data":['+Array.apply([],this.data).join()+"]";return a+"}"}};
ShapePath.fromPlainObject=function(a){var b=new ShapePath(a.fill||null,a.stroke||null);b.commands=new Uint8Array(a.commands);b.data=new Int32Array(a.data);inWorker||finishShapePath(b);return b};function distanceSq(a,b,d,e){a=d-a;b=e-b;return a*a+b*b}function intersectsLine(a,b,d,e,f,g){return g>b!==e>b&&a<(d-f)*(b-g)/(e-g)+f}function quadraticBezier(a,b,d,e){var f=1-e;return a*f*f+2*b*f*e+d*e*e}
function quadraticBezierExtreme(a,b,d){var e=(a-b)/(a-2*b+d);return 0>e?a:1<e?d:quadraticBezier(a,b,d,e)}function cubicBezier(a,b,d,e,f){var g=f*f,l=1-f,m=l*l;return a*l*m+3*b*f*m+3*d*l*g+e*f*g}function cubicBezierExtremes(a,b,d,e){var f=b-a,g;g=2*(d-b);var l=e-d;f+l===g&&(l*=1.0001);var m=2*f-g,p=g-2*f,p=Math.sqrt(p*p-4*f*(f-g+l));g=2*(f-g+l);f=(m+p)/g;m=(m-p)/g;p=[];0<=f&&1>=f&&p.push(cubicBezier(a,b,d,e,f));0<=m&&1>=m&&p.push(cubicBezier(a,b,d,e,m));return p}
function cubicXAtY(a,b,d,e,f,g,l,m,p){function r(a){return a*(z+a*(B+a*s))+b-p}function u(d){0>d?d=0:1<d&&(d=1);return a+d*(w+d*(y+d*A))}function v(a,d,b,e){if(!(Math.abs(b-d)<=e)){var f=0.5*(d+b);0>=a(d)*a(b)?(E=d,H=b):(v(a,d,f,e),v(a,f,b,e))}}var w=3*(d-a),z=3*(e-b),y=3*(f-d)-w,B=3*(g-e)-z,A=l-a-w-y,s=m-b-z-B,E=0,H=1;v(r,0,1,0.05);g=findRoot(E,H,r,50,1E-6);if(1E-5<Math.abs(r(g)))return[];d=[];1>=g&&d.push(u(g));e=s;f=g*e+B;l=f*f-4*e*(g*f+z);if(0>l)return d;l=Math.sqrt(l);e=1/(e+e);g=(l-f)*e;e*=
-f-l;0<=g&&1>=g&&d.push(u(g));0<=e&&1>=e&&d.push(u(e));return d}function findRoot(a,b,d,e,f){var g,l,m,p,r,u,v=a;l=d(a);if(0===l)return a;p=d(b);if(0===p)return b;if(0<p*l)return a;for(var w=0,z=0;z<e;++z){w++;g=0.5*(b+a);m=d(g);if(0===m)break;if(Math.abs(g-a)<f)break;0<m*l&&(a=b,b=l,l=p,p=b);b=m-l;u=p-m;r=p-l;if(p*r<2*m*b)b=g,p=m;else{p=(g-a)/b;b=(b-u)/(u*r);b=a-p*l*(1-b*m);p=d(b);if(0===p||Math.abs(b-v)<f)return b;v=b;0>p*l||(a=b,l=p,b=g,p=m)}}return g}
function extendBoundsByPoint(a,b,d){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b);d<a.yMin?a.yMin=d:d>a.yMax&&(a.yMax=d)}function extendBoundsByX(a,b){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b)}function extendBoundsByY(a,b){b<a.yMin?a.yMin=b:b>a.yMax&&(a.yMax=b)}function morph(a,b,d){return a+(b-a)*d}
function finishShapePath(a,b){if(a.fullyInitialized)return a;if(!(a instanceof ShapePath)){var d=a;a=new ShapePath(a.fillStyle,a.lineStyle,0,0,a.isMorph);a.commands=new Uint8Array(d.buffers[0]);a.data=new Int32Array(d.buffers[1]);d.isMorph&&(a.morphData=new Int32Array(d.buffers[2]));a.buffers=null}a.fillStyle&&initStyle(a.fillStyle,b);a.lineStyle&&initStyle(a.lineStyle,b);a.fullyInitialized=!0;return a}
var inWorker="undefined"===typeof window,factoryCtx=!inWorker?document.createElement("canvas").getContext("2d"):null;function buildLinearGradientFactory(a){for(var b=factoryCtx.createLinearGradient(-1,0,1,0),d=0;d<a.length;d++)b.addColorStop(a[d].ratio,a[d].color);d=function(d,b){for(var g=d.createLinearGradient(-1,0,1,0),l=0;l<a.length;l++)b.addGradientColorStop(g,a[l].ratio,a[l].color);return g};d.defaultFillStyle=b;return d}
function buildRadialGradientFactory(a,b){for(var d=factoryCtx.createRadialGradient(a,0,0,0,0,1),e=0;e<b.length;e++)d.addColorStop(b[e].ratio,b[e].color);e=function(d,e){for(var l=d.createRadialGradient(a,0,0,0,0,1),m=0;m<b.length;m++)e.addGradientColorStop(l,b[m].ratio,b[m].color);return l};e.defaultFillStyle=d;return e}
function buildBitmapPatternFactory(a,b){var d=factoryCtx.createPattern(a,b),e,f,g=function(g,m){if(!m.mode)return d;var p=m.getTransformFingerprint();if(p===f)return e;var r=document.createElement("canvas");r.width=a.width;r.height=a.height;g=r.getContext("2d");m.setAlpha(g,!0);g.drawImage(a,0,0);e=g.createPattern(r,b);f=p;return e};g.defaultFillStyle=d;return g}
function initStyle(a,b){if(void 0!==a.type)switch(a.type){case 0:break;case 16:case 18:case 19:for(var d=a.records,e=[],f=0,g=d.length;f<g;f++){var l=d[f],m=rgbaObjToStr(l.color);e.push({ratio:l.ratio/255,color:m})}d=16===a.type?buildLinearGradientFactory(e):buildRadialGradientFactory((a.focalPoint|0)/20,e);a.style=d;break;case 64:case 65:case 66:case 67:a.style=buildBitmapPatternFactory(b[a.bitmapId].props.img,64===a.type||66===a.type?"repeat":"no-repeat");break;default:fail("invalid fill style",
"shape")}}var SOUND_SIZE_8_BIT=0,SOUND_SIZE_16_BIT=1,SOUND_TYPE_MONO=0,SOUND_TYPE_STEREO=1,SOUND_FORMAT_PCM_BE=0,SOUND_FORMAT_ADPCM=1,SOUND_FORMAT_MP3=2,SOUND_FORMAT_PCM_LE=3,SOUND_FORMAT_NELLYMOSER_16=4,SOUND_FORMAT_NELLYMOSER_8=5,SOUND_FORMAT_NELLYMOSER=6,SOUND_FORMAT_SPEEX=11,SOUND_RATES=[5512,11250,22500,44100],WaveHeader=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]);
function packageWave(a,b,d,e,f){var g=e>>3,l=d*b*g,g=d*g,m=a.length+(a.length&1),p=new ArrayBuffer(WaveHeader.length+m),r=new Uint8Array(p);r.set(WaveHeader);if(f){f=0;for(var u=WaveHeader.length;f<a.length;f+=2,u+=2)r[u]=a[f+1],r[u+1]=a[f]}else r.set(a,WaveHeader.length);a=new DataView(p);a.setUint32(4,m+36,!0);a.setUint16(22,d,!0);a.setUint32(24,b,!0);a.setUint32(28,l,!0);a.setUint16(32,g,!0);a.setUint16(34,e,!0);a.setUint32(40,m,!0);return{data:r,mimeType:"audio/wav"}}
function defineSound(a){var b=1==a.soundType?2:1,d=a.samplesCount,e=SOUND_RATES[a.soundRate],f=a.soundData,g;switch(a.soundFormat){case 0:g=new Float32Array(d*b);if(1==a.soundSize){for(var l=d=0;d<g.length;d++,l+=2)g[d]=(f[l]<<24|f[l+1]<<16)/2147483648;f=packageWave(f,e,b,16,!0)}else{for(d=0;d<g.length;d++)g[d]=(f[d]-128)/128;f=packageWave(f,e,b,8,!1)}break;case 3:g=new Float32Array(d*b);if(1==a.soundSize){for(l=d=0;d<g.length;d++,l+=2)g[d]=(f[l+1]<<24|f[l]<<16)/2147483648;f=packageWave(f,e,b,16,
!1)}else{for(d=0;d<g.length;d++)g[d]=(f[d]-128)/128;f=packageWave(f,e,b,8,!1)}break;case 2:f={data:new Uint8Array(f.subarray(2)),mimeType:"audio/mpeg"};break;case 1:l=new Int16Array(d*b);decodeACPCMSoundData(f,l,b);g=new Float32Array(d*b);for(d=0;d<g.length;d++)g[d]=l[d]/32768;f=packageWave(new Uint8Array(l.buffer),e,b,16,!(new Uint8Array((new Uint16Array([1])).buffer))[0]);break;default:throw Error("Unsupported audio format: "+a.soundFormat);}a={type:"sound",id:a.id,sampleRate:e,channels:b,pcm:g};
f&&(a.packaged=f);return a}
var ACPCMIndexTables=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],ACPCMStepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];
function decodeACPCMSoundData(a,b,d){function e(d){for(;l<d;)g=g<<8|a[f++],l+=8;l-=d;return g>>>l&(1<<d)-1}for(var f=0,g=0,l=0,m=0,p=e(2),r=ACPCMIndexTables[p];m<b.length;){var u=b[m++]=e(16)<<16>>16,v,w=e(6),z;1<d&&(v=b[m++]=e(16)<<16>>16,z=e(6));for(var y=1<<p+1,B=0;4095>B;B++){for(var A=e(p+2),s=ACPCMStepSizeTable[w],E=0,H=y>>1;H;H>>=1,s>>=1)A&H&&(E+=s);u+=(A&y?-1:1)*(E+s);b[m++]=u=-32768>u?-32768:32767<u?32767:u;w+=r[A&~y];w=0>w?0:88<w?88:w;if(1<d){A=e(p+2);s=ACPCMStepSizeTable[z];E=0;for(H=y>>
1;H;H>>=1,s>>=1)A&H&&(E+=s);v+=(A&y?-1:1)*(E+s);b[m++]=v=-32768>v?-32768:32767<v?32767:v;z+=r[A&~y];z=0>z?0:88<z?88:z}}}}var nextSoundStreamId=0;function SwfSoundStream(a,b,d){this.streamId=nextSoundStreamId++;this.samplesCount=a;this.sampleRate=b;this.channels=d;this.format=null;this.currentSample=0}
SwfSoundStream.prototype={get info(){return{samplesCount:this.samplesCount,sampleRate:this.sampleRate,channels:this.channels,format:this.format,streamId:this.streamId}},decode:function(){throw Error("SwfSoundStream.decode: not implemented");}};function SwfSoundStream_decode_PCM(a){for(var b=new Float32Array(a.length),d=0;d<b.length;d++)b[d]=(a[d]-128)/128;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_be(a){for(var b=new Float32Array(a.length/2),d=0,e=0;d<b.length;d++,e+=2)b[d]=(a[e]<<24|a[e+1]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_le(a){for(var b=new Float32Array(a.length/2),d=0,e=0;d<b.length;d++,e+=2)b[d]=(a[e+1]<<24|a[e]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_MP3(a){var b=a[1]<<8|a[0],d=a[3]<<8|a[2];this.currentSample+=b;return{streamId:this.streamId,samplesCount:b,data:new Uint8Array(a.subarray(4)),seek:d}}
function createSoundStream(a){var b=new SwfSoundStream(a.samplesCount,SOUND_RATES[a.streamRate],1==a.streamType?2:1);switch(a.streamCompression){case 0:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_be:SwfSoundStream_decode_PCM;break;case 3:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_le:SwfSoundStream_decode_PCM;break;case 2:b.format="mp3";b.decode=SwfSoundStream_decode_MP3;break;default:throw Error("Unsupported audio format: "+a.soundFormat);}return b}
function defineText(a,b){var d=[];if(a.hasFont){var e=b[a.fontId];a.font=e.uniqueName;d.push(e.id)}e={type:"text",id:a.id,variableName:a.variableName,tag:a};d.length&&(e.require=d);return e}var isWorker="undefined"===typeof window;
if(isWorker){importScripts("../../../lib/mp3/mp3.js");self.addEventListener("message",function(a){a=a.data;var b=a.sessionId;try{switch(a.action){case "create":var d=new Session(b);sessions[b]=d;break;case "close":if(d=sessions[b])d.close(),sessions[b]=null;break;case "decode":d=sessions[b];if(!d)throw Error("mp3 decoding session is unavailable");d.decode(a.data)}}catch(e){self.postMessage({sessionId:b,action:"error",message:e.message})}},!1);var sessions={},Session=function(a){this.id=a;if("undefined"===
typeof MP3Decoder)throw Error("mp3 decoder is not available");a=new MP3Decoder;a.onframedata=function(a,d,e,f){self.postMessage({sessionId:this.id,action:"frame",frameData:a,channels:d,sampleRate:e,bitRate:f})}.bind(this);a.onid3tag=function(a){self.postMessage({sessionId:this.id,action:"id3",id3Data:a})}.bind(this);this.decoder=a};Session.prototype={decode:function(a){this.decoder.push(a)},close:function(){self.postMessage({sessionId:this.id,action:"closed"})}};self.console={log:function(a){self.postMessage({action:"console",
method:"log",message:a})},error:function(a){self.postMessage({action:"console",method:"error",message:a})}}}else{var mp3Worker,createMP3Worker=function(){var a=new Worker(SHUMWAY_ROOT+"swf/mp3worker.js");a.addEventListener("message",function(a){"console"===a.data.action&&console[a.data.method].call(console,a.data.message)});return a},nextSessionId=0,MP3DecoderSession=function(){mp3Worker=mp3Worker||createMP3Worker();var a=nextSessionId++;this.id=a;this.onworkermessage=function(b){if(b.data.sessionId===
a)switch(b.data.action){case "closed":if(this.onclosed)this.onclosed();mp3Worker.removeEventListener("message",this.onworkermessage,!1);break;case "frame":this.onframedata(b.data.frameData,b.data.channels,b.data.sampleRate,b.data.bitRate);break;case "id3":if(this.onid3tag)this.onid3tag(b.data.id3Data);break;case "error":if(this.onerror)this.onerror(b.data.message)}}.bind(this);mp3Worker.addEventListener("message",this.onworkermessage,!1);mp3Worker.postMessage({sessionId:a,action:"create"})};MP3DecoderSession.prototype=
{pushAsync:function(a){mp3Worker.postMessage({sessionId:this.id,action:"decode",data:a})},close:function(){mp3Worker.postMessage({sessionId:this.id,action:"close"})}};MP3DecoderSession.processAll=function(a,b){var d=8E3,e=new Float32Array(d),f=0,g=[],l=!1,m=new MP3DecoderSession;m.onframedata=function(a){var b=a.length+f;if(b>d){do d*=2;while(b>d);b=new Float32Array(d);b.set(e);e=b}e.set(a,f);f+=a.length};m.onid3tag=function(a){g.push(a)};m.onclosed=function(){l||b(e.subarray(0,f),g)};m.onerror=function(a){l||
(l=!0,b(null,null,a))};m.pushAsync(a);m.close()}}
SWF.embed=function(a,b,d,e){function f(a,d){if(1===u)g.width=a|0,g.height=d|0;else{var b=Math.floor(a*u),e=Math.floor(d*u);g.style.width=b/u+"px";g.style.height=e/u+"px";g.width=b;g.height=e}}var g=b.createElement("canvas"),l=g.getContext("2d"),m=new flash.display.Loader,p=m._contentLoaderInfo,r=new flash.display.Stage,u=1,v=forceHidpi.value;r._loader=m;p._parameters=e.movieParams;p._url=e.url||("string"===typeof a?a:null);p._loaderURL=e.loaderURL||p._url;m._parent=r;m._stage=r;p._addEventListener("init",
function(){if(v||18<=p._swfVersion)u="devicePixelRatio"in window?window.devicePixelRatio:1;g._pixelRatio=u;r._contentsScaleFactor=u;d.clientHeight?(f(d.clientWidth,d.clientHeight),r._invalid=!0,window.addEventListener("resize",function(){f(d.clientWidth,d.clientHeight);r._invalid=!0})):f(r._stageWidth/20,r._stageHeight/20);d.setAttribute("style","position: relative");g.addEventListener("click",function(){ShumwayKeyboardListener.focus=r;r._mouseTarget._dispatchEvent("click")});g.addEventListener("dblclick",
function(){r._mouseTarget._doubleClickEnabled&&r._mouseTarget._dispatchEvent("doubleClick")});g.addEventListener("mousedown",function(){r._mouseEvents.push("mousedown")});g.addEventListener("mousemove",function(a){var d=this,b=0,e=0;if(d.offsetParent){do b+=d.offsetLeft,e+=d.offsetTop;while(d=d.offsetParent)}d=r._concatenatedTransform;b=((a.pageX-b)*u-d.tx/20)/d.a;a=((a.pageY-e)*u-d.ty/20)/d.d;if(b!==r._mouseX||a!==r._mouseY)r._mouseMoved=!0,r._mouseX=20*b,r._mouseY=20*a});g.addEventListener("mouseup",
function(){r._mouseEvents.push("mouseup")});g.addEventListener("mouseover",function(){r._mouseMoved=!0;r._mouseOver=!0});g.addEventListener("mouseout",function(){r._mouseMoved=!0;r._mouseOver=!1});window.addEventListener("message",function(a){a=a.data;if(!("object"!==typeof a||null===a)){var d=a.type;switch(d){case "mousemove":case "mouseup":case "mousedown":r._mouseMoved=!0;r._mouseOver=!0;r._mouseX=20*a.x;r._mouseY=20*a.y;"mousemove"===d||r._mouseEvents.push(d);break;case "mouseover":case "mouseout":r._mouseMoved=
!0;r._mouseOver="mouseover"===d;break;case "keyup":case "keydown":r._dispatchEvent(new flash.events.KeyboardEvent("keyup"===d?"keyUp":"keyDown",!0,!1,a.charCode,a.keyCode,a.keyLocation,a.ctrlKey||!1,a.altKey||!1,a.shiftKey||!1))}}},!1);var a=p._backgroundColor;if(e.objectParams){var b;if(e.objectParams.bgcolor&&(b=/#([0-9A-F]{6})/i.exec(e.objectParams.bgcolor)))a=parseInt(b[1],16),a={red:a>>16&255,green:a>>8&255,blue:a&255,alpha:255};"transparent"===e.objectParams.wmode&&(a={red:0,green:0,blue:0,
alpha:0})}r._color=a;l.fillStyle=rgbaObjToStr(a);l.fillRect(0,0,g.width,g.height);a=m._content;a._dispatchEvent("added",void 0,!0);a._dispatchEvent("addedToStage");d.appendChild(g);r._domContainer=d;if(e.onStageInitialized)e.onStageInitialized(r);(e.startPromise||Promise.resolve()).then(function(){renderStage(r,l,e)})});e.onParsed&&p._addEventListener("parsed",function(){e.onParsed()});e.onComplete&&p._addEventListener("complete",function(){e.onComplete()});m._load("string"===typeof a?new flash.net.URLRequest(a):
a);return m};
var rendererOptions=shumwayOptions.register(new OptionSet("Renderer")),traceRenderer=rendererOptions.register(new Option("tr","traceRenderer","boolean",!1,"trace renderer execution")),disableRenderVisitor=rendererOptions.register(new Option("drv","disableRenderVisitor","boolean",!1,"disable render visitor")),disableMouseVisitor=rendererOptions.register(new Option("dmv","disableMouseVisitor","boolean",!1,"disable mouse visitor")),disableConstructChildren=rendererOptions.register(new Option("","disableConstructChildren",
"boolean",!1,"disable constructchildren")),disableEnterFrame=rendererOptions.register(new Option("","disableEnterFrame","boolean",!1,"disable enterframe")),disableAdvanceFrame=rendererOptions.register(new Option("","disableAdvanceFrame","boolean",!1,"disable advanceframe")),showRedrawRegions=rendererOptions.register(new Option("rr","showRedrawRegions","boolean",!1,"show redraw regions")),renderAsWireframe=rendererOptions.register(new Option("raw","renderAsWireframe","boolean",!1,"render as wireframe")),
showQuadTree=rendererOptions.register(new Option("qt","showQuadTree","boolean",!1,"show quad tree")),turboMode=rendererOptions.register(new Option("","turbo","boolean",!1,"turbo mode")),forceHidpi=rendererOptions.register(new Option("","forceHidpi","boolean",!1,"force hidpi")),skipFrameDraw=rendererOptions.register(new Option("","skipFrameDraw","boolean",!1,"skip frame when not on time")),hud=rendererOptions.register(new Option("","hud","boolean",!1,"show hud mode")),dummyAnimation=rendererOptions.register(new Option("",
"dummy","boolean",!1,"show test balls animation")),CanvasCache={cache:[],getCanvas:function(a){var b=this.cache.shift();b||(b={canvas:document.createElement("canvas")},b.ctx=b.canvas.getContext("2d"));b.canvas.width=a.width;b.canvas.height=a.height;b.ctx.save();return b},releaseCanvas:function(a){a.ctx.restore();this.cache.push(a)}};function isCanvasVisible(a){return a.ownerDocument.hidden||!1===a.mozVisible?!1:!0}
function visitContainer(a,b,d){var e=a._children;b.childrenStart(a);for(var f=0,g=e.length;f<g;f++){var l=e[f];l&&(b.ignoreVisibleAttribute||l._visible&&!l._maskedObject)&&b.visit(l,visitContainer,d)}b.childrenEnd(a)}var BlendModeNameMap={normal:"normal",multiply:"multiply",screen:"screen",lighten:"lighten",darken:"darken",difference:"difference",overlay:"overlay",hardlight:"hard-light"};function getBlendModeName(a){return BlendModeNameMap[a]||"normal"}
function RenderVisitor(a,b,d,e){this.root=a;this.ctx=b;this.depth=0;this.invalidPath=d;this.refreshStage=e;this.clipStack=this.clipDepth=null}
RenderVisitor.prototype={ignoreVisibleAttribute:!1,start:function(){visitContainer(this.root,this,new RenderingContext(this.refreshStage,this.invalidPath))},startFragment:function(a){var b=this.root,d=b._currentTransform,e=d;a&&(e=b._currentTransform={a:a.a,b:a.b,c:a.c,d:a.d,tx:20*a.tx|0,ty:20*a.ty|0},b._invalidateTransform());var f;e&&(f=new flash.geom.Matrix(e.a,e.b,e.c,e.d,e.tx/20,e.ty/20),f.invert(),this.ctx.save(),this.ctx.transform(f.a,f.b,f.c,f.d,f.tx,f.ty));this.visit(b,visitContainer,new RenderingContext(this.refreshStage,
this.invalidPath));e&&this.ctx.restore();a&&(b._currentTransform=d,b._invalidateTransform())},childrenStart:function(){if(0===this.depth){var a=this.ctx;a.save();this.invalidPath&&(!this.refreshStage&&!renderAsWireframe.value)&&(this.invalidPath.draw(a,!1,0,null),a.clip());var b=this.root._color;b&&(255>b.alpha&&a.clearRect(0,0,a.canvas.width,a.canvas.height),0<b.alpha&&(a.fillStyle=rgbaObjToStr(b),this.invalidPath&&!this.refreshStage&&!renderAsWireframe.value?a.fill():a.fillRect(0,0,a.canvas.width,
a.canvas.height)));a.mozFillRule="evenodd"}this.depth++;this.clipDepth&&0<this.clipDepth.length&&(this.clipStack={depth:this.depth,clip:this.clipDepth,next:this.clipStack},this.clipDepth=null)},childrenEnd:function(){if(this.clipDepth){for(;0<this.clipDepth.length;){var a=this.clipDepth.pop();this.clipEnd(a);this.ctx=a.ctx}this.clipDepth=null}this.clipStack&&this.clipStack.depth===this.depth&&(this.clipDepth=this.clipStack.clip,this.clipStack=this.clipStack.next);this.depth--;0===this.depth&&(this.ctx.restore(),
this.invalidPath=null)},visit:function(a,b,d){var e=this.ctx,f=d.isClippingMask,g=d.colorTransform,l=!0===f;a._cxform&&(d.colorTransform=g.applyCXForm(a._cxform));if(!l){for(;this.clipDepth&&0<this.clipDepth.length&&a._depth>this.clipDepth[0].clipDepth;){var m=this.clipDepth.shift();this.clipEnd(m);d.parentCtxs.shift();e=this.ctx=m.ctx}this.clipDepth&&(0<this.clipDepth.length&&a._depth<=this.clipDepth[0].clipDepth)&&(e=this.ctx=this.clipDepth[0].maskee.ctx);a._clipDepth&&(d.isClippingMask=l=!0,m=
this.clipStart(a),this.clipDepth?this.clipDepth.unshift(m):this.clipDepth=[m],d.parentCtxs.unshift(e),e=this.ctx=m.mask.ctx)}if(l&&a._isContainer){e.save();renderDisplayObject(a,e,d);l=0;for(m=a._children.length;l<m;l++){var p=a._children[l];p&&(this.ignoreVisibleAttribute||p._visible&&!p._maskedObject)&&this.visit(p,b,d)}e.restore();e.fill()}else{e.save();e.globalCompositeOperation=getBlendModeName(a._blendMode);if(a._mask){var m=this.clipStart(a),p=m.mask,r=m.maskee;d.parentCtxs.push(e);var u=this.clipDepth;
this.clipDepth=null;this.ctx=p.ctx;this.visit(a._mask,b,new RenderingContext(this.refreshStage));this.ctx=e;this.clipDepth=u;renderDisplayObject(a,r.ctx,d);a._isContainer&&(this.ctx=r.ctx,b(a,this,d),this.ctx=e);d.parentCtxs.pop();this.clipEnd(m)}else renderDisplayObject(a,e,d),a._isContainer&&b(a,this,d);e.restore();l&&e.fill()}d.isClippingMask=f;d.colorTransform=g},clipStart:function(a){var b=a._parent._getConcatenatedTransform(null,!0),d=b.tx/20,e=b.ty/20,f=CanvasCache.getCanvas(this.ctx.canvas);
f.ctx.setTransform(b.a,b.b,b.c,b.d,d,e);var g=CanvasCache.getCanvas(this.ctx.canvas);g.ctx.setTransform(b.a,b.b,b.c,b.d,d,e);return{ctx:this.ctx,mask:f,maskee:g,clipDepth:a._clipDepth}},clipEnd:function(a){var b=a.ctx,d=a.mask;a=a.maskee;a.ctx.globalCompositeOperation="destination-in";a.ctx.setTransform(1,0,0,1,0,0);a.ctx.drawImage(d.canvas,0,0);b.save();b.setTransform(1,0,0,1,0,0);b.drawImage(a.canvas,0,0);b.restore();CanvasCache.releaseCanvas(d);CanvasCache.releaseCanvas(a)}};
function RenderingColorTransform(){this.mode=null;this.transform=[1,1,1,1,0,0,0,0]}
RenderingColorTransform.prototype={applyCXForm:function(a){var b=this.transform,b=[b[0]*a.redMultiplier/256,b[1]*a.greenMultiplier/256,b[2]*a.blueMultiplier/256,b[3]*a.alphaMultiplier/256,b[4]*a.redMultiplier/256+a.redOffset,b[5]*a.greenMultiplier/256+a.greenOffset,b[6]*a.blueMultiplier/256+a.blueOffset,b[7]*a.alphaMultiplier/256+a.alphaOffset];a=1E-4>Math.abs(b[0]-1)&&1E-4>Math.abs(b[1]-1)&&1E-4>Math.abs(b[2]-1)&&0<=b[3]&&1E-4>Math.abs(b[4])&&1E-4>Math.abs(b[5])&&1E-4>Math.abs(b[6])&&1E-4>Math.abs(b[7])?
1E-4>Math.abs(b[3]-1)?null:"simple":"complex";var d=Object.create(RenderingColorTransform.prototype);d.mode=a;d.transform=b;return d},setFillStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):"function"===typeof b&&(b=b.defaultFillStyle);a.fillStyle=b},setStrokeStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):
"function"===typeof b&&(b=b.defaultFillStyle);a.strokeStyle=b},addGradientColorStop:function(a,b,d){"complex"===this.mode?d=this.convertColor(d):"number"===typeof d&&(d=this.convertNumericColor(d));a.addColorStop(b,d)},setAlpha:function(a,b){if("simple"===this.mode||b)a.globalAlpha=Math.min(1,Math.max(0,a.globalAlpha*this.transform[3]))},convertNumericColor:function(a){return"#"+(a|16777216).toString(16).substr(1)},convertColor:function(a){var b=this.transform,d;switch(typeof a){case "string":"#"===
a[0]&&(d=[void 0,parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),1]);d=d||/rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)/.exec(a);if(!d)return a;break;case "number":d=[a,a>>16&255,a>>8&255,a&255,1];break;default:return a}a=Math.min(255,Math.max(0,d[1]*b[0]+b[4]))|0;var e=Math.min(255,Math.max(0,d[2]*b[1]+b[5]))|0,f=Math.min(255,Math.max(0,d[3]*b[2]+b[6]))|0,b=Math.min(1,Math.max(0,d[4]*b[3]+b[7]/256));return"rgba("+a+","+e+","+f+","+b+")"},getTransformFingerprint:function(){return this.transform.join("|")}};
function RenderingContext(a,b){this.refreshStage=!0===a;this.invalidPath=b;this.isClippingMask=!1;this.colorTransform=new RenderingColorTransform;this.parentCtxs=[]}
function renderDisplayObject(a,b,d){var e=a._currentTransform;e&&b.transform(e.a,e.b,e.c,e.d,e.tx/20,e.ty/20);if(renderAsWireframe.value){if(!a._invalid&&!d.refreshStage)return;if(a.getBounds&&(d=a.getBounds(null))&&0<d.xMax-d.xMin&&0<d.yMax-d.yMin){a._wireframeStrokeStyle||(a._wireframeStrokeStyle=randomStyle());b.save();b.strokeStyle=a._wireframeStrokeStyle;var e=d.xMin/20,f=d.yMin/20;b.strokeRect(e+0.5,f+0.5,d.xMax/20-e-1,d.yMax/20-f-1);b.restore()}}else{1!==a._alpha&&(b.globalAlpha*=a._alpha);
if(d.invalidPath&&!a._invalid&&!d.refreshStage)return;a._graphics&&(e=a._graphics,e._bitmap?(b.save(),b.translate(a._bbox.xMin/20,a._bbox.yMin/20),d.colorTransform.setAlpha(b,!0),b.drawImage(e._bitmap,0,0),b.restore()):(f=a.ratio,void 0===f&&(f=0),e.draw(b,d.isClippingMask,f,d.colorTransform)));a.draw&&a.draw(b,a.ratio,d.colorTransform,d.parentCtxs)}a._invalid=!1}
function renderQuadTree(a,b){a.strokeRect(b.x/20,b.y/20,b.width/20,b.height/20);for(var d=b.nodes,e=0;e<d.length;e++)renderQuadTree(a,d[e])}var renderingTerminated=!1,samplesLeftPlusOne=0;function triggerSampling(a){samplesLeftPlusOne=-a-1}function sampleStart(){samplesLeftPlusOne&&(0>samplesLeftPlusOne&&(console.profile("Sample"),samplesLeftPlusOne*=-1),0<samplesLeftPlusOne&&console.info("Sampling Frame: "+(samplesLeftPlusOne-1)))}
function sampleEnd(){samplesLeftPlusOne&&(samplesLeftPlusOne--,1===samplesLeftPlusOne&&console.profileEnd("Sample"))}var timeline,hudTimeline;function timelineEnter(a){timeline&&timeline.enter(a);hudTimeline&&hudTimeline.enter(a)}function timelineLeave(a){timeline&&timeline.leave(a);hudTimeline&&hudTimeline.leave(a)}function timelineWrapBroadcastMessage(a,b){timelineEnter(b);a.broadcastMessage(b);timelineLeave(b)}
function initializeHUD(a,b){var d=document.createElement("canvas"),e=document.createElement("div");e.appendChild(d);e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.width="100%";e.style.height="150px";e.style.backgroundColor="rgba(0, 0, 0, 0.4)";e.style.pointerEvents="none";b.parentElement.appendChild(e);hudTimeline=new Timeline(d);hudTimeline.setFrameRate(a._frameRate);hudTimeline.refreshEvery(10)}
function createRenderDummyBalls(a,b){var d,e=b._concatenatedTransform,f=e.a,g=e.d;d=[];for(e=0;10>e;e++)d.push({position:{x:10+Math.random()*((a.canvas.width-20)/f),y:10+Math.random()*((a.canvas.height-20)/g)},velocity:{x:1*(Math.random()-0.5),y:1*(Math.random()-0.5)}});a.fillStyle="black";a.lineWidth=2;a.fillRect(0,0,a.canvas.width,a.canvas.height);return function(){a.fillStyle="black";a.fillRect(0,0,a.canvas.width,a.canvas.height);a.strokeStyle="green";d.forEach(function(d){var b=d.position;d=d.velocity;
a.beginPath();a.arc(b.x,b.y,10,0,2*Math.PI,!0);a.stroke();var e=b.x+d.x,r=b.y+d.y;if(10>e||e>a.canvas.width/f-10)d.x*=-1;if(10>r||r>a.canvas.height/g-10)d.y*=-1;b.x+=d.x;b.y+=d.y})}}
function renderStage(a,b,d){function e(){g=b.canvas.width;l=b.canvas.height;var d=20*(g/a._stageWidth),e=20*(l/a._stageHeight);switch(a._scaleMode){case "noBorder":d>e?e=d:d=e;break;case "noScale":d=e=b.canvas._pixelRatio||1;break;case "showAll":d<e?e=d:d=e}var f=a._align,m;m=0<=f.indexOf("L")?0:0<=f.indexOf("R")?g-d*a._stageWidth/20:(g-d*a._stageWidth/20)/2;f=0<=f.indexOf("T")?0:0<=f.indexOf("B")?l-e*a._stageHeight/20:(l-e*a._stageHeight/20)/2;b.setTransform(d,0,0,e,m,f);var u=a._concatenatedTransform;
u.a=d;u.d=e;u.tx=20*m;u.ty=20*f}function f(d,f){sampleStart();var g=!1;a._invalid&&(e(),a._invalid=!1,g=!0);var l=!1;a._mouseMoved?(a._mouseMoved=!1,l=a._mouseOver):a._handleMouseButtons();if(d||g||l){FrameCounter.clear();var r=performance.now();timelineEnter("frame");traceRenderer.value&&appendToFrameTerminal("Begin Frame #"+v++,"purple");var p=avm2.systemDomain;d&&(timelineEnter("events"),u?u=!1:(!disableAdvanceFrame.value&&timelineWrapBroadcastMessage(p,"advanceFrame"),!disableEnterFrame.value&&
timelineWrapBroadcastMessage(p,"enterFrame"),!disableConstructChildren.value&&timelineWrapBroadcastMessage(p,"constructChildren")),timelineWrapBroadcastMessage(p,"frameConstructed"),timelineWrapBroadcastMessage(p,"executeFrame"),timelineWrapBroadcastMessage(p,"exitFrame"),timelineLeave("events"));a._deferRenderEvent&&(a._deferRenderEvent=!1,p.broadcastMessage("render","render"));if((p=isCanvasVisible(b.canvas)&&(g||d)&&(z||f||!skipFrameDraw.value))&&!f&&skipFrameDraw.value&&m.shallSkipDraw)p=!1,m.skipDraw(),
traceRenderer.value&&appendToFrameTerminal("Skip Frame Draw","red");p&&(m.startDraw(),p=null,traceRenderer.value&&frameWriter.enter("> Invalidation"),timelineEnter("invalidate"),p=a._processInvalidations(g),timelineLeave("invalidate"),traceRenderer.value&&frameWriter.leave("< Invalidation"),!disableRenderVisitor.value&&!p.isEmpty&&(timelineEnter("render"),traceRenderer.value&&frameWriter.enter("> Rendering"),(new RenderVisitor(a,b,p,g)).start(),traceRenderer.value&&frameWriter.leave("< Rendering"),
timelineLeave("render")),showQuadTree.value&&(b.strokeStyle="green",renderQuadTree(b,a._qtree)),p&&(!g&&showRedrawRegions.value)&&(b.strokeStyle="red",p.draw(b),b.stroke()),m.endDraw());l&&!disableMouseVisitor.value&&(d&&timelineEnter("mouse"),traceRenderer.value&&frameWriter.enter("> Mouse Handling"),a._handleMouse(),traceRenderer.value&&frameWriter.leave("< Mouse Handling"),d&&timelineLeave("mouse"),b.canvas.style.cursor=a._cursor);if(traceRenderer.value){frameWriter.enter("> Frame Counters");for(var D in FrameCounter.counts)frameWriter.writeLn(D+
": "+FrameCounter.counts[D]);frameWriter.leave("< Frame Counters");g=performance.now()-r;l=1E3/g;w.push(l);traceRenderer.value&&appendToFrameTerminal("End Frame Time: "+g.toFixed(2)+" ("+l.toFixed(2)+" fps, "+w.average().toFixed(2)+" average fps)","purple")}timelineLeave("frame")}else traceRenderer.value&&appendToFrameTerminal("Skip Frame","black");sampleEnd()}var g,l;!timeline&&hud.value&&initializeHUD(a,b.canvas);e();var m=new FrameScheduler;a._frameScheduler=m;var p=window.requestAnimationFrame||
window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,r=dummyAnimation.value&&createRenderDummyBalls(b,a);console.timeEnd("Initialize Renderer");console.timeEnd("Total");var u=!0,v=0,w=new Shumway.Metrics.Average(120),z=!0;(function B(){var b=!0;d.onBeforeFrame&&(b={cancel:!1},d.onBeforeFrame(b),b=!b.cancel);if(r)b&&(r(),d.onAfterFrame&&d.onAfterFrame()),setTimeout(B);else{m.startFrame(a._frameRate);f(b,
!1);m.endFrame();z=!1;m.isOnTime||traceRenderer.value&&appendToFrameTerminal("Frame Is Late","red");if(b&&d.onAfterFrame)d.onAfterFrame();if(renderingTerminated){if(d.onTerminated)d.onTerminated()}else setTimeout(B,turboMode.value?0:m.nextFrameIn)}})();(function A(){renderingTerminated||(z=!0,(a._invalid||a._mouseMoved)&&!r&&f(!1,!0),p(A))})()}
var FrameScheduler=function(){function a(){this._drawStats=[];this._drawsSkipped=this._drawStarted=this._drawStatsSum=0;this._expectedNextFrameAt=performance.now();this._onTime=!0;this._trackDelta=!1;this._onTimeDelta=this._delta=0}a.prototype={get shallSkipDraw(){if(2<=this._drawsSkipped)return!1;var a=50>this._drawStats.length?0:this._drawStatsSum/this._drawStats.length;return performance.now()+a+4>this._expectedNextFrameAt},get nextFrameIn(){return Math.max(0,this._expectedNextFrameAt-performance.now())},
get isOnTime(){return this._onTime},startFrame:function(a){var d=a=1E3/a,e=this._onTimeDelta+this._delta;0!==e&&(0>e?d*=0.9:0<e&&(d/=0.9),this._onTimeDelta+=a-d);this._expectedNextFrameAt+=d;this._onTime=!0},endFrame:function(){var a=performance.now()+4;a>this._expectedNextFrameAt&&(this._trackDelta&&(this._onTimeDelta+=this._expectedNextFrameAt-a,console.log(this._onTimeDelta)),this._expectedNextFrameAt=a,this._onTime=!1)},startDraw:function(){this._drawsSkipped=0;this._drawStarted=performance.now()},
endDraw:function(){var a=performance.now()-this._drawStarted;this._drawStats.push(a);for(this._drawStatsSum+=a;50<this._drawStats.length;)this._drawStatsSum-=this._drawStats.shift()},skipDraw:function(){this._drawsSkipped++},setDelta:function(a){this._trackDelta&&(this._delta=a)},startTrackDelta:function(){this._trackDelta=!0},endTrackDelta:function(){this._trackDelta&&(this._trackDelta=!1,this._onTimeDelta=this._delta=0)}};return a}(),tagHandler=function(){function a(a,d,b,e,f){b||(b={});b.id=readUi16(a,
d);var g=b.bbox={};w(a,d,g,e,f);if(g=b.isMorph=46===f||84===f){var l=b.bboxMorph={};w(a,d,l,e,f)}if(l=b.hasStrokes=83===f||84===f){var m=b.strokeBbox={};w(a,d,m,e,f);g&&(m=b.strokeBboxMorph={},w(a,d,m,e,f));readUb(a,d,5);b.fillWinding=readUb(a,d,1);b.nonScalingStrokes=readUb(a,d,1);b.scalingStrokes=readUb(a,d,1)}if(g){b.offsetMorph=readUi32(a,d);var u=b,r,p,m=E(a,d,u,e,f,g,l),v=m.lineBits,B=m.fillBits,y=u.records=[];do{var z={},m=s(a,d,z,e,f,g,B,v,l,p);r=m.eos;B=m.fillBits;v=m.lineBits;p=m.bits;y.push(z)}while(!r);
m=H(a,d,u,e,f);B=m.fillBits;v=m.lineBits;u=u.recordsMorph=[];do y={},m=s(a,d,y,e,f,g,B,v,l,p),r=m.eos,B=m.fillBits,v=m.lineBits,p=m.bits,u.push(y);while(!r)}else{B=b;p=E(a,d,B,e,f,g,l);m=p.fillBits;v=p.lineBits;u=B.records=[];do y={},p=s(a,d,y,e,f,g,m,v,l,r),B=p.eos,m=p.fillBits,v=p.lineBits,r=p.bits,u.push(y);while(!B)}return b}function b(a,d,b,e,f){var g,l,m,u,r,p,s,v,w,y,z,D,$;b||(b={});if(4<f){g=26<f?readUi16(a,d):readUi8(a,d);l=b.hasEvents=g>>7&1;m=b.clip=g>>6&1;u=b.hasName=g>>5&1;r=b.hasRatio=
g>>4&1;p=b.hasCxform=g>>3&1;s=b.hasMatrix=g>>2&1;v=b.place=g>>1&1;b.move=g&1;70===f?(w=b.hasBackgroundColor=g>>15&1,y=b.hasVisibility=g>>14&1,b.hasImage=g>>12&1,z=b.hasClassName=g>>11&1,D=b.cache=g>>10&1,$=b.blend=g>>9&1,g=b.hasFilters=g>>8&1):(D=b.cache=0,$=b.blend=0,g=b.hasFilters=0);b.depth=readUi16(a,d);z&&(b.className=readString(a,d,0));v&&(b.symbolId=readUi16(a,d));s&&(s=b.matrix={},B(a,d,s,e,f));p&&(p=b.cxform={},A(a,d,p,e,f));r&&(b.ratio=readUi16(a,d));u&&(b.name=readString(a,d,0));m&&(b.clipDepth=
readUi16(a,d));if(g){u=readUi8(a,d);for(m=b.filters=[];u--;)r={},G(a,d,r,e,f),m.push(r)}$&&(b.blendMode=readUi8(a,d));D&&(b.bmpCache=readUi8(a,d));if(l){readUi16(a,d);6<=e?readUi32(a,d):readUi16(a,d);f=b.events=[];do l={},D=a,$=d,m=l,p=e,u=g=void 0,g=6<=p?readUi32(D,$):readUi16(D,$),r=m.eoe=!g,m.onKeyUp=g>>7&1,m.onKeyDown=g>>6&1,m.onMouseUp=g>>5&1,m.onMouseDown=g>>4&1,m.onMouseMove=g>>3&1,m.onUnload=g>>2&1,m.onEnterFrame=g>>1&1,m.onLoad=g&1,6<=p&&(m.onDragOver=g>>15&1,m.onRollOut=g>>14&1,m.onRollOver=
g>>13&1,m.onReleaseOutside=g>>12&1,m.onRelease=g>>11&1,m.onPress=g>>10&1,m.onInitialize=g>>9&1,m.onData=g>>8&1,m.onConstruct=7<=p?g>>18&1:0,u=m.keyPress=g>>17&1,m.onDragOut=g>>16&1),r||(p=m.length=readUi32(D,$),u&&(m.keyCode=readUi8(D,$)),m.actionsData=readBinary(D,$,p-(u?1:0))),D=r,f.push(l);while(!D)}w&&(e=b.backgroundColor={},e.alpha=readUi8(a,d),e.red=readUi8(a,d),e.green=readUi8(a,d),e.blue=readUi8(a,d));y&&(b.visibility=readUi8(a,d))}else b.place=1,b.symbolId=readUi16(a,d),b.depth=readUi16(a,
d),b.hasMatrix=1,y=b.matrix={},B(a,d,y,e,f),d.remaining()&&(b.hasCxform=1,y=b.cxform={},A(a,d,y,e,f));return b}function d(a,d,b,e,f){b||(b={});5===f&&(b.symbolId=readUi16(a,d));b.depth=readUi16(a,d);return b}function e(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);21<f?(e=readUi32(a,d),90===f&&(b.deblock=readFixed8(a,d)),e=b.imgData=readBinary(a,d,e),b.alphaData=readBinary(a,d,0)):e=b.imgData=readBinary(a,d,0);switch(e[0]<<8|e[1]){case 65496:case 65497:b.mimeType="image/jpeg";break;case 35152:b.mimeType=
"image/png";break;case 18249:b.mimeType="image/gif";break;default:b.mimeType="application/octet-stream"}6===f&&(b.incomplete=1);return b}function f(a,d,b,e,f){var g,l,m,u;b||(b={});b.id=readUi16(a,d);if(7==f){u=b.characters=[];do{var r={};g=a;var p=d,s=r;l=e;m=f;var v=void 0,w=void 0,y=readUi8(g,p),z=s.eob=!y;8<=l?(w=s.blend=y>>5&1,v=s.hasFilters=y>>4&1):(w=s.blend=0,v=s.hasFilters=0);s.stateHitTest=y>>3&1;s.stateDown=y>>2&1;s.stateOver=y>>1&1;s.stateUp=y&1;z||(s.symbolId=readUi16(g,p),s.depth=readUi16(g,
p),y=s.matrix={},B(g,p,y,l,m),34===m&&(y=s.cxform={},A(g,p,y,l,m)),v&&(s.filterCount=readUi8(g,p),v=s.filters={},G(g,p,v,l,m)),w&&(s.blendMode=readUi8(g,p)));g=z;u.push(r)}while(!g);b.actionsData=readBinary(a,d,0)}else{g=readUi8(a,d);b.trackAsMenu=g>>7&1;r=readUi16(a,d);p=b.characters=[];do{s={};m=readUi8(a,d);g=s.eob=!m;8<=e?(u=s.blend=m>>5&1,l=s.hasFilters=m>>4&1):(u=s.blend=0,l=s.hasFilters=0);s.stateHitTest=m>>3&1;s.stateDown=m>>2&1;s.stateOver=m>>1&1;s.stateUp=m&1;if(!g){s.symbolId=readUi16(a,
d);s.depth=readUi16(a,d);m=s.matrix={};B(a,d,m,e,f);34===f&&(m=s.cxform={},A(a,d,m,e,f));if(l){m=readUi8(a,d);for(l=b.filters=[];m--;)w={},G(a,d,w,e,f),l.push(w)}u&&(s.blendMode=readUi8(a,d))}p.push(s)}while(!g);if(r){e=b.buttonActions=[];do f={},g=a,u=d,r=f,p=readUi16(g,u),s=readUi16(g,u),r.idleToOverDown=s>>7&1,r.outDownToIdle=s>>6&1,r.outDownToOverDown=s>>5&1,r.overDownToOutDown=s>>4&1,r.overDownToOverUp=s>>3&1,r.overUpToOverDown=s>>2&1,r.overUpToIdle=s>>1&1,r.idleToOverUp=s&1,r.mouseEventFlags=
s&511,r.keyPress=s>>9&127,r.overDownToIdle=s>>8&1,r.actionsData=p?readBinary(g,u,p-4):readBinary(g,u,0),e.push(f);while(0<d.remaining())}}return b}function g(a,d,b,e,f){var g;b||(b={});b.id=readUi16(a,d);var l=b.bbox={};w(a,d,l,e,f);l=b.matrix={};B(a,d,l,e,f);var l=b.glyphBits=readUi8(a,d),m=b.advanceBits=readUi8(a,d),u=b.records=[];do{var r={};g=a;var p=d,s=r,v=e,A=f,D=l,G=m,F=void 0;align(g,p);var $=readUb(g,p,8),H=s.eot=!$,F=g,C=p,E=s,fa=v,aa=$,$=E.hasFont=aa>>3&1,ca=E.hasColor=aa>>2&1,ma=E.hasMoveY=
aa>>1&1,aa=E.hasMoveX=aa&1;$&&(E.fontId=readUi16(F,C));ca&&(33===A?(ca=E.color={},y(F,C,ca,fa,A)):(ca=E.color={},z(F,C,ca,fa,A)));aa&&(E.moveX=readSi16(F,C));ma&&(E.moveY=readSi16(F,C));$&&(E.fontHeight=readUi16(F,C));if(!H){F=readUi8(g,p);F=6<v?s.glyphCount=F:s.glyphCount=F&127;s=s.entries=[];for(v=F;v--;)F={},C=g,E=p,fa=F,A=G,fa.glyphIndex=readUb(C,E,D),fa.advance=readSb(C,E,A),s.push(F)}g=H;u.push(r)}while(!g);return b}function l(a,d,b,e,f){b||(b={});59===f&&(b.spriteId=readUi16(a,d));b.actionsData=
readBinary(a,d,0);return b}function m(a,d,b,e,f){b||(b={});15==f&&(b.soundId=readUi16(a,d));89==f&&(b.soundClassName=readString(a,d,0));e=b.soundInfo={};readUb(a,d,2);e.stop=readUb(a,d,1);e.noMultiple=readUb(a,d,1);f=e.hasEnvelope=readUb(a,d,1);var g=e.hasLoops=readUb(a,d,1),l=e.hasOutPoint=readUb(a,d,1);if(e.hasInPoint=readUb(a,d,1))e.inPoint=readUi32(a,d);l&&(e.outPoint=readUi32(a,d));g&&(e.loopCount=readUi16(a,d));if(f){f=e.envelopeCount=readUi8(a,d);for(e=e.envelopes=[];f--;){var g={},l=a,m=d,
u=g;u.pos44=readUi32(l,m);u.volumeLeft=readUi16(l,m);u.volumeRight=readUi16(l,m);e.push(g)}}return b}function p(a,d,b){b||(b={});var e=readUi8(a,d);b.playbackRate=e>>2&3;b.playbackSize=e>>1&1;b.playbackType=e&1;var e=readUi8(a,d),f=b.streamCompression=e>>4&15;b.streamRate=e>>2&3;b.streamSize=e>>1&1;b.streamType=e&1;b.samplesCount=readUi32(a,d);2==f&&(b.latencySeek=readSi16(a,d));return b}function r(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);e=b.format=readUi8(a,d);b.width=readUi16(a,d);b.height=readUi16(a,
d);b.hasAlpha=36===f;3===e&&(b.colorTableSize=readUi8(a,d));b.bmpData=readBinary(a,d,0);return b}function u(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);var g=b.hasLayout=readUb(a,d,1);5<e?b.shiftJis=readUb(a,d,1):readUb(a,d,1);b.smallText=readUb(a,d,1);b.ansi=readUb(a,d,1);var l=b.wideOffset=readUb(a,d,1),m=b.wide=readUb(a,d,1);b.italic=readUb(a,d,1);b.bold=readUb(a,d,1);5<e?b.language=readUi8(a,d):(readUi8(a,d),b.language=0);var u=readUi8(a,d);b.name=readString(a,d,u);75===f&&(b.resolution=20);u=b.glyphCount=
readUi16(a,d);if(l){for(var l=b.offsets=[],r=u;r--;)l.push(readUi32(a,d));b.mapOffset=readUi32(a,d)}else{l=b.offsets=[];for(r=u;r--;)l.push(readUi16(a,d));b.mapOffset=readUi16(a,d)}l=b.glyphs=[];for(r=u;r--;){var p={};F(a,d,p,e,f);l.push(p)}if(m){l=b.codes=[];for(r=u;r--;)l.push(readUi16(a,d))}else{l=b.codes=[];for(r=u;r--;)l.push(readUi8(a,d))}if(g){b.ascent=readUi16(a,d);b.descent=readUi16(a,d);b.leading=readSi16(a,d);g=b.advance=[];for(l=u;l--;)g.push(readSi16(a,d));for(g=b.bbox=[];u--;)l={},w(a,
d,l,e,f),g.push(l);f=readUi16(a,d);for(e=b.kerning=[];f--;)u={},g=a,l=d,r=u,m?(r.code1=readUi16(g,l),r.code2=readUi16(g,l)):(r.code1=readUi8(g,l),r.code2=readUi8(g,l)),r.adjustment=readUi16(g,l),e.push(u)}return b}function v(a,d,b,e,f){b||(b={});b.flags=82===f?readUi32(a,d):0;b.name=82===f?readString(a,d,0):"";b.data=readBinary(a,d,0);return b}function w(a,d,b){align(a,d);var e=readUb(a,d,5),f=readSb(a,d,e),g=readSb(a,d,e),l=readSb(a,d,e),e=readSb(a,d,e);b.xMin=f;b.xMax=g;b.yMin=l;b.yMax=e;align(a,
d)}function z(a,d,b){b.red=readUi8(a,d);b.green=readUi8(a,d);b.blue=readUi8(a,d);b.alpha=255}function y(a,d,b){b.red=readUi8(a,d);b.green=readUi8(a,d);b.blue=readUi8(a,d);b.alpha=readUi8(a,d)}function B(a,d,b){align(a,d);if(readUb(a,d,1)){var e=readUb(a,d,5);b.a=readFb(a,d,e);b.d=readFb(a,d,e)}else b.a=1,b.d=1;readUb(a,d,1)?(e=readUb(a,d,5),b.b=readFb(a,d,e),b.c=readFb(a,d,e)):(b.b=0,b.c=0);var e=readUb(a,d,5),f=readSb(a,d,e),e=readSb(a,d,e);b.tx=f;b.ty=e;align(a,d)}function A(a,d,b,e,f){align(a,
d);e=readUb(a,d,1);var g=readUb(a,d,1),l=readUb(a,d,4);g?(b.redMultiplier=readSb(a,d,l),b.greenMultiplier=readSb(a,d,l),b.blueMultiplier=readSb(a,d,l),b.alphaMultiplier=4<f?readSb(a,d,l):256):(b.redMultiplier=256,b.greenMultiplier=256,b.blueMultiplier=256,b.alphaMultiplier=256);e?(b.redOffset=readSb(a,d,l),b.greenOffset=readSb(a,d,l),b.blueOffset=readSb(a,d,l),b.alphaOffset=4<f?readSb(a,d,l):0):(b.redOffset=0,b.greenOffset=0,b.blueOffset=0,b.alphaOffset=0);align(a,d)}function s(a,d,b,e,f,g,l,m,u,
r){var p=b.type=readUb(a,d,1),s=readUb(a,d,5),v=b.eos=!(p||s);if(p)e=r,f=f=f=0,f=b.isStraight=s>>4,e=(s&15)+2,f?(f=b.isGeneral=readUb(a,d,1))?(b.deltaX=readSb(a,d,e),b.deltaY=readSb(a,d,e)):(f=b.isVertical=readUb(a,d,1))?b.deltaY=readSb(a,d,e):b.deltaX=readSb(a,d,e):(b.controlDeltaX=readSb(a,d,e),b.controlDeltaY=readSb(a,d,e),b.anchorDeltaX=readSb(a,d,e),b.anchorDeltaY=readSb(a,d,e)),a=e;else{var w=0,B=0,y=0,z=0,A=0,w=2<f?b.hasNewStyles=s>>4:b.hasNewStyles=0,B=b.hasLineStyle=s>>3&1,y=b.hasFillStyle1=
s>>2&1,z=b.hasFillStyle0=s>>1&1;if(A=b.move=s&1)r=readUb(a,d,5),b.moveX=readSb(a,d,r),b.moveY=readSb(a,d,r);z&&(b.fillStyle0=readUb(a,d,l));y&&(b.fillStyle1=readUb(a,d,l));B&&(b.lineStyle=readUb(a,d,m));w&&(a=E(a,d,b,e,f,g,u),m=a.lineBits,l=a.fillBits);a=r}return{type:p,flags:s,eos:v,fillBits:l,lineBits:m,bits:a}}function E(a,d,b,e,f,g,l){var m,u=readUi8(a,d);m=2<f&&255===u?readUi16(a,d):u;for(u=b.fillStyles=[];m--;){var r={};D(a,d,r,e,f,g);u.push(r)}u=readUi8(a,d);m=2<f&&255===u?readUi16(a,d):u;
for(u=b.lineStyles=[];m--;){var r={},p=a,s=d,v=r,w=e,B=f,A=g,G=l;v.width=readUi16(p,s);A&&(v.widthMorph=readUi16(p,s));if(G){align(p,s);v.startCapStyle=readUb(p,s,2);var G=v.joinStyle=readUb(p,s,2),$=v.hasFill=readUb(p,s,1);v.noHscale=readUb(p,s,1);v.noVscale=readUb(p,s,1);v.pixelHinting=readUb(p,s,1);readUb(p,s,5);v.noClose=readUb(p,s,1);v.endCapStyle=readUb(p,s,2);2===G&&(v.miterLimitFactor=readFixed8(p,s));$?(v=v.fillStyle={},D(p,s,v,w,B,A)):(G=v.color={},y(p,s,G,w,B),A&&(A=v.colorMorph={},y(p,
s,A,w,B)))}else 22<B?(G=v.color={},y(p,s,G,w,B)):(G=v.color={},z(p,s,G,w,B)),A&&(A=v.colorMorph={},y(p,s,A,w,B));u.push(r)}a=H(a,d,b,e,f);return{fillBits:a.fillBits,lineBits:a.lineBits}}function H(a,d){align(a,d);var b=readUb(a,d,4),e=readUb(a,d,4);return{fillBits:b,lineBits:e}}function D(a,d,b,e,f,g){var l=b.type=readUi8(a,d);switch(l){case 0:22<f||g?(l=b.color={},y(a,d,l,e,f)):(l=b.color={},z(a,d,l,e,f));g&&(b=b.colorMorph={},y(a,d,b,e,f));break;case 16:case 18:case 19:var m=b.matrix={};B(a,d,m,
e,f);g&&(m=b.matrixMorph={},B(a,d,m,e,f));83===f?(b.spreadMode=readUb(a,d,2),b.interpolationMode=readUb(a,d,2)):readUb(a,d,4);for(var u=b.count=readUb(a,d,4),m=b.records=[];u--;){var r={},p=a,s=d,v=r,w=e,A=f,D=g;v.ratio=readUi8(p,s);if(22<A){var G=v.color={};y(p,s,G,w,A)}else G=v.color={},z(p,s,G,w,A);D&&(v.ratioMorph=readUi8(p,s),v=v.colorMorph={},y(p,s,v,w,A));m.push(r)}19===l&&(b.focalPoint=readFixed8(a,d),g&&(b.focalPointMorph=readFixed8(a,d)));break;case 64:case 65:case 66:case 67:b.bitmapId=
readUi16(a,d),m=b.matrix={},B(a,d,m,e,f),g&&(g=b.matrixMorph={},B(a,d,g,e,f)),b.condition=64===l||67===l}}function G(a,d,b,e,f){var g=b.type=readUi8(a,d);switch(g){case 0:case 2:case 3:case 4:case 7:var l;l=4===g||7===g?readUi8(a,d):1;for(var m=b.colors=[],u=l;u--;){var r={};y(a,d,r,e,f);m.push(r)}3===g&&(m=b.higlightColor={},y(a,d,m,e,f));if(4===g||7===g){e=b.ratios=[];for(f=l;f--;)e.push(readUi8(a,d))}b.blurX=readFixed(a,d);b.blurY=readFixed(a,d);2!==g&&(b.angle=readFixed(a,d),b.distance=readFixed(a,
d));b.strength=readFixed8(a,d);b.innerShadow=readUb(a,d,1);b.knockout=readUb(a,d,1);b.compositeSource=readUb(a,d,1);3===g?b.onTop=readUb(a,d,1):readUb(a,d,1);4===g||7===g?b.passes=readUb(a,d,4):readUb(a,d,4);break;case 1:b.blurX=readFixed(a,d);b.blurY=readFixed(a,d);b.passes=readUb(a,d,5);readUb(a,d,3);break;case 5:l=b.columns=readUi8(a,d);m=b.rows=readUi8(a,d);b.divisor=readFloat(a,d);b.bias=readFloat(a,d);g=b.weights=[];for(l*=m;l--;)g.push(readFloat(a,d));g=b.defaultColor={};y(a,d,g,e,f);readUb(a,
d,6);b.clamp=readUb(a,d,1);b.preserveAlpha=readUb(a,d,1);break;case 6:b=b.matrix=[];for(e=20;e--;)b.push(readFloat(a,d))}}function F(a,d,b,e,f){var g=H(a,d,b,e,f),l=g.fillBits,g=g.lineBits,m=b.records=[];do{var u={},g=s(a,d,u,e,f,!1,l,g,!1,r);b=g.eos;var l=g.fillBits,g=g.lineBits,r=r;m.push(u)}while(!b)}return{"0":void 0,1:void 0,2:a,4:b,5:d,6:e,7:f,8:function(a,d,b){b||(b={});b.id=0;b.imgData=readBinary(a,d,0);b.mimeType="application/octet-stream";return b},9:function(a,d,b,e,f){b||(b={});var g=
b.color={};z(a,d,g,e,f);return b},10:function(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);for(var g=readUi16(a,d),l=b.glyphCount=g/2,m=[],u=l-1;u--;)m.push(readUi16(a,d));b.offsets=[g].concat(m);for(g=b.glyphs=[];l--;)m={},F(a,d,m,e,f),g.push(m);return b},11:g,12:l,13:void 0,14:function(a,d,b){b||(b={});b.id=readUi16(a,d);var e=readUi8(a,d);b.soundFormat=e>>4&15;b.soundRate=e>>2&3;b.soundSize=e>>1&1;b.soundType=e&1;b.samplesCount=readUi32(a,d);b.soundData=readBinary(a,d,0);return b},15:m,17:void 0,18:p,
19:function(a,d,b){b||(b={});b.data=readBinary(a,d,0);return b},20:r,21:e,22:a,23:void 0,24:void 0,26:b,28:d,32:a,33:g,34:f,35:e,36:r,37:function(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);var g=b.bbox={};w(a,d,g,e,f);var l=readUi16(a,d),g=b.hasText=l>>7&1;b.wordWrap=l>>6&1;b.multiline=l>>5&1;b.password=l>>4&1;b.readonly=l>>3&1;var m=b.hasColor=l>>2&1,u=b.hasMaxLength=l>>1&1,r=b.hasFont=l&1,p=b.hasFontClass=l>>15&1;b.autoSize=l>>14&1;var s=b.hasLayout=l>>13&1;b.noSelect=l>>12&1;b.border=l>>11&1;b.wasStatic=
l>>10&1;b.html=l>>9&1;b.useOutlines=l>>8&1;r&&(b.fontId=readUi16(a,d));p&&(b.fontClass=readString(a,d,0));r&&(b.fontHeight=readUi16(a,d));m&&(l=b.color={},y(a,d,l,e,f));u&&(b.maxLength=readUi16(a,d));s&&(b.align=readUi8(a,d),b.leftMargin=readUi16(a,d),b.rightMargin=readUi16(a,d),b.indent=readSi16(a,d),b.leading=readSi16(a,d));b.variableName=readString(a,d,0);g&&(b.initialText=readString(a,d,0));return b},39:void 0,43:function(a,d,b){b||(b={});b.name=readString(a,d,0);return b},45:p,46:a,48:u,56:function(a,
d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},57:void 0,58:void 0,59:l,60:void 0,61:void 0,62:void 0,64:void 0,65:void 0,66:void 0,69:function(a,d,b){b||(b={});readUb(a,d,1);b.useDirectBlit=readUb(a,d,1);b.useGpu=readUb(a,d,1);b.hasMetadata=readUb(a,d,1);b.doAbc=readUb(a,d,1);b.noCrossDomainCaching=readUb(a,d,1);b.relativeUrls=readUb(a,d,1);b.network=readUb(a,d,1);readUb(a,d,24);return b},70:b,71:void 0,
72:v,73:void 0,74:void 0,75:u,76:function(a,d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},77:void 0,78:function(a,d,b,e,f){b||(b={});b.symbolId=readUi16(a,d);var g=b.splitter={};w(a,d,g,e,f);return b},82:v,83:a,84:a,86:function(a,d,b){b||(b={});for(var e=readEncodedU32(a,d),f=b.scenes=[];e--;){var g={};g.offset=readEncodedU32(a,d);g.name=readString(a,d,0);f.push(g)}e=readEncodedU32(a,d);for(f=b.labels=
[];e--;)g={},g.frame=readEncodedU32(a,d),g.name=readString(a,d,0),f.push(g);return b},87:function(a,d,b){b||(b={});b.id=readUi16(a,d);readUi32(a,d);b.data=readBinary(a,d,0);return b},88:void 0,89:m,90:e,91:void 0}}(this),readHeader=function(a,b,d){d||(d={});var e=d.bbox={};align(a,b);var f=readUb(a,b,5),g=readSb(a,b,f),l=readSb(a,b,f),m=readSb(a,b,f),f=readSb(a,b,f);e.xMin=g;e.xMax=l;e.yMin=m;e.yMax=f;align(a,b);e=readUi8(a,b);d.frameRate=readUi8(a,b)+e/256;d.frameCount=readUi16(a,b);return d};
function readTags(a,b,d,e,f,g){var l=a.tags,m=b.bytes,p,r=null;a._readTag&&(r=a._readTag,a._readTag=null);try{for(;b.pos<b.end;){p=b.pos;b.ensure(2);var u=readUi16(m,b);if(!u){e=!0;break}var v=u>>6,w=u&63;63===w&&(b.ensure(4),w=readUi32(m,b));if(r){if(1===v&&1===r.code){r.repeat++;b.pos+=w;continue}l.push(r);f&&void 0!==r.id&&f(a);r=null}b.ensure(w);var z=b.substream(b.pos,b.pos+=w),y=z.bytes,w={code:v};if(39===v)w.type="sprite",w.id=readUi16(y,z),w.frameCount=readUi16(y,z),w.tags=[],readTags(w,z,
d,!0);else if(1===v)w.repeat=1;else{var B=tagHandler[v];B&&B(y,z,w,d,v)}r=w}r&&e?(r.finalTag=!0,l.push(r),f&&f(a)):a._readTag=r}catch(A){if(A!==StreamNoDataError)throw g&&g(A),A;b.pos=p;a._readTag=r}}function HeadTailBuffer(a){this.bufferSize=a||16;this.buffer=new Uint8Array(this.bufferSize);this.pos=0}
HeadTailBuffer.prototype={push:function(a,b){var d=this.pos+a.length;if(this.bufferSize<d){for(var e=this.bufferSize;e<d;)e<<=1;d=new Uint8Array(e);0<this.bufferSize&&d.set(this.buffer);this.buffer=d;this.bufferSize=e}this.buffer.set(a,this.pos);this.pos+=a.length;if(b)return this.pos>=b},getHead:function(a){return this.buffer.subarray(0,a)},getTail:function(a){return this.buffer.subarray(a,this.pos)},removeHead:function(a){a=this.getTail(a);this.buffer=new Uint8Array(this.bufferSize);this.buffer.set(a);
this.pos=a.length},get arrayBuffer(){return this.buffer.buffer},get length(){return this.pos},createStream:function(){return new Stream(this.arrayBuffer,0,this.length)}};function CompressedPipe(a,b){this.target=a;this.length=b;this.initialize=!0;this.buffer=new HeadTailBuffer(8096);this.state={bitBuffer:0,bitLength:0,compression:{header:null,distanceTable:null,literalTable:null,sym:null,len:null,sym2:null}};this.output={data:new Uint8Array(b),available:0,completed:!1}}
CompressedPipe.prototype={push:function(a,b){var d=this.buffer;if(this.initialize){if(!d.push(a,2))return;var e=d.getHead(2);verifyDeflateHeader(e);d.removeHead(2);this.initialize=!1}else d.push(a);e=d.createStream();e.bitBuffer=this.state.bitBuffer;e.bitLength=this.state.bitLength;var f=this.output,g=f.available;try{do inflateBlock(e,f,this.state.compression);while(e.pos<d.length&&!f.completed)}catch(l){if(l!==InflateNoDataError)throw l;}finally{this.state.bitBuffer=e.bitBuffer,this.state.bitLength=
e.bitLength}d.removeHead(e.pos);this.target.push(f.data.subarray(g,f.available),b)}};function BodyParser(a,b,d){this.swf={swfVersion:a,parseTime:0};this.buffer=new HeadTailBuffer(32768);this.initialize=!0;this.totalRead=0;this.length=b;this.options=d}
BodyParser.prototype={push:function(a,b){if(0!==a.length){var d=this.swf,e=d.swfVersion,f=this.buffer,g=this.options,l;if(this.initialize){if(!f.push(a,27))return;l=f.createStream();var m=l.bytes;readHeader(m,l,d);if(4420==readUi16(m,l)){l.ensure(4);var m=l.substream(l.pos,l.pos+=4),p={code:69};(0,tagHandler[69])(m.bytes,m,p,e,69);d.fileAttributes=p}else l.pos-=2,d.fileAttributes={};if(g.onstart)g.onstart(d);d.tags=[];this.initialize=!1}else f.push(a),l=f.createStream();m=!1;b&&(d.bytesLoaded=b.bytesLoaded,
d.bytesTotal=b.bytesTotal,m=b.bytesLoaded>=b.bytesTotal);p=performance.now();readTags(d,l,e,m,g.onprogress,g.onexception);d.parseTime+=performance.now()-p;e=l.pos;f.removeHead(e);this.totalRead+=e;if(g.oncomplete&&d.tags[d.tags.length-1].finalTag)g.oncomplete(d)}}};
SWF.parseAsync=function(a){var b=new HeadTailBuffer,d={push:function(e,f){if(void 0!==this.target)return this.target.push(e,f);if(!b.push(e,8))return null;var g=b.getHead(8),l=g[0],m=g[1],p=g[2];if((70===l||67===l)&&87===m&&83===p)l=67===l,g=g[3],m=b.createStream(),m.pos+=4,m=readUi32(null,m)-8,g=new BodyParser(g,m,a),l&&(g=new CompressedPipe(g,m)),g.push(b.getTail(8),f),d.target=g;else{var g=!1,r;255===l&&216===m&&255===p?(g=!0,r="image/jpeg"):137===l&&(80===m&&78===p)&&(g=!0,r="image/png");if(g){var u=
r,v=new Uint8Array(f.bytesTotal);v.set(e);var w=e.length;d.target={push:function(a){v.set(a,w);w+=a.length},close:function(){var d={},b;b="image/jpeg"==u?parseJpegChunks(d,v):[v];d={type:"image",props:d,data:new Blob(b,{type:u})};a.oncomplete&&a.oncomplete(d)}}}}b=null},close:function(){if(b){var d={command:"empty",data:b.buffer.subarray(0,b.pos)};a.oncomplete&&a.oncomplete(d)}void 0!==this.target&&this.target.close&&this.target.close()}};return d};
SWF.parse=function(a,b){b||(b={});var d=SWF.parseAsync(b),e=new Uint8Array(a);d.push(e,{bytesLoaded:e.length,bytesTotal:e.length});d.close()};var $RELEASE=!1,isWorker="undefined"===typeof window;
function defineSymbol(a,b){var d;switch(a.code){case 6:case 21:case 35:case 90:case 8:d=defineImage(a,b);break;case 20:case 36:d=defineBitmap(a);break;case 7:case 34:d=defineButton(a,b);break;case 37:d=defineText(a,b);break;case 10:case 48:case 75:case 91:d=defineFont(a,b);break;case 46:case 84:case 2:case 22:case 32:case 83:d=defineShape(a,b);break;case 14:d=defineSound(a,b);break;case 87:d={type:"binary",id:a.id,data:a.data};break;case 39:d={};for(var e={type:"frame"},f=[],g=a.tags,l=null,m=0,p=
null,r=0,u=g.length;r<u;r++){var v=g[r];switch(v.code){case 12:l||(l=[]);l.push(m);l.push(v.actionsData);break;case 15:(e.startSounds||(e.startSounds=[])).push(v);break;case 18:try{p=createSoundStream(v),e.soundStream=p.info}catch(w){}break;case 19:p&&(e.soundStreamBlock=p.decode(v.data));break;case 43:e.labelName=v.name;break;case 4:case 26:case 70:d[v.depth]=v;break;case 5:case 28:d[v.depth]=null;break;case 1:m+=v.repeat,e.repeat=v.repeat,e.depths=d,f.push(e),d={},e={type:"frame"}}}d={type:"sprite",
id:a.id,frameCount:a.frameCount,frames:f,frameScripts:l};break;case 11:case 33:d=defineLabel(a,b)}if(!d)return{command:"error",message:"unknown symbol type: "+a.code};d.isSymbol=!0;return b[a.id]=d}
function createParsingContext(a){var b={},d={},e={type:"frame"},f=0,g=null,l=0;return{onstart:function(d){a({command:"init",result:d})},onprogress:function(m){if(Date.now()-l>1E3/24||m.bytesLoaded===m.bytesTotal)a({command:"progress",result:{bytesLoaded:m.bytesLoaded,bytesTotal:m.bytesTotal}}),l=Date.now();m=m.tags;for(var p=m.length;f<p;f++){var r=m[f];if("id"in r)r=defineSymbol(r,d),a(r,r.transferables);else switch(r.code){case 86:e.sceneData=r;break;case 78:a({isSymbol:!0,id:r.symbolId,updates:{scale9Grid:r.splitter}});
break;case 82:case 72:var u=e.abcBlocks;u?u.push({data:r.data,flags:r.flags}):e.abcBlocks=[{data:r.data,flags:r.flags}];break;case 12:(u=e.actionBlocks)?u.push(r.actionsData):e.actionBlocks=[r.actionsData];break;case 59:(e.initActionBlocks||(e.initActionBlocks=[])).push({spriteId:r.spriteId,actionsData:r.actionsData});break;case 15:u=e.startSounds;u||(e.startSounds=u=[]);u.push(r);break;case 18:try{g=createSoundStream(r),e.soundStream=g.info}catch(v){}break;case 19:g&&(e.soundStreamBlock=g.decode(r.data));
break;case 56:u=e.exports;e.exports=u?u.concat(r.exports):r.exports.slice(0);break;case 76:u=e.symbolClasses;e.symbolClasses=u?u.concat(r.exports):r.exports.slice(0);break;case 43:e.labelName=r.name;break;case 4:case 26:case 70:b[r.depth]=r;break;case 5:case 28:b[r.depth]=null;break;case 9:e.bgcolor=r.color;break;case 1:e.repeat=r.repeat,e.depths=b,e.complete=!!r.finalTag,a(e),b={},e={type:"frame"}}}},oncomplete:function(d){a(d);var b;"number"===typeof d.swfVersion&&(b=d.bbox,b={topic:"parseInfo",
parseTime:d.parseTime,bytesTotal:d.bytesTotal,swfVersion:d.swfVersion,frameRate:d.frameRate,width:(b.xMax-b.xMin)/20,height:(b.yMax-b.yMin)/20,isAvm2:!!d.fileAttributes.doAbc});a({command:"complete",stats:b})},onexception:function(d){a({type:"exception",message:d.message,stack:d.stack})}}}function parseBytes(a,b){SWF.parse(a,createParsingContext(b))}
function ResourceLoader(a){this.subscription=null;var b=this;isWorker?(this.messenger=a,a.onmessage=function(a){b.listener(a.data)}):this.messenger={postMessage:function(a){b.onmessage({data:a})}}}
ResourceLoader.prototype={terminate:function(){this.listener=this.messenger=null},onmessage:function(a){this.listener(a.data)},postMessage:function(a){this.listener&&this.listener(a)},listener:function(a){this.subscription?this.subscription.callback(a.data,a.progress):"pipe:"===a?(this.subscription={subscribe:function(a){this.callback=a}},this.parseLoadedData(this.messenger,this.subscription)):this.parseLoadedData(this.messenger,a)},parseLoadedData:function(a,b){function d(d,b){try{a.postMessage(d,
b)}catch(e){if("DataCloneError"!=e)throw e;a.postMessage(d)}}if(b instanceof ArrayBuffer)parseBytes(b,d);else if("subscribe"in b){var e=SWF.parseAsync(createParsingContext(d));b.subscribe(function(a,d){a?e.push(a,d):e.close()})}else if("undefined"!==typeof FileReaderSync){var f=new FileReaderSync,f=f.readAsArrayBuffer(b);parseBytes(f,d)}else f=new FileReader,f.onload=function(){parseBytes(this.result,d)},f.readAsArrayBuffer(b)}};if(isWorker)var loader=new ResourceLoader(this);
var $DEBUG,release=!0,c4CoerceNonPrimitiveParameters=!1,c4CoerceNonPrimitive=!1,c4AsTypeLate=!0,error=Shumway.Debug.error,assertNotImplemented=Shumway.Debug.assertNotImplemented,warning=Shumway.Debug.warning,notImplemented=Shumway.Debug.notImplemented,somewhatImplemented=Shumway.Debug.somewhatImplemented,unexpected=Shumway.Debug.unexpected,defineReadOnlyProperty=Shumway.ObjectUtilities.defineReadOnlyProperty,createEmptyObject=Shumway.ObjectUtilities.createEmptyObject,makeForwardingGetter=Shumway.FunctionUtilities.makeForwardingGetter,
makeForwardingSetter=Shumway.FunctionUtilities.makeForwardingSetter,bindSafely=Shumway.FunctionUtilities.bindSafely,cloneObject=Shumway.ObjectUtilities.cloneObject,copyProperties=Shumway.ObjectUtilities.copyProperties,toSafeString=Shumway.StringUtilities.toSafeString,toSafeArrayString=Shumway.StringUtilities.toSafeArrayString,getLatestGetterOrSetterPropertyDescriptor=Shumway.ObjectUtilities.getLatestGetterOrSetterPropertyDescriptor,defineNonEnumerableGetterOrSetter=Shumway.ObjectUtilities.defineNonEnumerableGetterOrSetter,
defineNonEnumerableGetter=Shumway.ObjectUtilities.defineNonEnumerableGetter,defineNonEnumerableSetter=Shumway.ObjectUtilities.defineNonEnumerableSetter,defineNonEnumerableProperty=Shumway.ObjectUtilities.defineNonEnumerableProperty,defineNonEnumerableForwardingProperty=Shumway.ObjectUtilities.defineNonEnumerableForwardingProperty,defineNewNonEnumerableProperty=Shumway.ObjectUtilities.defineNewNonEnumerableProperty,isNumeric=Shumway.isNumeric,isNullOrUndefined=Shumway.isNullOrUndefined,isPowerOfTwo=
Shumway.IntegerUtilities.isPowerOfTwo;function time(a,b){for(var d=performance.now(),e=0;e<b;e++)a();d=(performance.now()-d)/b;console.info("Took: "+d.toFixed(2)+"ms.");return d}function clamp(a,b,d){return a<b?b:a>d?d:a}var fromCharCodeArray=Shumway.StringUtilities.fromCharCodeArray;function hasOwnProperty(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var toKeyValueArray=Shumway.ObjectUtilities.toKeyValueArray,boxValue=Shumway.ObjectUtilities.boxValue;
function isObject(a){return"object"===typeof a||"function"===typeof a}function isString(a){return"string"===typeof a}function isFunction(a){return"function"===typeof a}function isNumber(a){return"number"===typeof a}function toNumber(a){return+a}function setBitFlags(a,b,d){return d?a|b:a&~b}function getBitFlags(a,b){return!!(a&b)}
(function(){function a(a,d,b){a[d]||Object.defineProperty(a,d,{value:b,writable:!0,configurable:!0,enumerable:!1})}var b=String.prototype;a(b,"padRight",function(a,d){var b=this,l=b.replace(/\033\[[0-9]*m/g,"").length;if(!a||l>=d)return b;for(var l=(d-l)/a.length,m=0;m<l;m++)b+=a;return b});a(b,"padLeft",function(a,d){var b=this,l=b.length;if(!a||l>=d)return b;for(var l=(d-l)/a.length,m=0;m<l;m++)b=a+b;return b});a(b,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});a(b,"endsWith",function(a){return-1!==
this.indexOf(a,this.length-a.length)});b=Array.prototype;a(b,"popMany",function(a){!0;var d=this.length-a,b=this.slice(d,this.length);this.splice(d,a);return b});a(b,"pushMany",function(a){for(var d=0;d<a.length;d++)this.push(a[d])});a(b,"clone",function(){return this.slice(0)});a(b,"first",function(){!0;return this[0]});a(b,"last",function(){!0;return this[this.length-1]});a(b,"peek",function(){!0;return this[this.length-1]});a(b,"empty",function(){return 0===this.length});a(b,"pushUnique",function(a){for(var d=
0,b=this.length;d<b;d++)if(this[d]===a)return;this.push(a)});var d;"undefined"!==typeof Map&&(d=new Map).clear?a(b,"unique",function(){for(var a=[],b=0;b<this.length;b++)d.has(this[b])||(a.push(this[b]),d.set(this[b],!0));d.clear();return a}):a(b,"unique",function(){for(var a=[],d=0;d<this.length;d++)a.pushUnique(this[d]);return a});a(b,"replace",function(a,d){if(a===d)return 0;for(var b=0,l=0;l<this.length;l++)this[l]===a&&(this[l]=d,b++);return b});a(b,"count",function(a){for(var d=0,b=0;b<this.length;b++)this[b]===
a&&d++;return d});a(b,"notEmpty",function(){return 0<this.length});a(b,"contains",function(a){return 0<=this.indexOf(a)});a(b,"top",function(){return this.length&&this[this.length-1]});a(b,"mapWithIndex",function(a){for(var d=[],b=0;b<this.length;b++)d.push(a(this[b],b));return d})})();
var utf8decode=Shumway.StringUtilities.utf8decode,utf8encode=Shumway.StringUtilities.utf8encode,escapeString=Shumway.StringUtilities.escapeString,bitCount=Shumway.IntegerUtilities.bitCount,ones=Shumway.IntegerUtilities.ones,leadingZeros=Shumway.IntegerUtilities.leadingZeros,trailingZeros=Shumway.IntegerUtilities.trailingZeros,getFlags=Shumway.IntegerUtilities.getFlags;
function BitSetFunctor(a){function b(){this.dirty=this.count=0;this.size=e;this.bits=new Uint32Array(e>>5)}function d(){this.dirty=this.count=0;this.size=e;this.bits=0}var e=a+31>>5<<5,f=1===e>>5,g=f?d:b;g.ADDRESS_BITS_PER_WORD=5;g.BITS_PER_WORD=32;g.BIT_INDEX_MASK=31;g.singleword=f;b.prototype={recount:function(){if(this.dirty){for(var a=this.bits,d=0,b=0,e=a.length;b<e;b++)var f=a[b],f=f-(f>>1&1431655765),f=(f&858993459)+(f>>2&858993459),d=d+(16843009*(f+(f>>4)&252645135)>>24);this.count=d;this.dirty=
0}},set:function(a){var d=a>>5,b=this.bits[d];a=b|1<<(a&31);this.bits[d]=a;this.dirty|=b^a},setAll:function(){for(var a=this.bits,d=0,b=a.length;d<b;d++)a[d]=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;for(var d=0,b=this.bits.length;d<b;d++)this.bits[d]=a.bits[d]},clear:function(a){var d=a>>5,b=this.bits[d];a=b&~(1<<(a&31));this.bits[d]=a;this.dirty|=b^a},get:function(a){return 0!==(this.bits[a>>5]&1<<(a&31))},clearAll:function(){for(var a=
this.bits,d=0,b=a.length;d<b;d++)a[d]=0;this.dirty=this.count=0},_union:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g|a[e];b[e]=w;d|=g^w}this.dirty=d},intersect:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g&a[e];b[e]=w;d|=g^w}this.dirty=d},subtract:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g&~a[e];b[e]=w;d|=g^w}this.dirty=d},negate:function(){for(var a=
this.dirty,d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b],g=~f;d[b]=g;a|=f^g}this.dirty=a},forEach:function(a){!0;for(var d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b];if(f)for(var g=0;32>g;g++)f&1<<g&&a(32*b+g)}},toArray:function(){for(var a=[],d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b];if(f)for(var g=0;32>g;g++)f&1<<g&&a.push(32*b+g)}return a},equals:function(a){if(this.size!==a.size)return!1;var d=this.bits;a=a.bits;for(var b=0,e=d.length;b<e;b++)if(d[b]!==a[b])return!1;return!0},contains:function(a){if(this.size!==
a.size)return!1;var d=this.bits;a=a.bits;for(var b=0,e=d.length;b<e;b++)if((d[b]|a[b])!==d[b])return!1;return!0},toBitString:function(d,b){d=d||"1";b=b||"0";for(var e="",f=0;f<a;f++)e+=this.get(f)?d:b;return e},length:a,toString:function(d){for(var b=[],e=0;e<a;e++)this.get(e)&&b.push(d?d[e]:e);return b.join(", ")},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new b;a._union(this);return a}};d.prototype={recount:function(){if(this.dirty){var a=this.bits,a=a-(a>>1&
1431655765),a=(a&858993459)+(a>>2&858993459);this.count=0+(16843009*(a+(a>>4)&252645135)>>24);this.dirty=0}},set:function(a){var d=this.bits;this.bits=a=d|1<<(a&31);this.dirty|=d^a},setAll:function(){this.bits=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;this.bits=a.bits},clear:function(a){var d=this.bits;this.bits=a=d&~(1<<(a&31));this.dirty|=d^a},get:function(a){return 0!==(this.bits&1<<(a&31))},clearAll:function(){this.dirty=
this.count=this.bits=0},_union:function(a){var d=this.bits;this.bits=a=d|a.bits;this.dirty=d^a},intersect:function(a){var d=this.bits;this.bits=a=d&a.bits;this.dirty=d^a},subtract:function(a){var d=this.bits;this.bits=a=d&~a.bits;this.dirty=d^a},negate:function(){var a=this.bits,d=~a;this.bits=d;this.dirty=a^d},forEach:function(a){!0;var d=this.bits;if(d)for(var b=0;32>b;b++)d&1<<b&&a(b)},toArray:function(){var a=[],d=this.bits;if(d)for(var b=0;32>b;b++)d&1<<b&&a.push(b);return a},equals:function(a){return this.bits===
a.bits},contains:function(a){var d=this.bits;return(d|a.bits)===d},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new d;a._union(this);return a},toBitString:b.prototype.toBitString,toString:b.prototype.toString,length:a};return g}
var Map=function(){function a(){this.elements={}}a.prototype.set=function(a,d){this.elements[a]=d};a.prototype.get=function(a){if(this.has(a))return this.elements[a]};a.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this.elements,a)};a.prototype.remove=function(a){this.has(a)&&delete this.elements[a]};return a}();
(function(){function a(){this.id="$weakmap"+b++}if("function"!==typeof this.WeakMap){var b=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},get:function(a,b){return a.hasOwnProperty(this.id)?a[this.id]:b},set:function(a,b){Object.defineProperty(a,this.id,{value:b,enumerable:!1,configurable:!0})}};this.WeakMap=a}})();
var Callback=function(){function a(){this.queues={}}a.prototype.register=function(a,d){var e=this.queues[a];if(e){if(-1<e.indexOf(d))return}else e=this.queues[a]=[];e.push(d)};a.prototype.unregister=function(a,d){var e=this.queues[a];if(e){var f=e.indexOf(d);-1!==f&&e.splice(f,1);0===e.length&&(this.queues[a]=null)}};a.prototype.notify=function(a,d){var e=this.queues[a];if(e){e=e.slice();d=sliceArguments(arguments,0);for(var f=0;f<e.length;f++)e[f].apply(null,d)}};a.prototype.notify1=function(a,d){var e=
this.queues[a];if(e)for(var e=e.slice(),f=0;f<e.length;f++)(0,e[f])(a,d)};return a}();function lazyClass(a,b,d){Object.defineProperty(a,b,{get:function(){var e=performance.now(),f=d();print("Initialized Class: "+b+" "+(performance.now()-e).toFixed(4));Object.defineProperty(a,b,{value:f,writable:!0});return f},configurable:!0})}
var hashBytesTo32BitsAdler=Shumway.HashUtilities.hashBytesTo32BitsAdler,hashBytesTo32BitsMD5=Shumway.HashUtilities.hashBytesTo32BitsMD5,variableLengthEncodeInt32=Shumway.StringUtilities.variableLengthEncodeInt32,fromEncoding=Shumway.StringUtilities.fromEncoding,variableLengthDecodeIdentifier=Shumway.StringUtilities.variableLengthDecodeInt32,toEncoding=Shumway.StringUtilities.toEncoding;
(function(a){var b=a.Metrics||(a.Metrics={}),d=function(d,b){this._parent=d;this._timers=a.ObjectUtilities.createMap();this._name=b;this._count=this._total=this._last=this._begin=0};d.time=function(a,b){d.start(a);b();d.stop()};d.start=function(a){d._top=d._top._timers[a]||(d._top._timers[a]=new d(d._top,a));d._top.start();a=d._flat._timers[a]||(d._flat._timers[a]=new d(d._flat,a));a.start();d._flatStack.push(a)};d.stop=function(){d._top.stop();d._top=d._top._parent;d._flatStack.pop().stop()};d.stopStart=
function(a){d.stop();d.start(a)};d.prototype.start=function(){this._begin=a.getTicks()};d.prototype.stop=function(){this._last=a.getTicks()-this._begin;this._total+=this._last;this._count+=1};d.prototype.toJSON=function(){return{name:this._name,total:this._total,timers:this._timers}};d.prototype.trace=function(a){a.enter(this._name+": "+this._total.toFixed(2)+" ms, count: "+this._count+", average: "+(this._total/this._count).toFixed(2)+" ms");for(var d in this._timers)this._timers[d].trace(a);a.outdent()};
d.trace=function(a){d._base.trace(a);d._flat.trace(a)};d._base=new d(null,"Total");d._top=d._base;d._flat=new d(null,"Flat");d._flatStack=[];b.Timer=d;var e=function(a){this._enabled=a;this.clear()};e.prototype.setEnabled=function(a){this._enabled=a};e.prototype.clear=function(){this._counts=a.ObjectUtilities.createMap()};e.prototype.toJSON=function(){return{counts:this._counts}};e.prototype.count=function(a,d){"undefined"===typeof d&&(d=1);if(this._enabled)return void 0===this._counts[a]&&(this._counts[a]=
0),this._counts[a]+=d,this._counts[a]};e.prototype.trace=function(a){for(var d in this._counts)a.writeLn(d+": "+this._counts[d])};e.prototype.traceSorted=function(a){var d=[],b;for(b in this._counts)d.push([b,this._counts[b]]);d.sort(function(a,d){return d[1]-a[1]});d.forEach(function(d){a.writeLn(d[0]+": "+d[1])})};b.Counter=e;e=function(a){this._samples=new Float64Array(a);this._index=this._count=0};e.prototype.push=function(a){this._count<this._samples.length&&this._count++;this._index++;this._samples[this._index%
this._samples.length]=a};e.prototype.average=function(){for(var a=0,d=0;d<this._count;d++)a+=this._samples[d];return a/this._count};b.Average=e})(Shumway||(Shumway={}));
var Timer=Shumway.Metrics.Timer,Counter=new Shumway.Metrics.Counter(!0),Timer=Shumway.Metrics.Timer,Counter=new Shumway.Metrics.Counter(!0),FrameCounter=new Shumway.Metrics.Counter(!0),avm2Options=shumwayOptions.register(new OptionSet("AVM2")),sysCompiler=avm2Options.register(new Option("sysCompiler","sysCompiler","boolean",!0,"system compiler/interpreter")),appCompiler=avm2Options.register(new Option("appCompiler","appCompiler","boolean",!0,"application compiler/interpreter")),traceLevel=avm2Options.register(new Option("t",
"traceLevel","number",0,"trace level",{choices:{off:0,normal:1,verbose:2}}));window.print=function(a){console.log(a)};
var CONSTANT_Undefined=0,CONSTANT_Utf8=1,CONSTANT_Float=2,CONSTANT_Int=3,CONSTANT_UInt=4,CONSTANT_PrivateNs=5,CONSTANT_Double=6,CONSTANT_QName=7,CONSTANT_Namespace=8,CONSTANT_Multiname=9,CONSTANT_False=10,CONSTANT_True=11,CONSTANT_Null=12,CONSTANT_QNameA=13,CONSTANT_MultinameA=14,CONSTANT_RTQName=15,CONSTANT_RTQNameA=16,CONSTANT_RTQNameL=17,CONSTANT_RTQNameLA=18,CONSTANT_NameL=19,CONSTANT_NameLA=20,CONSTANT_NamespaceSet=21,CONSTANT_PackageNamespace=22,CONSTANT_PackageInternalNs=23,CONSTANT_ProtectedNamespace=
24,CONSTANT_ExplicitNamespace=25,CONSTANT_StaticProtectedNs=26,CONSTANT_MultinameL=27,CONSTANT_MultinameLA=28,CONSTANT_TypeName=29,CONSTANT_ClassSealed=1,CONSTANT_ClassFinal=2,CONSTANT_ClassInterface=4,CONSTANT_ClassProtectedNs=8,TRAIT_Slot=0,TRAIT_Method=1,TRAIT_Getter=2,TRAIT_Setter=3,TRAIT_Class=4,TRAIT_Function=5,TRAIT_Const=6,ATTR_Final=1,ATTR_Override=2,ATTR_Metadata=4,SLOT_var=0,SLOT_method=1,SLOT_getter=2,SLOT_setter=3,SLOT_class=4,SLOT_function=6,METHOD_Arguments=1,METHOD_Activation=2,METHOD_Needrest=
4,METHOD_HasOptional=8,METHOD_IgnoreRest=16,METHOD_Native=32,METHOD_Setsdxns=64,METHOD_HasParamNames=128,OP_bkpt=1,OP_nop=2,OP_throw=3,OP_getsuper=4,OP_setsuper=5,OP_dxns=6,OP_dxnslate=7,OP_kill=8,OP_label=9,OP_lf32x4=10,OP_sf32x4=11,OP_ifnlt=12,OP_ifnle=13,OP_ifngt=14,OP_ifnge=15,OP_jump=16,OP_iftrue=17,OP_iffalse=18,OP_ifeq=19,OP_ifne=20,OP_iflt=21,OP_ifle=22,OP_ifgt=23,OP_ifge=24,OP_ifstricteq=25,OP_ifstrictne=26,OP_lookupswitch=27,OP_pushwith=28,OP_popscope=29,OP_nextname=30,OP_hasnext=31,OP_pushnull=
32,OP_pushundefined=33,OP_pushfloat=34,OP_nextvalue=35,OP_pushbyte=36,OP_pushshort=37,OP_pushtrue=38,OP_pushfalse=39,OP_pushnan=40,OP_pop=41,OP_dup=42,OP_swap=43,OP_pushstring=44,OP_pushint=45,OP_pushuint=46,OP_pushdouble=47,OP_pushscope=48,OP_pushnamespace=49,OP_hasnext2=50,OP_li8=53,OP_li16=54,OP_li32=55,OP_lf32=56,OP_lf64=57,OP_si8=58,OP_si16=59,OP_si32=60,OP_sf32=61,OP_sf64=62,OP_newfunction=64,OP_call=65,OP_construct=66,OP_callmethod=67,OP_callstatic=68,OP_callsuper=69,OP_callproperty=70,OP_returnvoid=
71,OP_returnvalue=72,OP_constructsuper=73,OP_constructprop=74,OP_callsuperid=75,OP_callproplex=76,OP_callinterface=77,OP_callsupervoid=78,OP_callpropvoid=79,OP_sxi1=80,OP_sxi8=81,OP_sxi16=82,OP_applytype=83,OP_pushfloat4=84,OP_newobject=85,OP_newarray=86,OP_newactivation=87,OP_newclass=88,OP_getdescendants=89,OP_newcatch=90,OP_findpropstrict=93,OP_findproperty=94,OP_finddef=95,OP_getlex=96,OP_setproperty=97,OP_getlocal=98,OP_setlocal=99,OP_getglobalscope=100,OP_getscopeobject=101,OP_getproperty=102,
OP_getouterscope=103,OP_initproperty=104,OP_setpropertylate=105,OP_deleteproperty=106,OP_deletepropertylate=107,OP_getslot=108,OP_setslot=109,OP_getglobalslot=110,OP_setglobalslot=111,OP_convert_s=112,OP_esc_xelem=113,OP_esc_xattr=114,OP_convert_i=115,OP_convert_u=116,OP_convert_d=117,OP_convert_b=118,OP_convert_o=119,OP_checkfilter=120,OP_convert_f=121,OP_unplus=122,OP_convert_f4=123,OP_coerce=128,OP_coerce_b=129,OP_coerce_a=130,OP_coerce_i=131,OP_coerce_d=132,OP_coerce_s=133,OP_astype=134,OP_astypelate=
135,OP_coerce_u=136,OP_coerce_o=137,OP_negate=144,OP_increment=145,OP_inclocal=146,OP_decrement=147,OP_declocal=148,OP_typeof=149,OP_not=150,OP_bitnot=151,OP_add=160,OP_subtract=161,OP_multiply=162,OP_divide=163,OP_modulo=164,OP_lshift=165,OP_rshift=166,OP_urshift=167,OP_bitand=168,OP_bitor=169,OP_bitxor=170,OP_equals=171,OP_strictequals=172,OP_lessthan=173,OP_lessequals=174,OP_greaterthan=175,OP_greaterequals=176,OP_instanceof=177,OP_istype=178,OP_istypelate=179,OP_in=180,OP_increment_i=192,OP_decrement_i=
193,OP_inclocal_i=194,OP_declocal_i=195,OP_negate_i=196,OP_add_i=197,OP_subtract_i=198,OP_multiply_i=199,OP_getlocal0=208,OP_getlocal1=209,OP_getlocal2=210,OP_getlocal3=211,OP_setlocal0=212,OP_setlocal1=213,OP_setlocal2=214,OP_setlocal3=215,OP_invalid=237,OP_debug=239,OP_debugline=240,OP_debugfile=241,OP_bkptline=242,OP_timestamp=243,INT_MIN_VALUE=-2147483648,INT_MAX_VALUE=2147483647,UINT_MIN_VALUE=0,UINT_MAX_VALUE=4294967295,SORT_CASEINSENSITIVE=1,SORT_DESCENDING=2,SORT_UNIQUESORT=4,SORT_RETURNINDEXEDARRAY=
8,SORT_NUMERIC=16;
(function(a){var b=a.AVM2||(a.AVM2={}),d=function(a){for(var d=0;d<arguments.length-1;d++);var b=a.message;Array.prototype.slice.call(arguments,1).forEach(function(a,d){b=b.replace("%"+(d+1),a)});return"Error #"+a.code+": "+b};b.Errors={CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,
message:"Class %1 could not be found."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},
InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,message:"Parameter %1 must be one of the accepted values."},ArgumentError:{code:2015,message:"Invalid BitmapData."},CompressedDataError:{code:2058,message:"There was an error decompressing the data."},SocketConnectError:{code:2011,message:"Socket connection failed to %1:%2."},
CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."},ExternalInterfaceNotAvailableError:{code:2067,message:"The ExternalInterface is not available in this container. ExternalInterface requires Internet Explorer ActiveX, Firefox, Mozilla 1.7.5 and greater, or other browsers that support NPRuntime."}};b.getErrorMessage=function(a){for(var d in b.Errors)if(b.Errors[d].code==
a)return"Error #"+a+": "+b.Errors[d].message;return"Error #"+a+": (unknown)"};b.formatErrorMessage=d;b.translateErrorMessage=function(e){if(e.type)switch(e.type){case "undefined_method":return d(b.Errors.CallOfNonFunctionError,"value");default:throw a.Debug.notImplemented(e.type);}else return 0<=e.message.indexOf("is not a function")?d(b.Errors.CallOfNonFunctionError,"value"):e.message}})(Shumway||(Shumway={}));
var Errors=Shumway.AVM2.Errors,getErrorMessage=Shumway.AVM2.getErrorMessage,formatErrorMessage=Shumway.AVM2.formatErrorMessage,translateErrorMessage=Shumway.AVM2.translateErrorMessage,Errors=Shumway.AVM2.Errors,getErrorMessage=Shumway.AVM2.getErrorMessage,formatErrorMessage=Shumway.AVM2.formatErrorMessage,translateErrorMessage=Shumway.AVM2.translateErrorMessage;
(function(a){var b=a.AVM2||(a.AVM2={});b.opcodeTable=[null,{name:"bkpt",canThrow:!1,operands:[]},{name:"nop",canThrow:!1,operands:[]},{name:"throw",canThrow:!0,operands:[]},{name:"getsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"setsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"dxns",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"dxnslate",canThrow:!0,operands:[]},{name:"kill",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},
{name:"label",canThrow:!1,operands:[]},{name:"lf32x4",canThrow:!0,operands:[]},{name:"sf32x4",canThrow:!0,operands:[]},{name:"ifnlt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifnle",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifngt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifnge",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"jump",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"iftrue",canThrow:!1,
operands:[{name:"offset",size:"s24",type:""}]},{name:"iffalse",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifeq",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifne",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"iflt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifle",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifgt",canThrow:!0,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifge",canThrow:!0,
operands:[{name:"offset",size:"s24",type:""}]},{name:"ifstricteq",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"ifstrictne",canThrow:!1,operands:[{name:"offset",size:"s24",type:""}]},{name:"lookupswitch",canThrow:!1,operands:null},{name:"pushwith",canThrow:!1,operands:[]},{name:"popscope",canThrow:!1,operands:[]},{name:"nextname",canThrow:!0,operands:[]},{name:"hasnext",canThrow:!0,operands:[]},{name:"pushnull",canThrow:!1,operands:[]},{name:"pushundefined",canThrow:!1,operands:[]},
null,{name:"nextvalue",canThrow:!0,operands:[]},{name:"pushbyte",canThrow:!1,operands:[{name:"value",size:"s08",type:""}]},{name:"pushshort",canThrow:!1,operands:[{name:"value",size:"s16",type:""}]},{name:"pushtrue",canThrow:!1,operands:[]},{name:"pushfalse",canThrow:!1,operands:[]},{name:"pushnan",canThrow:!1,operands:[]},{name:"pop",canThrow:!1,operands:[]},{name:"dup",canThrow:!1,operands:[]},{name:"swap",canThrow:!1,operands:[]},{name:"pushstring",canThrow:!1,operands:[{name:"index",size:"u30",
type:"S"}]},{name:"pushint",canThrow:!1,operands:[{name:"index",size:"u30",type:"I"}]},{name:"pushuint",canThrow:!1,operands:[{name:"index",size:"u30",type:"U"}]},{name:"pushdouble",canThrow:!1,operands:[{name:"index",size:"u30",type:"D"}]},{name:"pushscope",canThrow:!1,operands:[]},{name:"pushnamespace",canThrow:!1,operands:[{name:"index",size:"u30",type:"N"}]},{name:"hasnext2",canThrow:!0,operands:[{name:"object",size:"u30",type:""},{name:"index",size:"u30",type:""}]},{name:"lix8",canThrow:!0,operands:null},
{name:"lix16",canThrow:!0,operands:null},{name:"li8",canThrow:!0,operands:[]},{name:"li16",canThrow:!0,operands:[]},{name:"li32",canThrow:!0,operands:[]},{name:"lf32",canThrow:!0,operands:[]},{name:"lf64",canThrow:!0,operands:[]},{name:"si8",canThrow:!0,operands:[]},{name:"si16",canThrow:!0,operands:[]},{name:"si32",canThrow:!0,operands:[]},{name:"sf32",canThrow:!0,operands:[]},{name:"sf64",canThrow:!0,operands:[]},null,{name:"newfunction",canThrow:!0,operands:[{name:"index",size:"u30",type:"MI"}]},
{name:"call",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"construct",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"callmethod",canThrow:!0,operands:[{name:"index",size:"u30",type:""},{name:"argCount",size:"u30",type:""}]},{name:"callstatic",canThrow:!0,operands:[{name:"index",size:"u30",type:"MI"},{name:"argCount",size:"u30",type:""}]},{name:"callsuper",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callproperty",
canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"returnvoid",canThrow:!1,operands:[]},{name:"returnvalue",canThrow:!0,operands:[]},{name:"constructsuper",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"constructprop",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callsuperid",canThrow:!0,operands:null},{name:"callproplex",canThrow:!0,operands:[{name:"index",size:"u30",
type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callinterface",canThrow:!0,operands:null},{name:"callsupervoid",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"callpropvoid",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"},{name:"argCount",size:"u30",type:""}]},{name:"sxi1",canThrow:!1,operands:[]},{name:"sxi8",canThrow:!1,operands:[]},{name:"sxi16",canThrow:!1,operands:[]},{name:"applytype",canThrow:!0,operands:[{name:"argCount",
size:"u30",type:""}]},{name:"pushfloat4",canThrow:!1,operands:null},{name:"newobject",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"newarray",canThrow:!0,operands:[{name:"argCount",size:"u30",type:""}]},{name:"newactivation",canThrow:!0,operands:[]},{name:"newclass",canThrow:!0,operands:[{name:"index",size:"u30",type:"CI"}]},{name:"getdescendants",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"newcatch",canThrow:!0,operands:[{name:"index",size:"u30",type:"EI"}]},
{name:"findpropglobalstrict",canThrow:!0,operands:null},{name:"findpropglobal",canThrow:!0,operands:null},{name:"findpropstrict",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"findproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"finddef",canThrow:!0,operands:null},{name:"getlex",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"setproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"getlocal",canThrow:!1,operands:[{name:"index",
size:"u30",type:""}]},{name:"setlocal",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"getglobalscope",canThrow:!1,operands:[]},{name:"getscopeobject",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"getproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"getouterscope",canThrow:!1,operands:null},{name:"initproperty",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},null,{name:"deleteproperty",canThrow:!0,operands:[{name:"index",size:"u30",
type:"M"}]},null,{name:"getslot",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"setslot",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"getglobalslot",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"setglobalslot",canThrow:!1,operands:[{name:"index",size:"u30",type:""}]},{name:"convert_s",canThrow:!0,operands:[]},{name:"esc_xelem",canThrow:!0,operands:[]},{name:"esc_xattr",canThrow:!0,operands:[]},{name:"convert_i",canThrow:!0,operands:[]},{name:"convert_u",
canThrow:!0,operands:[]},{name:"convert_d",canThrow:!0,operands:[]},{name:"convert_b",canThrow:!0,operands:[]},{name:"convert_o",canThrow:!0,operands:[]},{name:"checkfilter",canThrow:!0,operands:[]},{name:"convert_f",canThrow:!0,operands:[]},{name:"unplus",canThrow:!0,operands:[]},{name:"convert_f4",canThrow:!0,operands:[]},null,null,null,null,{name:"coerce",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"coerce_b",canThrow:!0,operands:[]},{name:"coerce_a",canThrow:!0,operands:[]},
{name:"coerce_i",canThrow:!0,operands:[]},{name:"coerce_d",canThrow:!0,operands:[]},{name:"coerce_s",canThrow:!0,operands:[]},{name:"astype",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"astypelate",canThrow:!0,operands:[]},{name:"coerce_u",canThrow:!0,operands:[]},{name:"coerce_o",canThrow:!0,operands:[]},null,null,null,null,null,null,{name:"negate",canThrow:!0,operands:[]},{name:"increment",canThrow:!0,operands:[]},{name:"inclocal",canThrow:!0,operands:[{name:"index",size:"u30",
type:""}]},{name:"decrement",canThrow:!0,operands:[]},{name:"declocal",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"typeof",canThrow:!1,operands:[]},{name:"not",canThrow:!1,operands:[]},{name:"bitnot",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,{name:"add",canThrow:!0,operands:[]},{name:"subtract",canThrow:!0,operands:[]},{name:"multiply",canThrow:!0,operands:[]},{name:"divide",canThrow:!0,operands:[]},{name:"modulo",canThrow:!0,operands:[]},{name:"lshift",
canThrow:!0,operands:[]},{name:"rshift",canThrow:!0,operands:[]},{name:"urshift",canThrow:!0,operands:[]},{name:"bitand",canThrow:!0,operands:[]},{name:"bitor",canThrow:!0,operands:[]},{name:"bitxor",canThrow:!0,operands:[]},{name:"equals",canThrow:!0,operands:[]},{name:"strictequals",canThrow:!0,operands:[]},{name:"lessthan",canThrow:!0,operands:[]},{name:"lessequals",canThrow:!0,operands:[]},{name:"greaterthan",canThrow:!0,operands:[]},{name:"greaterequals",canThrow:!0,operands:[]},{name:"instanceof",
canThrow:!0,operands:[]},{name:"istype",canThrow:!0,operands:[{name:"index",size:"u30",type:"M"}]},{name:"istypelate",canThrow:!0,operands:[]},{name:"in",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,null,null,null,{name:"increment_i",canThrow:!0,operands:[]},{name:"decrement_i",canThrow:!0,operands:[]},{name:"inclocal_i",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"declocal_i",canThrow:!0,operands:[{name:"index",size:"u30",type:""}]},{name:"negate_i",canThrow:!0,
operands:[]},{name:"add_i",canThrow:!0,operands:[]},{name:"subtract_i",canThrow:!0,operands:[]},{name:"multiply_i",canThrow:!0,operands:[]},null,null,null,null,null,null,null,null,{name:"getlocal0",canThrow:!1,operands:[]},{name:"getlocal1",canThrow:!1,operands:[]},{name:"getlocal2",canThrow:!1,operands:[]},{name:"getlocal3",canThrow:!1,operands:[]},{name:"setlocal0",canThrow:!1,operands:[]},{name:"setlocal1",canThrow:!1,operands:[]},{name:"setlocal2",canThrow:!1,operands:[]},{name:"setlocal3",canThrow:!1,
operands:[]},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{name:"invalid",canThrow:!1,operands:[]},null,{name:"debug",canThrow:!0,operands:[{name:"debugType",size:"u08",type:""},{name:"index",size:"u30",type:"S"},{name:"reg",size:"u08",type:""},{name:"extra",size:"u30",type:""}]},{name:"debugline",canThrow:!0,operands:[{name:"lineNumber",size:"u30",type:""}]},{name:"debugfile",canThrow:!0,operands:[{name:"index",size:"u30",type:"S"}]},null,
null,null,null,null,null,null,null,null,null,null,null,null,null];b.opcodeName=function(a){return b.opcodeTable[a].name}})(Shumway||(Shumway={}));var opcodeTable=Shumway.AVM2.opcodeTable,opcodeName=Shumway.AVM2.opcodeName,opcodeTable=Shumway.AVM2.opcodeTable,opcodeName=Shumway.AVM2.opcodeName,__extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);d.prototype=b.prototype;a.prototype=new d};
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.ABC||(b.ABC={}),d=a.Metrics.Timer,e=a.isNumeric,f=a.isObject,g=null;"undefined"!==typeof TextDecoder&&(g=new TextDecoder);var l=function(a){this._bytes=a;this._view=new DataView(a.buffer,a.byteOffset);this._position=0};l._getResultBuffer=function(a){if(!l._resultBuffer||l._resultBuffer.length<a)l._resultBuffer=new Int32Array(2*a);return l._resultBuffer};Object.defineProperty(l.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0});
l.prototype.remaining=function(){return this._bytes.length-this._position};l.prototype.seek=function(a){this._position=a};l.prototype.readU8=function(){return this._bytes[this._position++]};l.prototype.readU8s=function(a){var d=new Uint8Array(a);d.set(this._bytes.subarray(this._position,this._position+a),0);this._position+=a;return d};l.prototype.readS8=function(){return this._bytes[this._position++]<<24>>24};l.prototype.readU32=function(){return this.readS32()>>>0};l.prototype.readU30=function(){return this.readU32()};
l.prototype.readU30Unsafe=function(){return this.readU32()};l.prototype.readS16=function(){return this.readU30Unsafe()<<16>>16};l.prototype.readS32=function(){var a=this.readU8();a&128&&(a=a&127|this.readU8()<<7,a&16384&&(a=a&16383|this.readU8()<<14,a&2097152&&(a=a&2097151|this.readU8()<<21,a&268435456&&(a=a&268435455|this.readU8()<<28,a&=4294967295))));return a};l.prototype.readWord=function(){var a=this._view.getUint32(this._position,!0);this._position+=4;return a};l.prototype.readS24=function(){return(this.readU8()|
this.readU8()<<8|this.readU8()<<16)<<8>>8};l.prototype.readDouble=function(){var a=this._view.getFloat64(this._position,!0);this._position+=8;return a};l.prototype.readUTFString=function(d){if(g){var b=this._position;this._position+=d;return g.decode(this._bytes.subarray(b,b+d))}var b=this._position,e=b+d,f=this._bytes,m=0;for(d=l._getResultBuffer(2*d);b<e;){var u=f[b++];if(127>=u)d[m++]=u;else if(192<=u){var r=0;224>u?r=(u&31)<<6|f[b++]&63:240>u?r=(u&15)<<12|(f[b++]&63)<<6|f[b++]&63:(r=((u&7)<<18|
(f[b++]&63)<<12|(f[b++]&63)<<6|f[b++]&63)-65536,d[m++]=((r&1047552)>>>10)+55296,r=(r&1023)+56320);d[m++]=r}}this._position=b;return a.StringUtilities.fromCharCodeArray(d.subarray(0,m))};l._resultBuffer=new Int32Array(256);b.AbcStream=l;var m=function(a,d,b){this.name=a;this.type=d;this.value=b};b.Parameter=m;var p=function(a,d,b){var e=a.constantPool,f=a.methods,g=a.classes,l=a.metadata;this.holder=b;this.name=e.multinames[d.readU30()];b=d.readU8();this.kind=b&15;this.attributes=b>>4&15;!0;switch(this.kind){case 0:case 6:this.slotId=
d.readU30();this.typeName=e.multinames[d.readU30()];a=d.readU30();this.value=void 0;0!==a&&(this.hasDefaultValue=!0,this.value=e.getValue(d.readU8(),a));break;case 1:case 3:case 2:this.dispId=d.readU30();this.methodInfo=f[d.readU30()];this.methodInfo.name=this.name;E.attachHolder(this.methodInfo,this.holder);this.methodInfo.abc=a;break;case 4:this.slotId=d.readU30();!0;this.classInfo=g[d.readU30()];break;case 5:!0}if(this.attributes&4){var m,e=0;for(a=d.readU30();e<a;e++)f=l[d.readU30()],"__go_to_definition_help"===
f.name||"__go_to_ctor_definition_help"===f.name||(m||(m={}),m[f.name]=f);m&&(this.isClass()&&(this.classInfo.metadata=m),this.metadata=m)}};p.prototype.isSlot=function(){return 0===this.kind};p.prototype.isConst=function(){return 6===this.kind};p.prototype.isMethod=function(){return 1===this.kind};p.prototype.isClass=function(){return 4===this.kind};p.prototype.isGetter=function(){return 2===this.kind};p.prototype.isSetter=function(){return 3===this.kind};p.prototype.isProtected=function(){!0;return this.name.namespaces[0].isProtected()};
p.prototype.kindName=function(){switch(this.kind){case 0:return"Slot";case 6:return"Const";case 1:return"Method";case 3:return"Setter";case 2:return"Getter";case 4:return"Class";case 5:return"Function"}a.Debug.unexpected()};p.prototype.isOverride=function(){return this.attributes&2};p.prototype.isFinal=function(){return this.attributes&1};p.prototype.toString=function(){var d=a.IntegerUtilities.getFlags(this.attributes,["final","override","metadata"]);d&&(d+=" ");d+=G.getQualifiedName(this.name);
switch(this.kind){case 0:case 6:return d+", typeName: "+this.typeName+", slotId: "+this.slotId+", value: "+this.value;case 1:case 3:case 2:return d+", "+this.kindName()+": "+this.methodInfo.name;case 4:return d+", slotId: "+this.slotId+", class: "+this.classInfo}};p.parseTraits=function(a,d,b){for(var e=d.readU30(),f=[],g=0;g<e;g++)f.push(new p(a,d,b));return f};b.Trait=p;var r=function(a,d){this.abc=a;this.index=d};b.Info=r;var u,v=function(a,d,b){r.call(this,a,d);a=a.constantPool;d=b.readU30();
this.returnType=a.multinames[b.readU30()];this.parameters=[];for(var e=0;e<d;e++)this.parameters.push(new m(void 0,a.multinames[b.readU30()],void 0));this.debugName=a.strings[b.readU30()];this.flags=b.readU8();e=0;if(this.flags&8){e=b.readU30();!0;for(e=d-e;e<d;e++){var f=b.readU30();this.parameters[e].value=a.getValue(b.readU8(),f)}}if(this.flags&128)for(e=0;e<d;e++)b.readU30(),this.parameters[e].name=v._getParameterName(e);else for(e=0;e<d;e++)this.parameters[e].name=v._getParameterName(e)};__extends(v,
r);v._getParameterName=function(a){!0;return String.fromCharCode(65+a)};v.prototype.toString=function(){var d=a.IntegerUtilities.getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL   SET_DXN HAS_PARAM_NAMES".split(" "));return(d?d+" ":"")+this.name};v.prototype.hasOptional=function(){return!!(this.flags&8)};v.prototype.needsActivation=function(){return!!(this.flags&2)};v.prototype.needsRest=function(){return!!(this.flags&4)};v.prototype.needsArguments=function(){return!!(this.flags&
1)};v.prototype.isNative=function(){return!!(this.flags&32)};v.prototype.isClassMember=function(){return this.holder instanceof y};v.prototype.isInstanceMember=function(){return this.holder instanceof w};v.prototype.isScriptMember=function(){return this.holder instanceof A};v.parseException=function(a,d){var b=a.constantPool.multinames,b={start:d.readU30(),end:d.readU30(),target:d.readU30(),typeName:b[d.readU30()],varName:b[d.readU30()]};!0;!0;return b};v.parseBody=function(a,d){var b=a.methods,e=
d.readU30(),b=b[e];b.index=e;b.hasBody=!0;b.hash=a.hash+196608+e;!0;b.maxStack=d.readU30();b.localCount=d.readU30();b.initScopeDepth=d.readU30();b.maxScopeDepth=d.readU30();b.code=d.readU8s(d.readU30());for(var e=[],f=d.readU30(),g=0;g<f;++g)e.push(v.parseException(a,d));b.exceptions=e;b.traits=p.parseTraits(a,d,b)};v.prototype.hasExceptions=function(){return 0<this.exceptions.length};u=v;b.MethodInfo=u;var w,z=function(a,d,b){r.call(this,a,d);this.runtimeId=z.nextID++;d=a.constantPool;var e=a.methods;
this.name=d.multinames[b.readU30()];!0;this.superName=d.multinames[b.readU30()];this.flags=b.readU8();this.protectedNs=void 0;this.flags&8&&(this.protectedNs=d.namespaces[b.readU30()]);var f=b.readU30();this.interfaces=[];for(var g=0;g<f;g++)this.interfaces[g]=d.multinames[b.readU30()];this.init=e[b.readU30()];this.init.isInstanceInitializer=!0;this.init.name=this.name;E.attachHolder(this.init,this);this.traits=p.parseTraits(a,b,this)};__extends(z,r);z.prototype.toString=function(){var d=a.IntegerUtilities.getFlags(this.flags&
8,["sealed","final","interface","protected"]),d=(d?d+" ":"")+this.name;this.superName&&(d+=" extends "+this.superName);return d};z.prototype.isFinal=function(){return!!(this.flags&2)};z.prototype.isSealed=function(){return!!(this.flags&1)};z.prototype.isInterface=function(){return!!(this.flags&4)};z.nextID=1;w=z;b.InstanceInfo=w;var y,B=function(a,d,b){r.call(this,a,d);this.runtimeId=B.nextID++;this.abc=a;this.hash=a.hash+65536+d;this.index=d;this.init=a.methods[b.readU30()];this.init.isClassInitializer=
!0;E.attachHolder(this.init,this);this.traits=p.parseTraits(a,b,this);this.instanceInfo=a.instances[d];this.instanceInfo.classInfo=this;this.defaultValue=B._getDefaultValue(this.instanceInfo.name)};__extends(B,r);B._getDefaultValue=function(a){return G.getQualifiedName(a)===G.Int||G.getQualifiedName(a)===G.Uint?0:G.getQualifiedName(a)===G.Number?NaN:G.getQualifiedName(a)===G.Boolean?!1:null};B.prototype.toString=function(){return this.instanceInfo.name.toString()};B.nextID=1;y=B;b.ClassInfo=y;var A,
s=function(a,d,b){r.call(this,a,d);this.runtimeId=y.nextID++;this.hash=a.hash+131072+d;this.name=a.name+"$script"+d;this.init=a.methods[b.readU30()];this.init.isScriptInitializer=!0;E.attachHolder(this.init,this);this.traits=p.parseTraits(a,b,this)};__extends(s,r);Object.defineProperty(s.prototype,"entryPoint",{get:function(){return this.init},enumerable:!0,configurable:!0});s.prototype.toString=function(){return this.name};s.nextID=1;A=s;b.ScriptInfo=A;var E,H=function(b,e,f){"undefined"===typeof f&&
(f=0);d.start("Parse ABC");this.name=e;this.env={};var g;f||(d.start("Adler"),g=a.HashUtilities.hashBytesTo32BitsAdler(b,0,b.length),d.stop());f?(this.hash=f,!0):this.hash=g;f=new l(b);H._checkMagic(f);d.start("Parse constantPool");this.constantPool=new T(f,this);d.stop();d.start("Parse Method Infos");this.methods=[];b=f.readU30();for(e=0;e<b;++e)this.methods.push(new u(this,e,f));d.stop();d.start("Parse MetaData Infos");this.metadata=[];b=f.readU30();for(e=0;e<b;++e)this.metadata.push(new Q(this,
f));d.stop();d.start("Parse Instance Infos");this.instances=[];b=f.readU30();for(e=0;e<b;++e)this.instances.push(new w(this,e,f));d.stop();d.start("Parse Class Infos");this.classes=[];for(e=0;e<b;++e)this.classes.push(new y(this,e,f));d.stop();d.start("Parse Script Infos");this.scripts=[];b=f.readU30();for(e=0;e<b;++e)this.scripts.push(new A(this,e,f));d.stop();d.start("Parse Method Body Info");b=f.readU30();for(e=0;e<b;++e)u.parseBody(this,f);d.stop();d.stop()};H._checkMagic=function(a){a=a.readWord();
if(3014671>a)throw Error("Invalid ABC File (magic = "+Number(a).toString(16)+")");};Object.defineProperty(H.prototype,"lastScript",{get:function(){!0;return this.scripts[this.scripts.length-1]},enumerable:!0,configurable:!0});H.attachHolder=function(a,d){!0;a.holder=d};H.prototype.toString=function(){return this.name};E=H;b.AbcFile=E;var D=function(a,d,b,e){"undefined"===typeof d&&(d="");void 0===d&&(d="");void 0!==b&&(this.prefix=b);this.kind=a;this.uri=d;this._buildNamespace(e)};D.prototype._buildNamespace=
function(a){22===this.kind&&(this.kind=8);this.isPublic()&&this.uri?(a=this.uri.length-1,this.uri.charCodeAt(a)>D._MIN_API_MARK&&(this.uri=this.uri.substring(0,a-1))):this.isUnique()&&(this.uri="private "+a);this.qualifiedName=D._qualifyNamespace(this.kind,this.uri,this.prefix?this.prefix:"")};D._hashNamespace=function(d,b,e){var f=new Int32Array(1+b.length+e.length),g=0;f[g++]=d;var l=D._knownURIs.indexOf(b);if(0<=l)return d<<2|l;for(d=0;d<b.length;d++)f[g++]=b.charCodeAt(d);for(d=0;d<e.length;d++)f[g++]=
e.charCodeAt(d);return a.HashUtilities.hashBytesTo32BitsMD5(f,0,g)};D._qualifyNamespace=function(d,b,e){var f=d+b,g=D._mangledNamespaceCache[f];if(g)return g;g=a.StringUtilities.variableLengthEncodeInt32(D._hashNamespace(d,b,e));D._mangledNamespaceMap[g]={kind:d,uri:b,prefix:e};return D._mangledNamespaceCache[f]=g};D.fromQualifiedName=function(d){var b=a.StringUtilities.fromEncoding(d[0]);d=d.substring(0,b+1);d=D._mangledNamespaceMap[d];return new D(d.kind,d.uri,d.prefix)};D.kindFromString=function(a){for(var d in D._kinds)if(D._kinds[d]===
a)return d;return!0};D.createNamespace=function(a,d){return new D(8,a,d)};D.parse=function(a,d,b){var e=d.readU8();a=a.strings[d.readU30()];return new D(e,a,void 0,b)};D.prototype.isPublic=function(){return 8===this.kind||22===this.kind};D.prototype.isProtected=function(){return 24===this.kind};D.prototype.isUnique=function(){return 5===this.kind&&!this.uri};D.prototype.isDynamic=function(){return this.isPublic()&&!this.uri};D.prototype.getURI=function(){return this.uri};D.prototype.toString=function(){return D._kinds[this.kind]+
(this.uri?" "+this.uri:"")};D.prototype.clone=function(){var a=Object.create(D.prototype);a.kind=this.kind;a.uri=this.uri;a.prefix=this.prefix;a.qualifiedName=this.qualifiedName;return a};D.prototype.isEqualTo=function(a){return this.qualifiedName===a.qualifiedName};D.prototype.inNamespaceSet=function(a){for(var d=0;d<a.length;d++)if(a[d].qualifiedName===this.qualifiedName)return!0;return!1};D.prototype.getAccessModifier=function(){return D._kinds[this.kind]};D.prototype.getQualifiedName=function(){return this.qualifiedName};
D.fromSimpleName=function(a){if(a in D._simpleNameCache)return D._simpleNameCache[a];var d;0===a.indexOf("[")?(!0,d=a.substring(1,a.length-1).split(",")):d=[a];return D._simpleNameCache[a]=d.map(function(a){a=a.trim();var d;0<a.indexOf(" ")?(d=a.substring(0,a.indexOf(" ")).trim(),a=a.substring(a.indexOf(" ")+1).trim()):(d=D._kinds,a===d[8]||a===d[23]||a===d[5]||a===d[24]||a===d[25]||a===d[26]?(d=a,a=""):d=D._publicPrefix);return new D(D.kindFromString(d),a)})};D._publicPrefix="public";s=a.ObjectUtilities.createMap();
s[8]=D._publicPrefix;s[23]="packageInternal";s[5]="private";s[24]="protected";s[25]="explicit";s[26]="staticProtected";D._kinds=s;D._MIN_API_MARK=58004;D._MAX_API_MARK=63743;D._knownURIs=[""];D._mangledNamespaceCache=a.ObjectUtilities.createMap();D._mangledNamespaceMap=a.ObjectUtilities.createMap();D.PUBLIC=new D(8);D.PROTECTED=new D(24);D.PROXY=new D(8,"http://www.adobe.com/2006/actionscript/flash/proxy");D._simpleNameCache=a.ObjectUtilities.createMap();b.Namespace=D;var G,F=function(a,d,b){"undefined"===
typeof b&&(b=0);void 0!==d&&!0;this.runtimeId=F._nextID++;this.namespaces=a;this.name=d;this.flags=b};F.parse=function(d,b,e,f){var g=0,l=b.readU8(),m,u=[],r=0;switch(l){case 7:case 13:(g=b.readU30())?u=[d.namespaces[g]]:r&=~F.RUNTIME_NAME;(g=b.readU30())&&(m=d.strings[g]);break;case 15:case 16:(g=b.readU30())?m=d.strings[g]:r&=~F.RUNTIME_NAME;r|=F.RUNTIME_NAMESPACE;break;case 17:case 18:r|=F.RUNTIME_NAMESPACE;r|=F.RUNTIME_NAME;break;case 9:case 14:(g=b.readU30())?m=d.strings[g]:r&=~F.RUNTIME_NAME;
g=b.readU30();!0;u=d.namespaceSets[g];break;case 27:case 28:r|=F.RUNTIME_NAME;g=b.readU30();!0;u=d.namespaceSets[g];break;case 29:return d=b.readU32(),e[d]&&(u=e[d].namespaces,m=e[d].name),b.readU32(),!0,b=b.readU32(),!0,m=new F(u,m,r),m.typeParameter=e[b],e[d]||f.push({multiname:m,index:d}),m;default:a.Debug.unexpected()}switch(l){case 13:case 16:case 18:case 14:case 28:r|=F.ATTRIBUTE}return new F(u,m,r)};F.isMultiname=function(a){return"number"===typeof a||"string"===typeof a||a instanceof F||a instanceof
Number};F.needsResolution=function(a){return a instanceof F&&1<a.namespaces.length};F.isQName=function(a){return a instanceof F?a.namespaces&&1===a.namespaces.length:!0};F.isRuntimeName=function(a){return a instanceof F&&a.isRuntimeName()};F.isRuntimeNamespace=function(a){return a instanceof F&&a.isRuntimeNamespace()};F.isRuntime=function(a){return a instanceof F&&a.isRuntimeName()||a.isRuntimeNamespace()};F.getQualifiedName=function(a){!0;if(a instanceof F){if(void 0!==a.qualifiedName)return a.qualifiedName;
var d=String(a.name);if(e(d)&&a.namespaces[0].isPublic())return a.qualifiedName=d;a=a.qualifiedName=F.qualifyName(a.namespaces[0],d)}return a};F.qualifyName=function(a,d){return"$"+a.qualifiedName+d};F.stripPublicQualifier=function(a){var d="$"+D.PUBLIC.qualifiedName;return 0!==a.indexOf(d)?void 0:a.substring(d.length)};F.fromQualifiedName=function(a){if(a instanceof F)return a;if(e(a))return new F([D.PUBLIC],a);if("$"===a[0]){var d=D.fromQualifiedName(a.substring(1));return new F([d],a.substring(1+
d.qualifiedName.length))}};F.getNameFromPublicQualifiedName=function(a){a=F.fromQualifiedName(a);!0;return a.name};F.getFullQualifiedName=function(a){var d=F.getQualifiedName(a);a instanceof F&&a.typeParameter&&(d+="$"+F.getFullQualifiedName(a.typeParameter));return d};F.getPublicQualifiedName=function(d){return e(d)?a.toNumber(d):null!==d&&f(d)?d:F.qualifyName(D.PUBLIC,d)};F.isPublicQualifiedName=function(a){return"number"===typeof a||e(a)||1===a.indexOf(D.PUBLIC.qualifiedName)};F.getAccessModifier=
function(a){!0;if("number"===typeof a||"string"===typeof a||a instanceof Number)return"public";!0;return a.namespaces[0].getAccessModifier()};F.isNumeric=function(a){return"number"===typeof a?!0:"string"===typeof a?e(a):!isNaN(parseInt(F.getName(a),10))};F.getName=function(a){!0;!0;return a.getName()};F.isAnyName=function(a){return"object"===typeof a&&!a.isRuntimeName()&&!a.name};F.fromSimpleName=function(a){!0;if(a in F._simpleNameCache)return F._simpleNameCache[a];var d,b;d=a.lastIndexOf(".");0>=
d&&(d=a.lastIndexOf(" "));0<d&&d<a.length-1?(b=a.substring(d+1).trim(),d=a.substring(0,d).trim()):(b=a,d="");return F._simpleNameCache[a]=new F(D.fromSimpleName(d),b)};F.prototype.getQName=function(d){!0;this._qualifiedNameCache||(this._qualifiedNameCache=a.ObjectUtilities.createArrayMap());var b=this._qualifiedNameCache[d];b||(b=this._qualifiedNameCache[d]=new F([this.namespaces[d]],this.name,this.flags));return b};F.prototype.hasQName=function(a){!0;if(this.name!==a.name)return!1;for(var d=0;d<
this.namespaces.length;d++)if(this.namespaces[d].isEqualTo(a.namespaces[0]))return!0;return!1};F.prototype.isAttribute=function(){return this.flags&F.ATTRIBUTE};F.prototype.isAnyName=function(){return F.isAnyName(this)};F.prototype.isAnyNamespace=function(){return!this.isRuntimeNamespace()&&(0===this.namespaces.length||this.isAnyName()&&1!==this.namespaces.length)};F.prototype.isRuntimeName=function(){return!!(this.flags&F.RUNTIME_NAME)};F.prototype.isRuntimeNamespace=function(){return!!(this.flags&
F.RUNTIME_NAMESPACE)};F.prototype.isRuntime=function(){return!!(this.flags&(F.RUNTIME_NAME|F.RUNTIME_NAMESPACE))};F.prototype.isQName=function(){return 1===this.namespaces.length&&!this.isAnyName()};F.prototype.hasTypeParameter=function(){return!!this.typeParameter};F.prototype.getName=function(){return this.name};F.prototype.getOriginalName=function(){!0;var a=this.namespaces[0].uri;a&&(a+=".");return a+this.name};F.prototype.getNamespace=function(){!0;!0;return this.namespaces[0]};F.prototype.nameToString=
function(){if(this.isAnyName())return"*";var a=this.getName();return this.isRuntimeName()?"[]":a};F.prototype.hasObjectName=function(){return"object"===typeof this.name};F.prototype.toString=function(){var a=this.isAttribute()?"@":"";if(this.isAnyNamespace())a+="*::"+this.nameToString();else if(this.isRuntimeNamespace())a+="[]::"+this.nameToString();else if(1===this.namespaces.length&&this.isQName())a+=this.namespaces[0].toString()+"::",a+=this.nameToString();else{for(var a=a+"{",d=0,b=this.namespaces.length;d<
b;d++)a+=this.namespaces[d].toString(),d+1<b&&(a+=",");a+="}::"+this.nameToString()}this.hasTypeParameter()&&(a+="<"+this.typeParameter.toString()+">");return a};F.ATTRIBUTE=1;F.RUNTIME_NAMESPACE=2;F.RUNTIME_NAME=4;F._nextID=0;F._simpleNameCache=a.ObjectUtilities.createMap();F.Int=F.getPublicQualifiedName("int");F.Uint=F.getPublicQualifiedName("uint");F.Class=F.getPublicQualifiedName("Class");F.Array=F.getPublicQualifiedName("Array");F.Object=F.getPublicQualifiedName("Object");F.String=F.getPublicQualifiedName("String");
F.Number=F.getPublicQualifiedName("Number");F.Boolean=F.getPublicQualifiedName("Boolean");F.Function=F.getPublicQualifiedName("Function");F.XML=F.getPublicQualifiedName("XML");F.XMLList=F.getPublicQualifiedName("XMLList");F.TEMPORARY=new F([],"");G=F;b.Multiname=G;var Q,s=function(a,d){for(var b=a.constantPool.strings,e=this.name=b[d.readU30()],f=d.readU30(),g=[],l=[],m=0;m<f;m++)g[m]=b[d.readU30()];for(m=0;m<f;m++){var u=g[m];l[m]={key:u,value:b[d.readU30()]};u&&"native"===e&&(!0,this[u]=l[m].value)}this.value=
l};s.prototype.toString=function(){return"["+this.name+"]"};Q=s;b.MetaDataInfo=Q;s=b.CONSTANT||(b.CONSTANT={});s[s.Undefined=0]="Undefined";s[s.Utf8=1]="Utf8";s[s.Float=2]="Float";s[s.Int=3]="Int";s[s.UInt=4]="UInt";s[s.PrivateNs=5]="PrivateNs";s[s.Double=6]="Double";s[s.QName=7]="QName";s[s.Namespace=8]="Namespace";s[s.Multiname=9]="Multiname";s[s.False=10]="False";s[s.True=11]="True";s[s.Null=12]="Null";s[s.QNameA=13]="QNameA";s[s.MultinameA=14]="MultinameA";s[s.RTQName=15]="RTQName";s[s.RTQNameA=
16]="RTQNameA";s[s.RTQNameL=17]="RTQNameL";s[s.RTQNameLA=18]="RTQNameLA";s[s.NameL=19]="NameL";s[s.NameLA=20]="NameLA";s[s.NamespaceSet=21]="NamespaceSet";s[s.PackageNamespace=22]="PackageNamespace";s[s.PackageInternalNs=23]="PackageInternalNs";s[s.ProtectedNamespace=24]="ProtectedNamespace";s[s.ExplicitNamespace=25]="ExplicitNamespace";s[s.StaticProtectedNs=26]="StaticProtectedNs";s[s.MultinameL=27]="MultinameL";s[s.MultinameLA=28]="MultinameLA";s[s.TypeName=29]="TypeName";s[s.ClassSealed=1]="ClassSealed";
s[s.ClassFinal=2]="ClassFinal";s[s.ClassInterface=4]="ClassInterface";s[s.ClassProtectedNs=8]="ClassProtectedNs";s=b.METHOD||(b.METHOD={});s[s.Arguments=1]="Arguments";s[s.Activation=2]="Activation";s[s.Needrest=4]="Needrest";s[s.HasOptional=8]="HasOptional";s[s.IgnoreRest=16]="IgnoreRest";s[s.Native=32]="Native";s[s.Setsdxns=64]="Setsdxns";s[s.HasParamNames=128]="HasParamNames";s=b.TRAIT||(b.TRAIT={});s[s.Slot=0]="Slot";s[s.Method=1]="Method";s[s.Getter=2]="Getter";s[s.Setter=3]="Setter";s[s.Class=
4]="Class";s[s.Function=5]="Function";s[s.Const=6]="Const";s=b.ATTR||(b.ATTR={});s[s.Final=1]="Final";s[s.Override=2]="Override";s[s.Metadata=4]="Metadata";s=b.SORT||(b.SORT={});s[s.CASEINSENSITIVE=1]="CASEINSENSITIVE";s[s.DESCENDING=2]="DESCENDING";s[s.UNIQUESORT=4]="UNIQUESORT";s[s.RETURNINDEXEDARRAY=8]="RETURNINDEXEDARRAY";s[s.NUMERIC=16]="NUMERIC";s=b.OP||(b.OP={});s[s.bkpt=1]="bkpt";s[s.nop=2]="nop";s[s["throw"]=3]="throw";s[s.getsuper=4]="getsuper";s[s.setsuper=5]="setsuper";s[s.dxns=6]="dxns";
s[s.dxnslate=7]="dxnslate";s[s.kill=8]="kill";s[s.label=9]="label";s[s.lf32x4=10]="lf32x4";s[s.sf32x4=11]="sf32x4";s[s.ifnlt=12]="ifnlt";s[s.ifnle=13]="ifnle";s[s.ifngt=14]="ifngt";s[s.ifnge=15]="ifnge";s[s.jump=16]="jump";s[s.iftrue=17]="iftrue";s[s.iffalse=18]="iffalse";s[s.ifeq=19]="ifeq";s[s.ifne=20]="ifne";s[s.iflt=21]="iflt";s[s.ifle=22]="ifle";s[s.ifgt=23]="ifgt";s[s.ifge=24]="ifge";s[s.ifstricteq=25]="ifstricteq";s[s.ifstrictne=26]="ifstrictne";s[s.lookupswitch=27]="lookupswitch";s[s.pushwith=
28]="pushwith";s[s.popscope=29]="popscope";s[s.nextname=30]="nextname";s[s.hasnext=31]="hasnext";s[s.pushnull=32]="pushnull";s[s.c=33]="c";s[s.pushundefined=33]="pushundefined";s[s.pushfloat=34]="pushfloat";s[s.nextvalue=35]="nextvalue";s[s.pushbyte=36]="pushbyte";s[s.pushshort=37]="pushshort";s[s.pushtrue=38]="pushtrue";s[s.pushfalse=39]="pushfalse";s[s.pushnan=40]="pushnan";s[s.pop=41]="pop";s[s.dup=42]="dup";s[s.swap=43]="swap";s[s.pushstring=44]="pushstring";s[s.pushint=45]="pushint";s[s.pushuint=
46]="pushuint";s[s.pushdouble=47]="pushdouble";s[s.pushscope=48]="pushscope";s[s.pushnamespace=49]="pushnamespace";s[s.hasnext2=50]="hasnext2";s[s.li8=53]="li8";s[s.li16=54]="li16";s[s.li32=55]="li32";s[s.lf32=56]="lf32";s[s.lf64=57]="lf64";s[s.si8=58]="si8";s[s.si16=59]="si16";s[s.si32=60]="si32";s[s.sf32=61]="sf32";s[s.sf64=62]="sf64";s[s.newfunction=64]="newfunction";s[s.call=65]="call";s[s.construct=66]="construct";s[s.callmethod=67]="callmethod";s[s.callstatic=68]="callstatic";s[s.callsuper=
69]="callsuper";s[s.callproperty=70]="callproperty";s[s.returnvoid=71]="returnvoid";s[s.returnvalue=72]="returnvalue";s[s.constructsuper=73]="constructsuper";s[s.constructprop=74]="constructprop";s[s.callsuperid=75]="callsuperid";s[s.callproplex=76]="callproplex";s[s.callinterface=77]="callinterface";s[s.callsupervoid=78]="callsupervoid";s[s.callpropvoid=79]="callpropvoid";s[s.sxi1=80]="sxi1";s[s.sxi8=81]="sxi8";s[s.sxi16=82]="sxi16";s[s.applytype=83]="applytype";s[s.pushfloat4=84]="pushfloat4";s[s.newobject=
85]="newobject";s[s.newarray=86]="newarray";s[s.newactivation=87]="newactivation";s[s.newclass=88]="newclass";s[s.getdescendants=89]="getdescendants";s[s.newcatch=90]="newcatch";s[s.findpropstrict=93]="findpropstrict";s[s.findproperty=94]="findproperty";s[s.finddef=95]="finddef";s[s.getlex=96]="getlex";s[s.setproperty=97]="setproperty";s[s.getlocal=98]="getlocal";s[s.setlocal=99]="setlocal";s[s.getglobalscope=100]="getglobalscope";s[s.getscopeobject=101]="getscopeobject";s[s.getproperty=102]="getproperty";
s[s.getouterscope=103]="getouterscope";s[s.initproperty=104]="initproperty";s[s.setpropertylate=105]="setpropertylate";s[s.deleteproperty=106]="deleteproperty";s[s.deletepropertylate=107]="deletepropertylate";s[s.getslot=108]="getslot";s[s.setslot=109]="setslot";s[s.getglobalslot=110]="getglobalslot";s[s.setglobalslot=111]="setglobalslot";s[s.convert_s=112]="convert_s";s[s.esc_xelem=113]="esc_xelem";s[s.esc_xattr=114]="esc_xattr";s[s.convert_i=115]="convert_i";s[s.convert_u=116]="convert_u";s[s.convert_d=
117]="convert_d";s[s.convert_b=118]="convert_b";s[s.convert_o=119]="convert_o";s[s.checkfilter=120]="checkfilter";s[s.convert_f=121]="convert_f";s[s.unplus=122]="unplus";s[s.convert_f4=123]="convert_f4";s[s.coerce=128]="coerce";s[s.coerce_b=129]="coerce_b";s[s.coerce_a=130]="coerce_a";s[s.coerce_i=131]="coerce_i";s[s.coerce_d=132]="coerce_d";s[s.coerce_s=133]="coerce_s";s[s.astype=134]="astype";s[s.astypelate=135]="astypelate";s[s.coerce_u=136]="coerce_u";s[s.coerce_o=137]="coerce_o";s[s.negate=144]=
"negate";s[s.increment=145]="increment";s[s.inclocal=146]="inclocal";s[s.decrement=147]="decrement";s[s.declocal=148]="declocal";s[s["typeof"]=149]="typeof";s[s.not=150]="not";s[s.bitnot=151]="bitnot";s[s.add=160]="add";s[s.subtract=161]="subtract";s[s.multiply=162]="multiply";s[s.divide=163]="divide";s[s.modulo=164]="modulo";s[s.lshift=165]="lshift";s[s.rshift=166]="rshift";s[s.urshift=167]="urshift";s[s.bitand=168]="bitand";s[s.bitor=169]="bitor";s[s.bitxor=170]="bitxor";s[s.equals=171]="equals";
s[s.strictequals=172]="strictequals";s[s.lessthan=173]="lessthan";s[s.lessequals=174]="lessequals";s[s.greaterthan=175]="greaterthan";s[s.greaterequals=176]="greaterequals";s[s["instanceof"]=177]="instanceof";s[s.istype=178]="istype";s[s.istypelate=179]="istypelate";s[s["in"]=180]="in";s[s.increment_i=192]="increment_i";s[s.decrement_i=193]="decrement_i";s[s.inclocal_i=194]="inclocal_i";s[s.declocal_i=195]="declocal_i";s[s.negate_i=196]="negate_i";s[s.add_i=197]="add_i";s[s.subtract_i=198]="subtract_i";
s[s.multiply_i=199]="multiply_i";s[s.getlocal0=208]="getlocal0";s[s.getlocal1=209]="getlocal1";s[s.getlocal2=210]="getlocal2";s[s.getlocal3=211]="getlocal3";s[s.setlocal0=212]="setlocal0";s[s.setlocal1=213]="setlocal1";s[s.setlocal2=214]="setlocal2";s[s.setlocal3=215]="setlocal3";s[s.invalid=237]="invalid";s[s.debug=239]="debug";s[s.debugline=240]="debugline";s[s.debugfile=241]="debugfile";s[s.bkptline=242]="bkptline";s[s.timestamp=243]="timestamp";var T,S=function(a,b){var e,f=[0];e=a.readU30();
for(var g=1;g<e;++g)f.push(a.readS32());var l=[0];e=a.readU30();for(g=1;g<e;++g)l.push(a.readU32());var m=[NaN];e=a.readU30();for(g=1;g<e;++g)m.push(a.readDouble());d.start("Parse Strings");var u=[""];e=a.readU30();for(g=1;g<e;++g)u.push(a.readUTFString(a.readU30()));this.positionAfterUTFStrings=a.position;d.stop();this.ints=f;this.uints=l;this.doubles=m;this.strings=u;d.start("Parse Namespaces");f=[void 0];e=a.readU30();for(g=1;g<e;++g)f.push(D.parse(this,a,b.hash+g));d.stop();d.start("Parse Namespace Sets");
l=[void 0];e=a.readU30();for(g=1;g<e;++g){m=a.readU30();u=[];u.runtimeId=S._nextNamespaceSetID++;for(var r=0;r<m;++r)u.push(f[a.readU30()]);l.push(u)}d.stop();this.namespaces=f;this.namespaceSets=l;d.start("Parse Multinames");f=[void 0];l=[];e=a.readU30();for(g=1;g<e;++g)f.push(G.parse(this,a,f,l));d.stop();this.multinames=f};S.prototype.getValue=function(d,b){switch(d){case 3:return this.ints[b];case 4:return this.uints[b];case 6:return this.doubles[b];case 1:return this.strings[b];case 11:return!0;
case 10:return!1;case 12:return null;case 0:break;case 8:case 23:return this.namespaces[b];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this.multinames[b];case 2:a.Debug.warning("TODO: CONSTANT.Float may be deprecated?");break;default:!0}};S._nextNamespaceSetID=1;T=S;b.ConstantPool=T})(Shumway||(Shumway={}));
var AbcFile=Shumway.AVM2.ABC.AbcFile,AbcStream=Shumway.AVM2.ABC.AbcStream,ConstantPool=Shumway.AVM2.ABC.ConstantPool,ClassInfo=Shumway.AVM2.ABC.ClassInfo,MetaDataInfo=Shumway.AVM2.ABC.MetaDataInfo,InstanceInfo=Shumway.AVM2.ABC.InstanceInfo,ScriptInfo=Shumway.AVM2.ABC.ScriptInfo,Trait=Shumway.AVM2.ABC.Trait,MethodInfo=Shumway.AVM2.ABC.MethodInfo,Multiname=Shumway.AVM2.ABC.Multiname,ASNamespace=Shumway.AVM2.ABC.Namespace,AbcFile=Shumway.AVM2.ABC.AbcFile,AbcStream=Shumway.AVM2.ABC.AbcStream,ConstantPool=
Shumway.AVM2.ABC.ConstantPool,ClassInfo=Shumway.AVM2.ABC.ClassInfo,MetaDataInfo=Shumway.AVM2.ABC.MetaDataInfo,InstanceInfo=Shumway.AVM2.ABC.InstanceInfo,ScriptInfo=Shumway.AVM2.ABC.ScriptInfo,Trait=Shumway.AVM2.ABC.Trait,MethodInfo=Shumway.AVM2.ABC.MethodInfo,Multiname=Shumway.AVM2.ABC.Multiname,ASNamespace=Shumway.AVM2.ABC.Namespace,Bytecode=function(){function a(a){var d=a.readU8();this.op=d;this.originalPosition=a.position;var e=Shumway.AVM2.opcodeTable[d];e||unexpected("Unknown Op "+d);this.canThrow=
e.canThrow;var f;switch(d){case 27:e=a.readS24();this.offsets=[];f=a.readU30()+1;for(d=0;d<f;d++)this.offsets.push(a.readS24());this.offsets.push(e);break;default:d=0;for(f=e.operands.length;d<f;d++){var g=e.operands[d];switch(g.size){case "u08":this[g.name]=a.readU8();break;case "s08":this[g.name]=a.readS8();break;case "s16":this[g.name]=a.readS16();break;case "s24":this[g.name]=a.readS24();break;case "u30":this[g.name]=a.readU30();break;case "u32":this[g.name]=a.readU32();break;default:unexpected()}}}}
a.prototype={makeBlockHead:function(a){if(this.succs)return a;this.bid=a;this.succs=[];this.preds=[];this.dominatees=[];return a+1},trace:function(a){this.succs&&a.writeLn("#"+this.bid)},toString:function(a){var d=Shumway.AVM2.opcodeTable[this.op],e=d.name.padRight(" ",20),f,g;if(27===this.op){e+="targets:";f=0;for(g=this.targets.length;f<g;f++)e+=(0<f?",":"")+this.targets[f].position}else{f=0;for(g=d.operands.length;f<g;f++){var l=d.operands[f];if("offset"===l.name)e+="target:"+this.target.position;
else{var e=e+(l.name+": "),m=this[l.name];if(a)switch(l.type){case "":e+=m;break;case "I":e+=a.constantPool.ints[m];break;case "U":e+=a.constantPool.uints[m];break;case "D":e+=a.constantPool.doubles[m];break;case "S":e+=a.constantPool.strings[m];break;case "N":e+=a.constantPool.namespaces[m];break;case "CI":e+=a.classes[m];break;case "M":e+=a.constantPool.multinames[m];break;default:e+="?"}else e+=m}f<g-1&&(e+=", ")}}return e}};return a}(),Analysis=function(){function a(a){Counter.count("Analysis");
this.method=a;this.method.code&&(Timer.start("Normalize"),this.normalizeBytecode(),Timer.stop())}a.prototype={normalizeBytecode:function(){function a(d,b){if(d&&d[b])return d[b];var e=Object.create(Bytecode.prototype);e.op=237;e.position=b;d&&(d[b]=e);return e}function d(a){0!==a--&&a<e.parameters.length&&(e.parameters[a].isUsed=!0)}for(var e=this.method,f=[],g=[],l=new AbcStream(this.method.code),m;0<l.remaining();){var p=l.position;m=new Bytecode(l);switch(m.op){case 2:case 9:f[p]=g.length;continue;
case 27:this.method.hasLookupSwitches=!0;m.targets=[];for(var r=m.offsets,u=0,v=r.length;u<v;u++)r[u]+=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:m.offset+=l.position;break;case 208:case 209:case 210:case 211:d(m.op-208);break;case 98:d(m.index)}m.position=g.length;f[p]=g.length;g.push(m)}for(var l={},w=0,z=g.length;w<z;w++)switch(m=g[w],m.op){case 27:r=m.offsets;u=0;for(v=r.length;u<v;u++)p=f[r[u]],m.targets.push(g[p]||
a(l,r[u])),r[u]=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=f[m.offset],m.target=g[p]||a(l,m.offset),m.offset=p}this.bytecodes=g;m=this.method.exceptions;u=0;for(v=m.length;u<v;u++)r=m[u],r.start=f[r.start],r.end=f[r.end],r.offset=f[r.target],r.target=g[r.offset],r.target.exception=r},detectBasicBlocks:function(){var a=this.bytecodes,d=this.method.exceptions,e=0<d.length,f={},g,l,m,p;p=a[0].makeBlockHead(0);l=0;
for(m=a.length-1;l<m;l++)switch(g=a[l],g.op){case 71:case 72:case 3:p=a[l+1].makeBlockHead(p);break;case 27:g=g.targets;for(var r=0,u=g.length;r<u;r++)p=g[r].makeBlockHead(p);p=a[l+1].makeBlockHead(p);break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g.target.makeBlockHead(p),p=a[l+1].makeBlockHead(p)}g=a[m];switch(g.op){case 27:g=g.targets;r=0;for(u=g.length;r<u;r++)p=g[r].makeBlockHead(p);break;case 16:p=g.target.makeBlockHead(p);
break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g.target.makeBlockHead(p),a[l+1]=getInvalidTarget(null,l+1),p=a[l+1].makeBlockHead(p)}if(e){r=0;for(u=d.length;r<u;r++)l=d[r],m=a[l.end+1],p=a[l.start].makeBlockHead(p),m&&(p=m.makeBlockHead(p)),p=l.target.makeBlockHead(p)}var v=a[0];l=1;for(m=a.length;l<m;l++)if(a[l].succs){!0;f[v.bid]=v;g=a[l-1];v.end=g;var w=a[l];switch(g.op){case 71:case 72:case 3:break;case 27:r=0;for(u=g.targets.length;r<
u;r++)v.succs.push(g.targets[r]);break;case 16:v.succs.push(g.target);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:v.succs.push(g.target);g.target!==w&&v.succs.push(w);break;default:v.succs.push(w)}if(e){r=v;u=[];g=0;for(var z=d.length;g<z;g++){var y=d[g];r.position>=y.start&&r.end.position<=y.end&&u.push(y.target)}g=u;v.hasCatches=0<g.length;v.succs.push.apply(v.succs,g)}v=w}f[v.bid]=v;g=a[m-1];switch(g.op){case 27:r=0;for(u=
g.targets.length;r<u;r++)v.succs.push(g.targets[r]);break;case 16:v.succs.push(g.target)}v.end=g;var B=BitSetFunctor(p),A=B.ADDRESS_BITS_PER_WORD,s=B.BITS_PER_WORD,E=B.BIT_INDEX_MASK;B.singleton=function(a){var d=new B;d.set(a.bid);d.count=1;d.dirty=0;return d};B.fromBlocks=function(a){var d=new B;d.setBlocks(a);return d};a=B.prototype;B.singleword?(a.forEachBlock=function(a){!0;var d=this.bits;if(d)for(var b=0;b<s;b++)d&1<<b&&a(f[b])},a.choose=function(){var a=this.bits;if(a)for(var d=0;d<s;d++)if(a&
1<<d)return f[d]},a.members=function(){var a=[],d=this.bits;if(d)for(var b=0;b<s;b++)d&1<<b&&a.push(f[b]);return a},a.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++)d|=1<<(a[b].bid&E);this.bits=d}):(a.forEachBlock=function(a){!0;for(var d=this.bits,b=0,e=d.length;b<e;b++){var g=d[b];if(g)for(var l=0;l<s;l++)g&1<<l&&a(f[b*s+l])}},a.choose=function(){for(var a=this.bits,d=0,b=a.length;d<b;d++){var e=a[d];if(e)for(var g=0;g<s;g++)if(e&1<<g)return f[d*s+g]}},a.members=function(){for(var a=
[],d=this.bits,b=0,e=d.length;b<e;b++){var g=d[b];if(g)for(var l=0;l<s;l++)g&1<<l&&a.push(f[b*s+l])}return a},a.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++){var f=a[b].bid;d[f>>A]|=1<<(f&E)}});this.BlockSet=B},normalizeReachableBlocks:function(){var a=this.bytecodes[0];!0;var d=this.BlockSet,e=[],f={},g={},l=[a];for(g[a.bid]=!0;a=l.top();)if(f[a.bid]){if(1===f[a.bid]){f[a.bid]=2;e.push(a);for(var m=a.succs,p=0,r=m.length;p<r;p++)m[p].preds.push(a)}g[a.bid]=!1;l.pop()}else{f[a.bid]=
1;g[a.bid]=!0;m=a.succs;p=0;for(r=m.length;p<r;p++){var u=m[p];g[u.bid]&&(a.spbacks||(a.spbacks=new d),a.spbacks.set(u.bid));!f[u.bid]&&l.push(u)}}this.blocks=e.reverse()},computeDominance:function(){var a=this.blocks,d=a.length,e=Array(d);e[0]=0;for(var f={},g=0;g<d;g++)f[a[g].bid]=g;for(var l=!0;l;){l=!1;for(g=1;g<d;g++){var m=a[g].preds,p=m.length,r=f[m[0].bid];if(!(r in e))for(var u=1;u<p&&!(r=f[m[u].bid],r in e);u++);!0;for(u=0;u<p;u++){var v=f[m[u].bid];if(v!==r&&v in e){for(;v!==r;){for(;v>
r;)v=e[v];for(;r>v;)r=e[r]}r=v}}e[g]!==r&&(e[g]=r,l=!0)}}a[0].dominator=a[0];for(g=1;g<d;g++)f=a[g],p=a[e[g]],f.dominator=p,p.dominatees.push(f),f.npreds=f.preds.length;d=[a[0]];for(a[0].level||(a[0].level=0);f=d.shift();){a=f.dominatees;u=0;for(p=a.length;u<p;u++)a[u].level=f.level+1;d.push.apply(d,a)}},analyzeControlFlow:function(){!0;this.detectBasicBlocks();this.normalizeReachableBlocks();this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(b,e){var f=new d;
f.setBlocks(b);f.recount();this.id=e;this.body=f;this.exit=new d;this.save={};this.head=new d;this.npreds=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,e;e=this.blocks;for(var f=new d,g=0,l=e.length;g<l;g++){var m=e[g],p=m.spbacks;if(p)for(var m=m.succs,r=0,u=m.length;r<u;r++){var v=m[r];p.get(v.bid)&&f.set(v.dominator.bid)}}e=f.members();if(0>=e.length)return this.markedLoops=!0;e=e.sort(function(a,d){return a.level-d.level});f=0;for(g=e.length-1;0<=g;g--){for(var l=
e[g],p=1,m={},r={},u=[],v=[],w=[],z=l.level+1,y=[l],B=void 0,A=void 0,B=void 0;B=y.top();)if(m[B.bid]){if(v.peek()===B){v.pop();var s=[];do A=u.pop(),r[A.bid]=!0,s.push(A);while(A!==B);(1<s.length||A.spbacks&&A.spbacks.get(A.bid))&&w.push(s)}y.pop()}else{m[B.bid]=p++;u.push(B);v.push(B);for(var A=B.succs,s=0,E=A.length;s<E;s++)if(B=A[s],!(B.level<z)){var H=B.bid;if(m[H]){if(!r[H])for(;m[v.peek().bid]>m[H];)v.pop()}else y.push(B)}}p=w;if(0!==p.length){m=0;for(r=p.length;m<r;m++){u=p[m];v=new a(u,f++);
w=0;for(z=u.length;w<z;w++)if(y=u[w],y.level===l.level+1&&!y.loop){y.loop=v;v.head.set(y.bid);B=y.preds;A=0;for(s=B.length;A<s;A++)v.body.get(B[A].bid)&&y.npreds--;v.npreds+=y.npreds}w=0;for(z=u.length;w<z;w++)y=u[w],y.level===l.level+1&&(y.npreds=v.npreds);v.head.recount()}}}return this.markedLoops=!0}};return a}();
(function(a){function b(a){for(var d=["leadingComments","loc"];a;)a.fields&&(d=a.fields.concat(d)),a=a.extends?f[a.extends]:null;return d}function d(a){return"_"+a}function e(g,m){if(!a[g]){for(var p=b(m),r=[],u=['this.type = "'+g+'";'],v=0,w=p.length;v<w;v++){var z=p[v];"@"===z.charAt(0)&&(p[v]=z=z.substr(1),r.push(z));u.push("this."+z+" = _"+z+";")}p=new Function(p.map(d),u.join("\n"));m.extends&&(u=e(m.extends,f[m.extends]),p.prototype=Object.create(u.prototype));Object.defineProperty(p.prototype,
"_children",{value:r,writable:!0,configurable:!0,enumerable:!1});a[g]=p}return a[g]}var f=a.lang={Node:{},Program:{"extends":"Node",fields:["@body"]},Statement:{"extends":"Node"},EmptyStatement:{"extends":"Statement"},BlockStatement:{"extends":"Statement",fields:["@body"]},ExpressionStatement:{"extends":"Statement",fields:["@expression"]},IfStatement:{"extends":"Statement",fields:["@test","@consequent","@alternate"]},LabeledStatement:{"extends":"Statement",fields:["@label","@body"]},BreakStatement:{"extends":"Statement",
fields:["@label"]},ContinueStatement:{"extends":"Statement",fields:["@label"]},WithStatement:{"extends":"Statement",fields:["@object","@body"]},SwitchStatement:{"extends":"Statement",fields:["@discriminant","@cases","lexical"]},ReturnStatement:{"extends":"Statement",fields:["@argument"]},ThrowStatement:{"extends":"Statement",fields:["@argument"]},TryStatement:{"extends":"Statement",fields:["@block","@handlers","@finalizer"]},WhileStatement:{"extends":"Statement",fields:["@test","@body"]},DoWhileStatement:{"extends":"Statement",
fields:["@body","@test"]},ForStatement:{"extends":"Statement",fields:["@init","@test","@update","@body"]},ForInStatement:{"extends":"Statement",fields:["@left","@right","@body","each"]},LetStatement:{"extends":"Statement",fields:["@head","@body"]},DebuggerStatement:{"extends":"Statement"},Declaration:{"extends":"Statement"},FunctionDeclaration:{"extends":"Declaration",fields:"@id @params @body @decltype generator expression @modifiers".split(" ")},VariableDeclaration:{"extends":"Declaration",fields:["kind",
"@declarations"]},VariableDeclarator:{"extends":"Node",fields:["@id","@init","@decltype","@arguments"]},Expression:{"extends":"Pattern"},ThisExpression:{"extends":"Expression"},ArrayExpression:{"extends":"Expression",fields:["@elements"]},ObjectExpression:{"extends":"Expression",fields:["@properties"]},Property:{"extends":"Node",fields:["@key","@value","kind"]},FunctionExpression:{"extends":"Expression",fields:"@id @params @body @decltype generator expression".split(" ")},SequenceExpression:{"extends":"Expression",
fields:["@expressions"]},UnaryExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},BinaryExpression:{"extends":"Expression",fields:["operator","@left","@right"]},AssignmentExpression:{"extends":"Expression",fields:["@left","operator","@right"]},UpdateExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},LogicalExpression:{"extends":"Expression",fields:["operator","@left","@right"]},ConditionalExpression:{"extends":"Expression",fields:["@test","@consequent",
"@alternate"]},NewExpression:{"extends":"Expression",fields:["@callee","@arguments"]},CallExpression:{"extends":"Expression",fields:["@callee","@arguments"]},MemberExpression:{"extends":"Expression",fields:["@object","@property","computed","kind"]},YieldExpression:{"extends":"Expression",fields:["@argument"]},ComprehensionExpression:{"extends":"Expression",fields:["@blocks","@filter"]},GeneratorExpression:{"extends":"Expression",fields:["@blocks","@filter"]},LetExpression:{"extends":"Expression",
fields:["@head","@body"]},Pattern:{"extends":"Node"},ObjectPattern:{"extends":"Pattern",fields:["@properties"]},ArrayPattern:{"extends":"Pattern",fields:["@elements"]},SwitchCase:{"extends":"Node",fields:["@test","@consequent"]},CatchClause:{"extends":"Node",fields:["@param","@guard","@body"]},Identifier:{"extends":"Expression",fields:["name","kind"]},Literal:{"extends":"Expression",fields:["value"]},Type:{"extends":"Node"},PointerType:{"extends":"Type",fields:["@base"]},ArrayType:{"extends":"PointerType",
fields:["length"]},StructType:{"extends":"Type",fields:["@id","@members","isUnion"]},MemberDeclarator:{"extends":"Node",fields:["modifiers","@declarator"]},ArrowType:{"extends":"Type",fields:["@params","@return"]},TypeIdentifier:{"extends":"Type",fields:["name"]},TypeAliasDirective:{"extends":"Node",fields:["@original","@alias"]},CastExpression:{"extends":"Expression",fields:["@as","@argument"]}};a.allFields=b;for(var g in f)e(g,f[g]);a.makePass=function(a,d){return function(b){for(var e,f,g,w=this._children,
z=0,y=w.length;z<y;z++)if(g=this[w[z]])if(g instanceof Array){f=this[w[z]]=[];for(var B=0,A=g.length;B<A;B++)g[B]?"function"===typeof g[B][a]&&(e=g[B][a](b),null!==e&&f.push(e)):f.push(g[B])}else"function"===typeof g[a]&&(e=g[a](b),this[w[z]]=null===e?void 0:e);return"function"===typeof this[d]?(b.logger&&"undefined"!==typeof this.loc?(b.logger.push(this),e=this[d](b),b.logger.pop()):e=this[d](b),null===e?null:e?e:this):this}};a.makePass=function(a,d,b){return function(e){for(var f,g,w,z=this._children,
y=0,B=z.length;y<B;y++)if(g=b?z.length-1-y:y,w=this[z[g]])if(w instanceof Array){g=this[z[g]]=[];var A;A=0;for(var s=w.length;A<s;A++)f=b?w.length-1-A:A,w[f]?"function"===typeof w[f][a]&&(f=w[f][a](e),null!==f&&(b?g.unshift(f):g.push(f))):b?g.unshift(w[f]):g.push(w[f])}else"function"===typeof w[a]&&(f=w[a](e),this[z[g]]=null===f?void 0:f);return"function"===typeof this[d]?(e.logger&&"undefined"!==typeof this.loc?(e.logger.push(this),f=this[d](e),e.logger.pop()):f=this[d](e),null===f?null:f?f:this):
this}};a.lift=function m(d){if(!d)return d;if(d instanceof Array)return d.map(function(a){return a?m(a):a});var e=d.type,g=a[e];if(!g)throw Error("unknown node type `"+e+"'");g=new g;g.loc=d.loc;for(var e=b(f[e]),v=0,w=e.length;v<w;v++){var z;"@"===e[v].charAt(0)?(z=e[v].substr(1),d[z]&&(g[z]=m(d[z]))):(z=e[v],g[z]=d[z])}return g};a.flatten=function p(a){if(!a)return a;if(a instanceof Array)return a.map(function(a){return p(a)});for(var d=a.type,e={type:d},d=b(f[d]),g=0,z=d.length;g<z;g++){var y;
"@"===d[g].charAt(0)?(y=d[g].substr(1),e[y]=a[y]?p(a[y]):null):(y=d[g],e[y]=a[y])}return e}})("undefined"===typeof exports?estransform={}:exports);
(function(a){function b(a){var d=a.length,b=[],e;for(e=0;e<d;e+=1)b[e]=a.charAt(e);return b}function d(a,d){var b="";for(d|=0;0<d;d>>>=1,a+=a)d&1&&(b+=a);return b}function e(a){a=a.charAt(a.length-1);return"\r"===a||"\n"===a}function f(a){var d={},b,e;for(b in a)a.hasOwnProperty(b)&&(e=a[b],d[b]="object"===typeof e&&null!==e?f(e):e);return d}function g(a,d){function b(a){return"object"===typeof a&&a instanceof Object&&!(a instanceof RegExp)}var e,f;for(e in d)d.hasOwnProperty(e)&&(f=d[e],b(f)?b(a[e])?
g(a[e],f):a[e]=g({},f):a[e]=f);return a}function l(a){return 0<="\t\v\f \u00a0".indexOf(a)||5760<=a.charCodeAt(0)&&0<="\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff".indexOf(a)}function m(a){return 0<="\n\r\u2028\u2029".indexOf(a)}function p(a){return"$"===a||"_"===a||"\\"===a||"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||128<=a.charCodeAt(0)&&Q.NonAsciiIdentifierPart.test(a)}function r(a,d){var b=a.charAt(a.length-1),e=d.charAt(0);return("+"===
b||"-"===b)&&b===e||p(b)&&p(e)?a+" "+d:l(b)||m(b)||l(e)||m(e)?a+d:a+R+d}function u(a){return I+a}function v(a,d){if("Line"===a.type)return e(a.value)?"//"+a.value:"//"+a.value+"\n";if(ba.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)){var b=d,f,g,m,r,s,p;f=("/*"+a.value+"*/").split(/\r\n|[\r\n]/);p=Number.MAX_VALUE;g=1;for(m=f.length;g<m;g+=1){r=f[g];for(s=0;s<r.length&&l(r[s]);)s+=1;p>s&&(p=s)}"undefined"!==typeof b?(r=I,"*"===f[1][p]&&(b+=" "),I=b):(1===p%2&&(p-=1),r=I);g=1;for(m=
f.length;g<m;g+=1)f[g]=u(f[g].slice(p));I=r;return f.join("\n")}return"/*"+a.value+"*/"}function w(a,d,b){return d<b?"("+a+")":a}function z(a,d){var b,e;b=!ba.comment||!a.leadingComments;if(a.type===D.BlockStatement&&b)return R+s(a);if(a.type===D.EmptyStatement&&b)return";";b=I;I+=J;e=K+u(s(a,{semicolonOptional:d}));I=b;return e}function y(a,d){return a.type===D.BlockStatement&&(!ba.comment||!a.leadingComments)&&!e(d)?R:e(d)?I+"":(""===K?" ":K)+(I+"")}function B(a){var d,b,e;d="(";b=0;for(e=a.params.length;b<
e;b+=1)d+=a.params[b].name,b+1<e&&(d+=","+R);return d+")"+z(a.body)}function A(a,d){var f,g,l,m,s,p;g=d.precedence;s=d.allowIn;p=d.allowCall;switch(a.type){case D.SequenceExpression:f="";s|=G.Sequence<g;m=0;for(l=a.expressions.length;m<l;m+=1)f+=A(a.expressions[m],{precedence:G.Assignment,allowIn:s,allowCall:!0}),m+1<l&&(f+=","+R);f=w(f,G.Sequence,g);break;case D.AssignmentExpression:s|=G.Assignment<g;f=w(A(a.left,{precedence:G.Call,allowIn:s,allowCall:!0})+R+a.operator+R+A(a.right,{precedence:G.Assignment,
allowIn:s,allowCall:!0}),G.Assignment,g);break;case D.ConditionalExpression:s|=G.Conditional<g;f=w(A(a.test,{precedence:G.LogicalOR,allowIn:s,allowCall:!0})+R+"?"+R+A(a.consequent,{precedence:G.Assignment,allowIn:s,allowCall:!0})+R+":"+R+A(a.alternate,{precedence:G.Assignment,allowIn:s,allowCall:!0}),G.Conditional,g);break;case D.LogicalExpression:case D.BinaryExpression:l=F[a.operator];s|=l<g;f=r(A(a.left,{precedence:l,allowIn:s,allowCall:!0}),a.operator);m=A(a.right,{precedence:l+1,allowIn:s,allowCall:!0});
f="/"===a.operator&&"/"===f.charAt(f.length-1)?f+(" "+m):r(f,m);f="in"===a.operator&&!s?"("+f+")":w(f,l,g);break;case D.CallExpression:f=A(a.callee,{precedence:G.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1});f+="(";m=0;for(l=a.arguments.length;m<l;m+=1)f+=A(a.arguments[m],{precedence:G.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+R);f+=")";f=p?w(f,G.Call,g):"("+f+")";break;case D.NewExpression:l=a.arguments.length;s=void 0===d.allowUnparenthesizedNew||d.allowUnparenthesizedNew;
f=r("new",A(a.callee,{precedence:G.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:s&&!U&&0===l}));if(!s||U||0<l){f+="(";for(m=0;m<l;m+=1)f+=A(a.arguments[m],{precedence:G.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+R);f+=")"}f=w(f,G.New,g);break;case D.MemberExpression:f=A(a.object,{precedence:G.Call,allowIn:!0,allowCall:p,allowUnparenthesizedNew:!1});a.computed?f+="["+A(a.property,{precedence:G.Sequence,allowIn:!0,allowCall:p})+"]":(a.object.type===D.Literal&&"number"===typeof a.object.value&&
0>f.indexOf(".")&&!/[eExX]/.test(f)&&!(2<=f.length&&"0"===f[0])&&(f+="."),f+="."+a.property.name);f=w(f,G.Member,g);break;case D.UnaryExpression:m=A(a.argument,{precedence:G.Unary+(a.argument.type===D.UnaryExpression&&3>a.operator.length&&a.argument.operator===a.operator?1:0),allowIn:!0,allowCall:!0});""===R?f=r(a.operator,m):(f=a.operator,2<f.length&&(f+=" "),f+=m);f=w(f,G.Unary,g);break;case D.UpdateExpression:f=a.prefix?w(a.operator+A(a.argument,{precedence:G.Unary,allowIn:!0,allowCall:!0}),G.Unary,
g):w(A(a.argument,{precedence:G.Postfix,allowIn:!0,allowCall:!0})+a.operator,G.Postfix,g);break;case D.FunctionExpression:f="function";f=a.id?f+(" "+a.id.name):f+R;f+=B(a);break;case D.ArrayExpression:if(!a.elements.length){f="[]";break}f="["+K;g=I;I+=J;m=0;for(l=a.elements.length;m<l;m+=1)a.elements[m]?f+=u(A(a.elements[m],{precedence:G.Assignment,allowIn:!0,allowCall:!0})):(f+=I+"",m+1===l&&(f+=",")),m+1<l&&(f+=","+K);I=g;e(f)||(f+=K);f+=I+"]";break;case D.Property:f="get"===a.kind||"set"===a.kind?
a.kind+" "+A(a.key,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+B(a.value):A(a.key,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+":"+R+A(a.value,{precedence:G.Assignment,allowIn:!0,allowCall:!0});break;case D.ObjectExpression:if(!a.properties.length){f="{}";break}f="{"+K;g=I;I+=J;m=0;for(l=a.properties.length;m<l;m+=1)f+=u(A(a.properties[m],{precedence:G.Sequence,allowIn:!0,allowCall:!0})),m+1<l&&(f+=","+K);I=g;e(f)||(f+=K);f+=I+"}";break;case D.ThisExpression:f="this";break;case D.Identifier:f=
a.name;break;case D.Literal:if(a.hasOwnProperty("raw")&&Z)try{if(l=Z(a.raw).body[0].expression,l.type===D.Literal&&l.value===a.value){f=a.raw;break}}catch(v){}if(null===a.value){f="null";break}if("string"===typeof a.value){f=a.value;p="";var y;m=l=0;"undefined"===typeof f[0]&&(f=b(f));g=0;for(s=f.length;g<s;g+=1){y=f[g];if("'"===y)l+=1;else if('"'===y)m+=1;else if("/"===y&&O)p+="\\";else if(0<="\\\n\r\u2028\u2029".indexOf(y)){var z="\\";switch(y){case "\\":z+="\\";break;case "\n":z+="n";break;case "\r":z+=
"r";break;case "\u2028":z+="u2028";break;case "\u2029":z+="u2029";break;default:throw Error("Incorrectly classified character");}p+=z;continue}else if(O&&" ">y||!O&&!(P||" "<=y&&"~">=y)){var z=f[g+1],E=y.charCodeAt(0),H=E.toString(16),Q="\\";switch(y){case "\b":Q+="b";break;case "\f":Q+="f";break;case "\t":Q+="t";break;default:Q=O||255<E?Q+("u"+"0000".slice(H.length)+H):"\x00"===y&&0>"0123456789".indexOf(z)?Q+"0":"\v"===y?Q+"v":Q+("x"+"00".slice(H.length)+H)}p+=Q;continue}p+=y}l=!("double"===L||"auto"===
L&&m<l);f=p;p=l?"'":'"';"undefined"===typeof f[0]&&(f=b(f));g=0;for(s=f.length;g<s;g+=1){y=f[g];if("'"===y&&l||'"'===y&&!l)p+="\\";p+=y}f=p+(l?"'":'"');break}if("number"===typeof a.value){f=a.value;if(f!==f)throw Error("Numeric literal whose value is NaN");if(0>1/f)throw Error("Numeric literal whose value is negative");if(f===1/0)f=O?"null":V?"1e400":"1e+400";else{g=""+f;if(V&&!(3>g.length)){s=g.indexOf(".");!O&&("0"===g.charAt(0)&&1===s)&&(s=0,g=g.slice(1));l=g;g=g.replace("e+","e");m=0;if(0<(p=
l.indexOf("e")))m=+l.slice(p+1),l=l.slice(0,p);0<=s&&(m-=l.length-s-1,l=+(l.slice(0,s)+l.slice(s+1))+"");for(p=0;"0"===l.charAt(l.length+p-1);)p-=1;0!==p&&(m-=p,l=l.slice(0,p));0!==m&&(l+="e"+m);if((l.length<g.length||M&&1E12<f&&Math.floor(f)===f&&(l="0x"+f.toString(16)).length<g.length)&&+l===f)g=l}f=g}break}f=a.value.toString()}if(void 0===f)throw Error("Unknown expression type: "+a.type);return f}function s(a,b){var f,g,l,p,w,F,E;F=!0;E=";";b&&(F=void 0===b.allowIn||b.allowIn,!ga&&!0===b.semicolonOptional&&
(E=""));switch(a.type){case D.BlockStatement:l="{"+K;p=I;I+=J;f=0;for(g=a.body.length;f<g;f+=1)w=u(s(a.body[f],{semicolonOptional:f===g-1})),l+=w,e(w)||(l+=K);I=p;l+=I+"}";break;case D.BreakStatement:l=a.label?"break "+a.label.name+E:"break"+E;break;case D.ContinueStatement:l=a.label?"continue "+a.label.name+E:"continue"+E;break;case D.DoWhileStatement:l=r("do",z(a.body));l+=y(a.body,l);l+="while"+R+"("+A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")"+E;break;case D.CatchClause:p=I;I+=
J;l="catch"+R+"("+A(a.param,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")";I=p;l+=z(a.body);break;case D.DebuggerStatement:l="debugger"+E;break;case D.EmptyStatement:l=";";break;case D.ExpressionStatement:l=A(a.expression,{precedence:G.Sequence,allowIn:!0,allowCall:!0});l="{"===l.charAt(0)||"function"===l.slice(0,8)&&0<=" (".indexOf(l.charAt(8))?"("+l+")"+E:l+E;break;case D.VariableDeclarator:l=a.init?a.id.name+R+"="+R+A(a.init,{precedence:G.Assignment,allowIn:F,allowCall:!0}):a.id.name;break;
case D.VariableDeclaration:l=a.kind;if(1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===D.FunctionExpression)l+=" "+s(a.declarations[0],{allowIn:F});else{p=I;I+=J;w=a.declarations[0];l=ba.comment&&w.leadingComments?l+("\n"+u(s(w,{allowIn:F}))):l+(" "+s(w,{allowIn:F}));f=1;for(g=a.declarations.length;f<g;f+=1)w=a.declarations[f],l=ba.comment&&w.leadingComments?l+(","+K+u(s(w,{allowIn:F}))):l+(","+R+s(w,{allowIn:F}));I=p}l+=E;break;case D.ThrowStatement:l=r("throw",A(a.argument,
{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+E;break;case D.TryStatement:l="try"+z(a.block);l+=y(a.block,l);f=0;for(g=a.handlers.length;f<g;f+=1)if(l+=s(a.handlers[f]),a.finalizer||f+1!==g)l+=y(a.handlers[f].body,l);a.finalizer&&(l+="finally"+z(a.finalizer));break;case D.SwitchStatement:p=I;I+=J;l="switch"+R+"("+A(a.discriminant,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")"+R+"{"+K;I=p;if(a.cases){f=0;for(g=a.cases.length;f<g;f+=1)w=u(s(a.cases[f],{semicolonOptional:f===g-1})),l+=w,e(w)||
(l+=K)}l+=I+"}";break;case D.SwitchCase:p=I;I+=J;l=a.test?r("case",A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+":":"default:";f=0;if((g=a.consequent.length)&&a.consequent[0].type===D.BlockStatement)w=z(a.consequent[0]),l+=w,f=1;for(f!==g&&!e(l)&&(l+=K);f<g;f+=1)w=u(s(a.consequent[f],{semicolonOptional:f===g-1&&""===E})),l+=w,f+1!==g&&!e(w)&&(l+=K);I=p;break;case D.IfStatement:p=I;I+=J;a.alternate?a.alternate.type===D.IfStatement?(l="if"+R+"("+A(a.test,{precedence:G.Sequence,allowIn:!0,
allowCall:!0})+")",I=p,l+=z(a.consequent),l+=y(a.consequent,l),l+="else "+s(a.alternate)):(l="if"+R+"("+A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",I=p,l+=z(a.consequent),l+=y(a.consequent,l),l=r(l+"else",z(a.alternate,""===E))):(l="if"+R+"("+A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",I=p,l+=z(a.consequent,""===E));break;case D.ForStatement:p=I;I+=J;l="for"+R+"(";l=a.init?a.init.type===D.VariableDeclaration?l+s(a.init,{allowIn:!1}):l+(A(a.init,{precedence:G.Sequence,
allowIn:!1,allowCall:!0})+";"):l+";";l=a.test?l+(R+A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+";"):l+";";l=a.update?l+(R+A(a.update,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")"):l+")";I=p;l+=z(a.body,""===E);break;case D.ForInStatement:l="for"+R+"(";a.left.type===D.VariableDeclaration?(p=I,I+=J+J,l+=a.left.kind+" "+s(a.left.declarations[0],{allowIn:!1})):(p=I,I+=J,l+=A(a.left,{precedence:G.Call,allowIn:!0,allowCall:!0}));p=I=p;I+=J;l=r(l,"in");l=r(l,A(a.right,{precedence:G.Sequence,
allowIn:!0,allowCall:!0}))+")";I=p;l+=z(a.body,""===E);break;case D.LabeledStatement:l=a.label.name+":"+z(a.body,""===E);break;case D.Program:l="";f=0;for(g=a.body.length;f<g;f+=1)w=u(s(a.body[f],{semicolonOptional:f===g-1})),l+=w,f+1<g&&!e(w)&&(l+=K);break;case D.FunctionDeclaration:l="function"+R;a.id&&(l+=(""===R?" ":"")+a.id.name);l+=B(a);break;case D.ReturnStatement:l=a.argument?r("return",A(a.argument,{precedence:G.Sequence,allowIn:!0,allowCall:!0}))+E:"return"+E;break;case D.WhileStatement:p=
I;I+=J;l="while"+R+"("+A(a.test,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")";I=p;l+=z(a.body,""===E);break;case D.WithStatement:p=I,I+=J,l="with"+R+"("+A(a.object,{precedence:G.Sequence,allowIn:!0,allowCall:!0})+")",I=p,l+=z(a.body,""===E)}if(void 0===l)throw Error("Unknown statement type: "+a.type);if(ba.comment){f=l;if(a.leadingComments){p=f;E=a.leadingComments[0];f=v(E);e(f)||(f+="\n");g=1;for(l=a.leadingComments.length;g<l;g+=1)E=a.leadingComments[g],E=v(E),e(E)||(E+="\n"),f+=I+E;f+=I+
p}if(a.trailingComments){p=!e(f);g=I+f+J;for(l=g.length-1;0<=l&&!m(g.charAt(l));l-=1);w=d(" ",g.length-1-l);g=0;for(l=a.trailingComments.length;g<l;g+=1)E=a.trailingComments[g],p?(f=0===g?f+J:f+w,f+=v(E,w)):f+=u(v(E)),g!==l-1&&!e(f)&&(f+="\n")}return f}return l}function E(a,d){var b,e,f,g,l,m,u;b=[a];for(e=[];b.length;)if(f=b.pop()){g=d.enter?d.enter(f):void 0;if(g===S.Break)break;b.push(null);e.push(f);if(g!==S.Skip){m=T[f.type];for(g=m.length;0<=(g-=1);)if(u=f[m[g]])if(Y(u))for(l=u.length;0<=(l-=
1);)u[l]&&b.push(u[l]);else b.push(u)}}else if(f=e.pop(),g=d.leave?d.leave(f):void 0,g===S.Break)break}function H(a,d){var b,e,f,g;e=d.length;for(f=0;e;)b=e>>>1,g=f+b,d[g].range[0]>a.range[0]?e=b:(f=g+1,e-=b+1);b=f;a.extendedRange=[a.range[0],a.range[1]];b!==d.length&&(a.extendedRange[1]=d[b].range[0]);b-=1;0<=b&&(b<d.length?a.extendedRange[0]=d[b].range[1]:(void 0).length&&(a.extendedRange[1]=d[d.length-1].range[0]));return a}var D,G,F,Q,T,S,Y,I,J,O,V,M,L,P,K,R,U,ga,ba,Z;D={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",
TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};G={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18};F={"||":G.LogicalOR,"&&":G.LogicalAND,
"|":G.BitwiseOR,"^":G.BitwiseXOR,"&":G.BitwiseAND,"==":G.Equality,"!=":G.Equality,"===":G.Equality,"!==":G.Equality,"<":G.Relational,">":G.Relational,"<=":G.Relational,">=":G.Relational,"in":G.Relational,"instanceof":G.Relational,"<<":G.BitwiseSHIFT,">>":G.BitwiseSHIFT,">>>":G.BitwiseSHIFT,"+":G.Additive,"-":G.Additive,"*":G.Multiplicative,"%":G.Multiplicative,"/":G.Multiplicative};Q={NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
(Y=Array.isArray)||(Y=function(a){return"[object Array]"===Object.prototype.toString.call(a)});T={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],
ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],
SwitchStatement:["descriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],PointerType:["base"],StructType:["id","fields"],FieldDeclarator:["id","decltype"],ArrowType:["params","return"],TypeIdentifier:[],TypeAliasDirective:["original",
"alias"],CastExpression:["as","argument"]};S={Break:1,Skip:2};a.version="0.0.6-dev";a.generate=function(a,b){var e={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0}};"undefined"!==typeof b?("string"===typeof b.indent&&(e.format.indent.style=b.indent),"number"===typeof b.base&&(e.format.indent.base=b.base),b=g(e,b),J=b.format.indent.style,
I="string"===typeof b.base?b.base:d(J,b.format.indent.base)):(b=e,J=b.format.indent.style,I=d(J,b.format.indent.base));O=b.format.json;V=b.format.renumber;M=O?!1:b.format.hexadecimal;L=O?"double":b.format.quotes;P=b.format.escapeless;b.format.compact?K=R=J=I="":(K="\n",R=" ");U=b.format.parentheses;ga=b.format.semicolons;Z=O?null:b.parse;ba=b;switch(a.type){case D.BlockStatement:case D.BreakStatement:case D.CatchClause:case D.ContinueStatement:case D.DoWhileStatement:case D.DebuggerStatement:case D.EmptyStatement:case D.ExpressionStatement:case D.ForStatement:case D.ForInStatement:case D.FunctionDeclaration:case D.IfStatement:case D.LabeledStatement:case D.Program:case D.ReturnStatement:case D.SwitchStatement:case D.SwitchCase:case D.ThrowStatement:case D.TryStatement:case D.VariableDeclaration:case D.VariableDeclarator:case D.WhileStatement:case D.WithStatement:return s(a);
case D.AssignmentExpression:case D.ArrayExpression:case D.BinaryExpression:case D.CallExpression:case D.ConditionalExpression:case D.FunctionExpression:case D.Identifier:case D.Literal:case D.LogicalExpression:case D.MemberExpression:case D.NewExpression:case D.ObjectExpression:case D.Property:case D.SequenceExpression:case D.ThisExpression:case D.UnaryExpression:case D.UpdateExpression:return A(a,{precedence:G.Sequence,allowIn:!0,allowCall:!0})}throw Error("Unknown node type: "+a.type);};a.traverse=
E;a.attachComments=function(a,d,b){var e=[],g,l;if(!a.range)throw Error("attachComments needs range information");if(!b.length){if(d.length){l=0;for(g=d.length;l<g;l+=1)b=f(d[l]),b.extendedRange=[0,a.range[0]],e.push(b);a.leadingComments=e}return a}l=0;for(g=d.length;l<g;l+=1)e.push(H(f(d[l]),b));E(a,{cursor:0,enter:function(a){for(var d;this.cursor<e.length;){d=e[this.cursor];if(d.extendedRange[1]>a.range[0])break;d.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(d),
e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return S.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return S.Skip}});E(a,{cursor:0,leave:function(a){for(var d;this.cursor<e.length;){d=e[this.cursor];if(a.range[1]<d.extendedRange[0])break;a.range[1]===d.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(d),e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return S.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return S.Skip}});
return a}})("undefined"===typeof exports?escodegen={}:exports);
var verifierTraceLevel=new Option("tv","tv","number",0,"Verifier Trace Level"),Type=function(){function a(){unexpected("Type is Abstract")}a.prototype.equals=function(a){return this===a};a.prototype.merge=function(a){unexpected("Merging "+this+" with "+a)};a.cache={name:{},classInfo:[],instanceInfo:[],scriptInfo:[],methodInfo:[]};a.from=function(d,b){var f=null;d instanceof ClassInfo?f=a.cache.classInfo:d instanceof InstanceInfo?f=a.cache.instanceInfo:d instanceof ScriptInfo&&(f=a.cache.scriptInfo);
return f?f[d.runtimeId]||(f[d.runtimeId]=new TraitsType(d,b)):d instanceof ActivationInfo?new TraitsType(d.methodInfo):d instanceof Global?new TraitsType(d.scriptInfo):d instanceof Interface?new TraitsType(d.classInfo,b):d instanceof MethodInfo?new MethodType(d):b&&d instanceof Class?a.from(d.classInfo,b):Type.Any};a.fromSimpleName=function(a,b){return Type.fromName(Multiname.fromSimpleName(a),b)};a.fromName=function(d,b){if(void 0===d)return Type.Undefined;var f=Multiname.isQName(d)?Multiname.getFullQualifiedName(d):
void 0;if(f){var g=a.cache.name[f];if(g)return g}if(f===Multiname.getPublicQualifiedName("void"))return Type.Void;!0;g=(g=b.findClassInfo(d))?a.from(g,b):Type.Any;d.hasTypeParameter()&&(g=new ParameterizedType(g,a.fromName(d.typeParameter,b)));return a.cache.name[f]=g};a.prototype.applyType=function(a){return new ParameterizedType(this,a)};a.prototype.toString=function(){return"[type]"};a.prototype.isNumeric=function(){return this===Type.Int||this===Type.Uint||this===Type.Number};a.prototype.isString=
function(){return this===Type.String};a.prototype.isDirectlyReadable=function(){return this===Type.Array};a.prototype.isIndexedReadable=function(){return this.isParameterizedType()};a.prototype.isDirectlyWriteable=function(){return this===Type.Array};a.prototype.isIndexedWriteable=function(){return this.isParameterizedType()};a.prototype.isVector=function(){return this.isParameterizedType()};a.prototype.isNotDirectlyIndexable=function(){return this===Type.Any||this===Type.XML||this===Type.XMLList||
this===Type.Dictionary};a.prototype.isParameterizedType=function(){return this instanceof ParameterizedType};a.prototype.instanceType=function(){return this};a.prototype.getTrait=function(){return null};a.prototype.super=function(){unexpected("Can't call super on "+this)};a.prototype.isSubtypeOf=function(a){return this===a||this.equals(a)?!0:this.merge(a)===this};var b=!1;a.initializeTypes=function(d){b||(a.Any=new AtomType("Any"),a.Null=new AtomType("Null"),a.Undefined=new AtomType("Undefined"),
a.Void=new AtomType("Void"),a.Int=Type.fromSimpleName("int",d).instanceType(),a.Uint=Type.fromSimpleName("uint",d).instanceType(),a.Class=Type.fromSimpleName("Class",d).instanceType(),a.Array=Type.fromSimpleName("Array",d).instanceType(),a.Object=Type.fromSimpleName("Object",d).instanceType(),a.String=Type.fromSimpleName("String",d).instanceType(),a.Number=Type.fromSimpleName("Number",d).instanceType(),a.Boolean=Type.fromSimpleName("Boolean",d).instanceType(),a.Function=Type.fromSimpleName("Function",
d).instanceType(),a.XML=Type.fromSimpleName("XML",d).instanceType(),a.XMLList=Type.fromSimpleName("XMLList",d).instanceType(),a.Dictionary=Type.fromSimpleName("flash.utils.Dictionary",d).instanceType(),b=!0)};return a}(),AtomType=function(){function a(a){this.name=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){if(this===Type.Any)return"?";if(this===Type.Undefined)return"_";if(this===Type.Null)return"X";if(this===Type.Void)return"V";unexpected()};a.prototype.merge=function(a){return a instanceof
TraitsType?Type.Any:this===a?this:Type.Any};return a}(),MethodType=function(){function a(a){this.methodInfo=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MT "+this.methodInfo};return a}(),TraitsType=function(){function a(a,d){!0;this.object=a;this.traits=a.traits;this.domain=d;this.object instanceof InstanceInfo&&!0}function b(a){if(a instanceof ScriptInfo)return"SI";if(a instanceof ClassInfo)return"CI:"+a.instanceInfo.name.name;if(a instanceof InstanceInfo)return"II:"+
a.name.name;if(a instanceof MethodInfo)return"MI";if(a instanceof ActivationInfo)return"AC";!0}function d(a,b,g){var l=!g,m;if(Multiname.isQName(b)){v=Multiname.getQualifiedName(b);r=0;for(u=a.length;r<u;r++)if(m=a[r],Multiname.getQualifiedName(m.name)===v&&!(g&&m.isGetter()||l&&m.isSetter()))return m}else if(!(b instanceof MultinameType)){!0;for(var p,r=0,u=b.namespaces.length;r<u;r++){var v=b.getQName(r);if(b.namespaces[r].isDynamic())p=v;else if(m=d(a,v,g))return m}if(p)return d(a,p,g)}}a.prototype=
Object.create(Type.prototype);a.prototype.getTrait=function(a,b,g){if(a instanceof MultinameType||a.isAttribute())return null;if(g&&(this.isInstanceInfo()||this.isClassInfo())){g=this;do{var l=g.getTrait(a,b,!1);l||(g=g.super())}while(!l&&g);return l}return d(this.traits,a,b)};a.prototype.getTraitAt=function(a){if(this.object instanceof ScriptInfo||this.object instanceof MethodInfo){a:{for(var d=this.traits,b=d.length-1;0<=b;b--)if(d[b].slotId===a){a=d[b];break a}unexpected("Cannot find trait with slotId: "+
a+" in "+d);a=void 0}return a}};a.prototype.toString=function(){switch(this){case Type.Int:return"I";case Type.Uint:return"U";case Type.Array:return"A";case Type.Object:return"O";case Type.String:return"S";case Type.Number:return"N";case Type.Boolean:return"B";case Type.Function:return"F"}return b(this.object)};a.prototype.instanceType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.instanceInfo,this.domain))};a.prototype.classType=function(){!0;return this.instanceCache||
(this.instanceCache=Type.from(this.object.classInfo,this.domain))};a.prototype.super=function(){if(this.object instanceof ClassInfo)return Type.Class;!0;if(this.object.superName){var a=Type.fromName(this.object.superName,this.domain).instanceType();!0;return a}return null};a.prototype.isScriptInfo=function(){return this.object instanceof ScriptInfo};a.prototype.isClassInfo=function(){return this.object instanceof ClassInfo};a.prototype.isInstanceInfo=function(){return this.object instanceof InstanceInfo};
a.prototype.isInstanceOrClassInfo=function(){return this.isInstanceInfo()||this.isClassInfo()};a.prototype.equals=function(a){return this.traits===a.traits};a.prototype.merge=function(a){if(a instanceof TraitsType){if(this.equals(a))return this;if(this.isNumeric()&&a.isNumeric())return Type.Number;if(this.isInstanceInfo()&&a.isInstanceInfo()){for(var d=[],b=this;b;b=b.super())d.push(b);for(b=a;b;b=b.super())for(a=0;a<d.length;a++)if(d[a].equals(b))return b;return Type.Object}}return Type.Any};return a}(),
MultinameType=function(){function a(a,d,e){this.namespaces=a;this.name=d;this.flags=e}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MN"};return a}(),ParameterizedType=function(){function a(a,d){this.type=a;this.parameter=d}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return this.type+"<"+this.parameter+">"};a.prototype.instanceType=function(){!0;return new ParameterizedType(this.type.instanceType(),this.parameter.instanceType())};a.prototype.equals=
function(a){return a instanceof ParameterizedType?this.type.equals(a.type)&&this.parameter.equals(a.parameter):!1};a.prototype.merge=function(a){return a instanceof TraitsType&&this.equals(a)?this:Type.Any};return a}(),TypeInformation=function(){function a(){}a.prototype.toString=function(){return toKeyValueArray(this).map(function(a){return a[0]+": "+a[1]}).join(" | ")};return a}(),Verifier=function(){function a(a){this.name="VerifierError";this.message=a||""}function b(){this.writer=new IndentingWriter}
var d,e=function(){this.id=m+=1;this.stack=[];this.scope=[];this.local=[]},f=function(a,d){if(a.length!=d.length)return!1;for(var b=a.length-1;0<=b;b--)if(!a[b].equals(d[b]))return!1;return!0},g=function(a,d){if(a.length!=d.length)return!1;for(var b=a.length-1;0<=b;b--)if(!(a[b]===d[b]||a[b].equals(d[b]))&&a[b].merge(d[b])!==a[b])return!1;return!0},l=function(a,d){!0;for(var b=a.length-1;0<=b;b--)!0,a[b]!==d[b]&&(a[b]=a[b].merge(d[b]))},m=0;e.prototype.clone=function(){var a=new d;a.originalId=this.id;
a.stack=this.stack.slice(0);a.scope=this.scope.slice(0);a.local=this.local.slice(0);return a};e.prototype.trace=function(a){a.writeLn(this.toString())};e.prototype.toString=function(){return"<"+this.id+(this.originalId?":"+this.originalId:"")+", L["+this.local.join(", ")+"], S["+this.stack.join(", ")+"], $["+this.scope.join(", ")+"]>"};e.prototype.equals=function(a){return f(this.stack,a.stack)&&f(this.scope,a.scope)&&f(this.local,a.local)};e.prototype.isSubset=function(a){return g(this.stack,a.stack)&&
g(this.scope,a.scope)&&g(this.local,a.local)};e.prototype.merge=function(a){l(this.local,a.local);l(this.stack,a.stack);l(this.scope,a.scope)};d=e;var p=function(a,d,b){this.savedScope=b;this.methodInfo=a;this.domain=d;this.writer=new IndentingWriter;this.returnType=Type.Undefined};p.prototype.verify=function(){var a=this.methodInfo,b=verifierTraceLevel.value?this.writer:null,e=a.analysis.blocks;e.forEach(function(a){a.entryState=a.exitState=null});b&&this.methodInfo.trace(b);var f=new d;!0;this.thisType=
a.holder?Type.from(a.holder,this.domain):Type.Any;f.local.push(this.thisType);for(var g=0;g<a.parameters.length;g++)f.local.push(Type.fromName(a.parameters[g].type,this.domain).instanceType());var l=a.localCount-a.parameters.length-1;if(a.needsRest()||a.needsArguments())f.local.push(Type.Array),l-=1;for(g=0;g<l;g++)f.local.push(Type.Undefined);!0;b&&f.trace(b);a=0;for(g=e.length;a<g;a++)e[a].bdo=a;var m=new Shumway.SortedList(function(a,d){return a.bdo-d.bdo});e[0].entryState=f;for(m.push(e[0]);!m.isEmpty();){var p=
m.pop(),s=p.exitState=p.entryState.clone();this.verifyBlock(p,s);p.succs.forEach(function(a){m.contains(a)?(b&&b.writeLn("Forward Merged Block: "+a.bid+" "+s.toString()+" with "+a.entryState.toString()),a.entryState.merge(s),b&&b.writeLn("Merged State: "+a.entryState)):a.entryState?a.entryState.isSubset(s)||(b&&b.writeLn("Backward Merged Block: "+p.bid+" with "+a.bid+" "+s.toString()+" with "+a.entryState.toString()),a.entryState.merge(s),m.push(a),b&&b.writeLn("Merged State: "+a.entryState)):(a.entryState=
s.clone(),m.push(a),b&&b.writeLn("Added Block: "+a.bid+" to worklist: "+a.entryState.toString()))})}b&&b.writeLn("Inferred return type: "+this.returnType);this.methodInfo.inferredReturnType=this.returnType};p.prototype.verifyBlock=function(d,b){function e(a){return a instanceof TraitsType||a instanceof ParameterizedType?a===Type.Function||a===Type.Class||a===Type.Object?Type.Object:a.instanceType():Type.Any}function f(){return M.ti||(M.ti=new TypeInformation)}function g(a){!0;f().type=a;T.push(a)}
function l(){return T.pop()}function m(a){if(a instanceof MultinameType){if("Array"===a.name)debugger;return Type.Any}for(var d=S.length-1;d>=-G.length;d--){var b=0<=d?S[d]:G[G.length+d];if(b instanceof TraitsType){if(b.getTrait(a,!1,!0)){f().scopeDepth=S.length-d-1;if(b.isClassInfo()||b.isScriptInfo())f().object=LazyInitializer.create(b.object);return b}}else{if("Array"===a.name)debugger;return Type.Any}}if(d=J.findDefiningScript(a,!1))return f().object=LazyInitializer.create(d.script),Type.from(d.script,
J);if("Array"===a.name)debugger;return Type.Any}function p(){var a=O[M.index];if(a.isRuntime()){var d=a.namespaces,b=a.name;a.isRuntimeName()&&(b=l());a.isRuntimeNamespace()&&(d=[l()]);return new MultinameType(d,b,a.flags)}return a}function s(a){if(a instanceof TraitsType&&(a=a.getTraitAt(M.index),Y&&Y.debugLn("accessSlot() -> "+a),a)){f().trait=a;if(a.isSlot())return Type.fromName(a.typeName,J).instanceType();if(a.isClass())return Type.from(a.classInfo,J)}return Type.Any}function E(a){return a instanceof
Multiname&&Multiname.isNumeric(a)||a instanceof MultinameType&&a.name instanceof TraitsType&&a.name.isNumeric()}function H(a,d){if(a instanceof TraitsType||a instanceof ParameterizedType){var b=a.getTrait(d,!1,!0);Y&&Y.debugLn("getProperty("+d+") -> "+b);if(b){f().trait=b;if(b.isSlot()||b.isConst())return Type.fromName(b.typeName,J).instanceType();if(b.isGetter())return Type.fromName(b.methodInfo.returnType,J).instanceType();if(b.isClass())return Type.from(b.classInfo,J);if(b.isMethod())return Type.from(b.methodInfo,
J)}else a.isDirectlyReadable()&&d instanceof Multiname&&(f().propertyQName=Multiname.getPublicQualifiedName(d.name));if(E(d))if(a.isIndexedReadable()){if(f().isIndexedReadable=!0,a.isVector())return a.parameter}else a.isDirectlyReadable()&&(f().isDirectlyReadable=!0)}return Type.Any}function D(a,d){if(a instanceof TraitsType||a instanceof ParameterizedType){var b=a.getTrait(d,!0,!0);Y&&Y.debugLn("setProperty("+d+") -> "+b);b?f().trait=b:a.isDirectlyWriteable()&&d instanceof Multiname&&(f().propertyQName=
Multiname.getPublicQualifiedName(d.name));E(d)&&(a.isDirectlyWriteable()?f().isDirectlyWriteable=!0:a.isVector()&&(f().isIndexedWriteable=!0))}}var G=this.savedScope,F=G[0],Q=b.local,T=b.stack,S=b.scope,Y=verifierTraceLevel.value?this.writer:null,I=this.methodInfo.analysis.bytecodes,J=this.domain,O=this.methodInfo.abc.constantPool.multinames,V=this.methodInfo,M,L,P,K;Y&&Y.enter("verifyBlock: "+d.bid+", range: ["+d.position+", "+d.end.position+"], entryState: "+b.toString()+" {");for(var R=d.position,
U=d.end.position;R<=U;R++){M=I[R];K=M.op;Y&&1<verifierTraceLevel.value&&Y.writeLn(("stateBefore: "+b.toString()+" $$["+G.join(", ")+"]").padRight(" ",100)+" : "+R+", "+M.toString(V.abc));switch(K){case 1:break;case 3:l();break;case 4:P=p();L=l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);g(H(L.super(),P));break;case 5:K=l();P=p();L=l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);D(L.super(),P,K);break;case 6:notImplemented(M);
break;case 7:notImplemented(M);break;case 8:b.local[M.index]=Type.Undefined;break;case 10:notImplemented(M);break;case 11:notImplemented(M);break;case 12:case 24:case 13:case 23:case 14:case 22:case 15:case 21:case 19:case 20:case 25:case 26:l();l();break;case 16:break;case 17:case 18:l();break;case 27:l(Type.Int);break;case 29:S.pop();break;case 30:case 35:l(Type.Int);l();g(Type.Any);break;case 31:g(Type.Boolean);break;case 50:g(Type.Boolean);break;case 32:g(Type.Null);break;case 33:g(Type.Undefined);
break;case 34:notImplemented(M);break;case 36:g(Type.Int);break;case 37:g(Type.Int);break;case 44:g(Type.String);break;case 45:g(Type.Int);break;case 46:g(Type.Uint);break;case 47:g(Type.Number);break;case 38:g(Type.Boolean);break;case 39:g(Type.Boolean);break;case 40:g(Type.Number);break;case 41:l();break;case 42:K=l();g(K);g(K);break;case 43:L=l();P=l();g(L);g(P);break;case 28:l();S.push(Type.Any);break;case 48:S.push(l());break;case 49:notImplemented(M);break;case 53:case 54:case 55:g(Type.Int);
break;case 56:case 57:g(Type.Number);break;case 58:case 59:case 60:l(Type.Int);break;case 61:case 62:l(Type.Number);break;case 64:g(Type.Function);break;case 65:T.popMany(M.argCount);L=l();l();g(Type.Any);break;case 67:throw new a("callmethod");case 68:notImplemented(M);break;case 69:case 78:case 79:case 70:case 76:T.popMany(M.argCount);P=p();L=l();if(69===K||78===K)L=this.thisType.super(),f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);L=H(L,P);if(79===K||78===K)break;
L=L instanceof MethodType?Type.fromName(L.methodInfo.returnType,J).instanceType():L instanceof TraitsType&&L.isClassInfo()?L.instanceType():Type.Any;g(L);break;case 71:this.returnType.merge(Type.Undefined);break;case 72:L=l();V.returnType&&(P=Type.fromName(V.returnType,this.domain).instanceType(),P.isSubtypeOf(L)&&(f().noCoercionNeeded=!0));break;case 73:T.popMany(M.argCount);T.pop();this.thisType.isInstanceInfo()&&this.thisType.super()===Type.Object?f().noCallSuperNeeded=!0:f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);
break;case 66:T.popMany(M.argCount);g(e(l()));break;case 74:T.popMany(M.argCount);P=p();g(e(H(T.pop(),P)));break;case 75:notImplemented(M);break;case 77:notImplemented(M);break;case 80:case 81:case 82:break;case 83:!0;K=l();L=l();L===Type.Any?g(Type.Any):g(L.applyType(K));break;case 84:notImplemented(M);break;case 85:T.popMany(2*M.argCount);g(Type.Object);break;case 86:T.popMany(M.argCount);g(Type.Array);break;case 87:g(Type.from(new ActivationInfo(this.methodInfo)));break;case 88:g(Type.Any);break;
case 89:p();l();g(Type.XMLList);break;case 90:g(Type.Any);break;case 93:g(m(p(),!0));break;case 94:g(m(p(),!1));break;case 95:notImplemented(M);break;case 96:P=p();g(H(m(P,!0),P));break;case 104:case 97:K=l();P=p();L=l();D(L,P,K,M);break;case 98:g(Q[M.index]);break;case 99:Q[M.index]=l();break;case 100:g(F);f().object=LazyInitializer.create(F.object);break;case 101:g(S[M.index]);break;case 102:P=p();L=l();g(H(L,P));break;case 103:notImplemented(M);break;case 105:notImplemented(M);break;case 106:p();
l();g(Type.Boolean);break;case 107:notImplemented(M);break;case 108:g(s(l()));break;case 109:K=l();L=l();s(L);break;case 110:notImplemented(M);break;case 111:notImplemented(M);break;case 112:l();g(Type.String);break;case 113:l();g(Type.String);break;case 114:l();g(Type.String);break;case 131:case 115:l();g(Type.Int);break;case 136:case 116:l();g(Type.Uint);break;case 132:case 117:l();g(Type.Number);break;case 129:case 118:l();g(Type.Boolean);break;case 119:notImplemented(M);break;case 120:break;case 121:l();
g(Type.Number);break;case 122:notImplemented(M);break;case 123:notImplemented(M);break;case 128:L=l();P=Type.fromName(O[M.index],this.domain).instanceType();P.isSubtypeOf(L)&&(f().noCoercionNeeded=!0);g(P);break;case 130:break;case 133:l();g(Type.String);break;case 134:notImplemented(M);break;case 135:L=l();l();L instanceof TraitsType?g(L.instanceType()):g(Type.Any);break;case 137:notImplemented(M);break;case 144:case 145:case 147:l();g(Type.Number);break;case 146:case 148:Q[M.index]=Type.Number;
break;case 149:l();g(Type.String);break;case 150:l();g(Type.Boolean);break;case 160:P=l();L=l();L.isNumeric()&&P.isNumeric()?g(Type.Number):L===Type.String||P===Type.String?g(Type.String):g(Type.Any);break;case 161:case 162:case 163:case 164:l();l();g(Type.Number);break;case 168:case 169:case 170:case 165:case 166:case 167:l();l();g(Type.Int);break;case 151:l();g(Type.Int);break;case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 180:l();l();g(Type.Boolean);break;case 178:l();g(Type.Boolean);
break;case 179:l();l();g(Type.Boolean);break;case 194:case 195:Q[M.index]=Type.Int;break;case 193:case 192:case 196:l();g(Type.Int);break;case 197:case 198:case 199:l();l();g(Type.Int);break;case 208:case 209:case 210:case 211:g(Q[K-208]);break;case 212:case 213:case 214:case 215:Q[K-OP_setlocal0]=l();break;case 239:break;case 240:break;case 241:break;case 242:break;case 243:break;default:console.info("Not Implemented: "+M)}Y&&M.ti&&Y.debugLn("> TI: "+M.ti)}Y&&(Y.leave("}"),Y.writeLn("verifiedBlock: "+
d.bid+", range: ["+d.position+", "+d.end.position+"], exitState: "+b.toString()))};b.prototype.verifyMethod=function(d,b){try{var e=d.abc.applicationDomain,f=b.getScopeObjects();f[f.length-1]||(d.holder instanceof InstanceInfo?f[f.length-1]=d.holder.classInfo:d.holder instanceof ClassInfo&&(f[f.length-1]=d.holder));var g=f.map(function(a){return a instanceof MethodInfo?Type.from(new ActivationInfo(a)):Type.from(a,e)});(new p(d,d.abc.applicationDomain,g)).verify();d.verified=!0;Counter.count("Verifier: Methods")}catch(l){if(!(l instanceof
a))throw l;}};return b}();
(function(a){function b(a,d){!0;return Object.create(a.prototype,{nodeName:{value:d}})}function d(a){var d;if(a instanceof fa)return a.value instanceof Multiname?a.value.name:a.value;if(a instanceof ga)return a.name;if(a instanceof U)return d="|"+a.id+"|",d;if(a instanceof u)return d="{"+a.id+"}",d;if(a instanceof Z)return a.type===Z.Type.STORE?(d="["+a.id+"->"+a.argument.id+"]",d):(d="("+a.id+")",d);if(a instanceof E)return d="("+a.id+")",d;if(a instanceof p)return a.id;unexpected(a+" "+typeof a)}
function e(a){return a.id}function f(a,d){for(var b=0;b<a.length;b++)d(a[b])}function g(a){return a instanceof fa}var l=!1,m=[],p,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype.nodeName="Node";r.prototype.visitInputs=function(){};p=r;var u,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype=b(p,"Control");r.prototype.nodeName="Control";r.prototype.visitInputs=function(){};u=r;var v,r=function(a){!0;this.predecessors=a?[a]:[];this.id=m[m.length-1]+=1};r.prototype=b(u,"Region");r.prototype.nodeName=
"Region";r.prototype.visitInputs=function(a){f(this.predecessors,a)};v=r;var w,r=function(a){!0;this.control=this;this.predecessors=a?[a]:[];this.domain=this.scope=void 0;this.id=m[m.length-1]+=1};r.prototype=b(v,"Start");r.prototype.nodeName="Start";r.prototype.visitInputs=function(a){f(this.predecessors,a);a(this.scope);a(this.domain)};w=r;var z,r=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};r.prototype=b(u,"End");r.prototype.nodeName="End";r.prototype.visitInputs=function(a){a(this.control)};
z=r;r=function(a,d,b){!0;!0;!0;!0;this.control=a;this.store=d;this.argument=b;this.id=m[m.length-1]+=1};r.prototype=b(z,"Stop");r.prototype.nodeName="Stop";r.prototype.visitInputs=function(a){a(this.control);a(this.store);a(this.argument)};var y=function(a,d){!0;!0;!0;this.control=a;this.predicate=d;this.id=m[m.length-1]+=1};y.prototype=b(z,"If");y.prototype.nodeName="If";y.prototype.visitInputs=function(a){a(this.control);a(this.predicate)};var B,A=function(a,d){!0;!0;!0;this.control=a;this.determinant=
d;this.id=m[m.length-1]+=1};A.prototype=b(z,"Switch");A.prototype.nodeName="Switch";A.prototype.visitInputs=function(a){a(this.control);a(this.determinant)};B=A;var s,A=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};A.prototype=b(z,"Jump");A.prototype.nodeName="Jump";A.prototype.visitInputs=function(a){a(this.control)};s=A;var E,A=function(){!0;this.id=m[m.length-1]+=1};A.prototype=b(p,"Value");A.prototype.nodeName="Value";A.prototype.visitInputs=function(){};E=A;var H=function(a,d){!0;
!0;!0;this.control=a;this.store=d;this.loads=void 0;this.id=m[m.length-1]+=1};H.prototype=b(E,"StoreDependent");H.prototype.nodeName="StoreDependent";H.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a)};A=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.object=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};A.prototype=b(H,"Call");A.prototype.nodeName="Call";A.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);this.object&&a(this.object);f(this.args,a)};var D=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};D.prototype=b(H,"CallProperty");D.prototype.nodeName="CallProperty";D.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,
a);a(this.object);a(this.name);f(this.args,a)};var G=function(a,d,b,e,f,g,l){!0;!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.isLex=l;this.id=m[m.length-1]+=1};G.prototype=b(D,"ASCallProperty");G.prototype.nodeName="ASCallProperty";G.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a)};var F=function(a,d,b,e,f,g,l){!0;
!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.scope=l;this.id=m[m.length-1]+=1};F.prototype=b(D,"ASCallSuper");F.prototype.nodeName="ASCallSuper";F.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a);a(this.scope)};var Q=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.args=
e;this.id=m[m.length-1]+=1};Q.prototype=b(H,"New");Q.prototype.nodeName="New";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};var T=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.args=e;this.id=m[m.length-1]+=1};T.prototype=b(Q,"ASNew");T.prototype.nodeName="ASNew";T.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};Q=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};Q.prototype=b(H,"GetProperty");Q.prototype.nodeName="GetProperty";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var S=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=
b;this.name=e;this.flags=f;this.id=m[m.length-1]+=1};S.prototype=b(Q,"ASGetProperty");S.prototype.nodeName="ASGetProperty";S.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var Y=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};Y.prototype=b(Q,"ASGetDescendants");Y.prototype.nodeName="ASGetDescendants";Y.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var I=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};I.prototype=b(Q,"ASHasProperty");I.prototype.nodeName="ASHasProperty";I.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var J=function(a,d,b,
e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};J.prototype=b(Q,"ASGetSlot");J.prototype.nodeName="ASGetSlot";J.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var O=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.scope=f;this.id=m[m.length-1]+=1};O.prototype=b(Q,"ASGetSuper");
O.prototype.nodeName="ASGetSuper";O.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.scope)};var V,M=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.id=m[m.length-1]+=1};M.prototype=b(H,"SetProperty");M.prototype.nodeName="SetProperty";M.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};V=M;M=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.flags=g;this.id=m[m.length-1]+=1};M.prototype=b(V,"ASSetProperty");M.prototype.nodeName="ASSetProperty";M.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var L=function(a,d,b,e,f){!0;
!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.id=m[m.length-1]+=1};L.prototype=b(V,"ASSetSlot");L.prototype.nodeName="ASSetSlot";L.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var P=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.scope=g;this.id=
m[m.length-1]+=1};P.prototype=b(V,"ASSetSuper");P.prototype.nodeName="ASSetSuper";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value);a(this.scope)};var K=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};K.prototype=b(H,"DeleteProperty");K.prototype.nodeName="DeleteProperty";K.prototype.visitInputs=function(a){this.control&&
a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var R=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};R.prototype=b(K,"ASDeleteProperty");R.prototype.nodeName="ASDeleteProperty";R.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};K=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;
this.control=a;this.store=d;this.loads=void 0;this.scope=b;this.name=e;this.domain=f;this.strict=g;this.id=m[m.length-1]+=1};K.prototype=b(H,"ASFindProperty");K.prototype.nodeName="ASFindProperty";K.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.scope);a(this.name);a(this.domain)};b(E,"Store");var U,H=function(a,d){!0;!0;this.control=a;this.args=d?[d]:[];this.id=m[m.length-1]+=1};H.prototype=b(E,"Phi");H.prototype.nodeName=
"Phi";H.prototype.visitInputs=function(a){this.control&&a(this.control);f(this.args,a)};U=H;var ga,H=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};H.prototype=b(E,"Variable");H.prototype.nodeName="Variable";H.prototype.visitInputs=function(){};ga=H;H=function(a){!0;this.argument=a;this.id=m[m.length-1]+=1};H.prototype=b(E,"Copy");H.prototype.nodeName="Copy";H.prototype.visitInputs=function(a){a(this.argument)};var ba=function(a,d){!0;this.to=a;this.from=d;this.id=m[m.length-1]+=1};ba.prototype=
b(E,"Move");ba.prototype.nodeName="Move";ba.prototype.visitInputs=function(a){a(this.to);a(this.from)};var Z,$=function(a,d,b){!0;this.argument=a;this.type=d;this.selector=b;this.id=m[m.length-1]+=1};$.prototype=b(E,"Projection");$.prototype.nodeName="Projection";$.prototype.visitInputs=function(a){a(this.argument)};Z=$;$=function(a,d,b,e){!0;!0;this.control=a;this.condition=d;this.left=b;this.right=e;this.id=m[m.length-1]+=1};$.prototype=b(E,"Latch");$.prototype.nodeName="Latch";$.prototype.visitInputs=
function(a){this.control&&a(this.control);a(this.condition);a(this.left);a(this.right)};var ha,C=function(a,d,b){!0;this.operator=a;this.left=d;this.right=b;this.id=m[m.length-1]+=1};C.prototype=b(E,"Binary");C.prototype.nodeName="Binary";C.prototype.visitInputs=function(a){a(this.left);a(this.right)};ha=C;var sa,C=function(a,d){!0;this.operator=a;this.argument=d;this.id=m[m.length-1]+=1};C.prototype=b(E,"Unary");C.prototype.nodeName="Unary";C.prototype.visitInputs=function(a){a(this.argument)};sa=
C;var fa,C=function(a){!0;this.value=a;this.id=m[m.length-1]+=1};C.prototype=b(E,"Constant");C.prototype.nodeName="Constant";C.prototype.visitInputs=function(){};fa=C;C=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};C.prototype=b(E,"GlobalProperty");C.prototype.nodeName="GlobalProperty";C.prototype.visitInputs=function(){};var aa,ca=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};ca.prototype=b(E,"This");ca.prototype.nodeName="This";ca.prototype.visitInputs=function(a){a(this.control)};
aa=ca;ca=function(a,d){!0;!0;this.control=a;this.argument=d;this.id=m[m.length-1]+=1};ca.prototype=b(E,"Throw");ca.prototype.nodeName="Throw";ca.prototype.visitInputs=function(a){a(this.control);a(this.argument)};var ma,X=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};X.prototype=b(E,"Arguments");X.prototype.nodeName="Arguments";X.prototype.visitInputs=function(a){a(this.control)};ma=X;var ea,X=function(a,d,b){!0;!0;this.control=a;this.index=d;this.name=b;this.id=m[m.length-1]+=1};X.prototype=
b(E,"Parameter");X.prototype.nodeName="Parameter";X.prototype.visitInputs=function(a){a(this.control)};ea=X;X=function(a,d){!0;!0;this.control=a;this.elements=d;this.id=m[m.length-1]+=1};X.prototype=b(E,"NewArray");X.prototype.nodeName="NewArray";X.prototype.visitInputs=function(a){a(this.control);f(this.elements,a)};var ya=function(a,d){!0;!0;this.control=a;this.properties=d;this.id=m[m.length-1]+=1};ya.prototype=b(E,"NewObject");ya.prototype.nodeName="NewObject";ya.prototype.visitInputs=function(a){a(this.control);
f(this.properties,a)};var Ca=function(a,d){!0;this.key=a;this.value=d;this.id=m[m.length-1]+=1};Ca.prototype=b(E,"KeyValuePair");Ca.prototype.nodeName="KeyValuePair";Ca.prototype.visitInputs=function(a){a(this.key);a(this.value)};var za=function(a,d,b){!0;this.parent=a;this.object=d;this.isWith=b;this.id=m[m.length-1]+=1};za.prototype=b(E,"ASScope");za.prototype.nodeName="ASScope";za.prototype.visitInputs=function(a){a(this.parent);a(this.object)};var la=function(a,d){!0;!0;!0;this.control=a;this.scope=
d;this.id=m[m.length-1]+=1};la.prototype=b(E,"ASGlobal");la.prototype.nodeName="ASGlobal";la.prototype.visitInputs=function(a){this.control&&a(this.control);a(this.scope)};var oa=function(a){!0;this.methodInfo=a;this.id=m[m.length-1]+=1};oa.prototype=b(E,"ASNewActivation");oa.prototype.nodeName="ASNewActivation";oa.prototype.visitInputs=function(){};var Sa=function(a,d,b){!0;this.namespaces=a;this.name=d;this.flags=b;this.id=m[m.length-1]+=1};Sa.prototype=b(E,"ASMultiname");Sa.prototype.nodeName=
"ASMultiname";Sa.prototype.visitInputs=function(a){a(this.namespaces);a(this.name)};p.startNumbering=function(){m.push(0)};p.stopNumbering=function(){m.pop()};p.prototype.toString=function(a){if(a)return d(this);var b=[];this.visitInputs(function(a){b.push(d(a))});a=d(this)+" = "+this.nodeName.toUpperCase();this.toStringDetails&&(a+=" "+this.toStringDetails());b.length&&(a+=" "+b.join(", "));return a};p.prototype.visitInputsNoConstants=function(a){this.visitInputs(function(d){g(d)||a(d)})};p.prototype.replaceInput=
function(a,d){var b=0,e;for(e in this){var f=this[e];f instanceof p&&f===a&&(this[e]=d,b++);f instanceof Array&&(b+=f.replace(a,d))}return b};Z.Type={CASE:"case",TRUE:"true",FALSE:"false",STORE:"store",SCOPE:"scope"};Z.prototype.project=function(){return this.argument};U.prototype.seal=function(){this.sealed=!0};U.prototype.pushValue=function(a){!0;!0;this.args.push(a)};Ca.prototype.mustFloat=!0;Sa.prototype.mustFloat=!0;Sa.prototype.isAttribute=function(){return this.flags&1};var N=function(a,d,
b){this.name=a;this.binary=b;this.evaluate=d;da[a]=this},da={};N.ADD=new N("+",function(a,d){return a+d},!0);N.SUB=new N("-",function(a,d){return a-d},!0);N.MUL=new N("*",function(a,d){return a*d},!0);N.DIV=new N("/",function(a,d){return a/d},!0);N.MOD=new N("%",function(a,d){return a%d},!0);N.AND=new N("&",function(a,d){return a&d},!0);N.OR=new N("|",function(a,d){return a|d},!0);N.XOR=new N("^",function(a,d){return a^d},!0);N.LSH=new N("<<",function(a,d){return a<<d},!0);N.RSH=new N(">>",function(a,
d){return a>>d},!0);N.URSH=new N(">>>",function(a,d){return a>>>d},!0);N.SEQ=new N("===",function(a,d){return a===d},!0);N.SNE=new N("!==",function(a,d){return a!==d},!0);N.EQ=new N("==",function(a,d){return a==d},!0);N.NE=new N("!=",function(a,d){return a!=d},!0);N.LE=new N("<=",function(a,d){return a<=d},!0);N.GT=new N(">",function(a,d){return a>d},!0);N.LT=new N("<",function(a,d){return a<d},!0);N.GE=new N(">=",function(a,d){return a>=d},!0);N.BITWISE_NOT=new N("~",function(a){return~a},!1);N.PLUS=
new N("+",function(a){return+a},!1);N.NEG=new N("-",function(a){return-a},!1);N.TYPE_OF=new N("typeof",function(a){return typeof a},!1);N.TRUE=new N("!!",function(a){return!!a},!1);N.FALSE=new N("!",function(a){return!a},!1);N.AS_ADD=new N("+",function(a,d){return"string"===typeof a||"string"===typeof d?String(a)+String(d):a+d},!0);var ta=N.SEQ,Aa=N.SNE;ta.not=Aa;Aa.not=ta;ta=N.EQ;Aa=N.NE;ta.not=Aa;Aa.not=ta;ta=N.TRUE;Aa=N.FALSE;ta.not=Aa;Aa.not=ta;N.fromName=function(a){return da[a]};N.prototype.isBinary=
function(){return this.binary};N.prototype.toString=function(){return this.name};ta=new fa(null);Aa=new fa(void 0);Aa.toString=function(){return"_"};var Da,ua=function(a,d,b){d&&!0;this.region=d;this.id=a;this.successors=[];this.predecessors=[];this.nodes=[d,b]};ua.prototype.pushSuccessorAt=function(a,d,b){!0;!0;this.successors[d]=a;b&&a.pushPredecessor(this)};ua.prototype.pushSuccessor=function(a,d){!0;this.successors.push(a);d&&a.pushPredecessor(this)};ua.prototype.pushPredecessor=function(a){!0;
this.predecessors.push(a)};ua.prototype.visitNodes=function(a){for(var d=this.nodes,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.visitSuccessors=function(a){for(var d=this.successors,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.visitPredecessors=function(a){for(var d=this.predecessors,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.append=function(a){!0;!0;!0;!0;a.mustFloat||this.nodes.splice(this.nodes.length-1,0,a)};ua.prototype.toString=function(){return"B"+this.id+(this.name?" ("+this.name+")":"")};
ua.prototype.trace=function(a){a.writeLn(this)};Da=ua;var ua=function(a){this.exit=a},La=function(a,d,b){var e=[];a=[a];for(var f=a.push.bind(a),g;g=a.pop();)1!==e[g.id]&&(e[g.id]=1,b(g),a.push(g),d(g,f))},eb=function(a,d,b){function e(a){f[a.id]||g.push(a)}for(var f=[],g=[a];a=g.top();)f[a.id]?(1===f[a.id]&&(f[a.id]=2,b(a)),g.pop()):(f[a.id]=1,d(a,e))};ua.prototype.buildCFG=function(){return va.fromDFG(this)};ua.prototype.forEachInPreOrderDepthFirstSearch=function(a){function d(a){g(a)||(!0,e.push(a))}
for(var b=Array(1024),e=[this.exit],f;f=e.pop();)b[f.id]||(b[f.id]=1,a&&a(f),e.push(f),f.visitInputs(d))};ua.prototype.forEach=function(a,d){(d?eb:La)(this.exit,function(a,d){a.visitInputsNoConstants(d)},a)};ua.prototype.traceMetrics=function(a){var d=new metrics.Counter(!0);La(this.exit,function(a,d){a.visitInputsNoConstants(d)},function(a){d.count(a.nodeName)});d.trace(a)};ua.prototype.trace=function(a){function d(a){return a instanceof u?"yellow":a instanceof U?"purple":a instanceof E?"green":
"white"}function b(a){return a instanceof Z?a.project():a}function e(a){a=b(a);g[a.id]||(g[a.id]=!0,a.block&&l.push(a.block),f.push(a),a.visitInputsNoConstants(e))}var f=[],g={},l=[];e(this.exit);a.writeLn("");a.enter("digraph DFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [color = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("rankdir = BT;");l.forEach(function(d){a.enter("subgraph cluster"+d.nodes[0].id+
" { bgcolor = gray20;");d.visitNodes(function(d){d=b(d);a.writeLn("N"+d.id+";")});a.leave("}")});f.forEach(function(b){a.writeLn("N"+b.id+' [label = "'+b.toString()+'", color = "'+d(b)+'"];')});f.forEach(function(e){e.visitInputsNoConstants(function(f){f=b(f);a.writeLn("N"+e.id+" -> N"+f.id+" [color="+d(f)+"];")})});a.leave("}");a.writeLn("")};var va,pa=function(){this.nextBlockID=0;this.blocks=[];this.exit;this.root};pa.fromDFG=function(a){function d(a){a instanceof Z&&(a=a.project());!0;if(!e[a.id]){e[a.id]=
!0;var f=a.control;f instanceof v||(f=a.control=new v(f));a=f.block=b.buildBlock(f,a);f instanceof w&&(b.root=a);for(var g=0;g<f.predecessors.length;g++){var l=f.predecessors[g],m,u=!1;l instanceof Z?(m=l.project(),u=l.type===Z.Type.TRUE):m=l;m instanceof v&&(m=new s(l),m=new Z(m,Z.Type.TRUE),f.predecessors[g]=m,m=m.project(),u=!0);d(m);var p=m.control.block;m instanceof B?(!0,p.pushSuccessorAt(a,l.selector.value,!0)):u&&0<p.successors.length?(p.pushSuccessor(a,!0),p.hasFlippedSuccessors=!0):p.pushSuccessor(a,
!0)}}}var b=new va;!0;b.dfg=a;var e=[];d(a.exit);b.splitCriticalEdges();b.exit=a.exit.control.block;b.computeDominators(!0);return b};pa.prototype.buildRootAndExit=function(){!0;0<this.blocks[0].predecessors.length?(this.root=new Da(this.nextBlockID++),this.blocks.push(this.root),this.root.pushSuccessor(this.blocks[0],!0)):this.root=this.blocks[0];for(var a=[],d=0;d<this.blocks.length;d++){var b=this.blocks[d];0===b.successors.length&&a.push(b)}if(0===a.length)unexpected("Must have an exit block.");
else if(1===a.length&&a[0]!==this.root)this.exit=a[0];else{this.exit=new Da(this.nextBlockID++);this.blocks.push(this.exit);for(d=0;d<a.length;d++)a[d].pushSuccessor(this.exit,!0)}!0;!0};pa.prototype.fromString=function(a,d){function b(a){var d=f[a];if(d)return d;f[a]=d=new Da(e.nextBlockID++);d.name=a;g.push(d);return d}var e=this,f=e.blockNames||(e.blockNames={}),g=e.blocks;a.replace(/\ /g,"").split(",").forEach(function(a){a=a.split("->");for(var d=null,e=0;e<a.length;e++){var f=a[e];if(d){var g=
f;b(d).pushSuccessor(b(g),!0)}else b(f);d=f}});!0;this.root=f[d]};pa.prototype.buildBlock=function(a,d){var b=new Da(this.nextBlockID++,a,d);this.blocks.push(b);return b};pa.prototype.createBlockSet=function(){this.setConstructor||(this.setConstructor=BitSetFunctor(this.blocks.length));return new this.setConstructor};pa.prototype.computeReversePostOrder=function(){if(this.order)return this.order;var a=this.order=[];this.depthFirstSearch(null,a.push.bind(a));a.reverse();for(var d=0;d<a.length;d++)a[d].rpo=
d;return a};pa.prototype.depthFirstSearch=function(a,d){function b(f){e.set(f.id);a&&a(f);for(var g=f.successors,l=0,m=g.length;l<m;l++){var s=g[l];e.get(s.id)||b(s)}d&&d(f)}var e=this.createBlockSet();b(this.root)};pa.prototype.computeDominators=function(a){!0;for(var d=new Int32Array(this.blocks.length),b=0;b<d.length;b++)d[b]=-1;var e=this.createBlockSet();this.depthFirstSearch(function(a){for(var b=a.successors,f=0,g=b.length;f<g;f++){var l=b[f].id,m=a.id,s=d,u=l;if(!(0>d[l])){l=d[l];for(e.clearAll();0<=
l;)e.set(l),l=d[l];for(;0<=m&&!e.get(m);)m=d[m]}s[u]=m}});if(a){b=0;for(a=this.blocks.length;b<a;b++)this.blocks[b].dominator=this.blocks[d[b]];var f=function(a){var d;if(void 0!==a.dominatorDepth)return a.dominatorDepth;d=a.dominator?f(a.dominator)+1:0;return a.dominatorDepth=d},b=0;for(a=this.blocks.length;b<a;b++)f(this.blocks[b])}return d};pa.prototype.computeLoops=function(){function a(f){if(b.get(f.id))return d.get(f.id)&&!f.isLoopHeader&&(f.isLoopHeader=!0,f.loops=1<<e,e+=1),f.loops;b.set(f.id);
d.set(f.id);for(var g=0,l=0,m=f.successors.length;l<m;l++)g|=a(f.successors[l]);f.isLoopHeader&&(g&=~f.loops);f.loops=g;d.clear(f.id);return g}var d=this.createBlockSet(),b=this.createBlockSet(),e=0;a(this.root)};var Ia=function(){this.entries=[]};Ia.prototype.addUse=function(a,d){var b=this.entries[a.id];b||(b=this.entries[a.id]={def:a,uses:[]});b.uses.pushUnique(d)};Ia.prototype.trace=function(a){a.enter("> Uses");this.entries.forEach(function(d){a.writeLn(d.def.id+" -> ["+d.uses.map(e).join(", ")+
"] "+d.def)});a.leave("<")};Ia.prototype.replace=function(a,d){var b=this.entries[a.id];if(0===b.uses.length)return!1;var e=0;b.uses.forEach(function(b){e+=b.replaceInput(a,d)});!0;b.uses=[];return!0};pa.prototype.computeUses=function(){Timer.start("computeUses");var a=l&&new IndentingWriter;l&&a.enter("> Compute Uses");var d=this.dfg,b=new Ia;d.forEachInPreOrderDepthFirstSearch(function(a){a.visitInputs(function(d){b.addUse(d,a)})});l&&(a.enter("> Uses"),b.entries.forEach(function(d){a.writeLn(d.def.id+
" -> ["+d.uses.map(e).join(", ")+"] "+d.def)}),a.leave("<"),a.leave("<"));Timer.stop();return b};pa.prototype.verify=function(){var a=l&&new IndentingWriter;l&&a.enter("> Verify");this.computeReversePostOrder().forEach(function(a){a.phis&&a.phis.forEach(function(){!0;!0})});l&&a.leave("<")};pa.prototype.optimizePhis=function(){function a(d,b){b=b.unique();if(1===b.length)return b[0];if(2===b.length){if(b[0]===d)return b[1];if(b[1]===d)return b[0]}return d}var d=l&&new IndentingWriter;l&&d.enter("> Optimize Phis");
var b=[],f=this.computeUses().entries;f.forEach(function(a){a.def instanceof U&&b.push(a.def)});l&&d.writeLn("Trying to optimize "+b.length+" phis.");for(var g=0,m=0,s=!0;s;)m++,s=!1,b.forEach(function(b){var m=a(b,b.args),u;if(u=m!==b)if(l&&d.writeLn("Update "+b+" with "+m),u=f[b.id],0===u.uses.length)u=!1;else{l&&d.writeLn("Replacing: "+b.id+" in ["+u.uses.map(e).join(", ")+"] with "+m.id);for(var p=0,r=u.uses,v=0,w=r.length;v<w;v++)p+=r[v].replaceInput(b,m);!0;u.uses=[];u=!0}u&&(s=!0,g++)});l&&
(d.writeLn("Simplified "+g+" phis, in "+m+" iterations."),d.leave("<"))};pa.prototype.splitCriticalEdges=function(){var a=l&&new IndentingWriter,d=this.blocks,b=[];l&&a.enter("> Splitting Critical Edges");for(var e=0;e<d.length;e++){var f=d[e].successors;if(1<f.length)for(var g=0;g<f.length;g++)1<f[g].predecessors.length&&b.push({from:d[e],to:f[g]})}if((d=b.length)&&l)a.writeLn("Splitting: "+d),this.trace(a);for(var m;m=b.pop();){e=m.from.successors.indexOf(m.to);f=m.to.predecessors.indexOf(m.from);
!0;l&&a.writeLn("Splitting critical edge: "+m.from+" -> "+m.to);var g=m.to,u=g.region,p=new v(u.predecessors[f]),r=new s(p),p=this.buildBlock(p,r);u.predecessors[f]=new Z(r,Z.Type.TRUE);m=m.from;m.successors[e]=p;p.pushPredecessor(m);p.pushSuccessor(g);g.predecessors[f]=p}d&&l&&this.trace(a);l&&a.leave("<");return d};pa.prototype.allocateVariables=function(){function a(b){if(!(b instanceof Z&&(!Z.Type.STORE||b.type===Z.Type.STORE))&&!(b instanceof V)&&b instanceof E)b.variable=new ga("v"+b.id),l&&
d.writeLn("Allocated: "+b.variable+" to "+b)}var d=l&&new IndentingWriter;l&&d.enter("> Allocating Virtual Registers");var b=this.computeReversePostOrder();b.forEach(function(d){d.nodes.forEach(a);d.phis&&d.phis.forEach(a)});for(var e=[],f=0;f<b.length;f++){var g=b[f],m=g.phis,g=g.predecessors;if(m)for(var s=0;s<m.length;s++){var u=m[s];l&&d.writeLn("Emitting moves for: "+u);arguments=u.args;!0;for(var p=0;p<g.length;p++){var r=g[p],v=arguments[p];if(!v.abstract&&!(v instanceof Z&&(!Z.Type.STORE||
v.type===Z.Type.STORE)))r=e[r.id]||(e[r.id]=[]),v=v.variable||v,u.variable!==v&&r.push(new ba(u.variable,v))}}}var w=this.blocks;e.forEach(function(a,b){var e=w[b],f=0;for(l&&d.writeLn(e+" Moves: "+a);a.length;){for(var g=0;g<a.length;g++){for(var m=a[g],s=0;s<a.length;s++)if(g!==s&&a[s].from===m.to){m=null;break}m&&(a.splice(g--,1),e.append(m))}if(a.length){l&&d.writeLn("Breaking Cycle");m=a[0];s=new ga("t"+f++);w[b].append(new ba(s,m.to));for(g=1;g<a.length;g++)a[g].from===m.to&&(a[g].from=s)}}});
l&&d.leave("<")};pa.prototype.scheduleEarly=function(){function a(d){return d.mustNotFloat||d.shouldNotFloat?!1:d.mustFloat||d.shouldFloat||d instanceof ea||d instanceof aa||d instanceof ma?!0:d instanceof ha||d instanceof sa||d instanceof ea}function d(b){!0;r[b.id]=!0;!0;a(b)||b.control.block.append(b)}function b(a,e){!0;!0;!0;l&&m.writeLn("Scheduled: "+a+" in "+e);a.control=e;d(a)}function f(a){l&&m.enter("> Schedule: "+a);var s=[];a.visitInputs(function(a){g(a)||a instanceof E&&s.push(a instanceof
Z?a.project():a)});l&&m.writeLn("Inputs: ["+s.map(e)+"], length: "+s.length);for(var p=0;p<s.length;p++){var v=s[p];!(v instanceof U)&&!r[v.id]&&f(v)}if(a.control)a instanceof z||(a instanceof U||a instanceof w||r[a.id])||d(a);else if(s.length){v=s[0].control;for(p=1;p<s.length;p++){var B=s[p].control;v.block.dominatorDepth<B.block.dominatorDepth&&(v=B)}b(a,v)}else b(a,u.root.region);l&&m.leave("<")}var l=!1,m=l&&new IndentingWriter;l&&m.enter("> Schedule Early");var u=this,p=this.dfg,r=[],B=[];p.forEachInPreOrderDepthFirstSearch(function(d){d instanceof
v||d instanceof s||(d.control&&B.push(d),d instanceof U&&d.args.forEach(function(d){a(d)&&(d.mustNotFloat=!0)}))},!0);l&&B.forEach(function(a){print("Root: "+a)});for(var y=0;y<B.length;y++){var A=B[y];if(A instanceof U){var D=A.control.block;(D.phis||(D.phis=[])).push(A)}A.control&&f(A)}l&&m.leave("<");B.forEach(function(a){a=a instanceof Z?a.project():a;a===p.start||a instanceof v||!0})};pa.prototype.trace=function(a){function d(a){e[a.id]||(e[a.id]=!0,f.push(a),a.visitSuccessors(d))}function b(a){!0;
return a===g?"house":a===l?"invhouse":"box"}var e=[],f=[],g=this.root,l=this.exit;d(g);a.writeLn("");a.enter("digraph CFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white, style = filled];");a.writeLn("rankdir = TB;");f.forEach(function(d){var e="";void 0!==d.name&&(e+=" "+d.name);void 0!==d.rpo&&(e+=" O: "+d.rpo);a.writeLn("B"+
d.id+' [label = "B'+d.id+e+'", fillcolor = "black", shape='+b(d)+", style=filled];")});f.forEach(function(d){d.visitSuccessors(function(b){a.writeLn("B"+d.id+" -> B"+b.id)});d.dominator&&a.writeLn("B"+d.id+" -> B"+d.dominator.id+" [color = orange];");d.follow&&a.writeLn("B"+d.id+" -> B"+d.follow.id+" [color = purple];")});a.leave("}");a.writeLn("")};va=pa;var pa=function(){},fb=function(a,d){!0;if(g(a.argument))return new fa(a.operator.evaluate(a.argument.value));if(d){var b=ia(a.argument,!0);if(a.operator===
N.TRUE)return b;if(b instanceof sa){if(a.operator===N.FALSE&&b.operator===N.FALSE)return b.argument}else return new sa(a.operator,b)}return a},ia=function(a,d){var b;a instanceof sa?b=fb(a,d):a instanceof ha?(!0,b=g(a.left)&&g(a.right)?new fa(a.operator.evaluate(a.left.value,a.right.value)):a):b=a;return b};pa.prototype.tryFold=ia;a.isConstant=g;a.Block=Da;a.Node=p;a.Start=w;a.Null=ta;a.Undefined=Aa;a.This=aa;a.Throw=ca;a.Arguments=ma;a.ASGlobal=la;a.Projection=Z;a.Region=v;a.Latch=$;a.Binary=ha;
a.Unary=sa;a.Constant=fa;a.ASFindProperty=K;a.GlobalProperty=C;a.GetProperty=Q;a.SetProperty=V;a.CallProperty=D;a.ASCallProperty=G;a.ASCallSuper=F;a.ASGetProperty=S;a.ASGetSuper=O;a.ASHasProperty=I;a.ASDeleteProperty=R;a.ASGetDescendants=Y;a.ASSetProperty=M;a.ASSetSuper=P;a.ASGetSlot=J;a.ASSetSlot=L;a.Call=A;a.ASNew=T;a.Phi=U;a.Stop=r;a.If=y;a.Switch=B;a.End=z;a.Jump=s;a.ASScope=za;a.Operator=N;a.Variable=ga;a.Move=ba;a.Copy=H;a.Parameter=ea;a.NewArray=X;a.NewObject=ya;a.ASNewActivation=oa;a.KeyValuePair=
Ca;a.ASMultiname=Sa;a.DFG=ua;a.CFG=va;a.Flags={INDEXED:1,RESOLVED:2,PRISTINE:4,IS_METHOD:8};a.PeepholeOptimizer=pa})("undefined"===typeof exports?IR={}:exports);
var c4Options=new OptionSet("C4"),enableC4=c4Options.register(new Option("c4","c4","boolean",!1,"Enable the C4 compiler.")),c4TraceLevel=c4Options.register(new Option("tc4","tc4","number",0,"Compiler Trace Level")),enableRegisterAllocator=c4Options.register(new Option("ra","ra","boolean",!1,"Enable register allocator.")),getPublicQualifiedName=Multiname.getPublicQualifiedName,createName=function(a,b){return isNumeric(b)||isObject(b)?b:new Multiname(a,b)};
(function(a){function b(a){return a instanceof S&&isString(a.value)}function d(a){return a instanceof S&&isNumeric(a.value)?!0:a.ty&&a.ty.isNumeric()}function e(a){return new S(a)}function f(a,d,b){!0;b=b.split(".");for(var f=0;f<b.length;f++)d=new IR.GetProperty(null,a.store,d,e(b[f])),d.shouldFloat=!0,a.loads.push(d);return d}function g(a){a=new IR.GlobalProperty(a);a.mustFloat=!0;return a}function l(a,d){var b=new T(a,d);ga&&(b=ga.tryFold(b));return b}function m(a,d,b){var e=new Q(a,d,b);d.ty&&
(d.ty!==Type.Any&&d.ty===b.ty)&&(a===O.EQ?e.operator=O.SEQ:a===O.NE&&(e.operator=O.SNE));ga&&(e=ga.tryFold(e));return e}function p(a){return m(O.OR,a,e(0))}function r(a){return m(O.URSH,a,e(0))}function u(a){return d(a)?a:l(O.PLUS,a)}function v(a){return l(O.FALSE,l(O.FALSE,a))}function w(a,d,b){return new Y(null,null,a,d,b,IR.Flags.PRISTINE)}function z(a,d){return w(g(a),null,[d])}function y(a){return b(a)?a:w(g("asCoerceString"),null,[a])}function B(a){!0;return fa[Multiname.getQualifiedName(a)]}
var A=IR.Node,s=IR.Start,E=IR.Null,H=IR.Undefined,D=IR.This,G=IR.Projection,F=IR.Region,Q=IR.Binary,T=IR.Unary,S=IR.Constant,Y=IR.Call,I=IR.Phi,J=IR.Stop,O=IR.Operator,V=IR.Parameter,M=IR.NewArray,L=IR.NewObject,P=IR.KeyValuePair,K=IR.isConstant,R=IR.DFG,U=new IndentingWriter,ga=new IR.PeepholeOptimizer,ba,Z=function(a){this.id=sa+=1;this.index=a;this.local=[];this.stack=[];this.scope=[];this.store=H;this.loads=[];this.saved=H},$=function(a,d,b){a=d instanceof I&&d.control===a?d:new I(a,d);a.pushValue(b);
return a},ha=function(a,d,b){for(var e=0;e<d.length;e++)d[e]=$(a,d[e],b[e])},C=function(a){return a instanceof A?a.toString(!0):a},sa=0;Z.prototype.clone=function(a){var d=new ba;d.index=void 0!==a?a:this.index;d.local=this.local.slice(0);d.stack=this.stack.slice(0);d.scope=this.scope.slice(0);d.loads=this.loads.slice(0);d.saved=this.saved;d.store=this.store;return d};Z.prototype.matches=function(a){return this.stack.length===a.stack.length&&this.scope.length===a.scope.length&&this.local.length===
a.local.length};Z.prototype.makeLoopPhis=function(a){function d(b){b=new I(a,b);b.isLoop=!0;return b}var b=new ba;!0;b.index=this.index;b.local=this.local.map(d);b.stack=this.stack.map(d);b.scope=this.scope.map(d);b.loads=this.loads.slice(0);b.saved=this.saved;b.store=d(this.store);return b};Z.prototype.optimize=function(){function a(d){if(d instanceof I&&!d.isLoop){var b=d.args.unique();if(1===b.length)return d.seal(),Counter.count("Builder: OptimizedPhi"),b[0]}return d}this.local=this.local.map(a);
this.stack=this.stack.map(a);this.scope=this.scope.map(a);this.saved=a(this.saved);this.store=a(this.store)};Z.prototype.merge=function(a,d){!0;!0;ha(a,this.local,d.local);ha(a,this.stack,d.stack);ha(a,this.scope,d.scope);this.store=$(a,this.store,d.store);this.store.abstract=!0};Z.prototype.trace=function(a){a.writeLn(this.toString())};Z.prototype.toString=function(){return"<"+String(this.id+" @ "+this.index).padRight(" ",10)+(" M: "+C(this.store)).padRight(" ",14)+(" X: "+C(this.saved)).padRight(" ",
14)+(" $: "+this.scope.map(C).join(", ")).padRight(" ",20)+(" L: "+this.local.map(C).join(", ")).padRight(" ",40)+(" S: "+this.stack.map(C).join(", ")).padRight(" ",60)};ba=Z;var Z=z.bind(null,"asCoerceObject"),fa=createEmptyObject();fa[Multiname.Int]=p;fa[Multiname.Uint]=r;fa[Multiname.Number]=u;fa[Multiname.String]=y;fa[Multiname.Object]=Z;fa[Multiname.Boolean]=v;var aa=createEmptyObject();aa[Multiname.Int]=p;aa[Multiname.Uint]=r;aa[Multiname.Number]=z.bind(null,"Number");aa[Multiname.String]=z.bind(null,
"String");aa[Multiname.Object]=z.bind(null,"Object");aa[Multiname.Boolean]=z.bind(null,"Boolean");var ca=function(a,d,b){!0;this.abc=a.abc;this.scope=d;this.methodInfo=a;this.hasDynamicScope=b};ca.prototype.buildStart=function(a){var d=this.methodInfo,b=a.entryState=new ba(0);b.local.push(new D(a));for(var l=this.hasDynamicScope?1:0,m=d.parameters.length,s=0;s<m;s++)b.local.push(new V(a,l+s,d.parameters[s].name));for(s=m;s<d.localCount;s++)b.local.push(H);b.store=new G(a,G.Type.STORE);a.scope=this.hasDynamicScope?
new V(a,0,SAVED_SCOPE_NAME):new S(this.scope);b.saved=new G(a,G.Type.SCOPE);a.domain=new S(this.domain);s=new IR.Arguments(a);if(d.needsRest()||d.needsArguments()){var u=e(l+(d.needsRest()?m:0));b.local[m+1]=new Y(a,b.store,g("sliceArguments"),null,[s,u],IR.Flags.PRISTINE)}u=f(b,s,"length");for(s=0;s<m;s++){var p=d.parameters[s],r=s+1,v=b.local[r];if(void 0!==p.value){var w;w=new IR.Binary(O.LT,u,e(l+s+1));v=new IR.Latch(null,w,e(p.value),v)}p.type&&!p.type.isAnyName()&&((w=B(p.type))?v=w(v):c4CoerceNonPrimitiveParameters&&
(v=new Y(a,b.store,g("asCoerceByMultiname"),null,[e(this.abc.applicationDomain),e(p.type),v],!0)));b.local[r]=v}return a};ca.prototype.buildGraph=function(){function a(s,z,A){function F(a){if(void 0!==a){if(a<Ua.length)return Ua[Ua.length-1-a];if(a===Ua.length)return A.saved;var d=A.saved;a-=Ua.length;for(var b=0;b<a;b++)d=ma(d,"parent");return d}return 0<Ua.length?Ua.top():A.saved}function I(a){!0;W.ti&&!a.ty&&(a.ty=W.ti.type);Oa.push(a)}function J(){return Oa.pop()}function R(a){var d=Ja,b=J();
b.shouldNotFloat=!0;d[a]=b}function X(a){var d=sa[a],b=d.flags;a=d.isRuntimeName()?Oa.pop():e(d.name);d.isRuntimeNamespace()?(d=new M(s,[J()]),!0,d.shouldFloat=!0):d=e(d.namespaces);return new IR.ASMultiname(d,a,b)}function ea(a,d,b){a=new IR.ASFindProperty(s,A.store,F(),a,Z,d);if(b){if(b.object)return b.object instanceof Global&&!b.object.isExecuting()?a:e(b.object);if(void 0!==b.scopeDepth)return va(F(b.scopeDepth))}return a}function ma(a,d){return f(A,a,d)}function pa(a,d){var b=B(a);return b?
b(d):c4CoerceNonPrimitive?Ea(g("asCoerceByMultiname"),null,[Z,e(a),d]):d}function va(a){return a instanceof IR.ASScope?a.object:ma(a,"object")}function ka(a){A.store=new G(a,G.Type.STORE);a.loads=A.loads.slice(0);A.loads.length=0;return a}function Ma(a){var d=a.namespaces,b=a.name;if(Shumway.AVM2.Runtime.globalMultinameAnalysis.value)if(!K(d)||!K(b)||a.isAttribute())Counter.count("GlobalMultinameResolver: Cannot resolve runtime multiname or attribute.");else return isNumeric(b.value)||!isString(b.value)||
!b.value?(Counter.count("GlobalMultinameResolver: Cannot resolve numeric or any names."),!1):GlobalMultinameResolver.resolveMultiname(new Multiname(d.value,b.value,a.flags))}function wa(a,d,b,f){!0;f=!!f;if(b){if(b.trait){if(b.trait.isConst()&&b.trait.hasDefaultValue)return e(b.trait.value);a=new IR.GetProperty(s,A.store,a,e(Multiname.getQualifiedName(b.trait.name)));b.trait.isGetter()?a=ka(a):A.loads.push(a);return a}if(b.propertyQName)return ka(new IR.GetProperty(s,A.store,a,e(b.propertyQName)));
if(b.isDirectlyReadable)return ka(new IR.GetProperty(s,A.store,a,d.name));if(b.isIndexedReadable)return ka(new IR.ASGetProperty(s,A.store,a,d,IR.Flags.INDEXED|(f?IR.Flagas.IS_METHOD:0)))}if(b=Ma(d))return ka(new IR.ASGetProperty(s,A.store,a,e(Multiname.getQualifiedName(b)),IR.Flags.RESOLVED|(f?IR.Flagas.IS_METHOD:0)));Counter.count("Compiler: Slow ASGetProperty");return ka(new IR.ASGetProperty(s,A.store,a,d,f?IR.Flagas.IS_METHOD:0))}function La(a,d,b,f){!0;if(f){if(f.trait){(d=f.trait.typeName?B(f.trait.typeName):
null)&&(b=d(b));ka(new IR.SetProperty(s,A.store,a,e(Multiname.getQualifiedName(f.trait.name)),b));return}if(f.propertyQName)return ka(new IR.SetProperty(s,A.store,a,e(f.propertyQName),b));if(f.isDirectlyWriteable)return ka(new IR.SetProperty(s,A.store,a,d.name,b));if(f.isIndexedWriteable)return ka(new IR.ASSetProperty(s,A.store,a,d,b,IR.Flags.INDEXED))}Ma(d);return ka(new IR.ASSetProperty(s,A.store,a,d,b,0))}function Ea(a,d,b){return ka(new Y(s,A.store,a,d,b,IR.Flags.PRISTINE))}function Na(a){var d;
a.isBinary()&&(d=J());var b=J();a=d?m(a,b,d):l(a,b);ga&&(a=ga.tryFold(a,!0));return a}function ob(a){a=l(O.FALSE,Na(a));ga&&(a=ga.tryFold(a,!0));return a}function qa(a,d){var b,e;a.isBinary()?(e=J(),b=J(),d&&(e=p(e),b=p(b)),I(m(a,b,e))):(b=J(),d&&(b=p(b)),I(l(a,b)))}function Ha(a){!0;a=new IR.If(s,a);Pa=[{control:new G(a,G.Type.FALSE),target:D[W.position+1],state:A},{control:new G(a,G.Type.TRUE),target:W.target,state:A}]}!0;A.optimize();var pb=z.entryState;if(pb){ca&&U.writeLn("Type State: "+pb);
for(var ab=0;ab<pb.local.length;ab++){var Qa=pb.local[ab],Ja=A.local[ab];Ja.ty||(Ja.ty=Qa)}}var Ja=A.local,Oa=A.stack,Ua=A.scope,na,Ia,Xa,ja,ra,Ba,gb,hb,zb,Pa=null;ca&&(U.writeLn("Processing Region: "+s+", Block: "+z.bid),U.enter(("> state: "+s.entryState.toString()).padRight(" ",100)));s.processed=!0;for(var W,lb=z.position,Nb=z.end.position;lb<=Nb;lb++){W=D[lb];var xa=W.op;A.index=lb;switch(xa){case 3:ka(new IR.Throw(s,J()));ba.push({region:s,store:A.store,value:H});!0;Pa=[];break;case 98:I(Ja[W.index]);
break;case 208:case 209:case 210:case 211:I(Ja[xa-208]);break;case 99:R(W.index);break;case 212:case 213:case 214:case 215:R(xa-212);break;case 28:Ua.push(new IR.ASScope(F(),J(),!0));break;case 48:Ua.push(new IR.ASScope(F(),J(),!1));break;case 29:Ua.pop();break;case 100:I(W.ti&&W.ti.object?e(W.ti.object):new IR.ASGlobal(null,A.saved));break;case 101:I(va(A.scope[W.index]));break;case 93:I(ea(X(W.index),!0,W.ti));break;case 94:I(ea(X(W.index),!1,W.ti));break;case 102:ra=X(W.index);na=J();I(wa(na,ra,
W.ti,!1));break;case 89:ra=X(W.index);na=J();var Ab,Ob=na,bb=ra,bb=bb instanceof S&&bb.value instanceof Multiname&&Multiname.isQName(bb.value)?e(Multiname.getQualifiedName(bb.value)):bb;Ab=new IR.ASGetDescendants(s,A.store,Ob,bb);I(Ab);break;case 96:ra=X(W.index);I(wa(ea(ra,!0,W.ti),ra,W.ti,!1));break;case 104:case 97:ja=J();ra=X(W.index);na=J();La(na,ra,ja,W.ti);break;case 106:ra=X(W.index);na=J();I(ka(new IR.ASDeleteProperty(s,A.store,na,ra)));break;case 108:na=J();var qb;a:{var Bb=na,Pb=e(W.index),
vb=W.ti;if(vb){var rb=vb.trait;if(rb){if(rb.isConst()&&vb.trait.hasDefaultValue){qb=e(rb.value);break a}var Qb=Multiname.getQualifiedName(rb.name);qb=ka(new IR.GetProperty(s,A.store,Bb,e(Qb)));break a}}qb=ka(new IR.ASGetSlot(null,A.store,Bb,Pb))}I(qb);break;case 109:ja=J();na=J();a:{var Cb=na,Rb=e(W.index),Db=ja,Eb=W.ti;if(Eb){var Fb=Eb.trait;if(Fb){var Sb=Multiname.getQualifiedName(Fb.name);ka(new IR.SetProperty(s,A.store,Cb,e(Sb),Db));break a}}ka(new IR.ASSetSlot(s,A.store,Cb,Rb,Db))}break;case 4:ra=
X(W.index);na=J();var wb;var Tb=A.saved,Ub=na,ac=ra,Va=W.ti;if(Va&&Va.trait&&Va.trait.isGetter()&&Va.baseClass){var bc=VM_OPEN_GET_METHOD_PREFIX+Multiname.getQualifiedName(Va.trait.name),cc=ma(e(Va.baseClass),"traitsPrototype."+bc);wb=Ea(cc,Ub,[])}else wb=ka(new IR.ASGetSuper(s,A.store,Ub,ac,Tb));I(wb);break;case 5:ja=J();ra=X(W.index);na=J();var Vb=A.saved,Wb=na,dc=ra,mb=ja,Wa=W.ti;if(Wa&&Wa.trait&&Wa.trait.isSetter()&&Wa.baseClass){var Gb=VM_OPEN_SET_METHOD_PREFIX+Multiname.getQualifiedName(Wa.trait.name),
Fa=ma(e(Wa.baseClass),"traitsPrototype."+Gb);Ea(Fa,Wb,[mb])}else ka(new IR.ASSetSuper(s,A.store,Wb,dc,mb,Vb));break;case 241:case 240:break;case 64:I(w(eb,null,[e(ha[W.index]),F(),e(!0)]));break;case 65:Ba=Oa.popMany(W.argCount);na=J();Xa=J();I(ka(new Y(s,A.store,Xa,na,Ba,0)));break;case 70:case 79:case 76:Ba=Oa.popMany(W.argCount);ra=X(W.index);na=J();a:{var Ka=na,Hb=ra,ib=Ba,Ya=76===xa,Ga=W.ti;if(Ga&&Ga.trait){if(Ga.trait.isMethod()){var Ra=void 0,Ra=Ga.trait.holder instanceof InstanceInfo&&Ga.trait.holder.isInterface()?
Multiname.getPublicQualifiedName(Multiname.getName(Ga.trait.name)):Multiname.getQualifiedName(Ga.trait.name),Ra=VM_OPEN_METHOD_PREFIX+Ra;ja=ka(new IR.CallProperty(s,A.store,Ka,e(Ra),ib,IR.Flags.PRISTINE));break a}if(Ga.trait.isClass()){var Ib,Xb=Ga.trait.name;!0;if(Ib=aa[Multiname.getQualifiedName(Xb)]){ja=Ib(ib[0]);break a}var nb=Multiname.getQualifiedName(Ga.trait.name);ja=ka(new IR.CallProperty(s,A.store,Ka,e(nb),ib,0));break a}}else if(Ga&&Ga.propertyQName){ja=ka(new IR.CallProperty(s,A.store,
Ka,e(Ga.propertyQName),ib,IR.Flags.PRISTINE));break a}ja=(nb=Ma(Hb))?ka(new IR.ASCallProperty(s,A.store,Ka,e(Multiname.getQualifiedName(nb)),ib,IR.Flags.PRISTINE|IR.Flags.RESOLVED,Ya)):ka(new IR.ASCallProperty(s,A.store,Ka,Hb,ib,IR.Flags.PRISTINE,Ya))}79!==xa&&I(ja);break;case 69:case 78:ra=X(W.index);Ba=Oa.popMany(W.argCount);na=J();var Yb=A.saved,Za=na,Jb=ra,jb=Ba,cb=W.ti;if(cb&&cb.trait&&cb.trait.isMethod()&&cb.baseClass){var db=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(cb.trait.name),qc=
ma(e(cb.baseClass),"traitsPrototype."+db);ja=Ea(qc,Za,jb)}else ja=ka(new IR.ASCallSuper(s,A.store,Za,Jb,jb,IR.Flags.PRISTINE,Yb));78!==xa&&I(ja);break;case 66:Ba=Oa.popMany(W.argCount);na=J();I(ka(new IR.ASNew(s,A.store,na,Ba)));break;case 73:Ba=Oa.popMany(W.argCount);na=J();a:{var rc=A.saved,ic=na,jc=Ba,Zb=W.ti;if(Zb){if(Zb.noCallSuperNeeded)break a;if(Zb.baseClass){var ec=ma(e(Zb.baseClass),"instanceConstructorNoInitialize");Ea(ec,ic,jc);break a}}ec=ma(rc,"object.baseClass.instanceConstructorNoInitialize");
Ea(ec,ic,jc)}break;case 74:Ba=Oa.popMany(W.argCount);ra=X(W.index);na=J();Xa=wa(na,ra,W.ti,!1);I(ka(new IR.ASNew(s,A.store,Xa,Ba)));break;case 128:if(W.ti&&W.ti.noCoercionNeeded){Counter.count("Compiler: NoCoercionNeeded");break}else Counter.count("Compiler: CoercionNeeded");ja=J();I(pa(sa[W.index],ja));break;case 131:case 115:I(p(J()));break;case 136:case 116:I(r(J()));break;case 132:case 117:I(u(J()));break;case 129:case 118:I(v(J()));break;case 120:I(Ea(g("checkFilter"),null,[J()]));break;case 130:break;
case 133:I(y(J()));break;case 112:var kc,fc=J();kc=b(fc)?fc:w(g("String"),null,[fc]);I(kc);break;case 135:Qa=J();c4AsTypeLate&&(ja=J(),I(Ea(g("asAsType"),null,[Qa,ja])));break;case 72:case 71:ja=H;if(72===xa&&(ja=J(),C.returnType&&(!W.ti||!W.ti.noCoercionNeeded)))ja=pa(C.returnType,ja);ba.push({region:s,store:A.store,value:ja});!0;Pa=[];break;case 30:case 35:Ia=J();na=J();I(new IR.CallProperty(s,A.store,na,e(30===xa?"asNextName":"asNextValue"),[Ia],IR.Flags.PRISTINE));break;case 50:var lc=Ea(g("asHasNext2"),
null,[Ja[W.object],Ja[W.index]]);Ja[W.object]=ma(lc,"object");I(Ja[W.index]=ma(lc,"index"));break;case 32:I(E);break;case 33:I(H);break;case 34:notImplemented();break;case 36:I(e(W.value));break;case 37:I(e(W.value));break;case 44:I(e(V[W.index]));break;case 45:I(e(Q[W.index]));break;case 46:I(e(T[W.index]));break;case 47:I(e($[W.index]));break;case 38:I(e(!0));break;case 39:I(e(!1));break;case 40:I(e(NaN));break;case 41:J();break;case 42:var mc=J();mc.shouldNotFloat=!0;ja=mc;I(ja);I(ja);break;case 43:A.stack.push(J(),
J());break;case 239:case 240:case 241:break;case 12:Ha(ob(O.LT));break;case 24:Ha(Na(O.GE));break;case 13:Ha(ob(O.LE));break;case 23:Ha(Na(O.GT));break;case 14:Ha(ob(O.GT));break;case 22:Ha(Na(O.LE));break;case 15:Ha(ob(O.GE));break;case 21:Ha(Na(O.LT));break;case 16:!0;Pa=[{control:s,target:W.target,state:A}];break;case 17:Ha(Na(O.TRUE));break;case 18:Ha(Na(O.FALSE));break;case 19:Ha(Na(O.EQ));break;case 20:Ha(Na(O.NE));break;case 25:Ha(Na(O.SEQ));break;case 26:Ha(Na(O.SNE));break;case 27:var nc=
J();!0;if(2<W.targets.length)for(var Pa=[],sc=new IR.Switch(s,nc),$b=0;$b<W.targets.length;$b++)Pa.push({control:new G(sc,G.Type.CASE,e($b)),target:W.targets[$b],state:A});else{!0;var tc=m(O.SEQ,nc,e(0)),oc=new IR.If(s,tc),Pa=[{control:new G(oc,G.Type.FALSE),target:W.targets[1],state:A},{control:new G(oc,G.Type.TRUE),target:W.targets[0],state:A}]}break;case 150:qa(O.FALSE);break;case 151:qa(O.BITWISE_NOT);break;case 160:hb=J();gb=J();zb=d(gb)&&d(hb)||(b(gb)||gb.ty&&gb.ty.isString())&&(b(hb)||hb.ty&&
hb.ty.isString())?O.ADD:Shumway.AVM2.Runtime.useAsAdd?O.AS_ADD:O.ADD;I(m(zb,gb,hb));break;case 197:qa(O.ADD,!0);break;case 161:qa(O.SUB);break;case 198:qa(O.SUB,!0);break;case 162:qa(O.MUL);break;case 199:qa(O.MUL,!0);break;case 163:qa(O.DIV);break;case 164:qa(O.MOD);break;case 165:qa(O.LSH);break;case 166:qa(O.RSH);break;case 167:qa(O.URSH);break;case 168:qa(O.AND);break;case 169:qa(O.OR);break;case 170:qa(O.XOR);break;case 171:qa(O.EQ);break;case 172:qa(O.SEQ);break;case 173:qa(O.LT);break;case 174:qa(O.LE);
break;case 175:qa(O.GT);break;case 176:qa(O.GE);break;case 144:qa(O.NEG);break;case 196:qa(O.NEG,!0);break;case 145:case 192:case 147:case 193:I(e(1));145===xa||147===xa?I(u(J())):I(p(J()));145===xa||192===xa?qa(O.ADD):qa(O.SUB);break;case 146:case 194:case 148:case 195:I(e(1));146===xa||148===xa?I(u(Ja[W.index])):I(p(Ja[W.index]));146===xa||194===xa?qa(O.ADD):qa(O.SUB);R(W.index);break;case 177:Qa=J();ja=J();I(Ea(ma(Qa,"isInstanceOf"),null,[ja]));break;case 178:ja=J();ra=X(W.index);Qa=wa(ea(ra,!1),
ra);I(Ea(g("asIsType"),null,[Qa,ja]));break;case 179:Qa=J();ja=J();I(Ea(g("asIsType"),null,[Qa,ja]));break;case 180:na=J();ja=J();ra=new IR.ASMultiname(H,ja,0);I(ka(new IR.ASHasProperty(s,A.store,na,ra)));break;case 149:I(Ea(g("asTypeOf"),null,[J()]));break;case 8:I(H);R(W.index);break;case 83:Ba=Oa.popMany(W.argCount);Qa=J();Xa=g("applyType");I(Ea(Xa,null,[Z,Qa,new M(s,Ba)]));break;case 86:Ba=Oa.popMany(W.argCount);I(new M(s,Ba));break;case 85:for(var pc=[],ab=0;ab<W.argCount;ab++){ja=J();var gc=
J();!0;gc=e(Multiname.getPublicQualifiedName(gc.value));pc.push(new P(gc,ja))}I(new L(s,pc));break;case 87:I(new IR.ASNewActivation(e(C)));break;case 88:Xa=g("createClass");I(Ea(Xa,null,[e(fa[W.index]),J(),F()]));break;default:unexpected("Not Implemented: "+W)}239===xa||(241===xa||240===xa)||ca&&U.writeLn(("state: "+A.toString()).padRight(" ",100)+" : "+lb+", "+W.toString(this.abc))}ca&&U.leave(("< state: "+A.toString()).padRight(" ",100));Pa||(Pa=[],W.position+1<=D.length&&Pa.push({control:s,target:D[W.position+
1],state:A}));return Pa}for(var z=this.methodInfo.analysis,A=z.blocks,D=z.bytecodes,C=this.methodInfo,Q=this.abc.constantPool.ints,T=this.abc.constantPool.uints,$=this.abc.constantPool.doubles,V=this.abc.constantPool.strings,ha=this.abc.methods,fa=this.abc.classes,sa=this.abc.constantPool.multinames,Z=new S(this.abc.applicationDomain),ca=2<c4TraceLevel.value,ba=[],z=0;z<A.length;z++)A[z].blockDominatorOrder=z;var La=new Shumway.SortedList(function(a,d){return a.block.blockDominatorOrder-d.block.blockDominatorOrder}),
z=new s(null);this.buildStart(z);var eb=g("createFunction");for(La.push({region:z,block:A[0]});A=La.pop();)a(A.region,A.block,A.region.entryState.clone()).forEach(function(a){var d=a.target,b=d.region;b?(ca&&U.enter("Merging into region: "+b+" @ "+d.position+", block "+d.bid+" {"),ca&&U.writeLn("  R "+b.entryState),ca&&U.writeLn("+ I "+a.state),b.entryState.merge(b,a.state),b.predecessors.push(a.control),ca&&U.writeLn("  = "+b.entryState),ca&&U.leave("}")):(b=d.region=new F(a.control),d.loop&&ca&&
U.writeLn("Adding PHIs to loop region."),b.entryState=d.loop?a.state.makeLoopPhis(b):a.state.clone(d.position),ca&&U.writeLn("Adding new region: "+b+" @ "+d.position+" to worklist."),La.push({region:b,block:d}))}),ca&&U.enter("Worklist: {"),La.forEach(function(a){ca&&U.writeLn(a.region+" "+a.block.bdo+" "+a.region.entryState)}),ca&&U.leave("}");ca&&U.writeLn("Done");if(1<ba.length){var va=new F(null),pa=new I(va,null),Ia=new I(va,null);ba.forEach(function(a){va.predecessors.push(a.region);pa.pushValue(a.value);
Ia.pushValue(a.store)});A=new J(va,Ia,pa)}else A=new J(ba[0].region,ba[0].store,ba[0].value);return new R(A)};a.buildMethod=function(a,d,b,e){!0;!0;!0;Counter.count("Compiler: Compiled Methods");Timer.start("Compiler");Timer.start("Mark Loops");d.analysis.markLoops();Timer.stop();Shumway.AVM2.Runtime.enableVerifier.value&&(Timer.start("Verify"),a.verifyMethod(d,b),Timer.stop());a=0<c4TraceLevel.value;var f=1<c4TraceLevel.value;Timer.start("Build IR");A.startNumbering();d=(new ca(d,b,e)).buildGraph();
Timer.stop();f&&d.trace(U);Timer.start("Build CFG");d=d.buildCFG();Timer.stop();Timer.start("Optimize Phis");d.optimizePhis();Timer.stop();Timer.start("Schedule Nodes");d.scheduleEarly();Timer.stop();f&&d.trace(U);Timer.start("Verify IR");d.verify();Timer.stop();Timer.start("Allocate Variables");d.allocateVariables();Timer.stop();Timer.start("Generate Source");f=Backend.generate(d,enableRegisterAllocator.value);Timer.stop();a&&U.writeLn(f.body);A.stopNumbering();Timer.stop();return f}})("undefined"===
typeof exports?Builder={}:exports);var Compiler=new (function(){function a(){this.verifier=new Verifier}a.prototype.compileMethod=function(a,d,e){return Builder.buildMethod(this.verifier,a,d,e)};return a}());
(function(a){var b,d=function(a){this.kind=1;this.body=a},e=function(a){this.kind=2;this.body=a},f=function(a,d,b,e){this.kind=3;this.cond=a;this.then=d;this.else=b;this.negated=!1;this.nothingThrownLabel=e},g=function(a,d){this.kind=4;this.index=a;this.body=d},l=function(a,d,b){this.kind=5;this.determinant=a;this.cases=d;this.nothingThrownLabel=b},m=function(a,d){this.kind=6;this.labels=a;this.body=d},p=function(a){for(var d={},b=0,e=a.length;b<e;b++){var f=a[b];f.labels||print(f.toSource());for(var g=
0,l=f.labels.length;g<l;g++)d[f.labels[g]]=f}this.kind=7;this.cases=a;this.labelMap=d},r=function(a){this.kind=8;this.label=a},u=function(a,d){this.kind=9;this.label=a;this.head=d},v=function(a,d){this.kind=10;this.label=a;this.head=d;this.necessary=!0},w=function(a,d){this.kind=11;this.body=a;this.catches=d},z=function(a,d,b){this.kind=12;this.varName=a;this.typeName=d;this.body=b};d.prototype={trace:function(a){for(var d=this.body,b=0,e=d.length;b<e;b++)d[b].trace(a)},first:function(){return this.body[0]},
slice:function(a,b){return new d(this.body.slice(a,b))}};e.prototype={trace:function(a){a.enter("loop {");this.body.trace(a);a.leave("}")}};f.prototype={trace:function(a){this.cond.trace(a);this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");a.enter("if"+(this.negated?" not":"")+" {");this.then&&this.then.trace(a);this.else&&(a.outdent(),a.enter("} else {"),this.else.trace(a));a.leave("}");this.nothingThrownLabel&&a.leave("}")}};g.prototype={trace:function(a){0<=this.index?
a.writeLn("case "+this.index+":"):a.writeLn("default:");a.indent();this.body&&this.body.trace(a);a.outdent()}};l.prototype={trace:function(a){this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");this.determinant.trace(a);a.writeLn("switch {");for(var d=0,b=this.cases.length;d<b;d++)this.cases[d].trace(a);a.writeLn("}");this.nothingThrownLabel&&a.leave("}")}};m.prototype={trace:function(a){a.enter("if (label is "+this.labels.join(" or ")+") {");this.body&&this.body.trace(a);
a.leave("}")}};p.prototype={trace:function(a){for(var d=0,b=this.cases.length;d<b;d++)this.cases[d].trace(a)}};r.prototype={trace:function(a){a.writeLn("label = "+this.label)}};u.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);a.writeLn("break")}};v.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);this.necessary&&a.writeLn("continue")}};w.prototype={trace:function(a){a.enter("try {");this.body.trace(a);a.writeLn("label = "+this.nothingThrownLabel);
for(var d=0,b=this.catches.length;d<b;d++)this.catches[d].trace(a);a.leave("}")}};z.prototype={trace:function(a){a.outdent();a.enter("} catch ("+(this.varName||"e")+(this.typeName?" : "+this.typeName:"")+") {");this.body.trace(a)}};b={SEQ:1,LOOP:2,IF:3,CASE:4,SWITCH:5,LABEL_CASE:6,LABEL_SWITCH:7,EXIT:8,BREAK:9,CONTINUE:10,TRY:11,CATCH:12,Seq:d,Loop:e,If:f,Case:g,Switch:l,LabelCase:m,LabelSwitch:p,Exit:r,Break:u,Continue:v,Try:w,Catch:z};var y=function(a,d){this.options=d||{};var b=a.blocks,e=BitSetFunctor(a.blocks.length),
f=e.ADDRESS_BITS_PER_WORD,g=e.BITS_PER_WORD,l=e.BIT_INDEX_MASK;e.singleton=function(a){var d=new e;d.set(a.id);d.count=1;d.dirty=0;return d};e.fromBlocks=function(a){var d=new e;d.setBlocks(a);return d};var m=e.prototype;e.singleword?(m.forEachBlock=function(a){!0;var d=this.bits;if(d)for(var e=0;e<g;e++)d&1<<e&&a(b[e])},m.choose=function(){var a=this.bits;if(a)for(var d=0;d<g;d++)if(a&1<<d)return b[d]},m.members=function(){var a=[],d=this.bits;if(d)for(var e=0;e<g;e++)d&1<<e&&a.push(b[e]);return a},
m.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++)d|=1<<(a[b].id&l);this.bits=d}):(m.forEachBlock=function(a){!0;for(var d=this.bits,e=0,f=d.length;e<f;e++){var l=d[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a(b[e*g+m])}},m.choose=function(){for(var a=this.bits,d=0,e=a.length;d<e;d++){var f=a[d];if(f)for(var l=0;l<g;l++)if(f&1<<l)return b[d*g+l]}},m.members=function(){for(var a=[],d=this.bits,e=0,f=d.length;e<f;e++){var l=d[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a.push(b[e*g+m])}return a},
m.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++){var g=a[b].id;d[g>>f]|=1<<(g&l)}});this.BlockSet=e;this.hasExceptions=!1;this.normalizeReachableBlocks(a.root)},e=function(a,d,b){return function(e,f,g){function l(a){return g+a.id}function m(a){a.fn=a.fn.bind(u)}var u=this;g=g||"";var p=this.bytecodes;p&&(a.forEach(m),d.forEach(m),writeGraphViz(e,f.toString(),p[0],l,function(a){return a.successors||[]},a,d,function(a){return"Block: "+a.id+"\\l"},b&&b.bind(this,l)))}};y.prototype=
{normalizeReachableBlocks:function(a){!0;var d=this.BlockSet,b=[],e={},f={},g=[a];for(f[a.id]=!0;a=g.top();)if(e[a.id])1===e[a.id]&&(e[a.id]=2,b.push(a)),f[a.id]=!1,g.pop();else{e[a.id]=1;f[a.id]=!0;for(var l=a.successors,m=0,u=l.length;m<u;m++){var p=l[m];f[p.id]&&(a.spbacks||(a.spbacks=new d),a.spbacks.set(p.id));!e[p.id]&&g.push(p)}}this.blocks=b.reverse()},computeDominance:function(){var a=this.blocks,d=a.length,b=Array(d);b[0]=0;for(var e=[],f=0;f<d;f++)e[a[f].id]=f,a[f].dominatees=[];for(var g=
!0;g;){g=!1;for(f=1;f<d;f++){var l=a[f].predecessors,m=l.length,u=e[l[0].id];if(!(u in b))for(var p=1;p<m&&!(u=e[l[p].id],u in b);p++);!0;for(p=0;p<m;p++){var r=e[l[p].id];if(r!==u&&r in b){for(;r!==u;){for(;r>u;)r=b[r];for(;u>r;)u=b[u]}u=r}}b[f]!==u&&(b[f]=u,g=!0)}}a[0].dominator=a[0];for(f=1;f<d;f++)e=a[f],m=a[b[f]],e.dominator=m,m.dominatees.push(e),e.npredecessors=e.predecessors.length;d=[a[0]];for(a[0].level||(a[0].level=0);e=d.shift();){a=e.dominatees;p=0;for(m=a.length;p<m;p++)a[p].level=e.level+
1;d.push.apply(d,a)}},computeFrontiers:function(){for(var a=this.BlockSet,d=this.blocks,b=0,e=d.length;b<e;b++)d[b].frontier=new a;b=1;for(e=d.length;b<e;b++){var a=d[b],f=a.predecessors;if(2<=f.length)for(var g=a.dominator,l=0,m=f.length;l<m;l++)for(var u=f[l];u!==g;)u.frontier.set(a.id),u=u.dominator}},analyzeControlFlow:function(){this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(b,e){var f=new d;f.setBlocks(b);f.recount();this.id=e;this.body=f;this.exit=
new d;this.save={};this.head=new d;this.npredecessors=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,b;b=this.blocks;for(var e=new d,f=0,g=b.length;f<g;f++){var l=b[f],m=l.spbacks;if(m)for(var l=l.successors,u=0,p=l.length;u<p;u++){var r=l[u];m.get(r.id)&&e.set(r.dominator.id)}}b=e.members();if(0>=b.length)return this.markedLoops=!0;b=b.sort(function(a,d){return a.level-d.level});e=0;for(f=b.length-1;0<=f;f--){for(var g=b[f],m=1,l={},u={},p=[],r=[],v=[],w=
g.level+1,y=[g],z=void 0,V=void 0,z=void 0;z=y.top();)if(l[z.id]){if(r.peek()===z){r.pop();var M=[];do V=p.pop(),u[V.id]=!0,M.push(V);while(V!==z);(1<M.length||V.spbacks&&V.spbacks.get(V.id))&&v.push(M)}y.pop()}else{l[z.id]=m++;p.push(z);r.push(z);for(var V=z.successors,M=0,L=V.length;M<L;M++)if(z=V[M],!(z.level<w)){var P=z.id;if(l[P]){if(!u[P])for(;l[r.peek().id]>l[P];)r.pop()}else y.push(z)}}m=v;if(0!==m.length){l=0;for(u=m.length;l<u;l++){p=m[l];r=new a(p,e++);v=0;for(w=p.length;v<w;v++)if(y=p[v],
y.level===g.level+1&&!y.loop){y.loop=r;r.head.set(y.id);z=y.predecessors;V=0;for(M=z.length;V<M;V++)r.body.get(z[V].id)&&y.npredecessors--;r.npredecessors+=y.npredecessors}v=0;for(w=p.length;v<w;v++)y=p[v],y.level===g.level+1&&(y.npredecessors=r.npredecessors);r.head.recount()}}}return this.markedLoops=!0},induceControlTree:function(){function a(d,b){d.recount();if(0===d.count)return null;d.save=b;return d}function d(l,m,u,p,r,v,w){for(var y=[];l;)if(1<l.count){for(var z=new f,O={},V=[],M=l.members(),
L=0,P=M.length;L<P;L++){var K=M[L],R=K.id,U;if(K.loop&&l.contains(K.loop.head)){var ga=K.loop;if(!ga.induced){for(var ba=ga.head.members(),Z=0,$=0,ha=ba.length;$<ha;$++)Z+=l.save[ba[$].id];if(0<K.npredecessors-Z)K.npredecessors-=l.save[R],K.save=l.save[R],U=d(K,z,O,p),V.push(new b.LabelCase([R],U));else{$=0;for(ha=ba.length;$<ha;$++)U=ba[$],U.npredecessors-=Z,U.save=Z;U=d(K,z,O,p);V.push(new b.LabelCase(ga.head.toArray(),U));ga.induced=!0}}}else K.npredecessors-=l.save[R],K.save=l.save[R],U=d(K,z,
O,p),V.push(new b.LabelCase([R],U))}for(var K=[],$=0,L=0,P=V.length;L<P;L++){U=V[L];ha=U.labels;ga=ba=0;for(Z=ha.length;ga<Z;ga++)R=ha[ga],z.get(R)&&0<M[L].npredecessors-l.save[R]?K.push(R):ha[ba++]=R;ha.length=ba;0<ha.length&&(V[$++]=U)}V.length=$;if(0===V.length){L=0;for(P=K.length;L<P;L++)R=K[L],u[R]=(u[R]||0)+l.save[R],m.set(R);break}y.push(new b.LabelSwitch(V));l=a(z,O)}else{1===l.count?(K=l.choose(),R=K.id,K.npredecessors-=l.save[R],K.save=l.save[R]):(K=l,R=K.id);if(r)r=!1;else{if(p&&!p.body.get(R)){K.npredecessors+=
K.save;p.exit.set(R);p.save[R]=(p.save[R]||0)+K.save;y.push(new b.Break(R,p));break}if(p&&K.loop===p){K.npredecessors+=K.save;y.push(new b.Continue(R,p));break}if(K===w)break;if(0<K.npredecessors){K.npredecessors+=K.save;u[R]=(u[R]||0)+K.save;m.set(R);y.push(v?new b.Break(R,v):new b.Exit(R));break}if(K.loop){var ha=K.loop;if(1===ha.head.count)z=d(ha.head.choose(),null,null,ha,!0);else{z=[];ba=ha.head.members();L=0;for(P=ba.length;L<P;L++)U=ba[L],O=U.id,U=d(U,null,null,ha,!0),z.push(new b.LabelCase([O],
U));z=new b.LabelSwitch(z)}y.push(new b.Loop(z));l=a(ha.exit,ha.save);continue}}z=new f;O={};if(e&&K.hasCatches){U=K.successors;V=[];l=[];L=0;for(P=U.length;L<P;L++)M=U[L],(M.exception?V:l).push(M);$=[];L=0;for(P=V.length;L<P;L++)M=V[L],M.npredecessors-=1,M.save=1,U=d(M,z,O,p),M=M.exception,$.push(new b.Catch(M.varName,M.typeName,U));P=new b.Try(K,$)}else l=K.successors,P=K;if(2<l.length){V=[];for(L=l.length-1;0<=L;L--)M=l[L],M.npredecessors-=1,M.save=1,U=d(M,z,O,p,null,K,l[L+1]),V.unshift(new b.Case(L,
U));V.top().index=void 0;e&&K.hasCatches?(P.nothingThrownLabel=g,P=new b.Switch(P,V,g++)):P=new b.Switch(P,V);l=a(z,O)}else 2===l.length?(L=K.hasFlippedSuccessors?l[1]:l[0],U=K.hasFlippedSuccessors?l[0]:l[1],L.npredecessors-=1,L.save=1,L=d(L,z,O,p),U.npredecessors-=1,U.save=1,U=d(U,z,O,p),e&&K.hasCatches?(P.nothingThrownLabel=g,P=new b.If(P,L,U,g++)):P=new b.If(P,L,U),l=a(z,O)):(U=l[0])?e&&K.hasCatches?(P.nothingThrownLabel=U.id,O[U.id]=(O[U.id]||0)+1,z.set(U.id),l=a(z,O)):(U.npredecessors-=1,U.save=
1,l=U):e&&K.hasCatches?(P.nothingThrownLabel=-1,l=a(z,O)):l=U;y.push(P)}return 1<y.length?new b.Seq(y):y[0]}var e=this.hasExceptions,f=this.BlockSet,g=this.blocks.length;this.controlTree=d(this.blocks[0],new f,{})},restructureControlFlow:function(){Timer.start("Restructure Control Flow");if(!this.markedLoops&&!this.markLoops())return Timer.stop(),!1;this.induceControlTree();this.restructuredControlFlow=!0;Timer.stop();return!0},trace:function(a){function d(a){return a.id}var b=this.bytecodes;a.enter("analysis {");
a.enter("cfg {");this.blocks.forEach(function(e){e.dominator?(a.enter("block "+e.id+(0<e.successors.length?" -> "+e.successors.map(d).join(","):"")+" {"),a.writeLn("npredecessors".padRight(" ",10)+e.npredecessors),a.writeLn("idom".padRight(" ",10)+e.dominator.id),a.writeLn("domcs".padRight(" ",10)+e.dominatees.map(d).join(",")),e.frontier&&a.writeLn("frontier".padRight(" ",10)+"{"+e.frontier.toArray().join(",")+"}"),a.writeLn("level".padRight(" ",10)+e.level)):a.enter("block unreachable {");e.loop&&
(a.writeLn("loop".padRight(" ",10)+"{"+e.loop.body.toArray().join(",")+"}"),a.writeLn("  id".padRight(" ",10)+e.loop.id),a.writeLn("  head".padRight(" ",10)+"{"+e.loop.head.toArray().join(",")+"}"),a.writeLn("  exit".padRight(" ",10)+"{"+e.loop.exit.toArray().join(",")+"}"),a.writeLn("  npredecessors".padRight(" ",10)+e.loop.npredecessors));a.writeLn("");if(0<=e.position)for(var f=e.position;f<=e.end.position;f++)a.writeLn((""+f).padRight(" ",5)+b[f]);else a.writeLn("abstract");a.leave("}")});a.leave("}");
this.controlTree&&(a.enter("control-tree {"),this.controlTree.trace(a),a.leave("}"));a.leave("}")},traceCFG:e([{fn:function(a){return a.successors||[]},style:""}],[{fn:function(a){return a.predecessors||[]},style:""}]),traceDJ:e([{fn:function(a){return a.dominatees||[]},style:"style=dashed"},{fn:function(a){var d=new this.BlockSet;d.setBlocks(a.successors);d.subtract(this.BlockSet.fromBlocks(a.dominatees));a.spbacks&&d.subtract(a.spbacks);return d.members()},style:""},{fn:function(a){return a.spbacks?
a.spbacks.members():[]},style:"style=bold"}],[{fn:function(a){return a.predecessors||[]},style:""}],function(a,d){for(var b=this.bytecodes[0],e=[b],f=b.level,g=[];b=e.shift();)f!=b.level&&(d.writeLn("{rank=same; "+g.map(function(d){return"block_"+a(d)}).join(" ")+"}"),g.length=0,f=b.level),g.push(b),e.push.apply(e,b.dominatees)})};a.Control=b;a.analyze=function(a){a=new y(a);a.restructureControlFlow();return a.controlTree}})("undefined"===typeof exports?Looper={}:exports);
(function(){var a=estransform,b=a.Node,d=a.Identifier,e=a.VariableDeclarator,f=a.AssignmentExpression,g=a.MemberExpression,l=a.IfStatement,m=a.WhileStatement,p=a.FunctionDeclaration;new IndentingWriter;var r=function(a,d,b){this.id=a;this.start=d;this.end=b},u=function(a,d){this.intervals=a.slice(0);this.maxRegisters=d};r.prototype.toString=function(){return"["+this.start+","+this.end+"]"};u.prototype.allocate=function(){var a=this.intervals;this.intervals.sort(function(a,d){return a.start-d.start});
for(var d=new SortedList(function(a,d){return a.end-d.end}),b=this.maxRegisters,e=[],f=b-1;0<=f;f--)e.push("R"+f);a.forEach(function(a){d.forEach(function(d){if(d.end>=a.start)return SortedList.RETURN;e.push(d.register);return SortedList.DELETE});d.length===b?notImplemented("Cannot Spill"):(a.register=e.pop(),d.push(a))})};u.Interval=r;Transform.transform=function(r){var w=a.makePass("scan","scanNode"),z=0;b.prototype.scan=function(a){this.position=z++;return w.apply(this,a)};var y=[],B={},A=[];p.prototype.scan=
function(){this.params.forEach(function(a){a.name in B||(B[a.name]=y.length,y.push(a.name))});this.body.scan();return this};e.prototype.scan=function(){this.position=z++;this.id.name in B||(B[this.id.name]=y.length,y.push(this.id.name));return this};f.prototype.scan=function(a){this.left.scan(a);this.right.scan(a);this.position=z++;return this};m.prototype.scan=function(a){this.position=z++;this.test.scan(a);this.body.scan(a);this.afterPosition=z++;return this};r.scan();for(var s=BitSetFunctor(y.length),
E=BitSetFunctor(z),H=[],D=0;D<y.length;D++)H.push(new E);b.prototype.markLiveness=a.makePass("markLiveness","markLivenessNode",!0);d.prototype.markLiveness=function(a){var d=this.name;if("undefined"===d||a&&a.isProperty||!(d in B))return this;A.push(this);a=a.live;d=B[d];H[d].set(this.position);a.set(d);return this};e.prototype.markLiveness=function(){A.push(this.id);return this};l.prototype.markLiveness=function(a){var d=a.live.clone(),b=a.live.clone();this.alternate&&this.alternate.markLiveness({live:d});
this.consequent&&this.consequent.markLiveness({live:b});a.live.assign(d);a.live._union(b);this.test.markLiveness(a);return this};m.prototype.markLiveness=function(a){var d=a.live.clone(),b=this.afterPosition;do{var e=d.clone();this.body.markLiveness({live:d});this.test.markLiveness({live:d});(e=!e.equals(d))&&d.forEach(function(a){H[a].set(b)})}while(e);a.live.assign(d);return this};f.prototype.markLiveness=function(a){this.right.markLiveness(a);if(this.left instanceof d){a=a.live;var b=B[this.left.name];
H[b].set(this.position);a.clear(b);A.push(this.left)}else this.left.markLiveness(a);return this};g.prototype.markLiveness=function(a){(this.computed||!(this.property instanceof d))&&this.property.markLiveness(a);this.object.markLiveness(a);return this};r.markLiveness({live:new s});r=[];for(D=0;D<H.length;D++){for(var s=H[D],G=E=-1,F=0;F<s.length;F++)if(s.get(F)){E=F;break}for(F=s.length-1;0<=F;F--)if(s.get(F)){G=F;break}s=[E,G];r.push(new u.Interval(D,s[0],s[1]))}(new u(r,1024)).allocate();s=createEmptyObject();
for(D=0;D<y.length;D++)s[y[D]]=r[D].register;for(D=0;D<A.length;D++)A[D].patched||(A[D].name=s[A[D].name],A[D].patched=!0)}})("undefined"===typeof exports?Transform={}:exports);
(function(){function a(a){if("string"===typeof a||null===a||!0===a||!1===a)return new v(a);if(void 0===a)return new w("undefined");if("object"===typeof a||"function"===typeof a)return new w(objectConstantName(a));if("number"===typeof a&&isNaN(a))return new w("NaN");if(Infinity===a)return new w("Infinity");if(-Infinity===a)return new S("-",new w("Infinity"));if("number"===typeof a&&0>1/a)return new S("-",new v(Math.abs(a)));if("number"===typeof a)return new v(a);unexpected("Cannot emit constant for value: ",
a)}function b(a){!0;return new w(a)}function d(a){if(!("$"===a[0]||"_"===a[0]||"\\"===a[0]||"a"<=a[0]&&"z">=a[0]||"A"<=a[0]&&"Z">=a[0]))return!1;for(var d=1;d<a.length;d++)if(!("$"===a[d]||"_"===a[d]||"\\"===a[d]||"a"<=a[d]&&"z">=a[d]||"A"<=a[d]&&"Z">=a[d]||"0"<=a[d]&&"9">=a[d]))return!1;return!0}function e(a){for(var b=1;b<arguments.length;b++){var e=arguments[b];a="string"===typeof e?d(e)?new B(a,new w(e),!1):new B(a,new v(e),!0):e instanceof v&&d(e.value)?new B(a,new w(e.value),!1):new B(a,e,!0)}return a}
function f(a,d){!0;!0;return new s(a,d)}function g(a,d){!0;return new E(a,"=",d)}function l(){this.label=new Z("$L");this.variables=[];this.parameters=[]}function m(a,d,e){!0;!0;!0;!0;if(e||!a.variable)return a.compile(d);!0;return b(a.variable.name)}function p(d,b){return[m(d.namespaces,b),m(d.name,b),a(d.flags)]}function r(a){return escodegen.generate(a,{base:"",indent:"  ",comment:!0,format:{compact:!1}})}var u=estransform,v=u.Literal,w=u.Identifier,z=u.VariableDeclaration,y=u.VariableDeclarator,
B=u.MemberExpression,A=u.BinaryExpression,s=u.CallExpression,E=u.AssignmentExpression,H=u.ExpressionStatement,D=u.ReturnStatement,G=u.FunctionDeclaration,F=u.ConditionalExpression,Q=u.ObjectExpression,T=u.ArrayExpression,S=u.UnaryExpression,Y=u.NewExpression,I=u.Property,J=u.BlockStatement,O=u.ThisExpression,V=u.ThrowStatement,M=u.IfStatement,L=u.WhileStatement,P=u.BreakStatement,K=u.ContinueStatement,R=u.SwitchStatement,U=u.SwitchCase,u=IR.Block,ga=IR.Operator,ba=Looper.Control,Z=IR.Variable;ba.Break.prototype.compile=
function(a,d){return a.compileBreak(this,d)};ba.Continue.prototype.compile=function(a,d){return a.compileContinue(this,d)};ba.Exit.prototype.compile=function(a,d){return a.compileExit(this,d)};ba.LabelSwitch.prototype.compile=function(a,d){return a.compileLabelSwitch(this,d)};ba.Seq.prototype.compile=function(a,d){return a.compileSequence(this,d)};u.prototype.compile=function(a,d){return a.compileBlock(this,d)};ba.Loop.prototype.compile=function(a,d){return a.compileLoop(this,d)};ba.Switch.prototype.compile=
function(a,d){return a.compileSwitch(this,d)};ba.If.prototype.compile=function(a,d){return a.compileIf(this,d)};ba.Try.prototype.compile=function(a,d){return a.compileTry(this,d)};l.prototype.useVariable=function(a){!0;return this.variables.pushUnique(a)};l.prototype.useParameter=function(a){return this.parameters[a.index]=a};l.prototype.compileLabelBody=function(a){var d=[];void 0!==a.label&&(this.useVariable(this.label),d.push(new H(g(b(this.label.name),new v(a.label)))));return d};l.prototype.compileBreak=
function(a){a=this.compileLabelBody(a);a.push(new P(null));return new J(a)};l.prototype.compileContinue=function(a){a=this.compileLabelBody(a);a.push(new K(null));return new J(a)};l.prototype.compileExit=function(a){return new J(this.compileLabelBody(a))};l.prototype.compileIf=function(d){var b=d.cond.compile(this),e=null,f=null;d.then&&(e=d.then.compile(this));d.else&&(f=d.else.compile(this));var g=m(b.end.predicate,this);if(d.negated)a:{d=g;if(d instanceof Constant){if(!0===d.value||!1===d.value){d=
a(!d.value);break a}}else if(d instanceof w){d=new S(ga.FALSE.name,d);break a}!0;var g=d instanceof A?d.left:d.argument,l=d.right,u=ga.fromName(d.operator);d=u===ga.EQ&&l instanceof v&&!1===l.value||u===ga.FALSE?g:u.not?d instanceof A?new A(u.not.name,g,l):new S(u.not.name,g):new S(ga.FALSE.name,d)}else d=g;b.body.push(new M(d,e||new J([]),f||null));return b};l.prototype.compileSwitch=function(a){var d=a.determinant.compile(this),b=[];a.cases.forEach(function(a){var d;a.body&&(d=a.body.compile(this));
a="number"===typeof a.index?new v(a.index):void 0;b.push(new U(a,d?[d]:[]))},this);a=m(d.end.determinant,this);d.body.push(new R(a,b,!1));return d};l.prototype.compileLabelSwitch=function(a){function d(a){!0;return new A("===",f,new v(a))}for(var e=null,f=b(this.label.name),g=a.cases.length-1;0<=g;g--){for(var l=a.cases[g],m=l.labels,u=d(m[0]),p=1;p<m.length;p++)u=new A("||",u,d(m[p]));e=new M(u,l.body?l.body.compile(this):new J,e)}return e};l.prototype.compileLoop=function(d){d=d.body.compile(this);
return new L(a(!0),d)};l.prototype.compileSequence=function(a){var d=this,b=[];a.body.forEach(function(a){a=a.compile(d);a instanceof J?b=b.concat(a.body):b.push(a)});return new J(b)};l.prototype.compileBlock=function(a){for(var d=[],e=1;e<a.nodes.length-1;e++){var f=a.nodes[e],l;f instanceof IR.Throw?l=m(f,this,!0):(f instanceof IR.Move?(l=b(f.to.name),this.useVariable(f.to),f=m(f.from,this)):(f.variable?(l=b(f.variable.name),this.useVariable(f.variable)):l=null,f=m(f,this,!0)),l=l?new H(g(l,f)):
new H(f));d.push(l)}e=a.nodes.last();e instanceof IR.Stop&&d.push(new D(m(e.argument,this)));d=new J(d);d.end=a.nodes.last();!0;return d};IR.Parameter.prototype.compile=function(a){a.useParameter(this);return b(this.name)};IR.Constant.prototype.compile=function(){return a(this.value)};IR.Variable.prototype.compile=function(){return b(this.name)};IR.Phi.prototype.compile=function(a){!0;return m(this.variable,a)};IR.ASScope.prototype.compile=function(a){var d=m(this.parent,a);a=m(this.object,a);var e=
new v(this.isWith);return new Y(b("Scope"),[d,a,e])};IR.ASFindProperty.prototype.compile=function(a){var d=m(this.scope,a),b=p(this.name,a);a=m(this.domain,a);var g=new v(this.strict);return f(e(d,"findScopeProperty"),b.concat([a,g]))};IR.ASGetProperty.prototype.compile=function(a){var d=m(this.object,a);if(this.flags&IR.Flags.INDEXED)return!0,f(e(d,"asGetNumericProperty"),[m(this.name.name,a)]);if(this.flags&IR.Flags.RESOLVED)return f(e(d,"asGetResolvedStringProperty"),[m(this.name,a)]);a=p(this.name,
a);var b=new v(this.flags&IR.Flags.IS_METHOD);return f(e(d,"asGetProperty"),a.concat(b))};IR.ASGetSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a);a=p(this.name,a);return f(e(b,"asGetSuper"),[d].concat(a))};IR.Latch.prototype.compile=function(a){return new F(m(this.condition,a),m(this.left,a),m(this.right,a))};IR.Unary.prototype.compile=function(a){return new S(this.operator.name,m(this.argument,a))};IR.Copy.prototype.compile=function(a){return m(this.argument,a)};IR.Binary.prototype.compile=
function(a){var d=m(this.left,a);a=m(this.right,a);return this.operator===ga.AS_ADD?f(b("asAdd"),[d,a]):new A(this.operator.name,d,a)};IR.CallProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.name,a),b=e(d,b),g=this.args.map(function(d){return m(d,a)});return this.flags&IR.Flags.PRISTINE?f(b,g):f(e(b,"call"),[d].concat(g))};IR.ASCallProperty.prototype.compile=function(a){var d=m(this.object,a),b=this.args.map(function(d){return m(d,a)});if(this.flags&IR.Flags.RESOLVED)return f(e(d,
"asCallResolvedStringProperty"),[m(this.name,a),new v(this.isLex),new T(b)]);var g=p(this.name,a);return f(e(d,"asCallProperty"),g.concat([new v(this.isLex),new T(b)]))};IR.ASCallSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a),g=this.args.map(function(d){return m(d,a)}),l=p(this.name,a);return f(e(b,"asCallSuper"),[d].concat(l).concat(new T(g)))};IR.Call.prototype.compile=function(a){var d=this.args.map(function(d){return m(d,a)}),b=m(this.callee,a),g;g=this.object?m(this.object,
a):new v(null);return null===this.object?f(b,d):f(e(b,"call"),[g].concat(d))};IR.ASNew.prototype.compile=function(a){var d=this.args.map(function(d){return m(d,a)}),b=m(this.callee,a),b=e(b,"instanceConstructor");return new Y(b,d)};IR.This.prototype.compile=function(){return new O};IR.Throw.prototype.compile=function(a){a=m(this.argument,a);return new V(a)};IR.Arguments.prototype.compile=function(){return b("arguments")};IR.ASGlobal.prototype.compile=function(a){a=m(this.scope,a);return e(a,"global",
"object")};IR.ASSetProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.value,a);if(this.flags&IR.Flags.INDEXED)return f(e(d,"asSetNumericProperty"),[m(this.name.name,a),b]);a=p(this.name,a);return f(e(d,"asSetProperty"),a.concat(b))};IR.ASSetSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a),g=p(this.name,a);a=m(this.value,a);return f(e(b,"asSetSuper"),[d].concat(g).concat([a]))};IR.ASDeleteProperty.prototype.compile=function(a){var d=m(this.object,a);
a=p(this.name,a);return f(e(d,"asDeleteProperty"),a)};IR.ASHasProperty.prototype.compile=function(a){var d=m(this.object,a);a=p(this.name,a);return f(e(d,"asHasProperty"),a)};IR.GlobalProperty.prototype.compile=function(){return b(this.name)};IR.GetProperty.prototype.compile=function(a){var d=m(this.object,a);a=m(this.name,a);return e(d,a)};IR.SetProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.name,a);a=m(this.value,a);return g(e(d,b),a)};IR.ASGetDescendants.prototype.compile=
function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("getDescendants"),[d,a])};IR.ASSetSlot.prototype.compile=function(a){var d=m(this.object,a),e=m(this.name,a);a=m(this.value,a);return f(b("asSetSlot"),[d,e,a])};IR.ASGetSlot.prototype.compile=function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("asGetSlot"),[d,a])};IR.Projection.prototype.compile=function(a){!0;!0;return m(this.argument.scope,a)};IR.NewArray.prototype.compile=function(a){var d;d=this.elements;!0;d=d.map(function(d){return m(d,
a)});return new T(d)};IR.NewObject.prototype.compile=function(a){var d=this.properties.map(function(d){var b=m(d.key,a);d=m(d.value,a);return new I(b,d,"init")});return new Q(d)};IR.ASNewActivation.prototype.compile=function(a){a=m(this.methodInfo,a);return f(b("asCreateActivation"),[a])};IR.ASMultiname.prototype.compile=function(a){var d=m(this.namespaces,a);a=m(this.name,a);return f(b("createName"),[d,a])};Backend.generate=function(a,d){Timer.start("Looper");var e=Looper.analyze(a);Timer.stop();
var f=new IndentingWriter,g=new l;Timer.start("Construct AST");var m=e.compile(g);Timer.stop();for(var e=[],u=0;u<g.parameters.length;u++)e.push(b(g.parameters[u]?g.parameters[u].name:"_"+u));g.variables.length&&(Counter.count("Backend: Locals",g.variables.length),g=g.variables.map(function(a){return new y(b(a.name))}),g=new z("var",g),m.body.unshift(g));g=new G(b("fn"),e,m);if(d)return 0<c4TraceLevel.value&&(f.writeLn("=== BEFORE ==============================="),f.writeLn(r(g)),f.writeLn("=== TRANSFORMING =========================")),
Transform.transform(g),0<c4TraceLevel.value&&(f.writeLn("=== AFTER ================================"),f.writeLn(r(g)),f.writeLn("==========================================")),f=r(m),{parameters:e.map(function(a){return a.name}),body:f};Timer.start("Serialize AST");f=r(m);Timer.stop();return{parameters:e.map(function(a){return a.name}),body:f}}})("undefined"===typeof exports?Backend={}:exports);
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.Runtime||(b.Runtime={}),d=function(a){return a.holder instanceof g?"static "+a.holder.instanceInfo.name.getOriginalName()+"::"+a.name.getOriginalName():a.holder instanceof l?a.holder.name.getOriginalName()+"::"+a.name.getOriginalName():a.name.getOriginalName()},e=function(a){!0;return a.isTrampoline},f=a.AVM2.ABC.Multiname,g=a.AVM2.ABC.ClassInfo,l=a.AVM2.ABC.InstanceInfo,m=a.ObjectUtilities.defineReadOnlyProperty,p=a.FunctionUtilities.bindSafely,r=1,u=1;
b.getMethodOverrideKey=d;b.checkMethodOverrides=function(b){if(b.name&&(b=d(b),b in a.AVM2.Runtime.VM_METHOD_OVERRIDES))return a.Debug.warning("Overriding Method: "+b),a.AVM2.Runtime.VM_METHOD_OVERRIDES[b]};b.makeTrampoline=function(d,b,e){!0;var f=null,g=function(){3<=a.AVM2.Runtime.traceExecution.value&&log("Trampolining");Counter.count("Executing Trampoline");1<a.AVM2.Runtime.traceCallExecution.value&&callWriter.writeLn("Trampoline: "+e);f||(f=d(g),!0);return f.apply(this,arguments)};g.trigger=
function(){Counter.count("Triggering Trampoline");f||(f=d(g),!0)};g.isTrampoline=!0;g.debugName="Trampoline #"+r++;m(g,a.AVM2.Runtime.VM_LENGTH,b);return g};b.makeMemoizer=function(d,b){var g=function(){Counter.count("Runtime: Memoizing");3<=a.AVM2.Runtime.traceExecution.value&&log("Memoizing: "+d);1<a.AVM2.Runtime.traceCallExecution.value&&callWriter.writeLn("Memoizing: "+d);if(a.AVM2.Runtime.isNativePrototype(this))return Counter.count("Runtime: Method Closures"),p(b.value,this);e(b.value)&&b.value.trigger();
!0;var g=null;if(a.AVM2.Runtime.isClass(this))return Counter.count("Runtime: Static Method Closures"),g=p(b.value,this),m(this,d,g),g;if(Object.prototype.hasOwnProperty.call(this,d)){if(Object.getOwnPropertyDescriptor(this,d).get)return Counter.count("Runtime: Method Closures"),p(b.value,this);Counter.count("Runtime: Unpatched Memoizer");return this[d]}g=p(b.value,this);g.methodInfo=b.value.methodInfo;m(g,f.getPublicQualifiedName("prototype"),null);m(this,d,g);return g};Counter.count("Runtime: Memoizers");
g.isMemoizer=!0;g.debugName="Memoizer #"+u++;return g};b.isTrampoline=e;b.isMemoizer=function(a){!0;return a.isMemoizer}})(Shumway||(Shumway={}));__extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);d.prototype=b.prototype;a.prototype=new d};
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.Runtime||(b.Runtime={}),d=a.AVM2.ABC.Multiname,e=a.ObjectUtilities.createMap,f=a.ObjectUtilities.cloneObject,g=a.ObjectUtilities.copyProperties,l=a.ObjectUtilities.createEmptyObject,m=a.ObjectUtilities.defineNonEnumerableProperty,p=a.ObjectUtilities.defineNonEnumerableGetter,r=a.FunctionUtilities.makeForwardingGetter,u=function(a){this.trait=a};u.getKey=function(a,d){var b=a;d.isGetter()?b=u.GET_PREFIX+a:d.isSetter()&&(b=u.SET_PREFIX+a);return b};u.prototype.toString=
function(){return String(this.trait)};u.SET_PREFIX="set ";u.GET_PREFIX="get ";u.KEY_PREFIX_LENGTH=4;b.Binding=u;var v=function(a,d,b,e){this.name=a;this.isConst=d;this.type=b;this.trait=e};b.SlotInfo=v;var w=function(){this.byID=e();this.byQN=e()};b.SlotInfoMap=w;var z=function(){this.map=e();this.slots=[];this.nextSlotId=1};z.prototype.assignNextSlot=function(a){!0;!0;a.slotId?this.nextSlotId=a.slotId+1:a.slotId=this.nextSlotId++;!0;this.slots[a.slotId]=a};z.prototype.trace=function(a){a.enter("Bindings");
for(var d in this.map){var b=this.map[d];a.writeLn(b.trait.kindName()+": "+d+" -> "+b)}a.leaveAndEnter("Slots");a.writeArray(this.slots);a.outdent()};z.prototype.applyTo=function(b,f){!0;!0;!0;m(f,a.AVM2.Runtime.VM_SLOTS,new w);m(f,a.AVM2.Runtime.VM_BINDINGS,[]);m(f,a.AVM2.Runtime.VM_OPEN_METHODS,e());m(f,"bindings",this);m(f,"resolutionMap",[]);A&&A.greenLn("Applying Traits");for(var g in this.map){var l=this.map[g],y=l.trait,z=d.getQualifiedName(y.name);if(y.isSlot()||y.isConst()||y.isClass()){l=
void 0;if(y.isSlot()||y.isConst())y.hasDefaultValue?l=y.value:y.typeName&&(l=b.findClassInfo(y.typeName).defaultValue);g!==z?(A&&A.yellowLn("Binding Trait: "+g+" -> "+z),p(f,g,r(z)),f.asBindings.pushUnique(g)):(A&&A.greenLn("Applying Trait "+y.kindName()+": "+y),m(f,z,l),f.asBindings.pushUnique(z),l=new v(z,y.isConst(),y.typeName?b.getProperty(y.typeName,!1,!1):null,y),f.asSlots.byID[y.slotId]=l,f.asSlots.byQN[z]=l)}else if(y.isMethod()||y.isGetter()||y.isSetter()){if(y.isGetter()||y.isSetter())g=
g.substring(u.KEY_PREFIX_LENGTH);g!==z?A&&A.yellowLn("Binding Trait: "+g+" -> "+z):A&&A.greenLn("Applying Trait "+y.kindName()+": "+y);f.asBindings.pushUnique(g);this instanceof B?a.AVM2.Runtime.applyNonMemoizedMethodTrait(g,y,f,l.scope,l.natives):a.AVM2.Runtime.applyMemoizedMethodTrait(g,y,f,l.scope,l.natives)}}};b.Bindings=z;var y=function(a){z.call(this);!0;this.methodInfo=a;a=a.traits;for(var b=0;b<a.length;b++){var e=a[b];!0;var f=d.getQualifiedName(e.name);this.map[f]=new u(e);this.assignNextSlot(e)}};
__extends(y,z);b.ActivationBindings=y;y=function(a,b){z.call(this);var e=d.getQualifiedName(b.name);this.map[e]=new u(b);!0;this.assignNextSlot(b)};__extends(y,z);b.CatchBindings=y;var B,y=function(a,b){z.call(this);this.scope=b;this.scriptInfo=a;for(var e=a.traits,f=0;f<e.length;f++){var g=e[f],l=d.getQualifiedName(g.name),l=u.getKey(l,g),l=this.map[l]=new u(g);(g.isSlot()||g.isConst()||g.isClass())&&this.assignNextSlot(g);g.isClass()&&(g.metadata&&g.metadata.native)&&(g.classInfo.native=g.metadata.native);
if(g.isMethod()||g.isGetter()||g.isSetter())l.scope=this.scope}};__extends(y,z);B=y;b.ScriptBindings=B;y=function(a,b,e){z.call(this);this.scope=b;this.natives=e;this.classInfo=a;a=a.traits;for(b=0;b<a.length;b++){e=a[b];var f=d.getQualifiedName(e.name),f=u.getKey(f,e),f=this.map[f]=new u(e);(e.isSlot()||e.isConst())&&this.assignNextSlot(e);if(e.isMethod()||e.isGetter()||e.isSetter())f.scope=this.scope,f.natives=this.natives}};__extends(y,z);b.ClassBindings=y;y=function(a,d,b,e){z.call(this);this.scope=
b;this.natives=e;this.parent=a;this.instanceInfo=d;this.implementedInterfaces=a?f(a.implementedInterfaces):l();a&&(this.slots=a.slots.slice(),this.nextSlotId=a.nextSlotId);this.extend(a)};__extends(y,z);y.prototype.extend=function(a){var b=this.instanceInfo,e,f=this.map,l,m,p,r;if(a)for(m in a.map)l=a.map[m],p=l.trait,f[m]=l,p.isProtected()&&(r=d.getQualifiedName(new d([b.protectedNs],p.name.getName())),r=u.getKey(r,p),f[r]=l);var v=b.traits;for(a=0;a<v.length;a++){p=v[a];l=d.getQualifiedName(p.name);
m=u.getKey(l,p);l=new u(p);e=f;r=l;e[m]&&!0;!0;e[m]=r;if(p.isProtected())for(e=this.parent;e;)r=d.getQualifiedName(new d([e.instanceInfo.protectedNs],p.name.getName())),r=u.getKey(r,p),r in f&&(f[r]=l),e=e.parent;(p.isSlot()||p.isConst())&&this.assignNextSlot(p);if(p.isMethod()||p.isGetter()||p.isSetter())l.scope=this.scope,l.natives=this.natives}p=b.abc.applicationDomain;l=b.interfaces;for(a=0;a<l.length;a++)v=p.getProperty(l[a],!0,!0),!0,g(this.implementedInterfaces,v.interfaceBindings.implementedInterfaces),
this.implementedInterfaces[d.getQualifiedName(v.name)]=v;for(var w in this.implementedInterfaces){v=this.implementedInterfaces[w];e=v.interfaceBindings;for(var y in e.map)a=e.map[y],b.isInterface()?f[y]=a:(l=d.getPublicQualifiedName(a.trait.name.getName()),m=u.getKey(l,a.trait),f[y]=f[m])}};y.prototype.toString=function(){return this.instanceInfo.toString()};b.InstanceBindings=y;var A=null})(Shumway||(Shumway={}));
var Binding=Shumway.AVM2.Runtime.Binding,Bindings=Shumway.AVM2.Runtime.Bindings,ActivationBindings=Shumway.AVM2.Runtime.ActivationBindings,CatchBindings=Shumway.AVM2.Runtime.CatchBindings,ScriptBindings=Shumway.AVM2.Runtime.ScriptBindings,ClassBindings=Shumway.AVM2.Runtime.ClassBindings,InstanceBindings=Shumway.AVM2.Runtime.InstanceBindings;
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.Runtime||(b.Runtime={}),d=a.AVM2.ABC.Multiname,e=a.ObjectUtilities.createEmptyObject,f=a.ObjectUtilities.boxValue,g=function(a,d,b){"undefined"===typeof b&&(b=!1);this.parent=a;this.object=f(d);!0;this.global=a?a.global:this;this.isWith=b;this.cache=e()};g.prototype.findDepth=function(a){for(var d=this,b=0;d;){if(d.object===a)return b;b++;d=d.parent}return-1};g.prototype.getScopeObjects=function(){for(var a=[],d=this;d;)a.unshift(d.object),d=d.parent;return a};
g.prototype.findScopeProperty=function(b,e,f,g,u,v){Counter.count("findScopeProperty");var w,z=b?1<b.length?b.runtimeId+"$"+e:b[0].qualifiedName+"$"+e:e;if(!v&&(w=this.cache[z]))return w;if(this.object.asHasProperty(b,e,f,!0))return this.isWith?this.object:this.cache[z]=this.object;if(this.parent)return this.cache[z]=this.parent.findScopeProperty(b,e,f,g,u,v);if(v)return null;if(w=g.findDomainProperty(new d(b,e,f),u,!0))return w;u&&a.Debug.unexpected("Cannot find property "+e);return this.global.object};
b.Scope=g;b.bindFreeMethodScope=function(a,d){var b=a.freeMethod;if(a.lastBoundMethod&&a.lastBoundMethod.scope===d)return a.lastBoundMethod.boundMethod;!0;var e,f=d.global.object;if(!a.hasOptional()&&!a.needsArguments()&&!a.needsRest())switch(a.parameters.length){case 0:e=function(){return b.call(this===jsGlobal?f:this,d)};break;case 1:e=function(a){return b.call(this===jsGlobal?f:this,d,a)};break;case 2:e=function(a,e){return b.call(this===jsGlobal?f:this,d,a,e)};break;case 3:e=function(a,e,g){return b.call(this===
jsGlobal?f:this,d,a,e,g)}}e||(Counter.count("Bind Scope - Slow Path"),e=function(){Array.prototype.unshift.call(arguments,d);return b.apply(this===jsGlobal?d.global.object:this,arguments)});e.methodInfo=a;e.instanceConstructor=e;a.lastBoundMethod={scope:d,boundMethod:e};return e}})(Shumway||(Shumway={}));var playerglobalLoadedPromise,playerglobal;
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.Runtime||(b.Runtime={}),d=function(d){var b=d.abc;!0;var e=new a.AVM2.Runtime.Global(d);b.applicationDomain.allowNatives&&(e[m.getPublicQualifiedName("unsafeJSNative")]=getNative);d.executing=!0;b=new a.AVM2.Runtime.Scope(null,d.global);createFunction(d.init,b).call(d.global,!1);d.executed=!0},e=function(b,e){"undefined"===typeof e&&(e="");!b.executed&&!b.executing&&(2<=a.AVM2.Runtime.traceExecution.value&&log("Executing Script For: "+e),d(b))},f=function(a){if(!playerglobal)return null;
for(var d=0;d<a.namespaces.length;d++){var b=playerglobal.map[a.namespaces[d].uri+":"+a.name];if(b)break}b?(a=b,d=playerglobal.scripts[a],a=!d?null:new l(new Uint8Array(playerglobal.abcs,d.offset,d.length),a)):a=null;return a},g=function(a,d){return new Promise(function(b,e){var f=new XMLHttpRequest;f.open("GET",a);f.responseType=d;f.onload=function(){var g=f.response;g?("json"===d&&"json"!==f.responseType&&(g=JSON.parse(g)),b(g)):e("Unable to load "+a+": "+f.statusText)};f.send()})},l=a.AVM2.ABC.AbcFile,
m=a.AVM2.ABC.Multiname,p=a.ObjectUtilities.createEmptyObject,r=a.IndentingWriter,u=b.EXECUTION_MODE||(b.EXECUTION_MODE={});u[u.INTERPRET=1]="INTERPRET";u[u.COMPILE=2]="COMPILE";b.executeScript=d;b.ensureScriptIsExecuted=e;u=b.Glue||(b.Glue={});u[u.PUBLIC_PROPERTIES=1]="PUBLIC_PROPERTIES";u[u.PUBLIC_METHODS=2]="PUBLIC_METHODS";u[u.ALL=3]="ALL";var v=function(a,d,b){this.systemDomain=new w(this,null,a,!0);this.applicationDomain=new w(this,this.systemDomain,d,!1);this.findDefiningAbc=f;this.loadAVM1=
b;this.isAVM1Loaded=!1;this.exception={value:void 0};this.exceptions=[]};v.initialize=function(a,d,b){v.instance=new v(a,d,b)};v.currentAbc=function(){for(var a=arguments.callee,d=null,b=0;20>b&&a;b++){var e=a.methodInfo;if(e){d=e.abc;break}a=a.caller}return d};v.currentDomain=function(){return v.currentAbc().applicationDomain};v.isPlayerglobalLoaded=function(){return!!playerglobal};v.loadPlayerglobal=function(a,d){return playerglobalLoadedPromise?Promise.reject("Playerglobal is already loaded"):
playerglobalLoadedPromise=Promise.all([g(a,"arraybuffer"),g(d,"json")]).then(function(a){playerglobal={abcs:a[0],map:Object.create(null),scripts:Object.create(null)};a=a[1];for(var d=0;d<a.length;d++){var b=a[d];playerglobal.scripts[b.name]=b;if("string"===typeof b.defs)playerglobal.map[b.defs]=b.name;else for(var e=0;e<b.defs.length;e++)playerglobal.map[b.defs[e]]=b.name}},function(a){console.error(a)})};v.prototype.notifyConstruct=function(){};v.getStackTrace=function(){a.Debug.notImplemented("getStackTrace")};
b.AVM2=v;var w,u=function(a,d,b,e){!0;!0;this.vm=a;this.abcs=[];this.loadedAbcs={};this.loadedClasses=[];this.classCache=p();this.scriptCache=p();this.classInfoCache=p();this.base=d;this.allowNatives=e;this.mode=b;this.onMessage=new Callback;this.system=d?d.system:this};u.passthroughCallable=function(a){return{call:function(d){Array.prototype.shift.call(arguments);return a.apply(d,arguments)},apply:function(d,b){return a.apply(d,b)}}};u.coerceCallable=function(d){return{call:function(b,e){return a.AVM2.Runtime.asCoerce(d,
e)},apply:function(b,e){return a.AVM2.Runtime.asCoerce(d,e[0])}}};u.constructingCallable=function(a){return{call:function(d){return new (Function.bind.apply(a,arguments))},apply:function(d,b){return new (Function.bind.apply(a,[d].concat(b)))}}};u.prototype.getType=function(a){return this.getProperty(a,!0,!0)};u.prototype.getProperty=function(d,b,e){if(e=this.findDefiningScript(d,e))return!e.script.executing?void 0:e.script.global[m.getQualifiedName(e.trait.name)];if(b)return a.Debug.unexpected("Cannot find property "+
d)};u.prototype.getClass=function(a){var d=this.classCache,b=d[a];b||(b=d[a]=this.getProperty(m.fromSimpleName(a),!0,!0));!0;return b};u.prototype.findClass=function(a){return a in this.classCache?!0:this.findDomainProperty(m.fromSimpleName(a),!1,!0)};u.prototype.findDomainProperty=function(d,b,e){a.AVM2.Runtime.traceDomain.value&&log("ApplicationDomain.findDomainProperty: "+d);if(e=this.findDefiningScript(d,e))return e.script.global;if(b)return a.Debug.unexpected("Cannot find property "+d)};u.prototype.findClassInfo=
function(a){var d;if(m.isQName(a)){d=m.getQualifiedName(a);var b=this.classInfoCache[d]}else b=this.classInfoCache[a.runtimeId];if(b||this.base&&(b=this.base.findClassInfo(a)))return b;for(var b=this.abcs,e=0;e<b.length;e++)for(var f=b[e],f=f.scripts,g=0;g<f.length;g++)for(var l=f[g].traits,u=0;u<l.length;u++){var p=l[u];if(p.isClass()){var r=m.getQualifiedName(p.name);if(d){if(r===d)return this.classInfoCache[d]=p.classInfo}else for(var v=0,w=a.namespaces.length;v<w;v++){var S=a.getQName(v);if(r===
m.getQualifiedName(S))return this.classInfoCache[S]=p.classInfo}}}if(!this.base&&this.vm.findDefiningAbc&&(f=this.vm.findDefiningAbc(a),null!==f&&!this.loadedAbcs[f.name]))return this.loadedAbcs[f.name]=!0,this.loadAbc(f),this.findClassInfo(a)};u.prototype.installNative=function(a,d){natives[a]=function(){return d}};u.prototype.findDefiningScript=function(d,b){var f=this.scriptCache[d.runtimeId];if(f&&(f.script.executed||!b)||this.base&&(f=this.base.findDefiningScript(d,b)))return f;Counter.count("ApplicationDomain: findDefiningScript");
for(var f=this.abcs,g=0;g<f.length;g++)for(var l=f[g],l=l.scripts,u=0;u<l.length;u++){var p=l[u],r=p.traits;if(d instanceof m)for(var v=0;v<r.length;v++){var w=r[v];if(d.hasQName(w.name))return b&&e(p,String(w.name)),this.scriptCache[d.runtimeId]={script:p,trait:w}}else a.Debug.unexpected()}if(!this.base&&this.vm.findDefiningAbc&&(l=this.vm.findDefiningAbc(d),null!==l&&!this.loadedAbcs[l.name]))return this.loadedAbcs[l.name]=!0,this.loadAbc(l),this.findDefiningScript(d,b)};u.prototype.compileAbc=
function(a,d){compileAbc(a,d)};u.prototype.executeAbc=function(a){this.loadAbc(a);d(a.lastScript)};u.prototype.loadAbc=function(d){a.AVM2.Runtime.traceExecution.value&&log("Loading: "+d.name);d.applicationDomain=this;GlobalMultinameResolver.loadAbc(d);this.abcs.push(d);this.base||Type.initializeTypes(this)};u.prototype.broadcastMessage=function(a,d,b){debug&&Timer.start("broadcast: "+a);try{this.onMessage.notify1(a,{data:d,origin:b,source:this})}catch(e){throw avm2.exceptions.push({source:a,message:e.message,
stack:e.stack}),e;}debug&&Timer.stop()};u.prototype.traceLoadedClasses=function(d){var b=new r;d||b.enter("Loaded Classes And Interfaces");(d?[this.loadedClasses.last()]:this.loadedClasses).forEach(function(d){d!==a.AVM2.Runtime.Class&&d.trace(b)});d||b.leave("")};w=u;b.ApplicationDomain=w;u=function(){this.compartment=newGlobal("new-compartment");this.compartment.homePath=homePath;this.compartment.release=!0;this.compartment.eval(snarf("compartment.js"))};u.prototype.initializeShell=function(a,d){var b=
this.compartment;b.AVM2.initialize(a,d);b.AVM2.instance.systemDomain.executeAbc(b.grabAbc(homePath+"src/avm2/generated/builtin/builtin.abc"));b.AVM2.instance.systemDomain.executeAbc(b.grabAbc(homePath+"src/avm2/generated/shell/shell.abc"));this.systemDomain=b.AVM2.instance.systemDomain;this.applicationDomain=b.AVM2.instance.applicationDomain};b.SecurityDomain=u})(Shumway||(Shumway={}));
var Glue=Shumway.AVM2.Runtime.Glue,ApplicationDomain=Shumway.AVM2.Runtime.ApplicationDomain,AVM2=Shumway.AVM2.Runtime.AVM2,EXECUTION_MODE=Shumway.AVM2.Runtime.EXECUTION_MODE,ApplicationDomain=Shumway.AVM2.Runtime.ApplicationDomain,AVM2=Shumway.AVM2.Runtime.AVM2,EXECUTION_MODE=Shumway.AVM2.Runtime.EXECUTION_MODE;
(function(a){var b=a.AVM2||(a.AVM2={}),b=b.Runtime||(b.Runtime={}),d=function(a){l(a.dynamicPrototype,e.getPublicQualifiedName("constructor"),a);m(a.traitsPrototype,"class",a);m(a.instanceConstructor,"class",a)},e=a.AVM2.ABC.Multiname,f=a.AVM2.Runtime.InstanceBindings,g=a.AVM2.Runtime.ClassBindings,l=a.ObjectUtilities.defineNonEnumerableProperty,m=a.ObjectUtilities.defineReadOnlyProperty,p=a.ObjectUtilities.createEmptyObject,r=a.ObjectUtilities.toKeyValueArray,u=function(a){var d=a.instanceInfo;!0;
this.name=d.name;this.classInfo=a};u.createInterface=function(d){var b=d.instanceInfo;!0;if(a.AVM2.Runtime.traceExecution.value){var e="Creating Interface "+b.name;b.interfaces.length&&(e+=" implements "+b.interfaces.map(function(a){return a.getName()}).join(", "));log(e)}d=new u(d);d.interfaceBindings=new f(null,b,null,null);return d};u.prototype.toString=function(){return"[interface "+this.name+"]"};u.prototype.isInstance=function(a){if(null===a||"object"!==typeof a)return!1;!0;var d=e.getQualifiedName(this.name);
return void 0!==a.class.implementedInterfaces[d]};u.prototype.trace=function(a){a.enter("interface "+this.name.getName());a.enter("interfaceBindings: ");this.interfaceBindings.trace(a);a.outdent();a.outdent();a.leave("}")};u.prototype.call=function(a,d){return d};u.prototype.apply=function(a,d){return d[0]};b.Interface=u;b.setDefaultProperties=d;var v=function(d,b,e){this.debugName=d;b&&(!0,this.instanceConstructorNoInitialize=this.instanceConstructor=b,this.hasInitialize=0,this.instanceConstructor.class=
this);e?e===a.AVM2.Runtime.ApplicationDomain.coerceCallable&&(e=a.AVM2.Runtime.ApplicationDomain.coerceCallable(this)):e=a.AVM2.Runtime.ApplicationDomain.coerceCallable(this);l(this,"call",e.call);l(this,"apply",e.apply)};v.createClass=function(d,b,l){var u=d.instanceInfo,p=d.abc.applicationDomain,r=e.getName(u.name),E=d.native;if(E){var H=getNative(d.native.cls);H||a.Debug.unexpected("No native for "+d.native.cls);b||(l=new Scope(l,v))}l=new Scope(l,null);var D=createFunction(u.init,l,!1),H=E?H(p,
l,D,b):new v(r,D);H.className=r;H.classInfo=d;H.scope=l;l.object=H;var G,F;E?H.native&&(G=H.native.static,F=H.native.instance):H.extend(b);H.classBindings=new g(d,l,G);H.classBindings.applyTo(p,H);m(H,a.AVM2.Runtime.VM_IS_CLASS,!0);H.instanceBindings=new f(b?b.instanceBindings:null,u,l,F);H.instanceConstructor&&H.instanceBindings.applyTo(p,H.traitsPrototype);H.implementedInterfaces=H.instanceBindings.implementedInterfaces;return H};v.prototype.setSymbol=function(a){this.instanceConstructor.prototype.symbol=
a};v.prototype.getSymbol=function(){return this.instanceConstructor.prototype.symbol};v.prototype.initializeInstance=function(a){for(var d=this,b=[];d;)d.hasInitialize&v.OWN_INITIALIZE&&b.push(d.instanceConstructor.prototype.initialize),d=d.baseClass;for(;d=b.pop();)d.call(a);Counter.count("Initialize Instance "+a.class)};v.prototype.createInstance=function(a){var d=Object.create(this.instanceConstructor.prototype);this.instanceConstructor.apply(d,a);return d};v.prototype.createAsSymbol=function(a){var d=
Object.create(this.instanceConstructor.prototype);if(d.symbol){var b=Object.create(d.symbol),e;for(e in a)b[e]=a[e];d.symbol=b}else d.symbol=a;return d};v.prototype.extendNative=function(a,b){this.baseClass=a;this.dynamicPrototype=Object.getPrototypeOf(b.prototype);this.instanceConstructor.prototype=this.traitsPrototype=b.prototype;d(this)};v.prototype.extendWrapper=function(b,e){!0;this.baseClass=b;this.dynamicPrototype=Object.create(b.dynamicPrototype);var f=Object.create(this.dynamicPrototype,
a.ObjectUtilities.getOwnPropertyDescriptors(e.prototype));this.instanceConstructor.prototype=this.traitsPrototype=f;d(this)};v.prototype.extendBuiltin=function(a){!0;this.baseClass=a;this.dynamicPrototype=this.traitsPrototype=this.instanceConstructor.prototype;d(this)};v.prototype.extend=function(a){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);if(a.hasInitialize){var b=this.instanceConstructor,e=this;this.instanceConstructor=function(){e.initializeInstance(this);b.apply(this,
arguments)};m(this.instanceConstructor,"class",b.class);this.hasInitialize|=v.SUPER_INITIALIZE}this.instanceConstructor.prototype=this.traitsPrototype=Object.create(this.dynamicPrototype);d(this)};v.prototype.setDefaultProperties=function(){d(this)};v.prototype.link=function(d){function b(d,f){for(var g=Object.keys(f),l=0;l<g.length;l++){var m=g[l],u=f[m],p=!1;0<=u.indexOf("open ")&&(u=u.substring(5),p=!0);!0;u=e.getQualifiedName(e.fromSimpleName(u));p&&(u=a.AVM2.Runtime.VM_OPEN_METHOD_PREFIX+u);
!0;(p=Object.getOwnPropertyDescriptor(d,u))&&p.get?Object.defineProperty(d,m,p):Object.defineProperty(d,m,{get:new Function("","return this."+u),set:new Function("v","this."+u+" = v")})}}function f(a){var d=p();a.forEach(function(a){a.name.getNamespace().isPublic()&&(d[a.name.getName()]=(a.isMethod()?"open ":"")+"public "+a.name.getName())});return d}!0;!0;if(d.initialize){if(!this.hasInitialize){var g=this.instanceConstructor,l=this;this.instanceConstructor=function(){l.initializeInstance(this);
g.apply(this,arguments)};m(this.instanceConstructor,"class",g.class);this.instanceConstructor.prototype=g.prototype}this.hasInitialize|=v.OWN_INITIALIZE}for(var u=this.dynamicPrototype,r=Object.keys(d),H=0;H<r.length;H++){var D=r[H];Object.defineProperty(u,D,Object.getOwnPropertyDescriptor(d,D))}if((d=d.__glue__)&&d.script)d.script.instance&&(a.isNumber(d.script.instance)?(!0,b(u,f(this.classInfo.instanceInfo.traits))):b(u,d.script.instance)),d.script.static&&(a.isNumber(d.script.static)?(!0,b(this,
f(this.classInfo.traits))):b(this,d.script.static))};v.prototype.linkNatives=function(a){this.native=a.__glue__.native};v.prototype.verify=function(){!0;!0;!0;!0;!0};v.prototype.coerce=function(a){return a};v.prototype.isInstanceOf=function(a){return this.isInstance(a)};v.prototype.isInstance=function(a){return null===a||"object"!==typeof a?!1:this.dynamicPrototype.isPrototypeOf(a)};v.prototype.trace=function(a){a.enter("class "+(this.debugName+(this.baseClass?" extends "+this.baseClass.debugName:
""))+" {");a.writeLn("scope: "+this.scope);a.writeLn("baseClass: "+this.baseClass);a.writeLn("classInfo: "+this.classInfo);a.writeLn("dynamicPrototype: "+this.dynamicPrototype);a.writeLn("traitsPrototype: "+this.traitsPrototype);a.writeLn("dynamicPrototype === traitsPrototype: "+(this.dynamicPrototype===this.traitsPrototype));a.writeLn("instanceConstructor: "+this.instanceConstructor);a.writeLn("instanceConstructorNoInitialize: "+this.instanceConstructorNoInitialize);a.writeLn("instanceConstructor === instanceConstructorNoInitialize: "+
(this.instanceConstructor===this.instanceConstructorNoInitialize));var d=this.traitsPrototype;a.enter("traitsPrototype: ");d&&(a.enter("VM_SLOTS: "),a.writeArray(d.asSlots.byID.map(function(a){return a.trait})),a.outdent(),a.enter("VM_BINDINGS: "),a.writeArray(d.asBindings.map(function(a){var b=Object.getOwnPropertyDescriptor(d,a);b.get||b.set?(b.get&&(a+=" getter: "+debugName(b.get)),b.set&&(a+=" setter: "+debugName(b.set))):a+=" value: "+debugName(b.value);return a})),a.outdent(),a.enter("VM_OPEN_METHODS: "),
a.writeArray(r(d.asOpenMethods).map(function(a){return a[0]+": "+debugName(a[1])})),a.outdent());a.enter("classBindings: ");this.classBindings.trace(a);a.outdent();a.enter("instanceBindings: ");this.instanceBindings.trace(a);a.outdent();a.outdent();a.writeLn("call: "+this.call);a.writeLn("apply: "+this.apply);a.leave("}")};v.prototype.toString=function(){return"[class "+this.classInfo.instanceInfo.name.name+"]"};v.OWN_INITIALIZE=1;v.SUPER_INITIALIZE=2;b.Class=v;b=a.AVM2.Runtime.ApplicationDomain.coerceCallable(v);
l(v,"call",b.call);l(v,"apply",b.apply);v.instanceConstructor=v;v.toString=v.prototype.toString;v.native={instance:{prototype:{get:function(){return this.dynamicPrototype}}}}})(Shumway||(Shumway={}));
var Interface=Shumway.AVM2.Runtime.Interface,Class=Shumway.AVM2.Runtime.Class,Binding=Shumway.AVM2.Runtime.Binding,Bindings=Shumway.AVM2.Runtime.Bindings,ActivationBindings=Shumway.AVM2.Runtime.ActivationBindings,CatchBindings=Shumway.AVM2.Runtime.CatchBindings,ScriptBindings=Shumway.AVM2.Runtime.ScriptBindings,ClassBindings=Shumway.AVM2.Runtime.ClassBindings,InstanceBindings=Shumway.AVM2.Runtime.InstanceBindings,Interface=Shumway.AVM2.Runtime.Interface,Class=Shumway.AVM2.Runtime.Class,XRegExp=function(a){function b(a,
d,b){var e;if(b)if(a.__proto__)a.__proto__=w.prototype;else for(e in w.prototype)a[e]=w.prototype[e];a[v]={captureNames:d};return a}function d(a){return y.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function e(a,e){if(!w.isRegExp(a))throw new TypeError("Type RegExp expected");var f=y.exec.call(/\/([a-z]*)$/i,String(a))[1];e=e||{};e.add&&(f=d(f+e.add));e.remove&&(f=y.replace.call(f,RegExp("["+e.remove+"]+","g"),""));return a=b(RegExp(a.source,f),a.xregexp&&a.xregexp.captureNames?a.xregexp.captureNames.slice(0):
null,e.addProto)}function f(a,d){if(Array.prototype.indexOf)return a.indexOf(d);var b=a.length,e;for(e=0;e<b;++e)if(a[e]===d)return e;return-1}function g(a,d){return T.call(a)==="[object "+d+"]"}function l(a,d,b){return y.test.call(-1<b.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(d))}function m(a){a=a||{};g(a,"String")&&(a=w.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function p(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");
Q[a]=!0}function r(a){RegExp.prototype.exec=(a?B:y).exec;RegExp.prototype.test=(a?B:y).test;String.prototype.match=(a?B:y).match;String.prototype.replace=(a?B:y).replace;String.prototype.split=(a?B:y).split;z.natives=a}function u(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var v="xregexp",w,z={astral:!1,natives:!1},y={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},
B={},A={},s={},E=[],H={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},D=/\$(?:{([\w$]+)}|([\d$&`']))/g,G=y.exec.call(/()??/,"")[1]===a,F=RegExp.prototype.sticky!==a,Q={g:!0,i:!0,m:!0,y:F},T={}.toString,S;w=function(f,g){var l={hasNamedCapture:!1,captureNames:[]},m="default",u="",p=0,r,v;if(w.isRegExp(f)){if(g!==
a)throw new TypeError("Cannot supply flags when copying a RegExp");return e(f,{addProto:!0})}f=f===a?"":String(f);g=g===a?"":String(g);v=f+"***"+g;if(!s[v]){r=f;var z=g,B;if(d(z)!==z)throw new SyntaxError("Invalid duplicate regex flag "+z);r=y.replace.call(r,/^\(\?([\w$]+)\)/,function(a,b){if(y.test.call(/[gy]/,b))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);z=d(z+b);return""});for(B=0;B<z.length;++B)if(!Q[z.charAt(B)])throw new SyntaxError("Unknown regex flag "+z.charAt(B));
r={pattern:r,flags:z};f=r.pattern;for(g=r.flags;p<f.length;){do{r=f;B=g;for(var A=p,D=m,G=l,F=E.length,T=null,S=void 0,C=void 0;F--;)if(C=E[F],(C.scope===D||"all"===C.scope)&&(!C.flag||-1<B.indexOf(C.flag)))if(S=w.exec(r,C.regex,A,"sticky")){T={matchLength:S[0].length,output:C.handler.call(G,S,D,B),reparse:C.reparse};break}(r=T)&&r.reparse&&(f=f.slice(0,p)+r.output+f.slice(p+r.matchLength))}while(r&&r.reparse);r?(u+=r.output,p+=r.matchLength||1):(r=w.exec(f,H[m],p,"sticky")[0],u+=r,p+=r.length,"["===
r&&"default"===m?m="class":"]"===r&&"class"===m&&(m="default"))}s[v]={pattern:y.replace.call(u,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:y.replace.call(g,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}v=s[v];return b(RegExp(v.pattern,v.flags),v.captures,!0)};w.prototype=RegExp();w.version="3.0.0-pre";w.addToken=function(a,d,b){b=b||{};var f=b.optionalFlags,g;b.flag&&p(b.flag);if(f){f=y.split.call(f,"");for(g=0;g<f.length;++g)p(f[g])}E.push({regex:e(a,{add:"g"+(F?"y":"")}),
handler:d,scope:b.scope||"default",flag:b.flag,reparse:b.reparse});w.cache.flush("patterns")};w.cache=function(a,d){var b=a+"***"+(d||"");return A[b]||(A[b]=w(a,d))};w.cache.flush=function(a){"patterns"===a?s={}:A={}};w.escape=function(a){return y.replace.call(u(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};w.exec=function(a,d,b,f){var g="g";if(F&&(f||d.sticky&&!1!==f))g+="y";d[v]=d.xregexp||{captureNames:null};g=d.xregexp[g]||(d[v][g]=e(d,{add:g,remove:!1===f?"y":""}));g.lastIndex=b=b||0;a=B.exec.call(g,
a);f&&(a&&a.index!==b)&&(a=null);d.global&&(d.lastIndex=a?g.lastIndex:0);return a};w.forEach=function(a,d,b,e){for(var f=0,g=-1;f=w.exec(a,d,f);)b.call(e,f,++g,a,d),f=f.index+(f[0].length||1);return e};w.globalize=function(a){return e(a,{add:"g",addProto:!0})};w.install=function(a){a=m(a);!z.astral&&a.astral&&(w.cache.flush("patterns"),z.astral=!0);!z.natives&&a.natives&&r(!0)};w.isInstalled=function(a){return!!z[a]};w.isRegExp=function(a){return"[object RegExp]"===T.call(a)};w.match=function(a,d,
b){var f=d.global&&"one"!==b||"all"===b,g=(f?"g":"")+(d.sticky?"y":"");d[v]=d.xregexp||{captureNames:null};g=d.xregexp[g||"noGY"]||(d[v][g||"noGY"]=e(d,{add:g,remove:"one"===b?"g":""}));a=y.match.call(u(a),g);d.global&&(d.lastIndex="one"===b&&a?a.index+a[0].length:0);return f?a||[]:a&&a[0]};w.matchChain=function(a,d){return function O(a,b){var e=d[b].regex?d[b]:{regex:d[b]},f=[],g=function(a){if(e.backref){if(!(a.hasOwnProperty(e.backref)||+e.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+
e.backref);f.push(a[e.backref]||"")}else f.push(a[0])},l;for(l=0;l<a.length;++l)w.forEach(a[l],e.regex,g);return b===d.length-1||!f.length?f:O(f,b+1)}([a],0)};w.replace=function(a,d,b,f){var g=w.isRegExp(d),l=d.global&&"one"!==f||"all"===f,m=(l?"g":"")+(d.sticky?"y":""),p=d;g?(d[v]=d.xregexp||{captureNames:null},p=d.xregexp[m||"noGY"]||(d[v][m||"noGY"]=e(d,{add:m,remove:"one"===f?"g":""}))):l&&(p=RegExp(w.escape(String(d)),"g"));a=B.replace.call(u(a),p,b);g&&d.global&&(d.lastIndex=0);return a};w.replaceEach=
function(a,d){var b,e;for(b=0;b<d.length;++b)e=d[b],a=w.replace(a,e[0],e[1],e[2]);return a};w.split=function(a,d,b){return B.split.call(u(a),d,b)};w.test=function(a,d,b,e){return!!w.exec(a,d,b,e)};w.uninstall=function(a){a=m(a);z.astral&&a.astral&&(w.cache.flush("patterns"),z.astral=!1);z.natives&&a.natives&&r(!1)};w.union=function(a,d){var b=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=[],f=0,l,m,u,p=function(a,d,b){var e=m[f-l];if(d){if(++f,e)return"(?<"+e+">"}else if(b)return"\\"+
(+b+l);return a},r;if(!g(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(r=0;r<a.length;++r)u=a[r],w.isRegExp(u)?(l=f,m=u.xregexp&&u.xregexp.captureNames||[],e.push(y.replace.call(w(u.source).source,b,p))):e.push(w.escape(u));return w(e.join("|"),d)};B.exec=function(d){var b=this.lastIndex,g=y.exec.apply(this,arguments),l,m;if(g){!G&&(1<g.length&&-1<f(g,""))&&(l=e(this,{remove:"g"}),y.replace.call(String(d).slice(g.index),l,function(){var d=arguments.length,
b;for(b=1;b<d-2;++b)arguments[b]===a&&(g[b]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(m=1;m<g.length;++m)(l=this.xregexp.captureNames[m-1])&&(g[l]=g[m]);this.global&&(!g[0].length&&this.lastIndex>g.index)&&(this.lastIndex=g.index)}this.global||(this.lastIndex=b);return g};B.test=function(a){return!!B.exec.call(this,a)};B.match=function(a){var d;if(w.isRegExp(a)){if(a.global)return d=y.match.apply(this,arguments),a.lastIndex=0,d}else a=RegExp(a);return B.exec.call(a,u(this))};B.replace=
function(d,b){var e=w.isRegExp(d),l,m,u;e?(d.xregexp&&(m=d.xregexp.captureNames),l=d.lastIndex):d+="";u=g(b,"Function")?y.replace.call(String(this),d,function(){var f=arguments,g;if(m){f[0]=new String(f[0]);for(g=0;g<m.length;++g)m[g]&&(f[0][m[g]]=f[g+1])}e&&d.global&&(d.lastIndex=f[f.length-2]+f[0].length);return b.apply(a,f)}):y.replace.call(null==this?this:String(this),d,function(){var a=arguments;return y.replace.call(String(b),D,function(d,b,e){if(b){e=+b;if(e<=a.length-3)return a[e]||"";e=m?
f(m,b):-1;if(0>e)throw new SyntaxError("Backreference to undefined group "+d);return a[e+1]||""}if("$"===e)return"$";if("&"===e||0===+e)return a[0];if("`"===e)return a[a.length-1].slice(0,a[a.length-2]);if("'"===e)return a[a.length-1].slice(a[a.length-2]+a[0].length);e=+e;if(!isNaN(e)){if(e>a.length-3)throw new SyntaxError("Backreference to undefined group "+d);return a[e]||""}throw new SyntaxError("Invalid token "+d);})});e&&(d.lastIndex=d.global?0:l);return u};B.split=function(d,b){if(!w.isRegExp(d))return y.split.apply(this,
arguments);var e=String(this),f=[],g=d.lastIndex,l=0,m;b=(b===a?-1:b)>>>0;w.forEach(e,d,function(a){a.index+a[0].length>l&&(f.push(e.slice(l,a.index)),1<a.length&&a.index<e.length&&Array.prototype.push.apply(f,a.slice(1)),m=a[0].length,l=a.index+m)});l===e.length?(!y.test.call(d,"")||m)&&f.push(""):f.push(e.slice(l));d.lastIndex=g;return f.length>b?f.slice(0,b):f};S=w.addToken;S(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,d){if("B"===a[1]&&"default"===
d)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all"});S(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});S(/\(\?#[^)]*\)/,function(a,d,b){return l(a.input,a.index+a[0].length,b)?"":"(?:)"});S(/\s+|#.*/,function(a,d,b){return l(a.input,a.index+a[0].length,b)?"":"(?:)"},{flag:"x"});S(/\./,function(){return"[\\s\\S]"},{flag:"s"});S(/\\k<([\w$]+)>/,function(a){var d=isNaN(a[1])?f(this.captureNames,a[1])+1:+a[1],b=a.index+a[0].length;if(!d||d>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+
a[0]);return"\\"+d+(b===a.input.length||isNaN(a.input.charAt(b))?"":"(?:)")});S(/\\(\d+)/,function(a,d){if(!("default"===d&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});S(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+
a[0]);if(-1<f(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});S(/\((?!\?)/,function(a,d,b){if(-1<b.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return w}(),Namespace=Shumway.AVM2.ABC.Namespace;
(function(a){var b=a.AVM2||(a.AVM2={}),d=b.Runtime||(b.Runtime={}),e=function(a,b){!0;for(var e=0;e<a.length;e++){var f=a[e];if(3<=d.traceExecution.value){var g="Patching: ";f.name?g+=f.name:f.get?g+="get "+f.get:f.set&&(g+="set "+f.set);xb&&xb.redLn(g)}f.get?fb(f.object,f.get,b,!0):f.set?fb(f.object,f.set,b,!1):ia(f.object,f.name,b)}},f=function(d){var b=this.resolutionMap[d.runtimeId];if(b)return b;var b=this.resolutionMap[d.runtimeId]=a.ObjectUtilities.createMap(),e=this.bindings,f;for(f in e.map){var g=
f,l=e.map[f].trait;if(l.isGetter()||l.isSetter())g=g.substring(a.AVM2.Runtime.Binding.KEY_PREFIX_LENGTH);g=da.fromQualifiedName(g);g.getNamespace().inNamespaceSet(d)&&(b[g.getName()]=da.getQualifiedName(l.name))}return b},g=function(d,b){"object"===typeof b&&(b=String(b));if(a.isNumeric(b))return a.toNumber(b);if(!d)return da.getPublicQualifiedName(b);if(1<d.length){var e=this.getNamespaceResolutionMap(d)[b];return e?e:da.getPublicQualifiedName(b)}return da.qualifyName(d[0],b)},l=function(a){return this.asGetProperty(void 0,
a,0)},m=function(a,d,b){a=this.resolveMultinameProperty(a,d,b);return this.asGetNumericProperty&&da.isNumeric(a)?this.asGetNumericProperty(a):this[a]},p=function(a,d,b){return"number"===typeof d?this.asGetNumericProperty(d):m.call(this,a,d,b)},r=function(a){!0;return this[a]},u=function(a,d,b){d=d?null:this;var e=this.asOpenMethods;return(d&&e&&e[a]?e[a]:this[a]).apply(d,b)},v=function(a,d){return this.asSetProperty(void 0,a,0,d)},w=function(a,d,b,e){"object"===typeof d&&(d=String(d));a=this.resolveMultinameProperty(a,
d,b);if(this.asSetNumericProperty&&da.isNumeric(a))return this.asSetNumericProperty(a,e);if(d=this.asSlots.byQN[a])(d=d.type)&&d.coerce&&(e=d.coerce(e));this[a]=e},z=function(a,d,b,e){if("number"===typeof d)this.asSetNumericProperty(d,e);else return w.call(this,a,d,b,e)},y=function(a,d){return this.asDefineProperty(void 0,a,0,d)},B=function(a,d,b,e){"object"===typeof d&&(d=String(d));a=this.resolveMultinameProperty(a,d,b);Object.defineProperty(this,a,e)},A=function(a,d){return this.asCallProperty(void 0,
a,0,!1,d)},s=function(a,b,e,f,g){d.traceCallExecution.value&&Ta.enter("call "+(this.class?this.class.className+" ":"")+b+"("+tb(g)+") #"+N.count(b));f=f?null:this;isProxyObject(this)?g=this[d.VM_CALL_PROXY](new da(a,b,e),f,g):(a=this.resolveMultinameProperty(a,b,e),this.asGetNumericProperty&&da.isNumeric(a)?a=this.asGetNumericProperty(a):(b=this.asOpenMethods,a=f&&b&&b[a]?b[a]:this[a]),g=a.apply(f,g));0<d.traceCallExecution.value&&Ta.leave("return "+kb(g));return g},E=function(a,b,e,f,g){d.traceCallExecution.value&&
Ta.enter("call super "+(this.class?this.class.className+" ":"")+e+"("+tb(g)+") #"+N.count(e));a=a.object.baseClass;b=a.traitsPrototype.resolveMultinameProperty(b,e,f);g=a.traitsPrototype.asOpenMethods[b].apply(this,g);0<d.traceCallExecution.value&&Ta.leave("return "+kb(g));return g},H=function(a,b,e,f,g){d.traceCallExecution.value&&Ta.enter("set super "+(this.class?this.class.className+" ":"")+e+"("+kb(g)+") #"+N.count(e));a=a.object.baseClass;var l=a.traitsPrototype.resolveMultinameProperty(b,e,
f);this.asSlots.byQN[l]?this.asSetProperty(b,e,f,g):a.traitsPrototype[d.VM_OPEN_SET_METHOD_PREFIX+l].call(this,g);0<d.traceCallExecution.value&&Ta.leave("")},D=function(a,b,e,f){d.traceCallExecution.value&&Ta.enter("get super "+(this.class?this.class.className+" ":"")+e+" #"+N.count(e));a=a.object.baseClass;var g=a.traitsPrototype.resolveMultinameProperty(b,e,f);b=this.asSlots.byQN[g]?this.asGetProperty(b,e,f):a.traitsPrototype[d.VM_OPEN_GET_METHOD_PREFIX+g].call(this);0<d.traceCallExecution.value&&
Ta.leave("return "+kb(b));return b},G=function(a,d){if(a.classInfo){var b=da.getQualifiedName(a.classInfo.instanceInfo.name);if(b===da.String)return String.apply(null,d);if(b===da.Boolean)return Boolean.apply(null,d);if(b===da.Number)return Number.apply(null,d)}b=a.instanceConstructor;switch(d.length){case 0:return new b;case 1:return new b(d[0]);case 2:return new b(d[0],d[1]);case 3:return new b(d[0],d[1],d[2]);case 4:return new b(d[0],d[1],d[2],d[3]);case 5:return new b(d[0],d[1],d[2],d[3],d[4]);
case 6:return new b(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);case 8:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]);case 9:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]);case 10:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9])}for(var e=[],f=0;f<d.length;f++)e[f+1]=d[f];return new (Function.bind.apply(b,e))},F=function(a,b,e,f){a=this.asGetProperty(a,b,e);d.traceCallExecution.value&&Ta.enter("construct "+b+"("+tb(f)+") #"+
N.count(b));b=G(a,f);0<d.traceCallExecution.value&&Ta.leave("return "+kb(b));return b},Q=function(a,d){return d in a},T=function(a,d,b,e){return this.hasProperty?this.hasProperty(a,d,b):e?Q(this,this.resolveMultinameProperty(a,d,b)):this.resolveMultinameProperty(a,d,b)in this},S=function(a,d,b){return this.asHasTraitProperty(a,d,b)?!1:delete this[this.resolveMultinameProperty(a,d,b)]},Y=function(a,d,b){a=this.resolveMultinameProperty(a,d,b);return 0<=this.asBindings.indexOf(a)},I=function(a){return this[a]},
J=function(a,d){this[a]=d},O=function(a){0===a&&ia(this,"asEnumerableKeys",this.asGetEnumerableKeys());for(var d=this.asEnumerableKeys;a<d.length;){if(this.asHasProperty(void 0,d[a],0))return a+1;a++}return 0},V=function(a){var d=this.asEnumerableKeys;!0;return d[a-1]},M=function(a){return this.asGetPublicProperty(this.asNextName(a))},L=function(){var d=this.valueOf();if("string"===typeof d||"number"===typeof d)return[];for(var d=Object.keys(this),b=[],e=0;e<d.length;e++){var f=d[e];a.isNumeric(f)?
b.push(f):(f=da.stripPublicQualifier(f),void 0!==f&&b.push(f))}return b},P=function(a,d,b,e){throw new (a.getClass(d).instanceConstructor)(b,e);},K=function(d,b){if(d.coerce)return d.coerce(b);if(a.isNullOrUndefined(b))return null;if(d.isInstance(b))return b;!0},R=function(a){return"string"===typeof a?a:void 0==a?null:a+""},U=function(a){return void 0==a?null:"string"===typeof a||"number"===typeof a?a:Object(a)},ga=function(a,d){return String(a).localeCompare(String(d))},ba=function(d,b){b&&(new a.AVM2.Runtime.CatchBindings(new a.AVM2.Runtime.Scope(null,
this),b)).applyTo(d,this)},Z=function(a,d){"undefined"===typeof d&&(d=0);return Array.prototype.slice.call(a,d)},$=function(a){return!a.hasBody||a.hasExceptions()&&!oa.value||a.code.length>Sa.value?!1:!0},ha=function(a){return!$(a)||a.isClassInitializer||a.isScriptInitializer?!1:!0},C=function(a){if(a.hasExceptions())return!1;a=a.holder;a instanceof Aa&&(a=a.instanceInfo);if(a instanceof Da){switch(a.name.namespaces[0].uri){case "flash.geom":case "flash.events":return!0}switch(a.name.getOriginalName()){case "com.google.youtube.model.VideoData":return!0}}return!1},
sa=function(a){if(d.codeCaching.value){var b=d.CODE_CACHE[a.abc.hash];if(b){b.isInitialized||(a.abc.scripts.forEach(function(a){ka.create(a).getName()}),a.abc.classes.forEach(function(a){ka.create(a).getName()}),b.isInitialized=!0);if(b=b.methods[a.index])return log("Linking CC: "+a),Counter.count("Code Cache Hit"),b;a.isInstanceInitializer||a.isClassInitializer?Counter.count("Code Cache Query On Initializer"):(Counter.count("Code Cache MISS ON OTHER"),warn("Shouldn't MISS: "+a+" "+a.debugName));
Counter.count("Code Cache Miss")}else warn("Cannot Find Code Cache For ABC, name: "+a.abc.name+", hash: "+a.abc.hash),Counter.count("Code Cache ABC Miss")}},fa=function(d,b,e){var f=!1,g=d.parameters.map(function(a){void 0!==a.value&&(f=!0);return a.value});e=e?function(b){var e=this===jsGlobal?b.global.object:this,l=Z(arguments,1);f&&l.length<g.length&&(l=l.concat(g.slice(l.length-g.length)));return a.AVM2.Interpreter.interpretMethod(e,d,b,l)}:function(){var e=this===jsGlobal?b.global.object:this,
l=Z(arguments);f&&l.length<g.length&&(l=l.concat(g.slice(arguments.length-g.length)));return a.AVM2.Interpreter.interpretMethod(e,d,b,l)};e.instanceConstructor=e;e.debugName="Interpreter Function #"+Lb++;return e},aa=function(d,b,e,f){var g=sa(d);if(!g)var l=Compiler.compileMethod(d,b,e),m=l.parameters,l=l.body;b=d.name?da.getQualifiedName(d.name):"fn"+ub;d.holder&&(e="",d.holder instanceof Aa?e="static$"+d.holder.instanceInfo.name.getName():d.holder instanceof Da?e=d.holder.name.getName():d.holder instanceof
ua&&(e="script"),b=e+"$"+b);b=a.StringUtilities.escapeString(b);d.verified&&(b+="$V");if(ub==Ca.value||f)l="{ debugger; \n"+l+"}";if(!g)var u="function "+b+" ("+m.join(", ")+") "+l;1<ya.value&&d.trace(new eb,d.abc);d.debugTrace=function(){d.trace(new eb,d.abc)};0<ya.value&&log(u);f=g||(new Function("return "+u))();f.debugName="Compiled Function #"+Mb++;return f},ca=function(d,b,e,f){"undefined"===typeof f&&(f=!1);!0;if(d.freeMethod)return e?a.AVM2.Runtime.bindFreeMethodScope(d,b):d.freeMethod;var g;
if(g=a.AVM2.Runtime.checkMethodOverrides(d))return!0,g;ma(d);$a++;g=!1;if((1===d.abc.applicationDomain.mode||!ha(d))&&!C(d))g=!0;0<=za.value&&Number(za.value)!==$a&&(log("Compile Only Skipping "+$a),g=!0);0<=la.value&&(1E3<$a&&(log(a.Debug.backtrace()),log(a.AVM2.Runtime.AVM2.getStackTrace())),$a>la.value&&(log("Compile Until Skipping "+$a),g=!0));g?d.freeMethod=fa(d,b,e):(ub++,(0<=za.value||0<=la.value)&&log("Compiling "+$a),d.freeMethod=aa(d,b,e,f,d.isInstanceInitializer));d.freeMethod.methodInfo=
d;return e?a.AVM2.Runtime.bindFreeMethodScope(d,b):d.freeMethod},ma=function(d){if(!d.analysis){d.analysis=new Analysis(d);d.needsActivation()&&(d.activationPrototype=new yb(d),(new a.AVM2.Runtime.ActivationBindings(d)).applyTo(d.abc.applicationDomain,d.activationPrototype));for(var b=d.exceptions,e=0,f=b.length;e<f;e++){var g=b[e];if(g.varName){var l=Object.create(La.prototype);l.kind=0;l.name=g.varName;l.typeName=g.typeName;l.holder=d;g.scopeObject=new ba(d.abc.applicationDomain,l)}else g.scopeObject=
new ba(void 0,void 0)}}},X=function(b,e,f){!0;!0;var g=b.methodInfo,l;if(g.isNative()){var m=b.metadata;m&&m.native?l=(f=getNative(m.native.value[0].value))&&f(null,e):m&&m.unsafeJSNative?l=getNative(m.unsafeJSNative.value[0].value):f&&(e=da.getName(g.name),l=b.isGetter()?f[e]?f[e].get:void 0:b.isSetter()?f[e]?f[e].set:void 0:f[e]);if(!l)return a.Debug.warning("No native method for: "+b.kindName()+" "+g.holder.name+"::"+da.getQualifiedName(g.name)),function(){a.Debug.warning("Calling undefined native method: "+
b.kindName()+" "+g.holder.name+"::"+da.getQualifiedName(g.name))}}else 2<=d.traceExecution.value&&log("Creating Function For Trait: "+b.holder+" "+b),l=ca(g,e,!1,!1),!0;3<=d.traceExecution.value&&log("Made Function: "+da.getQualifiedName(g.name));return l},b=a.Options.Option,ea=a.Options.OptionSet,ea=shumwayOptions.register(new ea("AVM2")).register(new ea("Runtime"));d.traceExecution=ea.register(new b("tx","traceExecution","number",0,"trace script execution",{choices:{off:0,normal:2,verbose:3}}));
d.traceCallExecution=ea.register(new b("txc","traceCallExecution","number",0,"trace call execution",{choices:{off:0,normal:1,verbose:2}}));var ya=ea.register(new b("t","traceFunctions","number",0,"trace functions",{choices:{off:0,compiled:1,"compiled & abc":2}}));d.traceClasses=ea.register(new b("tc","traceClasses","boolean",!1,"trace class creation"));d.traceDomain=ea.register(new b("td","traceDomain","boolean",!1,"trace domain property access"));var Ca=new b("fb","functionBreak","number",-1,"Inserts a debugBreak at function index #"),
za=new b("co","compileOnly","number",-1,"Compiles only function number"),la=new b("cu","compileUntil","number",-1,"Compiles only until a function number");d.enableVerifier=ea.register(new b("verifier","verifier","boolean",!1,"Enable verifier."));d.globalMultinameAnalysis=ea.register(new b("ga","globalMultinameAnalysis","boolean",!1,"Global multiname analysis."));d.codeCaching=ea.register(new b("cc","codeCaching","boolean",!1,"Enable code caching."));var oa=ea.register(new b("cex","exceptions","boolean",
!1,"Compile functions with catch blocks.")),Sa=ea.register(new b("cmms","maximumMethodSize","number",4096,"Compiler maximum method size."));d.sealConstTraits=!1;d.useAsAdd=!0;var N=new a.Metrics.Counter(!0),da=a.AVM2.ABC.Multiname,ta=a.AVM2.ABC.Namespace,Aa=a.AVM2.ABC.ClassInfo,Da=a.AVM2.ABC.InstanceInfo,ua=a.AVM2.ABC.ScriptInfo,La=a.AVM2.ABC.Trait,eb=a.IndentingWriter,va=a.ObjectUtilities.createEmptyObject,pa=a.ObjectUtilities.boxValue,Ia=a.FunctionUtilities.bindSafely,fb=a.ObjectUtilities.defineNonEnumerableGetterOrSetter,
ia=a.ObjectUtilities.defineNonEnumerableProperty,sb=a.ObjectUtilities.defineReadOnlyProperty,Kb=a.ObjectUtilities.defineNonEnumerableGetter,kb=a.StringUtilities.toSafeString,tb=a.StringUtilities.toSafeArrayString;d.VM_SLOTS="asSlots";d.VM_LENGTH="asLength";d.VM_BINDINGS="asBindings";d.VM_NATIVE_PROTOTYPE_FLAG="asIsNative";d.VM_OPEN_METHODS="asOpenMethods";d.VM_IS_CLASS="asIsClass";d.VM_IS_PROXY="asIsProxy";d.VM_CALL_PROXY="asCallProxy";d.VM_OPEN_METHOD_PREFIX="m";d.VM_MEMOIZER_PREFIX="z";d.VM_OPEN_SET_METHOD_PREFIX=
"s";d.VM_OPEN_GET_METHOD_PREFIX="g";d.VM_NATIVE_BUILTIN_ORIGINALS="asOriginals";d.VM_METHOD_OVERRIDES=va();var Lb=1,Mb=1,$a=0,ub=0;d.isClass=function(a){!0;return Object.hasOwnProperty.call(a,d.VM_IS_CLASS)};d.isNativePrototype=function(a){return Object.prototype.hasOwnProperty.call(a,d.VM_NATIVE_PROTOTYPE_FLAG)};var xb=null,Ta=null;d.patch=e;d.applyNonMemoizedMethodTrait=function(b,f,g,l,m){!0;if(f.isMethod()){var u=a.AVM2.Runtime.makeTrampoline(function(a){var d=X(f,l,m);e(a.patchTargets,d);return d},
f.methodInfo.parameters.length);u.patchTargets=[{object:g,name:b},{object:g,name:d.VM_OPEN_METHOD_PREFIX+b}];var p=Ia(u,g);sb(p,d.VM_LENGTH,u.asLength);sb(p,da.getPublicQualifiedName("prototype"),null);ia(g,b,p);ia(g,d.VM_OPEN_METHOD_PREFIX+b,p)}else f.isGetter()||f.isSetter()?(u=a.AVM2.Runtime.makeTrampoline(function(a){var d=X(f,l,m);e(a.patchTargets,d);return d},f.isSetter()?1:0),u.patchTargets=f.isGetter()?[{object:g,get:b}]:[{object:g,set:b}],fb(g,b,u,f.isGetter())):a.Debug.unexpected(f)};d.applyMemoizedMethodTrait=
function(b,f,g,l,m){!0;if(f.isMethod()){var u={value:null},p=a.AVM2.Runtime.makeTrampoline(function(a){var d=X(f,l,m);e(a.patchTargets,d);return d},f.methodInfo.parameters.length,String(f.name));u.value=p;var r=g.asOpenMethods;r[b]=p;ia(g,d.VM_OPEN_METHOD_PREFIX+b,p);Kb(g,b,a.AVM2.Runtime.makeMemoizer(b,u));p.patchTargets=[{object:u,name:"value"},{object:r,name:b},{object:g,name:d.VM_OPEN_METHOD_PREFIX+b}]}else if(f.isGetter()||f.isSetter())p=a.AVM2.Runtime.makeTrampoline(function(a){var d=X(f,l,
m);e(a.patchTargets,d);return d},0,String(f.name)),f.isGetter()?(ia(g,d.VM_OPEN_GET_METHOD_PREFIX+b,p),p.patchTargets=[{object:g,get:b},{object:g,name:d.VM_OPEN_GET_METHOD_PREFIX+b}]):(ia(g,d.VM_OPEN_SET_METHOD_PREFIX+b,p),p.patchTargets=[{object:g,set:b},{object:g,name:d.VM_OPEN_SET_METHOD_PREFIX+b}]),fb(g,b,p,f.isGetter())};d.getNamespaceResolutionMap=f;d.resolveMultinameProperty=g;d.asGetPublicProperty=l;d.asGetProperty=m;d.asGetPropertyLikelyNumeric=p;d.asGetResolvedStringProperty=r;d.asCallResolvedStringProperty=
u;d.asGetResolvedStringPropertyFallback=function(a){a=da.getNameFromPublicQualifiedName(a);return this.asGetProperty([ta.PUBLIC],a,0)};d.asSetPublicProperty=v;d.asSetProperty=w;d.asSetPropertyLikelyNumeric=z;d.asDefinePublicProperty=y;d.asDefineProperty=B;d.asCallPublicProperty=A;d.asCallProperty=s;d.asCallSuper=E;d.asSetSuper=H;d.asGetSuper=D;d.construct=G;d.asConstructProperty=F;d.nonProxyingHasProperty=Q;d.asHasProperty=T;d.asDeleteProperty=S;d.asHasTraitProperty=Y;d.asGetNumericProperty=I;d.asSetNumericProperty=
J;d.asGetDescendants=function(){a.Debug.notImplemented("asGetDescendants")};d.asNextNameIndex=O;d.asNextName=V;d.asNextValue=M;d.asGetEnumerableKeys=L;d.asTypeOf=function(a){if(a){if(a.constructor===String)return"string";if(a.constructor===Number)return"number";if(a.constructor===Boolean)return"boolean";if(a instanceof XML||a instanceof XMLList)return"xml"}return typeof a};d.publicizeProperties=function(a){for(var d=Object.keys(a),b=0;b<d.length;b++){var e=d[b];if(!da.isPublicQualifiedName(e)){var f=
a[e];a[da.getPublicQualifiedName(e)]=f;delete a[e]}}};d.asGetSlot=function(a,d){return a[a.asSlots.byID[d].name]};d.asSetSlot=function(a,d,b){d=a.asSlots.byID[d];if(!d.const){var e=d.type;a[d.name]=e&&e.coerce?e.coerce(b):b}};d.throwError=function(d,b){var e=a.AVM2.formatErrorMessage.apply(null,Array.prototype.slice.call(arguments,1));P(a.AVM2.Runtime.AVM2.currentDomain(),d,e,b.code)};d.throwErrorFromVM=P;d.translateError=function(d,b){if(b instanceof Error){var e=d.getClass(b.name);if(e)return new e.instanceConstructor(a.AVM2.translateErrorMessage(b));
a.Debug.unexpected("Can't translate error: "+b)}return b};d.asIsInstanceOf=function(a,d){return a.isInstanceOf(d)};d.asIsType=function(a,d){return a.isInstance(d)};d.asAsType=function(a,d){return a.isInstance(d)?d:null};d.asCoerceByMultiname=function(a,d,b){!0;switch(da.getQualifiedName(d)){case da.Int:return b|0;case da.Uint:return b>>>0;case da.String:return R(b);case da.Number:return+b;case da.Boolean:return!!b;case da.Object:return U(b)}return K(a.getType(d),b)};d.asCoerce=K;d.asCoerceString=
R;d.asCoerceInt=function(a){return a|0};d.asCoerceUint=function(a){return a>>>0};d.asCoerceNumber=function(a){return+a};d.asCoerceBoolean=function(a){return!!a};d.asCoerceObject=U;d.asDefaultCompareFunction=ga;d.asCompare=function(d,b,e,f){!0;!0;var g=0;f||(f=ga);e&1&&(d=String(d).toLowerCase(),b=String(b).toLowerCase());e&16?(d=a.toNumber(d),b=a.toNumber(b),g=d<b?-1:d>b?1:0):g=f(d,b);e&2&&(g*=-1);return g};d.asAdd=function(a,d){return"string"===typeof a||"string"===typeof d?String(a)+String(d):a+
d};d.asHasNext2=function(d,b){if(a.isNullOrUndefined(d))return{index:0,object:null};d=pa(d);var e=d.asNextNameIndex(b);if(0<e)return{index:e,object:d};for(;;){d=Object.getPrototypeOf(d);if(!d)break;e=d.asNextNameIndex(0);if(0<e)return{index:e,object:d}}return{index:0,object:null}};d.getDescendants=function(a,d){if(!isXMLType(a))throw"Not XML object in getDescendants";return a.descendants(d)};d.checkFilter=function(a){if(!a.class||!isXMLType(a))throw"TypeError operand of childFilter not of XML type";
return a};d.initializeGlobalObject=function(a){var b=a[d.VM_NATIVE_BUILTIN_ORIGINALS]=va();[{name:"Object",methods:["toString","valueOf"]},{name:"Function",methods:["toString","valueOf"]}].forEach(function(d){var e=a[d.name];b[d.name]=va();d.methods.forEach(function(f){var g;g=e.prototype.hasOwnProperty(f)?e.prototype[f]:b.Object[f];b[d.name][f]=g;var l=da.getPublicQualifiedName(f);a[d.name].prototype[f]=function(){return this[l]?this[l]():g.call(this)}})});"Object Number Boolean String Array Date RegExp".split(" ").forEach(function(b){sb(a[b].prototype,
d.VM_NATIVE_PROTOTYPE_FLAG,!0)});ia(a.Object.prototype,"getNamespaceResolutionMap",f);ia(a.Object.prototype,"resolveMultinameProperty",g);ia(a.Object.prototype,"asGetProperty",m);ia(a.Object.prototype,"asGetPublicProperty",l);ia(a.Object.prototype,"asGetResolvedStringProperty",r);ia(a.Object.prototype,"asSetProperty",w);ia(a.Object.prototype,"asSetPublicProperty",v);ia(a.Object.prototype,"asDefineProperty",B);ia(a.Object.prototype,"asDefinePublicProperty",y);ia(a.Object.prototype,"asCallProperty",
s);ia(a.Object.prototype,"asCallSuper",E);ia(a.Object.prototype,"asGetSuper",D);ia(a.Object.prototype,"asSetSuper",H);ia(a.Object.prototype,"asCallPublicProperty",A);ia(a.Object.prototype,"asCallResolvedStringProperty",u);ia(a.Object.prototype,"asConstructProperty",F);ia(a.Object.prototype,"asHasProperty",T);ia(a.Object.prototype,"asHasTraitProperty",Y);ia(a.Object.prototype,"asDeleteProperty",S);ia(a.Object.prototype,"asNextName",V);ia(a.Object.prototype,"asNextValue",M);ia(a.Object.prototype,"asNextNameIndex",
O);ia(a.Object.prototype,"asGetEnumerableKeys",L);"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" ").forEach(function(d){d in a?(ia(a[d].prototype,"asGetNumericProperty",I),ia(a[d].prototype,"asSetNumericProperty",J),ia(a[d].prototype,"asGetProperty",p),ia(a[d].prototype,"asSetProperty",z)):log(d+" was not found in globals")});a.Array.prototype.asGetProperty=function(a,d,b){return"number"===typeof d?this[d]:m.call(this,
a,d,b)};a.Array.prototype.asSetProperty=function(a,d,b,e){if("number"===typeof d)this[d]=e;else return w.call(this,a,d,b,e)}};d.nameInTraits=function(a,b){if(a.hasOwnProperty(d.VM_BINDINGS)&&a.hasOwnProperty(b))return!0;var e=Object.getPrototypeOf(a);return e.hasOwnProperty(d.VM_BINDINGS)&&e.hasOwnProperty(b)};d.CatchScopeObject=ba;b=function(d){this.scriptInfo=d;d.global=this;this.scriptBindings=new a.AVM2.Runtime.ScriptBindings(d,new a.AVM2.Runtime.Scope(null,this,!1));this.scriptBindings.applyTo(d.abc.applicationDomain,
this);d.loaded=!0};b.prototype.toString=function(){return"[object global]"};b.prototype.isExecuted=function(){return this.scriptInfo.executed};b.prototype.isExecuting=function(){return this.scriptInfo.executing};b.prototype.ensureExecuted=function(){a.AVM2.Runtime.ensureScriptIsExecuted(this.scriptInfo)};d.Global=b;ia(b.prototype,da.getPublicQualifiedName("toString"),function(){return this.toString()});var ka,Ma=function(a){this.target=a};Ma.create=function(a){return a.asLazyInitializer?a.asLazyInitializer:
a.asLazyInitializer=new Ma(a)};Ma.prototype.getName=function(){if(this.name)return this.name;var d=this.target,b;this.target instanceof ua?(this.name="$"+a.StringUtilities.variableLengthEncodeInt32(d.hash),b=function(){a.AVM2.Runtime.ensureScriptIsExecuted(d,"Lazy Initializer");return d.global}):this.target instanceof Aa?(this.name="$"+a.StringUtilities.variableLengthEncodeInt32(d.hash),b=function(){return d.classObject?d.classObject:d.abc.applicationDomain.getProperty(d.instanceInfo.name)}):a.Debug.notImplemented(String(d));
var e=this.name;Object.defineProperty(Ma._holder,e,{get:function(){var a=b();Object.defineProperty(Ma._holder,e,{value:a,writable:!0});return a},configurable:!0});return e};Ma._holder=jsGlobal;ka=Ma;d.LazyInitializer=ka;d.forEachPublicProperty=function(d,b,e){if(d.asBindings)for(g in d)if(a.isNumeric(g))b.call(e,g,d[g]);else{if(da.isPublicQualifiedName(g)&&0>d.asBindings.indexOf(g)){var f=da.stripPublicQualifier(g);b.call(e,f,d[g])}}else for(var g in d)b.call(e,g,d[g])};d.wrapJSObject=function(a){var d=
Object.create(a),b;for(b in a)Object.defineProperty(d,da.getPublicQualifiedName(b),function(a,d){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:!0}}(a,b));return d};d.asCreateActivation=function(a){return Object.create(a.activationPrototype)};var wa=function(){};wa.updateTraits=function(d){for(var b=0;b<d.length;b++){var e=d[b],f=e.name.name,e=e.name.getNamespace();e.isDynamic()||(wa.hasNonDynamicNamespaces[f]=!0,wa.wasResolved[f]&&a.Debug.notImplemented("We have to the undo the optimization, "+
f+" can now bind to "+e))}};wa.loadAbc=function(a){if(d.globalMultinameAnalysis.value){var b=a.scripts,e=a.classes;a=a.methods;for(var f=0;f<b.length;f++)wa.updateTraits(b[f].traits);for(f=0;f<e.length;f++)wa.updateTraits(e[f].traits),wa.updateTraits(e[f].instanceInfo.traits);for(f=0;f<a.length;f++)a[f].traits&&wa.updateTraits(a[f].traits)}};wa.resolveMultiname=function(a){var d=a.name;if(!wa.hasNonDynamicNamespaces[d])return wa.wasResolved[d]=!0,new da([ta.PUBLIC],a.name)};wa.hasNonDynamicNamespaces=
va();wa.wasResolved=va();d.GlobalMultinameResolver=wa;var yb=function(a){this.methodInfo=a};d.ActivationInfo=yb;d.sliceArguments=Z;d.canCompile=$;d.shouldCompile=ha;d.forceCompile=C;d.CODE_CACHE=va();d.searchCodeCache=sa;d.createInterpretedFunction=fa;d.debugName=function(d){return a.isFunction(d)?d.debugName:d};d.createCompiledFunction=aa;d.createFunction=ca;d.ensureFunctionIsInitialized=ma;d.getTraitFunction=X;d.createClass=function(b,e,f){!0;var g=b.instanceInfo,l=b.abc.applicationDomain,m=da.getName(g.name);
d.traceExecution.value&&log("Creating "+(g.isInterface()?"Interface":"Class")+": "+m+(b.native?" replaced with native "+b.native.cls:""));m=g.isInterface()?a.AVM2.Runtime.Interface.createInterface(b):a.AVM2.Runtime.Class.createClass(b,e,f);d.traceClasses.value&&(l.loadedClasses.push(m),l.traceLoadedClasses(!0));if(g.isInterface())return m;l.onMessage.notify1("classCreated",m);m.instanceConstructor&&m!==a.AVM2.Runtime.Class&&m.verify();if(e&&("Proxy"===da.getQualifiedName(e.classInfo.instanceInfo.name.name)||
e.isProxy))installProxyClassWrapper(m),m.isProxy=!0;b.classObject=m;ca(b.init,f,!1,!1).call(m);d.sealConstTraits&&this.sealConstantTraits(m,b.traits);return m};d.sealConstantTraits=function(d,b){for(var e=0,f=b.length;e<f;e++){var g=b[e];g.isConst()&&(g=da.getQualifiedName(g.name),function(b,e){Object.defineProperty(d,b,{configurable:!1,enumerable:!1,get:function(){return e},set:function(){P(a.AVM2.Runtime.AVM2.currentDomain(),"ReferenceError","Illegal write to read-only property "+b+".",0)}})}(g,
d[g]))}};d.applyType=function(d,b,e){b=b.classInfo.instanceInfo.name.name;if("Vector"===b){!0;e=e[0];if(!a.isNullOrUndefined(e))switch(b=e.classInfo.instanceInfo.name.name.toLowerCase(),b){case "int":case "uint":case "double":case "object":return d.getClass("packageInternal __AS3__.vec.Vector$"+b)}return d.getClass("packageInternal __AS3__.vec.Vector$object").applyType(e)}return a.Debug.notImplemented(b)}})(Shumway||(Shumway={}));
var CC=Shumway.AVM2.Runtime.CODE_CACHE,VM_LENGTH=Shumway.AVM2.Runtime.VM_LENGTH,VM_IS_PROXY=Shumway.AVM2.Runtime.VM_IS_PROXY,VM_CALL_PROXY=Shumway.AVM2.Runtime.VM_CALL_PROXY,VM_NATIVE_BUILTIN_ORIGINALS=Shumway.AVM2.Runtime.VM_NATIVE_BUILTIN_ORIGINALS,VM_OPEN_METHOD_PREFIX="m",VM_OPEN_SET_METHOD_PREFIX="s",VM_OPEN_GET_METHOD_PREFIX="g",SAVED_SCOPE_NAME="$SS",originalStringReplace=String.prototype.replace;XRegExp.install({natives:!0});
var callWriter=new IndentingWriter(!1,function(a){print(a)}),objectIDs=0,OBJECT_NAME="Object Name";function objectConstantName(a){!0;if(a.hasOwnProperty("Object Name"))return a["Object Name"];if(a instanceof LazyInitializer)return a.getName();var b;b=objectIDs++;b=a instanceof Global?"$G"+b:a instanceof Multiname?"$M"+b:isClass(a)?"$C"+b:"$O"+b;Object.defineProperty(a,"Object Name",{value:b,writable:!1,enumerable:!1});jsGlobal[b]=a;return b}
var isClass=Shumway.AVM2.Runtime.isClass,isTrampoline=Shumway.AVM2.Runtime.isTrampoline,isMemoizer=Shumway.AVM2.Runtime.isMemoizer,LazyInitializer=Shumway.AVM2.Runtime.LazyInitializer,getNamespaceResolutionMap=Shumway.AVM2.Runtime.getNamespaceResolutionMap,resolveMultinameProperty=Shumway.AVM2.Runtime.resolveMultinameProperty,asGetPublicProperty=Shumway.AVM2.Runtime.asGetPublicProperty,asGetProperty=Shumway.AVM2.Runtime.asGetProperty,asGetPropertyLikelyNumeric=Shumway.AVM2.Runtime.asGetPropertyLikelyNumeric,
asGetResolvedStringProperty=Shumway.AVM2.Runtime.asGetResolvedStringProperty,asCallResolvedStringProperty=Shumway.AVM2.Runtime.asCallResolvedStringProperty,asGetResolvedStringPropertyFallback=Shumway.AVM2.Runtime.asGetResolvedStringPropertyFallback,asSetPublicProperty=Shumway.AVM2.Runtime.asSetPublicProperty,asSetProperty=Shumway.AVM2.Runtime.asSetProperty,asSetPropertyLikelyNumeric=Shumway.AVM2.Runtime.asSetPropertyLikelyNumeric,asDefinePublicProperty=Shumway.AVM2.Runtime.asDefinePublicProperty,
asDefineProperty=Shumway.AVM2.Runtime.asDefineProperty,asCallPublicProperty=Shumway.AVM2.Runtime.asCallPublicProperty,asCallProperty=Shumway.AVM2.Runtime.asCallProperty,asCallSuper=Shumway.AVM2.Runtime.asCallSuper,asSetSuper=Shumway.AVM2.Runtime.asSetSuper,asGetSuper=Shumway.AVM2.Runtime.asGetSuper,construct=Shumway.AVM2.Runtime.construct,asConstructProperty=Shumway.AVM2.Runtime.asConstructProperty,asHasProperty=Shumway.AVM2.Runtime.asHasProperty,asDeleteProperty=Shumway.AVM2.Runtime.asDeleteProperty,
asGetNumericProperty=Shumway.AVM2.Runtime.asGetNumericProperty,asSetNumericProperty=Shumway.AVM2.Runtime.asSetNumericProperty,asGetDescendants=Shumway.AVM2.Runtime.asGetDescendants,asNextNameIndex=Shumway.AVM2.Runtime.asNextNameIndex,asNextName=Shumway.AVM2.Runtime.asNextName,asNextValue=Shumway.AVM2.Runtime.asNextValue,asGetEnumerableKeys=Shumway.AVM2.Runtime.asGetEnumerableKeys,initializeGlobalObject=Shumway.AVM2.Runtime.initializeGlobalObject;initializeGlobalObject(jsGlobal);
var asTypeOf=Shumway.AVM2.Runtime.asTypeOf,publicizeProperties=Shumway.AVM2.Runtime.publicizeProperties,asGetSlot=Shumway.AVM2.Runtime.asGetSlot,asSetSlot=Shumway.AVM2.Runtime.asSetSlot,asHasNext2=Shumway.AVM2.Runtime.asHasNext2,getDescendants=Shumway.AVM2.Runtime.getDescendants,checkFilter=Shumway.AVM2.Runtime.checkFilter,ActivationInfo=Shumway.AVM2.Runtime.ActivationInfo,ScopeStack=Shumway.AVM2.Runtime.ScopeStack,Scope=Shumway.AVM2.Runtime.Scope,bindFreeMethodScope=Shumway.AVM2.Runtime.bindFreeMethodScope,
nameInTraits=Shumway.AVM2.Runtime.nameInTraits;function resolveMultiname(a,b){return a.resolveMultinameProperty(b.namespaces,b.name,b.flags)}
var sliceArguments=Shumway.AVM2.Runtime.sliceArguments,nonProxyingHasProperty=Shumway.AVM2.Runtime.nonProxyingHasProperty,forEachPublicProperty=Shumway.AVM2.Runtime.forEachPublicProperty,wrapJSObject=Shumway.AVM2.Runtime.wrapJSObject,asCreateActivation=Shumway.AVM2.Runtime.asCreateActivation,CatchScopeObject=Shumway.AVM2.Runtime.CatchScopeObject,Global=Shumway.AVM2.Runtime.Global,canCompile=Shumway.AVM2.Runtime.canCompile,shouldCompile=Shumway.AVM2.Runtime.shouldCompile,forceCompile=Shumway.AVM2.Runtime.forceCompile,
createInterpretedFunction=Shumway.AVM2.Runtime.createInterpretedFunction,debugName=Shumway.AVM2.Runtime.debugName,createCompiledFunction=Shumway.AVM2.Runtime.createCompiledFunction,getMethodOverrideKey=Shumway.AVM2.Runtime.getMethodOverrideKey,checkMethodOverrides=Shumway.AVM2.Runtime.checkMethodOverrides,makeTrampoline=Shumway.AVM2.Runtime.makeTrampoline,makeMemoizer=Shumway.AVM2.Runtime.makeMemoizer,createFunction=Shumway.AVM2.Runtime.createFunction,ensureFunctionIsInitialized=Shumway.AVM2.Runtime.ensureFunctionIsInitialized,
getTraitFunction=Shumway.AVM2.Runtime.getTraitFunction,createClass=Shumway.AVM2.Runtime.createClass,sealConstantTraits=Shumway.AVM2.Runtime.sealConstantTraits,applyType=Shumway.AVM2.Runtime.applyType,throwError=Shumway.AVM2.Runtime.throwError,throwErrorFromVM=Shumway.AVM2.Runtime.throwErrorFromVM,translateError=Shumway.AVM2.Runtime.translateError,asIsInstanceOf=Shumway.AVM2.Runtime.asIsInstanceOf,asIsType=Shumway.AVM2.Runtime.asIsType,asAsType=Shumway.AVM2.Runtime.asAsType,asCoerceByMultiname=Shumway.AVM2.Runtime.asCoerceByMultiname,
asCoerce=Shumway.AVM2.Runtime.asCoerce,asCoerceString=Shumway.AVM2.Runtime.asCoerceString,asCoerceInt=Shumway.AVM2.Runtime.asCoerceInt,asCoerceUint=Shumway.AVM2.Runtime.asCoerceUint,asCoerceNumber=Shumway.AVM2.Runtime.asCoerceNumber,asCoerceBoolean=Shumway.AVM2.Runtime.asCoerceBoolean,asCoerceObject=Shumway.AVM2.Runtime.asCoerceObject,asDefaultCompareFunction=Shumway.AVM2.Runtime.asDefaultCompareFunction,asCompare=Shumway.AVM2.Runtime.asCompare,asAdd=Shumway.AVM2.Runtime.asAdd,GlobalMultinameResolver=
Shumway.AVM2.Runtime.GlobalMultinameResolver;
(function(a){var b=a.AVM2||(a.AVM2={});b.Runtime||(b.Runtime={});a.AVM2.Runtime.VM_METHOD_OVERRIDES["static mochi.as3.MochiServices::connect"]=function(){};a.AVM2.Runtime.VM_METHOD_OVERRIDES["static MochiBot::track"]=function(){};a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.midasplayer.debug.DebugLog::trace"]=function(a){log(a)};a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.midasplayer.engine.comm.DebugGameComm::getGameData"]=function(){return'<gamedata randomseed="554884453" version="1">\n<musicOn>true</musicOn>\n<soundOn>true</soundOn>\n<isShortGame>false</isShortGame>\n<booster_1>0</booster_1>\n<booster_2>0</booster_2>\n<booster_3>0</booster_3>\n<booster_4>0</booster_4>\n<booster_5>0</booster_5>\n<bestScore>0</bestScore>\n<bestChain>0</bestChain>\n<bestLevel>0</bestLevel>\n<bestCrushed>0</bestCrushed>\n<bestMixed>0</bestMixed>\n<text id="outro.crushed">Candy crushed</text>\n<text id="outro.bestever">best ever</text>\n<text id="outro.trophy.two">scored {0} in one game</text>\n<text id="outro.combo_color_color">All Clear Created</text>\n<text id="outro.trophy.one">crushed {0} candy in one game</text>\n<text id="outro.score">Score</text>\n<text id="outro.opengame">Please register to play the full game</text>\n<text id="outro.chain">Longest chain</text>\n<text id="outro.time">Game ends in {0} seconds</text>\n<text id="outro.combo_color_line">Super Stripes Created</text>\n<text id="game.nomoves">No more moves!</text>\n<text id="outro.combo_wrapper_line">Mega-Candy Created</text>\n<text id="intro.time">Game starts in {0} seconds</text>\n<text id="outro.now">now</text>\n<text id="outro.level">Level reached</text>\n<text id="outro.title">Game Over</text>\n<text id="intro.info1">Match 3 Candy of the same colour to crush them. Matching 4 or 5 in different formations generates special sweets that are extra tasty.</text>\n<text id="intro.info2">You can also combine the special sweets for additional effects by switching them with each other. Try these combinations for a taste you will not forget: </text>\n<text id="outro.combo_color_wrapper">Double Colour Bombs Created</text>\n<text id="outro.trophy.three">made {0} combined candy in one game</text>\n<text id="intro.title">Play like this:</text>\n</gamedata>'};a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.antkarlov.Preloader::com.antkarlov:Preloader.isUrl"]=
function(){return!0};a.AVM2.Runtime.VM_METHOD_OVERRIDES["static com.demonsters.debugger.MonsterDebugger::initialize"]=function(){};a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.core.tracking.TrackConfig::getTrackers"]=function(){return[]};a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateProperties"]=a.AVM2.Runtime.VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateTextSize"]=
function(){}})(Shumway||(Shumway={}));var checkArguments=!0;function asCheckVectorSetNumericProperty(a,b,d){(0>a||a>b||a===b&&d||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}function asCheckVectorGetNumericProperty(a,b){(0>a||a>=b||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}
var TypedArrayVector=function(){function a(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(10,a+4));this._offset=0;this._length=a}function b(a,b){return String(a).localeCompare(String(b))}a.callable=function(d){if(d instanceof a)return d;var b=d.asGetProperty(void 0,"length");if(void 0!==b){for(var f=new a(b,!1),g=0;g<b;g++)f.asSetNumericProperty(g,d.asGetPublicProperty(g));return f}unexpected()};a.prototype.internalToString=function(){for(var a="",b=this._offset,f=b+this._length,g=
0;g<this._buffer.length;g++)g===b&&(a+="["),g===f&&(a+="]"),a+=this._buffer[g],g<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};a.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a};a.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};
a.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))};a.prototype.concat=function(){notImplemented("TypedArrayVector.concat")};a.prototype.every=function(a,b){for(var f=0;f<this._length;f++)if(!a.call(b,this.asGetNumericProperty(f),f,this))return!1;return!0};a.prototype.filter=
function(d,b){for(var f=new a,g=0;g<this._length;g++)d.call(b,this.asGetNumericProperty(g),g,this)&&f.push(this.asGetNumericProperty(g));return f};a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=0;f<this._length;f++)if(a.call(b,this.asGetNumericProperty(f),f,this))return!0;return!1};a.prototype.forEach=function(a,b){for(var f=0;f<this._length;f++)a.call(b,
this.asGetNumericProperty(f),f,this)};a.prototype.join=function(){notImplemented("TypedArrayVector.join")};a.prototype.indexOf=function(){notImplemented("TypedArrayVector.indexOf")};a.prototype.lastIndexOf=function(){notImplemented("TypedArrayVector.lastIndexOf")};a.prototype.map=function(d,b){isFunction(d)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=new a,g=0;g<this._length;g++)f.push(d.call(b,this.asGetNumericProperty(g),g,this));return f};a.prototype.push=function(){this._checkFixed();
this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};a.prototype.pop=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset+this._length]};a.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,f=this._buffer;a<b;){var g=f[a];f[a]=f[b];f[b]=g;a++;b--}};a.CASEINSENSITIVE=1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=
16;a.prototype._sortNumeric=function(a){for(var b=this._view(),f=[],g=-1,l=0,m=b.length-1,p,r,u,v;;)if(100>=m-l){for(r=l+1;r<=m;r++){u=b[r];for(p=r-1;p>=l&&b[p]>u;)b[p+1]=b[p--];b[p+1]=u}if(-1==g)break;m=f[g--];l=f[g--]}else{v=l+m>>1;p=l+1;r=m;u=b[v];b[v]=b[p];b[p]=u;b[l]>b[m]&&(u=b[l],b[l]=b[m],b[m]=u);b[p]>b[m]&&(u=b[p],b[p]=b[m],b[m]=u);b[l]>b[p]&&(u=b[l],b[l]=b[p],b[p]=u);for(v=b[p];;){do p++;while(b[p]<v);do r--;while(b[r]>v);if(r<p)break;u=b[p];b[p]=b[r];b[r]=u}b[l+1]=b[r];b[r]=v;m-p+1>=r-l?
(f[++g]=p,f[++g]=m,m=r-1):(f[++g]=l,f[++g]=r-1,l=p)}a&&this.reverse()};a.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var d,e=0;arguments[0]instanceof Function?d=arguments[0]:isNumber(arguments[0])&&(e=arguments[0]);isNumber(arguments[1])&&(e=arguments[1]);if(e&TypedArrayVector.NUMERIC)return this._sortNumeric(e&a.DESCENDING);Array.prototype.sort.call(this._view(),function(f,g){var l=f,m=g,p=e,r=d;assertNotImplemented(!(p&a.CASEINSENSITIVE),"CASEINSENSITIVE");
assertNotImplemented(!(p&a.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(p&a.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var u=0;r||(r=b);p&a.NUMERIC?(l=toNumber(l),m=toNumber(m),u=l<m?-1:l>m?1:0):u=r(l,m);p&a.DESCENDING&&(u*=-1);return u})};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);
a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};a.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};a.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+
arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var d=[],b=0;b<this._length;b++)d.push(b);return d};a.prototype.asHasProperty=function(d,b,f){if(a.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,d,b,f);d=
toNumber(b);return 0<=d&&d<this._length};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,f=this._offset+a;b<f;b++)this._buffer[b]=0}this._length=a}});a.prototype._spliceHelper=function(a,b,f,g,l){b=clamp(b,0,g.length-l);f=clamp(f,0,this._length-a);this._ensureCapacity(this._length-f+b);var m=this._offset+a+f,m=this._buffer.subarray(m,m+this._length-a-f);this._buffer.set(m,
this._offset+a+b);this._length+=b-f;for(f=0;f<b;f++)this._buffer[this._offset+a+f]=g.asGetNumericProperty(l+f)};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var d=[],b=0;b<this._length;b++)d.push(b);return d};return a}(),typedArrayVectorTemplate='var EXTRA_CAPACITY=4,INITIAL_CAPACITY=10,DEFAULT_VALUE=0;function vector(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(INITIAL_CAPACITY,a+EXTRA_CAPACITY));this._offset=0;this._length=a}vector.callable=function(a){if(a instanceof vector)return a;var b=a.asGetProperty(void 0,"length");if(void 0!==b){for(var c=new vector(b,!1),d=0;d<b;d++)c.asSetNumericProperty(d,a.asGetPublicProperty(d));return c}unexpected()}; vector.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};vector.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a}; vector.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};vector.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))}; vector.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0};vector.prototype.filter=function(a,b){for(var c=new vector,d=0;d<this._length;d++)a.call(b,this.asGetNumericProperty(d),d,this)&&c.push(this.asGetNumericProperty(d));return c}; vector.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1};vector.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)};vector.prototype.join=function(a){notImplemented("TypedArrayVector.join")}; vector.prototype.indexOf=function(a,b){notImplemented("TypedArrayVector.indexOf")};vector.prototype.lastIndexOf=function(a,b){notImplemented("TypedArrayVector.lastIndexOf")};vector.prototype.map=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=new vector,d=0;d<this._length;d++)c.push(a.call(b,this.asGetNumericProperty(d),d,this));return c}; vector.prototype.push=function(){this._checkFixed();this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};vector.prototype.pop=function(){this._checkFixed();if(0===this._length)return DEFAULT_VALUE;this._length--;return this._buffer[this._offset+this._length]};vector.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;a<b;){var d=c[a];c[a]=c[b];c[b]=d;a++;b--}}; vector.CASEINSENSITIVE=1;vector.DESCENDING=2;vector.UNIQUESORT=4;vector.RETURNINDEXEDARRAY=8;vector.NUMERIC=16;function defaultCompareFunction(a,b){return String(a).localeCompare(String(b))} function compare(a,b,c,d){assertNotImplemented(!(c&vector.CASEINSENSITIVE),"CASEINSENSITIVE");assertNotImplemented(!(c&vector.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(c&vector.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var f=0;d||(d=defaultCompareFunction);c&vector.NUMERIC?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);c&vector.DESCENDING&&(f*=-1);return f} function _sort(a){for(var b=[],c=-1,d=0,f=a.length-1,e,g,h,k;;)if(100>=f-d){for(g=d+1;g<=f;g++){h=a[g];for(e=g-1;e>=d&&a[e]>h;)a[e+1]=a[e--];a[e+1]=h}if(-1==c)break;f=b[c--];d=b[c--]}else{k=d+f>>1;e=d+1;g=f;h=a[k];a[k]=a[e];a[e]=h;a[d]>a[f]&&(h=a[d],a[d]=a[f],a[f]=h);a[e]>a[f]&&(h=a[e],a[e]=a[f],a[f]=h);a[d]>a[e]&&(h=a[d],a[d]=a[e],a[e]=h);for(k=a[e];;){do e++;while(a[e]<k);do g--;while(a[g]>k);if(g<e)break;h=a[e];a[e]=a[g];a[g]=h}a[d+1]=a[g];a[g]=k;f-e+1>=g-d?(b[++c]=e,b[++c]=f,f=g-1):(b[++c]=d, b[++c]=g-1,d=e)}return a}vector.prototype._sortNumeric=function(a){_sort(this._view());a&&this.reverse()};vector.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var a,b=0;arguments[0]instanceof Function?a=arguments[0]:isNumber(arguments[0])&&(b=arguments[0]);isNumber(arguments[1])&&(b=arguments[1]);if(b&TypedArrayVector.NUMERIC)return this._sortNumeric(b&vector.DESCENDING);Array.prototype.sort.call(this._view(),function(c,d){return compare(c,d,b,a)})}; vector.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};vector.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};vector.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]}; vector.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};vector.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};vector.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};vector.prototype.asHasProperty=function(a,b,c){if(vector.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,a,b,c);a=toNumber(b);return 0<=a&&a<this._length}; Object.defineProperty(vector.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;b<c;b++)this._buffer[b]=DEFAULT_VALUE}this._length=a}}); vector.prototype._spliceHelper=function(a,b,c,d,f){debugger;b=clamp(b,0,d.length-f);c=clamp(c,0,this._length-a);this._ensureCapacity(this._length-c+b);var e=this._offset+a+c,e=this._buffer.subarray(e,e+this._length-a-c);this._buffer.set(e,this._offset+a+b);this._length+=b-c;for(c=0;c<b;c++)this._buffer[this._offset+a+c]=d.asGetNumericProperty(f+c)}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};',
Int32Vector=TypedArrayVector,Uint32Vector=(new Function(originalStringReplace.call(typedArrayVectorTemplate,/Int32Array/g,"Uint32Array")+" return vector;"))(),Float64Vector=(new Function(originalStringReplace.call(typedArrayVectorTemplate,/Int32Array/g,"Float64Array")+" return vector;"))();Int32Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};
Int32Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};Uint32Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};Uint32Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};
Float64Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};Float64Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};
var GenericVector=function(){function a(a,d,e){a|=0;this._fixed=!!d;this._buffer=Array(a);this._defaultValue=(this._type=e)?e.defaultValue:null;this._fill(0,a,this._defaultValue)}a.applyType=function(b){function d(d,f){a.call(this,d,f,b)}d.prototype=Object.create(a.prototype);d.callable=a.callable;return d};a.callable=function(b){if(b instanceof a)return b;var d=b.asGetProperty(void 0,"length");if(void 0!==d){for(var e=new a(d,!1),f=0;f<d;f++)e.asSetNumericProperty(f,b.asGetPublicProperty(f));return e}unexpected()};
a.prototype._fill=function(a,d,e){for(var f=0;f<d;f++)this._buffer[a+f]=e};a.prototype.toString=function(){for(var a="",d=0;d<this._buffer.length;d++)a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");return a};a.prototype.every=function(a,d){for(var e=0;e<this._buffer.length;e++)if(!a.call(d,this.asGetNumericProperty(e),e,this))return!1;return!0};a.prototype.filter=function(b,d){for(var e=new a,f=0;f<this._buffer.length;f++)b.call(d,this.asGetNumericProperty(f),f,this)&&e.push(this.asGetNumericProperty(f));
return e};a.prototype.some=function(a,d){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=0;e<this._buffer.length;e++)if(a.call(d,this.asGetNumericProperty(e),e,this))return!0;return!1};a.prototype.forEach=function(a,d){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=0;e<this._buffer.length;e++)a.call(d,this.asGetNumericProperty(e),e,this)};a.prototype.map=
function(b,d){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=new a,f=0;f<this._buffer.length;f++)e.push(b.call(d,this.asGetNumericProperty(f),f,this));return e};a.prototype.push=function(){this._checkFixed();for(var a=0;a<arguments.length;a++)this._buffer.push(this._coerce(arguments[a]))};a.prototype.pop=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.pop()};a.prototype.reverse=function(){this._buffer.reverse()};a.CASEINSENSITIVE=
1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=16;a.prototype.sort=function(a){return this._buffer.sort(a)};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._buffer.length);return this._buffer[a]};a.prototype._coerce=function(a){return this._type?this._type.coerce(a):void 0===a?null:a};a.prototype.asSetNumericProperty=function(a,d){checkArguments&&asCheckVectorSetNumericProperty(a,this._buffer.length,this._fixed);this._buffer[a]=
this._coerce(d)};a.prototype.shift=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.shift()};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var a=[],d=0;d<arguments.length;d++)a.push(this._coerce(arguments[d]));this._buffer.unshift.apply(this._buffer,a)}};Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.length},
set:function(a){a>>>=0;if(a>this._buffer.length)for(var d=this._buffer.length;d<a;d++)this._buffer[d]=this._defaultValue;else this._buffer.length=a;!0}});a.prototype._spliceHelper=function(a,d,e,f,g){d=clamp(d,0,f.length-g);e=clamp(e,0,this._buffer.length-a);for(var l=[],m=0;m<d;m++)l.push(this._coerce(f.asGetNumericProperty(g+m)));this._buffer.splice.apply(this._buffer,[a,e].concat(l))};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);
for(var b=[],d=0;d<this._buffer.length;d++)b.push(d);return b};a.prototype.asHasProperty=function(b,d,e){if(a.prototype===this||!isNumeric(d))return Object.prototype.asHasProperty.call(this,b,d,e);b=toNumber(d);return 0<=b&&b<this._buffer.length};return a}();GenericVector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};
GenericVector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};function arraySort(a,b){if(0===b.length)return a.sort();var d,e=0;b[0]instanceof Function?d=b[0]:isNumber(b[0])&&(e=b[0]);isNumber(b[1])&&(e=b[1]);a.sort(function(a,b){return asCompare(a,b,e,d)});return a}
function ArrayClass(a,b,d,e){a=new Class("Array",Array,ApplicationDomain.passthroughCallable(Array));a.extendBuiltin(e);var f=createEmptyObject();a.native={"static":{_pop:function(a){return a.pop()},_reverse:function(a){return a.reverse()},_concat:function(a,d){return a.concat.apply(a,d)},_shift:function(a){return a.shift()},_slice:function(a,d,b){return a.slice(d,b)},_unshift:function(a,d){return a.unshift.apply(a,d)},_splice:function(a,d){return a.splice.apply(a,d)},_sort:function(a,d){if(0===d.length)return a.sort();
var b,e=0;d[0]instanceof Function?b=d[0]:isNumber(d[0])&&(e=d[0]);isNumber(d[1])&&(e=d[1]);a.sort(function(a,d){return asCompare(a,d,e,b)});return a},_sortOn:function(a,d,b){isString(d)&&(d=[d]);isNumber(b)&&(b=[b]);for(var e=d.length-1;0<=e;e--){var r=Multiname.getPublicQualifiedName(d[e]);if(b[e]&16){var u="var x = toNumber(a."+r+"), y = toNumber(b."+r+");",u=b[e]&2?u+"return x < y ? 1 : (x > y ? -1 : 0);":u+"return x < y ? -1 : (x > y ? 1 : 0);",v=f[u];v||(v=f[u]=new Function("a","b",u));a.sort(v)}else a.sort(function(a,
d){return asCompare(a[r],d[r],b[e]|0)})}return a},_indexOf:function(a,d,b){return a.indexOf(d,b)},_lastIndexOf:function(a,d,b){return a.lastIndexOf(d,b)},_every:function(a,d,b){for(var e=0;e<a.length&&!0===d.call(b,a[e],e,a);e++);return!1},_filter:function(a,d,b){for(var e=[],f=0;f<a.length;f++)!0===d.call(b,a[f],f,a)&&e.push(a[f]);return e},_forEach:function(a,d,b){return a.forEach(d,b)},_map:function(a,d,b){return a.map(d,b)},_some:function(a,d,b){return a.some(d,b)}},instance:{pop:Array.prototype.pop,
push:Array.prototype.push,unshift:Array.prototype.unshift,length:{get:function(){return this.length},set:function(a){this.length=a}}}};a.coerce=function(a){return a};a.isInstanceOf=function(){return!0};return a}var XMLClass,XMLListClass,QNameClass,ASXML,XML,ASXMLList,XMLList,isXMLType,isXMLName,XMLParser;
(function(){function a(){function a(d,b){if(d.isXML)switch(d.kind){case "element":return b.element(d);case "attribute":return b.attribute(d);case "text":return b.text(d);case "cdata":return b.cdata(d);case "comment":return b.comment(d);case "processing-instruction":return b.pi(d)}else{if(d.isXMLList)return b.list(d);throw"Not implemented";}}this.encode=function(d){return a(d,{element:function(d){var b,e,f=d.name.mn.namespaces[0],g=f.prefix?f.prefix+":":"";b="<"+g+d.name.localName;var l=[];(f.prefix||
f.uri)&&l.push(f);g&&(l[f.prefix]=!0);for(e=d;e;){for(var m=0;m<e.inScopeNamespaces.length;m++)f=e.inScopeNamespaces[m],l[f.prefix]||(l.push(f),l[f.prefix]=!0);e=e.parent}for(m=0;m<l.length;m++)e=l[m],b=e.prefix?b+(" xmlns:"+e.prefix+'="'+e.uri+'"'):b+(' xmlns="'+e.uri+'"');for(m=0;m<d.attributes.length;m++)e=d.attributes[m],f=d.name.uri,g=d.prefix?f.prefix+":":"",b+=" "+(g+e.name.localName)+'="'+e.value+'"';if(d.children.length){b+=">";for(m=0;m<d.children.length;m++)b+=a(d.children[m],this);b+=
"</"+g+d.name.mn.name+">"}else b+="/>";return b},text:function(a){return b(a.value)},attribute:function(a){return b(a.value)},cdata:function(){},comment:function(){},pi:function(){},doctype:function(){},list:function(a){for(var d="",b=0;b<a.children.length;b++)0<b&&(d+="\n"),d+=e(a.children[b],[]);return d}})}}function b(a){return a.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}function d(a){if("object"===typeof a&&null!==a)switch(a.kind){case "text":case "attribute":return a.value;
default:if(a.hasSimpleContent()){var b="";a.children.forEach(function(a){b+=d(a)});return b}return e(a)}else return String(a)}function e(d,b,e){return(new a(b,e,!0)).encode(d)}function f(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a.isXML)return a;if(a.isXMLList){if(1===a.length())return a.children[0];throw new TypeError(formatErrorMessage(Errors.XMLMarkupMustBeWellFormed));
}a=z.parseFromString(String(a));if(0===a.length())return a=new XML("text");if(1===a.length())return a.children[0].parent=null,a.children[0];throw"SyntaxError in ToXML";}function g(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a instanceof XML){var d=new XMLList(a.parent,a.name);d.append(a);return d}if(a instanceof XMLList)return a;a=new ASXML("<parent xmlns='"+y+
"'>"+String(a)+"</parent>");for(var d=new XMLList,b=0;b<a.length();b++){var e=a.children[b];e.parent=null;d.append(e)}return d}function l(a){if(void 0===a||null===a||"boolean"===typeof a||"number"===typeof a)throw"TypeError: invalid operand to ToAttributeName()";if(isXMLType(a))a=d(a);else if(a instanceof Object&&null!==a){if(a instanceof QName)return new QName(a.uri,a.localName,!0);a=d(a)}if("string"===typeof a)var b=new ASNamespace,b=new QName(b,a,!0);return b}function m(a){for(;a;){var d=a.object;
if(void 0!==d.defaultNamepsace)return d.defaultNamespace;a=a.parent}return ASNamespace.createNamespace("","")}function p(a,d,b,e){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ASNamespace.PUBLIC],d,b);return this.getProperty(a,e)}function r(a,d,b,e){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ASNamespace.PUBLIC],d,b);this.setProperty(a,e)}function u(a,d,b){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ASNamespace.PUBLIC],d,
b);return this.hasProperty(a)}function v(a,d,b,e,f){var g=e?null:this,l=this.asGetProperty(a,d,b,!0);return!l?this.toString().asCallProperty(a?a:[ASNamespace.PUBLIC],d,b,e,f):l.apply(g,f)}function w(a){var d=0,d=a.isAttribute()?d|1:d|2;a.isAnyName()&&(d|=4);a.isAnyNamespace()&&(d|=8);return d}XMLParser=function(){this.parseFromString=function(a){var d=new XML("element","","",""),b=[],e={beginElement:function(a,e,f,g){var l=d;b.push(l);d=new XML("element",a.namespace,a.localName,a.prefix);for(a=0;a<
e.length;++a){var m=e[a],u=new XML("attribute",m.name.namespace,m.name.localName,m.name.prefix);u.value=m.value;d.attributes.push(u)}e=f.namespaces;for(a=0;a<e.length;++a)f=e[a],f=ASNamespace.createNamespace(f.uri,f.prefix),d.inScopeNamespaces.push(f);l.insert(l.length(),d);g&&(d=b.pop())},endElement:function(){d=b.pop()},text:function(a){var b=new XML("text","","",void 0);b.value=a;d.insert(d.length(),b)},cdata:function(a){var b=new XML("text","","",void 0);b.value=a;d.insert(d.length(),b)},comment:function(){},
pi:function(){},doctype:function(){}},f=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},g=function(a){return a.replace(/&([^;]+);/g,function(a,d){if("#x"===d.substring(0,2))return String.fromCharCode(parseInt(d.substring(2),16));if("#"===d.substring(0,1))return String.fromCharCode(parseInt(d.substring(1),10));switch(d){case "lt":return"<";case "gt":return">";case "amp":return"&"}throw"Unknown entity: "+d;})},l=function(a,d){var b=a.indexOf(":");if(0<=b){var e;a:{e=a.substring(0,b);for(var f=
p.length-1;0<=f;--f)if(p[f].namespaces.hasOwnProperty(e)){e=p[f].namespaces[e];break a}throw"Unknown namespace: "+e;}f=a.substring(0,b);b=a.substring(b+1);return{name:e+"::"+b,localName:b,prefix:f,namespace:e}}if(d){a:{for(b=p.length-1;0<=b;--b)if(p[b].hasOwnProperty("xmlns")){b=p[b].xmlns;break a}b=void 0}b={name:a,localName:a,prefix:"",namespace:b}}else b={name:a,localName:a,prefix:"",namespace:""};return b},m=function(a,d){function b(){for(;e<a.length&&a.charCodeAt(e)in r;)++e}for(var e=d,f,l=
[];e<a.length&&!(a.charCodeAt(e)in r)&&">"!==a.charAt(e)&&"/"!==a.charAt(e);)++e;f=a.substring(d,e);for(b();e<a.length&&">"!==a.charAt(e)&&"/"!==a.charAt(e)&&"?"!==a.charAt(e);){b();for(var m="",u="";e<a.length&&!(a.charCodeAt(e)in r)&&"="!==a.charAt(e);)m+=a.charAt(e),++e;b();if("="!==a.charAt(e))throw"'=' expected";++e;b();u=a.charAt(e);if('"'!==u&&"'"!==u)throw"Quote expected";var p=a.indexOf(u,++e);if(0>p)throw new "Unexpected EOF[6]";u=a.substring(e,p);l.push({name:m,value:g(u)});e=p+1;b()}return{name:f,
attributes:l,parsed:e-d}},u=0,p=[{space:"default",xmlns:"",namespaces:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"}}],r={10:!0,13:!0,9:!0,32:!0};for(;u<a.length;){var v=a.charAt(u),w=u;if("<"===v)switch(++w,a.charAt(w)){case "/":++w;u=a.indexOf(">",w);if(0>u)throw"Unexpected EOF[1]";w=l(a.substring(w,u),!0);e.endElement(w);p.pop();w=u+1;break;case "?":++w;v=m(a,w);if("?>"!=a.substring(w+v.parsed,w+v.parsed+2))throw"Unexpected EOF[2]";e.pi(v.name,v.attributes);
w+=v.parsed+2;break;case "!":if("--"===a.substring(w+1,w+3)){u=a.indexOf("--\x3e",w+3);if(0>u)throw"Unexpected EOF[3]";e.comment(a.substring(w+3,u));w=u+3}else if("[CDATA["===a.substring(w+1,w+8)){u=a.indexOf("]]\x3e",w+8);if(0>u)throw"Unexpected EOF[4]";e.cdata(a.substring(w+8,u));w=u+3}else if("DOCTYPE"===a.substring(w+1,w+8)){var y=a.indexOf("[",w+8),v=!1,u=a.indexOf(">",w+8);if(0>u)throw"Unexpected EOF[5]";if(0<y&&u>y){u=a.indexOf("]>",w+8);if(0>u)throw"Unexpected EOF[7]";v=!0}w=a.substring(w+
8,u+(v?1:0));e.doctype(w);w=u+(v?2:1)}else throw"Unknown !tag";break;default:v=m(a,w);y=!1;if("/>"===a.substring(w+v.parsed,w+v.parsed+2))y=!0;else if(">"!==a.substring(w+v.parsed,w+v.parsed+1))throw"Unexpected EOF[2]";for(var z={namespaces:[]},V=v.attributes,u=0;u<V.length;++u){var M=V[u],L=M.name;if("xmlns:"===L.substring(0,6))L=L.substring(6),M=M.value,z.namespaces[L]=f(M),z.namespaces.push({uri:M,prefix:L}),delete V[u];else if("xmlns"===L)M=M.value,z.namespaces.xmlns=f(M),z.namespaces.push({uri:M,
prefix:""}),delete V[u];else if("xml:"===L.substring(0,4))z[L.substring(4)]=f(M.value);else if("xml"===L.substring(0,3))throw"Invalid xml attribute";}p.push(z);L=[];for(u=0;u<V.length;++u)(M=V[u])&&L.push({name:l(M.name,!1),value:M.value});e.beginElement(l(v.name,!0),L,z,y);w+=v.parsed+(y?2:1);y&&p.pop()}else{do if(++w>=a.length)break;while("<"!==a.charAt(w));u=a.substring(u,w);v=0===u.replace(/^\s+/,"").length;if(!(y=!v))a:{for(y=p.length-1;0<=y;--y)if("preserve"===p[y].space){y=!0;break a}y=!1}y&&
e.text(g(u),v)}u=w}return d}};var z=new XMLParser;isXMLType=function(a){return a.isXML||a.isXMLList};var y="";isXMLName=function(a){try{new QName(a)}catch(d){return!1}return!0};XMLClass=function(a,b,g,y){ASXML=function(a){if(!(this instanceof ASXML))return a instanceof ASXML?a:new ASXML(a);if(null===a||void 0===a)a="";var d=f(a);isXMLType(a)&&(d=d.deepCopy());return d};XML=function(a,d,b,e){void 0===a&&(a="text");void 0===d&&(d="");void 0===b&&(b="");this.init(a,d,b,e)};var z=new Class("XML",ASXML,
ApplicationDomain.passthroughCallable(ASXML));z.flags=15;z.prettyIndent=2;z.extend(y);var D=XML.prototype=ASXML.prototype;D.init=function(a,d,b,e){this.name=new QName(new Multiname([new ASNamespace(e,d)],b));this.kind=a;this.parent=null;this.inScopeNamespaces=[];switch(a){case "element":this.attributes=[];this.children=[];break;case "attribute":case "text":this.value=""}return this};D.length=function(){return!this.children?0:this.children.length};D.canHandleProperties=!0;D.deepCopy=function(){return new ASXML(e(this))};
D.resolveValue=function(){return this};D.hasSimpleContent=function(){if("comment"===this.kind||"processing-instruction"===this.kind)return!1;var a=!0;this.children&&this.children.forEach(function(d){"element"===d.kind&&(a=!1)});return a};D.asGetEnumerableKeys=function(){if(D===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(d){a.push(d.name)});return a};D.setProperty=function(a,e){var f,g,l;if(a===a>>>0)throw"TypeError in XML.prototype.setProperty(): invalid property name "+
a;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind))if(g=!e||!e.isXML&&!e.isXMLList||"text"===e.kind||"attribute"===e.kind?d(e):e.deepCopy(),l=new QName(a),l.isAttr)this.attributes&&(this.attributes.forEach(function(a,d,b){a.name===l.localName&&delete b[d]}),f=new XML("attribute",l.uri,l.localName),f.value=e,f.parent=this,this.attributes.push(f));else if(isXMLName(l)||"*"===l.localName){f=void 0;for(var u=!isXMLType(g)&&"*"!==l.localName,
p=this.length()-1;0<=p;p--)if((l.isAny||"element"===this.children[p].kind&&this.children[p].name.localName===l.localName)&&(null===l.uri||"element"===this.children[p].kind&&this.children[p].name.uri===l.uri))void 0!==f&&this.deleteByIndex(String(f)),f=p;if(void 0===f&&(f=this.length(),u)){var r=null===l.uri?new QName(m(b),l):new QName(l),p=new XML("element",r.uri,r.localName,r.prefix);p.parent=this;r=r.getNamespace();this.replace(String(f),p);p.addInScopeNamespace(r)}u?(this.children[f].children=
[],g=d(g),""!==g&&this.children[f].replace("0",g)):this.replace(String(f),g)}};D.asGetProperty=p;D.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;D.asSetProperty=r;D.asHasProperty=u;D.asCallProperty=v;D.getProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return this[Multiname.getQualifiedName(b)]}if(!Multiname.isQName(a)&&isNumeric(a))return 0===Number(0)?this:null;var e=new QName(a),f=new XMLList(this,e),b=w(e.mn),
g=b&4,l=b&8;b&1?this.attributes&&this.attributes.forEach(function(a){(g||a.name.localName===e.localName)&&(l||a.name.uri===e.uri)&&f.append(a)}):this.children.forEach(function(a){(g||"element"===a.kind&&a.name.localName===e.localName)&&(l||"element"===a.kind&&a.name.uri===e.uri)&&f.append(a)});return f};D.hasProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(b)]}if(!Multiname.isQName(a)&&isNumeric(a))return 0===
Number(0)?!0:!1;var e=new QName(a),b=w(e.mn),f=b&4,g=b&8;if(b&1)return this.attributes.some(function(a){if((f||a.name.localName===e.localName)&&(g||a.name.uri===e.uri))return!0});if(this.children.some(function(a){if((f||"element"===a.kind&&a.name.localName===e.localName)&&(g||"element"===a.kind&&a.name.uri===e.uri))return!0}))return!0;b=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(b)]};D.delete=function(){notImplemented("XML.[[Delete]]")};
D.deleteByIndex=function(a){var d=a>>>0;if(String(d)!==String(a))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+a;if(a<this.length()&&this.children[a]){this.children[a].parent=null;delete this.children[a];for(q=d+1;q<this.length();q++)this.children[q-1]=this.children[q];this.children.length-=1}};D.isXML=!0;D.insert=function(a,d){var b,e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){b=a>>>0;if(String(a)!==String(b))throw"TypeError in XML.prototype.insert(): invalid property name "+
a;if("element"===this.kind)for(e=this;e;){if(e===d)throw"Error in XML.prototype.insert()";e=e.parent}if(this.isXMLList){if(e=this.length(),0===e)return}else e=1;for(var f=this.length()-1;f>=b;f--)this[f+e]=this[f];if(this.isXMLList){e=d.length();for(f=0;f<e;f++)d.children[f].parent=this,this[b+f]=d[f]}else d.parent=this,this.children[b]=d}};D.replace=function(a,b){var e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){e=a>>>0;if(String(a)!==
String(e))throw"TypeError in XML.prototype.replace(): invalid name "+a;e>=this.length()&&(a=String(this.length()));if("element"===b.kind)for(e=this;e;){if(e===b)throw"Error in XML.prototype.replace()";e=e.parent}"element"===b.kind||"text"===b.kind||"comment"===b.kind||"processing-instruction"===b.kind?(b.parent=this,this[a]&&(this.children[a].parent=null),this.children[a]=b):this.isXMLList?(this.deleteByIndex(a),this.insert(a,b)):(e=d(b),t=new XML,t.parent=this,t.value=e,this[a]&&(this.children[a].parent=
null),this.children[a]=t)}};D.addInScopeNamespace=function(a){var d;d=this;if(!("text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind||"attribute"===d.kind)&&void 0!==a.prefix&&!(""===a.prefix&&""===d.name.uri)){var b=null;d.inScopeNamespaces.forEach(function(d){d.prefix===a.prefix&&(b=d)});null!==b&&b.uri!==a.uri&&d.inScopeNamespaces.forEach(function(e,f){e.prefix===b.prefix&&(d.inScopeNamespaces[f]=a)});d.name.prefix===a.prefix&&(d.name.prefix=void 0);d.attributes.forEach(function(d){d.name.prefix===
a.name.prefix&&(d.name.prefix=void 0)})}};D.descendants=function(a){a=new QName(a);var d=new XMLList;if("element"!==this.kind)return d;a.isAttr?this.attributes.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&d.append(b)}):this.children.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&d.append(b)});this.children.forEach(function(b){d.append(b.descendants(a))});return d};D.comments=function(){var a=new XMLList(this,null);this.children.forEach(function(d){"comment"===d.kind&&
a.append(d)});return a};D.text=function(){var a=new XMLList(this,null);this.children.forEach(function(d){"text"===d.kind&&a.append(d)});return a};z.native={"static":{ignoreComments:{get:function(){return getBitFlags(z.flags,1)},set:function(a){z.flags=setBitFlags(z.flags,1,a)}},ignoreProcessingInstructions:{get:function(){return getBitFlags(z.flags,2)},set:function(a){z.flags=setBitFlags(z.flags,2,a)}},ignoreWhitespace:{get:function(){return getBitFlags(z.flags,4)},set:function(a){z.flags=setBitFlags(z.flags,
4,a)}},prettyPrinting:{get:function(){return getBitFlags(z.flags,8)},set:function(a){z.flags=setBitFlags(z.flags,8,a)}},prettyIndent:{get:function(){return z.prettyIndent},set:function(a){z.prettyIndent=a}}},instance:{toString:function(){return d(this)},hasOwnProperty:function(a){somewhatImplemented("XML.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XML.propertyIsEnumerable")},addNamespace:function(){notImplemented("XML.addNamespace")},appendChild:function(a){var d=
this.getProperty("*");d.setProperty(d.length(),a);return this},attribute:function(a){return this.getProperty(l(a))},attributes:function(){return this.getProperty(l("*"))},child:function(a){return this.getProperty(a)},childIndex:function(){notImplemented("XML.childIndex")},children:function(){var a=new XMLList;Array.prototype.push.apply(a.children,this.children);return a},comments:function(){return this.comments()},contains:function(){notImplemented("XML.contains")},copy:function(){return this.deepCopy()},
descendants:function(a){void 0===a&&(a="*");return this.descendants(a)},elements:function(a){var d=!1;void 0===a&&(a="*",d=!0);a=new QName(a);var b=new XMLList(this.parent,a);this.children.forEach(function(e){"element"===e.kind&&((d||e.name.localName===a.localName)&&(null===a.uri||"element"===e.kind&&e.name.uri===a.uri))&&b.append(e)});return b},hasComplexContent:function(){notImplemented("XML.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},inScopeNamespaces:function(){notImplemented("XML.inScopeNamespaces")},
insertChildAfter:function(){notImplemented("XML.insertChildAfter")},insertChildBefore:function(){notImplemented("XML.insertChildBefore")},localName:function(){return this.name.localName},name:function(){return this.name},_namespace:function(){somewhatImplemented("XML._namespace()");return this.name.uri},namespaceDeclarations:function(){return new XMLList},nodeKind:function(){return this.kind},normalize:function(){notImplemented("XML.normalize")},parent:function(){notImplemented("XML.parent")},processingInstructions:function(){notImplemented("XML.processingInstructions")},
prependChild:function(){notImplemented("XML.prependChild")},removeNamespace:function(){notImplemented("XML.removeNamespace")},replace:function(a,d){var b,e;if("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)return this;b=isXMLType(d)?d.deepCopy():d.toString();if(String(a)===String(a>>>0))return this.replace(a,b),this;n=new QName(a);e=void 0;for(k=this.length()-1;0<=k;k--){var f=this.children[k];if(n.isAny||"element"===f.kind&&f.name.localName===
n.localName&&(null===n.uri||"element"===f.kind&&f.name.uri===n.uri))void 0!==e&&this.deleteByIndex(String(e)),e=k}void 0!==e&&this.replace(e.toString(),b);return this},setChildren:function(){notImplemented("XML.setChildren")},setLocalName:function(){notImplemented("XML.setLocalName")},setName:function(){notImplemented("XML.setName")},setNamespace:function(){notImplemented("XML.setNamespace")},text:function(){return this.text()},toXMLString:function(){return e(this)},notification:function(){notImplemented("XML.notification")},
setNotification:function(){notImplemented("XML.setNotification")}}};return z};XMLListClass=function(a,b,m,w){ASXMLList=function(a){if(!(this instanceof ASXMLList)){if(null===a||void 0===a)a="";return g(a)}if(null===a||void 0===a)a="";if(a.isXMLList){var d=new XMLList;d.append(a);a=d}else a=g(a);return a};XMLList=function(a,d){this.targetObject=a?a:null;this.targetProperty=d?d:null;this.children=[]};a=new Class("XMLList",ASXMLList,ApplicationDomain.passthroughCallable(ASXMLList));a.extend(w);var y=
XMLList.prototype=ASXMLList.prototype;y.canHandleProperties=!0;y.hasSimpleContent=function(){if(0===this.length())return!0;if(1===this.length())return f(this).hasSimpleContent();var a=!0;this.children.forEach(function(d){"element"===d.kind&&(a=!1)});return a};y.asGetProperty=p;y.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;y.asSetProperty=r;y.asHasProperty=u;y.asCallProperty=v;y.setProperty=function(a,b){var e,f,g;e=this;f=a>>>0;if(String(a)===String(f)){g=this.targetObject;var m=
this.targetProperty;if(null!==g){if(g=g.resolveValue(),null===g)return}else g=null;if(f>=e.length()){if(g&&g.isXMLList){if(1!==g.length)return;g=g.children[0]}if(g&&"element"!==g.kind)return;var u=new XML;u.parent=g;u.name=e.targetProperty;if(null===m||"*"===m.localName)u.name=null,u.kind="text";else if(m.isAttr){if(0<g.getProperty(u.name).length())return;g.kind="attribute"}else u.kind="element";f=e.length();if("attribute"!==u.kind){if(null!==g){if(0<f)for(m=0;m<g.length()-1&&g.children[m]!==e.children[f-
1];)m++;else m=g.length()-1;g.insert(String(m+1),u)}b.isXML?u.name=b.name:b.isXMLList&&(u.name=b.targetProperty)}e.append(u)}if(!b.isXML&&!b.isXMLList||"text"===b.kind||"attribute"===b.kind)b=d(b);if("attribute"===e.children[f].kind)g=l(e.children[f].name),e.children[f].parent.setProperty(g,b),g=e.children[f].parent.getProperty(g),e.children[f]=g.children[0];else if(b.isXMLList){var p=b.deepCopy(),r=e.children[f].parent;if(null!==r){var s;r.children.some(function(a,d){if(a==e.children[f])return s=
d,!0});r.replace(s,p);p.children.forEach(function(a,d){p.children[d]=r.children[s>>>0+d]})}if(0===p.length())for(m=e+1;m<e.length()-1;m++)e.children[String(m-1)]=e.children[m];else for(m=e.length()-1;m>=f+1;m--)e.children[String(m+p.length()-1)]=e.children[m];for(m=0;m<p.length();m++)e.children[f+m]=p.children[m]}else b.isXML||"text"===(k=e.children[f].kind)||"comment"===k||"processing-instruction"===k?(r=e.children[f].parent,null!==r&&(r.children.some(function(a,d){if(a==e.children[f])return s=d,
!0}),r.replace(s,b),b=r.children[s]),"string"===typeof b?(g=new XML("text"),g.parent=e,g.value=b,e.children[f]=g):e.children[f]=b):e.children[f].setProperty("*",b)}else if(1>=e.length()){if(0===e.length()){g=e.resolveValue();if(null===g||1!==g.length())return;e.append(g)}e.children[0].setProperty(a,b)}};y.getProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return this[Multiname.getQualifiedName(b)]}if(String(a)===String(a>>>0))return this.children[a];
var b=new QName(a),e=new XMLList(this,b);this.children.forEach(function(d){"element"===d.kind&&(d=d.getProperty(a),0<d.length()&&e.append(d))});return e};y.hasProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:this.resolveMultinameProperty(a.namespaces,a.name,a.flags);return!!this[Multiname.getQualifiedName(b)]}if(String(a)===String(a>>>0))return!!this.children[a];new QName(a);return this.children.some(function(d){if(0<d.getProperty(a).length())return!0})};y.delete=function(){};y.append=function(a){if(a.isXMLList){if(this.targetObject=
a.targetObject,this.targetProperty=a.targetProperty,0!==a.length())for(var d=0;d<a.length();d++)this.children.push(a.children[d])}else a.isXML&&this.children.push(a)};y.length=function(){return this.children.length};y.resolve=function(){var a=this.targetObject.resolveValue();if(null===a)return null;var d=this.targetObject.getProperty(this.targetProperty);if(0===a.length)return notImplemented("XMLList.resolve"),a.setProperty(this.targetProperty,""),d=a.getProperty(this.targetProperty)};y.deepCopy=
function(){var a=new XMLList;this.children.forEach(function(d,b){a.children[b]=d.deepCopy()});return a};y.descendants=function(a){var d=new XMLList(null);this.children.forEach(function(b){"element"===b.kind&&d.append(b.descendants(a))});return d};y.resolveValue=function(){if(0<this.length())return this;var a=this.name,d=this.targetObject,b=this.targetProperty;if(null===d||null===b||a.isAttr||a.isAny)return null;a=d.resolveValue();if(null===a)return null;d=a.getProperty(b);if(0===d.length()){if(a.isXMLList&&
1<a.length())return null;a.setProperty(b,"");d=a.getProperty(b)}return d};y.asGetEnumerableKeys=function(){if(y===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(d,b){a.push(b)});return a};a.native={instance:{init:function(){}}};y.isXMLList=!0;a.native={"static":{},instance:{toString:function(){return d(this)},hasOwnProperty:function(a){somewhatImplemented("XMLList.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XMLList.propertyIsEnumerable")},
attribute:function(a){return this.getProperty(l(a))},attributes:function(){return this.getProperty(l("*"))},child:function(){notImplemented("XMLList.child")},children:function(){for(var a=new XMLList,d=0;d<this.children.length;d++)Array.prototype.push.apply(a.children,this.children[d].children);return a},comments:function(){var a=new XMLList(this,null);this.children.forEach(function(d){"element"===d.kind&&a.append(d.comments())});return a},contains:function(a){for(var d=0;d<this.children.length;d++)if(this.children[d]===
a)return!0;return!1},copy:function(){return this.deepCopy()},descendants:function(a){return this.descendants(void 0===a?"*":a)},elements:function(a){void 0===a&&(a="*");a=new QName(a);var d=new XMLList(this,a);this.children.forEach(function(a){"element"===a.kind&&d.append(a.comments())});return d},hasComplexContent:function(){notImplemented("XMLList.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},length:function(){return this.children.length},name:function(){return f(this).name},
normalize:function(){notImplemented("XMLList.normalize")},parent:function(){notImplemented("XMLList.parent")},processingInstructions:function(){notImplemented("XMLList.processingInstructions")},text:function(){var a=new XMLList(this,null);this.children.forEach(function(d){("text"===d.kind||"element"===d.kind)&&a.append(d.text())});return a},toXMLString:function(){return e(this)},addNamespace:function(){notImplemented("XMLList.addNamespace")},appendChild:function(a){f(this).appendChild(a);return this},
childIndex:function(){notImplemented("XMLList.childIndex")},inScopeNamespaces:function(){notImplemented("XMLList.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XMLList.insertChildAfter")},insertChildBefore:function(){notImplemented("XMLList.insertChildBefore")},nodeKind:function(){return f(this).kind},_namespace:function(){notImplemented("XMLList._namespace")},localName:function(){notImplemented("XMLList.localName")},namespaceDeclarations:function(){somewhatImplemented("XMLList.prototype.namespaceDeclarations()");
return new XMLList},prependChild:function(){notImplemented("XMLList.prependChild")},removeNamespace:function(){notImplemented("XMLList.removeNamespace")},replace:function(a,d){f(this).replace(a,d);return this},setChildren:function(){notImplemented("XMLList.setChildren")},setLocalName:function(){notImplemented("XMLList.setLocalName")},setName:function(){notImplemented("XMLList.setName")},setNamespace:function(){notImplemented("XMLList.setNamespace")}}};return a};QNameClass=function(a,b,e,f){QName=
function D(a,e,f){if(!(this instanceof D))return void 0===e&&a instanceof D?a:new D(a,e);void 0===e&&(e=a,a=void 0);if("string"===typeof a||a instanceof D)a=new ASNamespace(a);e instanceof D?a=void 0===a?e.mn:new Multiname([a],e.mn.getName()):e instanceof Multiname?a=void 0===a?e.isQName()||e.isAnyName()||e.isAnyNamespace()?e:new Multiname([m(b)],e.getName(),e.flags):new Multiname([a],e.getName(),e.flags):"*"===e?a=new Multiname([],null,f?Multiname.ATTRIBUTE:0):"@*"===e?a=new Multiname([],null,Multiname.ATTRIBUTE):
(a=void 0===a?m(b):a,a=void 0===e?new Multiname([a],""):new Multiname([a],d(e),f?Multiname.ATTRIBUTE:0));this.mn=a;this.isAny=a.isAnyName();this.isAnyNamespace=a.isAnyNamespace();this.isAttr=a.isAttribute()};a=new Class("QName",QName,ApplicationDomain.passthroughCallable(QName));a.extend(f);QNp=QName.prototype;defineNonEnumerableGetter(QNp,"localName",function(){this._localName||(this._localName=this.isAny?"*":this.mn.getName());return this._localName});defineNonEnumerableGetter(QNp,"uri",function(){if(!this._uri){var a=
this.mn.namespaces[0];this._uri=a&&a.uri?a.uri:this.isAny||this.isAnyNamespace?null:""}return this._uri});defineNonEnumerableGetter(QNp,"prefix",function(){return this.mn.namespaces[0].prefix});defineNonEnumerableSetter(QNp,"prefix",function(a){this.mn.namespaces[0].prefix=a});QNp.getNamespace=function(a){if(null===this.uri)throw"TypeError in QName.prototype.getNamespace()";a||(a=[]);for(var d,b=0;b<a.length;b++)this.uri===a[b].uri&&(d=a[b]);d||(d=ASNamespace.createNamespace(this.uri));return d};
a.native={"static":{},instance:{localName:{get:function(){return this.localName}},uri:{get:function(){return this.uri}}}};return a}})();
var AMFUtils=function(){function a(a,d){if(65535<d.length)throw"AMF short string exceeded";if(d.length){var b=utf8decode(d);a.writeByte(b.length>>8&255);a.writeByte(b.length&255);for(var e=0;e<b.length;e++)a.writeByte(b[e])}else a.writeByte(0),a.writeByte(0)}function b(a){var d=a.readByte()<<8|a.readByte();if(!d)return"";for(var b=new Uint8Array(d),e=0;e<d;e++)b[e]=a.readByte();return utf8encode(b)}function d(a,d){var b=new ArrayBuffer(8),e=new DataView(b);e.setFloat64(0,d,!1);for(var f=0;f<b.byteLength;f++)a.writeByte(e.getUint8(f))}
function e(a){for(var d=new ArrayBuffer(8),b=new DataView(d),e=0;e<d.byteLength;e++)b.setUint8(e,a.readByte());return b.getFloat64(0,!1)}function f(a){var d=a.readByte();if(0===(d&128))return d;var b=a.readByte();if(0===(b&128))return(d&127)<<7|b;var e=a.readByte();if(0===(e&128))return(d&127)<<14|(b&127)<<7|e;a=a.readByte();return(d&127)<<22|(b&127)<<15|(e&127)<<8|a}function g(a,d){if(0===(d&4294967168))a.writeByte(d&127);else if(0===(d&4294950912))a.writeByte(128|d>>7&127),a.writeByte(d&127);else if(0===
(d&4292870144))a.writeByte(128|d>>14&127),a.writeByte(128|d>>7&127),a.writeByte(d&127);else if(0===(d&3221225472))a.writeByte(128|d>>22&127),a.writeByte(128|d>>15&127),a.writeByte(128|d>>8&127),a.writeByte(d&255);else throw"AMF3 U29 range";}function l(a,d){var b=f(a);if(1===b)return"";var e=d.stringsCache||(d.stringsCache=[]);if(0===(b&1))return e[b>>1];for(var b=b>>1,g=new Uint8Array(b),l=0;l<b;l++)g[l]=a.readByte();b=utf8encode(g);e.push(b);return b}function m(a,d,b){if(""===d)a.writeByte(1);else{b=
b.stringsCache||(b.stringsCache=[]);var e=b.indexOf(d);if(0<=e)g(a,e<<1);else{b.push(d);d=utf8decode(d);g(a,1|d.length<<1);for(b=0;b<d.length;b++)a.writeByte(d[b])}}}function p(a,d){var b=a.readByte();switch(b){case 1:return null;case 0:break;case 2:return!1;case 3:return!0;case 4:return f(a);case 5:return e(a);case 6:return l(a,d);case 8:return new Date(e(a));case 10:var g=f(a);if(0===(g&1))return d.objectsCache[g>>1];if(0!==(g&4))throw"AMF3 Traits-Ext is not supported";var m;if(0===(g&2))b=d.traitsCache[g>>
2],m=b.class;else{var b={},u=l(a,d);m=(b.className=u)&&v.names[u];b.class=m;b.isDynamic=0!==(g&8);b.members=[];for(var r=m&&m.instanceBindings.slots,u=0,g=g>>4;u<g;u++){for(var H=l(a,d),D=null,g=1;r&&g<r.length;g++)if(r[g].name.name===H){D=r[g];break}b.members.push(D?Multiname.getQualifiedName(D.name):Multiname.getPublicQualifiedName(H))}(d.traitsCache||(d.traitsCache=[])).push(b)}m=m?m.createInstance():{};(d.objectsCache||(d.objectsCache=[])).push(m);for(u=0;u<b.members.length;u++)r=p(a,d),m[b.members[u]]=
r;if(b.isDynamic)for(;;){u=l(a,d);if(!u.length)break;r=p(a,d);m.asSetPublicProperty(u,r)}return m;case 9:g=f(a);if(0===(g&1))return d.objectsCache[g>>1];m=[];(d.objectsCache||(d.objectsCache=[])).push(m);for(b=g>>1;;){u=l(a,d);if(!u.length)break;r=p(a,d);m.asSetPublicProperty(u,r)}for(u=0;u<b;u++)r=p(a,d),m.asSetPublicProperty(u,r);return m;default:throw"AMF3 Unknown marker "+b;}}function r(a,d,b){b=b.objectsCache||(b.objectsCache=[]);var e=b.indexOf(d);if(0>e)return b.push(d),!1;g(a,e<<1);return!0}
function u(a,b,e){switch(typeof b){case "boolean":a.writeByte(b?3:2);break;case "number":b===(b|0)?(a.writeByte(4),g(a,b)):(a.writeByte(5),d(a,b));break;case "undefined":a.writeByte(0);break;case "string":a.writeByte(6);m(a,b,e);break;case "object":if(null===b)a.writeByte(1);else if(Array.isArray(b)){a.writeByte(9);if(r(a,b,e))break;for(var f=0;f in b;)++f;g(a,f<<1|1);forEachPublicProperty(b,function(d,b){if(!isNumeric(d)||!(0<=d&&d<f))m(a,d,e),u(a,b,e)});m(a,"",e);for(var l=0;l<f;l++)u(a,b[l],e)}else if(b instanceof
Date){a.writeByte(8);if(r(a,b,e))break;g(a,1);d(a,b.valueOf())}else{a.writeByte(10);if(r(a,b,e))break;var l=!0,p=b.class;if(p){var l=!p.classInfo.instanceInfo.isSealed(),E=v.classes.get(p)||"",H,D=e.traitsCache||(e.traitsCache=[]),G=e.traitsInfos||(e.traitsInfos=[]),F=D.indexOf(p);if(0>F){var Q=p.instanceBindings.slots;H=[];for(var F=[],T=1;T<Q.length;T++){var S=Q[T];S.name.getNamespace().isPublic()&&(H.push(Multiname.getQualifiedName(S.name)),F.push(S.name.name))}D.push(p);G.push(H);p=F.length;g(a,
(l?11:3)+(p<<4));m(a,E,e);for(T=0;T<p;T++)m(a,F[T],e)}else H=G[F],p=H.length,g(a,1+(F<<2));for(T=0;T<p;T++)u(a,b[H[T]],e)}else g(a,11),m(a,"",e);l&&(forEachPublicProperty(b,function(d,b){m(a,d,e);u(a,b,e)}),m(a,"",e))}}}var v={classes:new WeakMap,names:Object.create(null)};return{encodings:[{write:function(b,e){switch(typeof e){case "boolean":b.writeByte(1);b.writeByte(e?1:0);break;case "number":b.writeByte(0);d(b,e);break;case "undefined":b.writeByte(6);break;case "string":b.writeByte(2);a(b,e);
break;case "object":null===e?b.writeByte(5):(Array.isArray(e)?(b.writeByte(8),b.writeByte(e.length>>>24&255),b.writeByte(e.length>>16&255),b.writeByte(e.length>>8&255),b.writeByte(e.length&255),forEachPublicProperty(e,function(d,e){a(b,d);this.write(b,e)},this)):(b.writeByte(3),forEachPublicProperty(e,function(d,e){a(b,d);this.write(b,e)},this)),b.writeByte(0),b.writeByte(0),b.writeByte(9))}},read:function(a){var d=a.readByte();switch(d){case 0:return e(a);case 1:return!!a.readByte();case 2:return b(a);
case 3:for(d={};;){var f=b(a);if(!f.length)break;var g=this.read(a);d.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return d;case 5:return null;case 6:break;case 8:d=[];for(d.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();;){f=b(a);if(!f.length)break;g=this.read(a);d.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return d;case 10:d=[];d.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();
for(f=0;f<d.length;f++)d[f]=this.read(a);return d;case 17:return p(a,{});default:throw"AMF0 Unknown marker "+d;}}},null,null,{write:function(a,d){u(a,d,{})},read:function(a){return p(a,{})}}],aliasesCache:v}}();function ProxyClass(a,b,d,e){function f(){somewhatImplemented("Proxy")}a=new Class("Proxy",f,ApplicationDomain.coerceCallable(f));a.extendBuiltin(e);return a}var proxyTrapQns={getProperty:null,setProperty:null,hasProperty:null,callProperty:null},name;
for(name in proxyTrapQns)proxyTrapQns[name]="m"+Multiname.getQualifiedName(new Multiname([ASNamespace.PROXY],name));function isProxyObject(a){return a[VM_IS_PROXY]}function nameFromQualifiedName(a){if(isNumeric(a))return a;a=Multiname.fromQualifiedName(a);return void 0===a?void 0:a.name}function hasNonProxyingCaller(){for(var a=arguments.callee,b=0;5>b&&a;b++){if(a===nonProxyingHasProperty)return!0;a=a.caller}return!1}
function installProxyClassWrapper(a){var b=a.instanceConstructor;a.instanceConstructor=function(){var a=Object.create(b.prototype),e=Proxy.create({get:function(b,e){if(e===VM_IS_PROXY)return!0;if(e===VM_CALL_PROXY)return function(e,g,l){g=(g=Multiname.isQName(e)?e:a.resolveMultinameProperty(e.namespaces,e.name,e.flags))?Multiname.getQualifiedName(g):Multiname.getPublicQualifiedName(e.name);if(!nameInTraits(a,g))return a[proxyTrapQns.callProperty](e.name,l);if(a.asOpenMethods&&a.asOpenMethods[g])return a.asOpenMethods[g].apply(b,
l)};if(!hasNonProxyingCaller()){var l=nameFromQualifiedName(e);if(void 0!==l&&!nameInTraits(a,e))return a[proxyTrapQns.getProperty](l)}return a.asOpenMethods&&a.asOpenMethods[e]?bindSafely(a.asOpenMethods[e],b):a[e]},set:function(b,e,l){if(!hasNonProxyingCaller()&&(b=nameFromQualifiedName(e),void 0!==b&&!nameInTraits(a,e))){a[proxyTrapQns.setProperty](b,l);return}a[e]=l},has:function(b){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(b);if(void 0!==e&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](e)}return b in
a},hasOwn:function(b){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(b);if(void 0!==e&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](e)}return!!Object.getOwnPropertyDescriptor(a,b)},enumerate:function(){notImplemented("enumerate")},keys:function(){notImplemented("keys")}},b.prototype);b.apply(e,sliceArguments(arguments,0));return e}}
function DictionaryClass(a,b,d,e){function f(a){this.weakKeys=a;this.map=new WeakMap;a||(this.keys=[]);this.primitiveMap=createEmptyObject()}function g(a){if("string"===typeof a||"number"===typeof a)return a}a=new Class("Dictionary",f,ApplicationDomain.passthroughCallable(f));a.extendNative(e,f);var l=f.prototype;defineNonEnumerableProperty(l,"asGetProperty",function(a,d){var b=g(d);return void 0!==b?this.primitiveMap[b]:this.map.get(Object(d))});defineNonEnumerableProperty(l,"asGetResolvedStringProperty",
asGetResolvedStringPropertyFallback);defineNonEnumerableProperty(l,"asSetProperty",function(a,d,b,e){a=g(d);void 0!==a?this.primitiveMap[a]=e:(this.map.set(Object(d),e),!this.weakKeys&&0>this.keys.indexOf(d)&&this.keys.push(d))});defineNonEnumerableProperty(l,"asCallProperty",function(){notImplemented("asCallProperty")});defineNonEnumerableProperty(l,"asHasProperty",function(a,d){var b=g(d);return void 0!==b?b in this.primitiveMap:this.map.has(Object(d))});defineNonEnumerableProperty(l,"asDeleteProperty",
function(a,d){var b=g(d);void 0!==b&&delete this.primitiveMap[b];this.map.delete(Object(d));var e;!this.weakKeys&&0<=(e=this.keys.indexOf(d))&&this.keys.splice(e,1);return!0});defineNonEnumerableProperty(l,"asGetEnumerableKeys",function(){if(l===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[],d;for(d in this.primitiveMap)a.push(d);return this.weakKeys?a:a.concat(this.keys)});a.native={instance:{init:function(){}}};return a}
function debugBreak(a){debugger;print("\u001b[91mdebugBreak: "+a+"\u001b[0m")}
var NativeASNamespace,natives=function(){function a(a,d){var b=bindSafely(d,a);defineNonEnumerableProperty(this,"call",b.call.bind(b));defineNonEnumerableProperty(this,"apply",b.apply.bind(b))}function b(a,d){var b;if(a){var e="Vector$"+a.classInfo.instanceInfo.name.name;switch(e){case "Vector$int":b=Int32Vector;break;case "Vector$uint":b=Uint32Vector;break;case "Vector$Number":b=Float64Vector;break;case "Vector$Object":b=GenericVector;break;default:unexpected()}}else b=GenericVector.applyType(null);
var f=b.prototype,g=new Class(e,b,r(b.callable));b===GenericVector&&(g.applyType=function(){return g});g.extendWrapper(d,b);g.native={instance:{fixed:{get:function(){return this._fixed},set:function(a){this._fixed=a}},length:{get:function(){return this.length},set:function(a){this.length=a}},push:f.push,pop:f.pop,shift:f.shift,unshift:f.unshift,_reverse:f.reverse,_filter:f.filter,_map:f.map,newThisType:function(){return new g.instanceConstructor},_spliceHelper:function(a,d,b,e,f){return this._spliceHelper(a,
d,b,e,f)}},"static":{_some:function(a,d,b){return a.some(d,b)},_every:function(a,d,b){return a.every(d,b)},_forEach:function(a,d,b){return a.forEach(d,b)},_sort:arraySort}};g.vectorType=a;g.coerce=function(a){return a};g.isInstanceOf=function(){return!0};g.isInstance=function(a){return null===a||"object"!==typeof a?!1:!this.instanceConstructor.vectorType&&a.class.vectorType?!0:this.instanceConstructor.prototype.isPrototypeOf(a)};return g}function d(a){return a|0}function e(a){return Object(a|0)}function f(a){return a>>>
0}function g(a){return Object(a>>>0)}function l(a){var d={__glue__:{script:{instance:{message:"public message",name:"public name"}},"native":{instance:{getStackTrace:function(){somewhatImplemented("Error.getStackTrace()");return AVM2.getStackTrace()}},"static":{getErrorMessage:getErrorMessage}}}};return function(b,e,f,g){b=new Class(a,f);b.extend(g);"Error"===a&&(b.link(d),b.linkNatives(d));return b}}function m(a,d,b,e){a=new Class("RegExp",XRegExp,r(XRegExp));a.extendBuiltin(e);m.exec=function(){var a=
this.exec.apply(this,arguments);if(!a)return a;for(var d=Object.keys(a),b=0;b<d.length;b++){var e=d[b];isNumeric(e)||void 0===a[e]&&(a[e]="")}publicizeProperties(a);return a};m.test=function(){return null!==this.exec.apply(this,arguments)};a.native={instance:{global:{get:function(){return this.global}},source:{get:function(){return this.source}},ignoreCase:{get:function(){return this.ignoreCase}},multiline:{get:function(){return this.multiline}},lastIndex:{get:function(){return this.lastIndex},set:function(a){this.lastIndex=
a}},dotall:{get:function(){return this.dotall}},extended:{get:function(){return this.extended}},exec:m.exec,test:m.test}};return a}function p(a){return function(){return a}}var r=ApplicationDomain.passthroughCallable;a.prototype={toString:function(){return"function Function() {}"}};return{print:p(print),notImplemented:p(notImplemented),debugBreak:p(debugBreak),bugzilla:p(function(a){switch(a){case 574600:return!0}return!1}),decodeURI:p(decodeURI),decodeURIComponent:p(decodeURIComponent),encodeURI:p(encodeURI),
encodeURIComponent:p(encodeURIComponent),isNaN:p(isNaN),isFinite:p(isFinite),parseInt:p(parseInt),parseFloat:p(parseFloat),escape:p(escape),unescape:p(unescape),isXMLName:p("undefined"!==typeof isXMLName?isXMLName:function(){notImplemented("Chrome doesn't support isXMLName.")}),Function:Function,String:String,Array:Array,Number:Number,Boolean:Boolean,Math:Math,Date:Date,RegExp:RegExp,Object:Object,ObjectClass:function(){var a=new Class("Object",Object,r(Object));a.native={instance:{isPrototypeOf:Object.prototype.isPrototypeOf,
hasOwnProperty:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.hasOwnProperty.call(this,a)?!0:Object.getPrototypeOf(this).hasOwnProperty(a)},propertyIsEnumerable:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.propertyIsEnumerable.call(this,a)}},"static":{_setPropertyIsEnumerable:function(a,d){d=Multiname.getPublicQualifiedName(d);var b=Object.getOwnPropertyDescriptor(a,d);b.enumerable=!1;Object.defineProperty(a,
d,b)}}};a.dynamicPrototype=a.traitsPrototype=Object.prototype;a.setDefaultProperties();a.defaultValue=null;a.coerce=function(a){return asCoerceObject(a)};a.isInstanceOf=function(a){return null===a?!1:!0};a.isInstance=function(a){return null===a||void 0===a?!1:!0};return a},Class:function(a,d,b,e){var f=Class;f.debugName="Class";f.prototype.extendBuiltin.call(f,e);f.coerce=function(a){return a};f.isInstanceOf=function(){return!0};f.isInstance=function(a){return a instanceof f.instanceConstructor};
return f},NamespaceClass:function(a,d,b,e){NativeASNamespace=function(a,d){void 0===d&&(d=a,a=void 0);var b,e;if(void 0===a)void 0===d?e=b="":"object"===typeof d?(b=d.prefix,d instanceof ASNamespace?e=d.uri:d instanceof QName&&(e=d.uri)):(e=d+"",b=""===e?"":void 0);else if(e="object"===typeof d&&d instanceof QName&&null!==d.uri?d.uri:d+"",""===e)if(void 0===a||""===a+"")b="";else throw"type error";else b=void 0===a||""===a?void 0:a+"";return ASNamespace.createNamespace(e,b)};a=new Class("Namespace",
NativeASNamespace,r(NativeASNamespace));a.extendNative(e,ASNamespace);e=ASNamespace.prototype;a.native={instance:{prefix:{get:e.getPrefix},uri:{get:e.getURI}}};return a},FunctionClass:function(a,d,b,e){a=new Class("Function",Function,r(Function));a.extendBuiltin(e);a.native={instance:{prototype:{get:function(){return this.prototype},set:function(a){this.prototype=a}},length:{get:function(){return this.hasOwnProperty(VM_LENGTH)?this.asLength:this.length}},call:Function.prototype.call,apply:Function.prototype.apply}};
a.coerce=function(a){return a};a.isInstanceOf=function(a){return"function"===typeof a};a.isInstance=function(a){return"function"===typeof a};return a},MethodClosureClass:function(d,b,e,f){d=new Class("MethodClosure",a);d.extendBuiltin(f);return d},BooleanClass:function(a,d,b,e){a=new Class("Boolean",Boolean,r(Boolean));a.extendBuiltin(e);a.native={instance:{toString:Boolean.prototype.toString,valueOf:Boolean.prototype.valueOf}};a.coerce=Boolean;a.isInstanceOf=function(a){return"boolean"===typeof a||
a instanceof Boolean};a.isInstance=function(a){return"boolean"===typeof a||a instanceof Boolean?!0:!1};return a},StringClass:function(a,d,b,e){a=new Class("String",String,r(String));a.extendBuiltin(e);var f=String.prototype;a.native={instance:{length:{get:function(){return this.length}},indexOf:f.indexOf,lastIndexOf:f.lastIndexOf,charAt:f.charAt,charCodeAt:f.charCodeAt,concat:f.concat,localeCompare:f.localeCompare,match:function(a){if(void 0===a||null===a)return null;if(a instanceof RegExp&&a.global){for(var d=
[],b;b=a.exec(this);)d.push(b[0]);return d}!(a instanceof RegExp)&&"string"!==typeof a&&(a=String(a));return this.match(a)},replace:f.replace,search:function(a){return void 0===a?-1:this.search(a)},slice:f.slice,split:f.split,substr:f.substr,substring:f.substring,toLowerCase:f.toLowerCase,toLocaleLowerCase:f.toLocaleLowerCase,toUpperCase:function(){var a=f.toUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toLocaleUpperCase:function(){var a=f.toLocaleUpperCase.apply(this);
return a=a.replace(/\u039C/g,String.fromCharCode(181))},toString:f.toString,valueOf:f.valueOf},"static":String};a.isInstance=function(a){return null!==a&&void 0!==a&&"string"===typeof a.valueOf()};a.coerce=function(a){return null===a||void 0===a?null:String(a)};a.isInstanceOf=function(a){return Object(a)instanceof String};a.isInstance=function(a){return Object(a)instanceof String};return a},NumberClass:function(a,d,b,e){a=new Class("Number",Number,r(Number));a.extendBuiltin(e);a.native={instance:Number.prototype};
a.defaultValue=Number(0);a.isInstance=function(a){return null!==a&&void 0!==a&&"number"===typeof a.valueOf()};a.coerce=Number;a.isInstanceOf=function(a){return Object(a)instanceof Number};a.isInstance=function(a){return Object(a)instanceof Number};return a},intClass:function(a,b,f,g){a=new Class("int",e,r(d));a.extendBuiltin(g);a.defaultValue=0;a.coerce=d;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return(a|0)===a};return a},uintClass:function(a,
d,b,e){a=new Class("uint",g,r(f));a.extend(e);a.defaultValue=0;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return a>>>0===a};a.coerce=f;return a},ArrayClass:ArrayClass,VectorClass:function(a,d,e,f){return b(void 0,f)},ObjectVectorClass:function(a,d,e,f){return b(a.getClass("Object"),f)},IntVectorClass:function(a,d,e,f){return b(a.getClass("int"),f)},UIntVectorClass:function(a,d,e,f){return b(a.getClass("uint"),f)},DoubleVectorClass:function(a,
d,e,f){return b(a.getClass("Number"),f)},ByteArrayClass:function(a,d,b,e){d=function(){ByteArray.call(this)};a=d.prototype=Object.create(ByteArray.prototype);d=new Class("ByteArray",d,r(d));d.extendBuiltin(e);a.asGetNumericProperty=function(a){return a>=this.length?void 0:this.uint8v[a]};a.asSetNumericProperty=function(a,d){var b=a+1;this.ensureCapacity(b);this.uint8v[a]=d;b>this.length&&(this.length=b)};a.readUTF=function(){return this.readUTFBytes(this.readShort())};a.readUTFBytes=function(a){var d=
this.position;d+a>this.length&&throwEOFError();this.position+=a;return utf8encode(new Int8Array(this.a,d,a))};a.writeUTF=function(a){a=utf8decode(a);this.writeShort(a.length);this.writeRawBytes(a)};a.writeUTFBytes=function(a){a=utf8decode(a);this.writeRawBytes(a)};a.toString=function(){return utf8encode(new Int8Array(this.a,0,this.length))};d.native={instance:{length:{get:function(){return this.length},set:function(a){a>this.a.byteLength&&this.ensureCapacity(a);this.length=a;this.position=clamp(this.position,
0,this.length)}},bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this.position},set:function(a){this.position=a}},endian:{get:function(){return this.le?"littleEndian":"bigEndian"},set:function(a){this.le="littleEndian"===a}},objectEncoding:{get:function(){return this.objectEncoding},set:function(a){this.objectEncoding=a}},writeBytes:a.writeBytes,writeBoolean:a.writeBoolean,writeByte:a.writeByte,writeShort:a.writeShort,writeInt:a.writeInt,writeUnsignedInt:a.writeUnsignedInt,
writeFloat:a.writeFloat,writeDouble:a.writeDouble,writeMultiByte:a.writeMultiByte,writeObject:function(a){return AMFUtils.encodings[this.objectEncoding].write(this,a)},writeUTF:a.writeUTF,writeUTFBytes:a.writeUTFBytes,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readUnsignedByte:a.readUnsignedByte,readShort:a.readShort,readUnsignedShort:a.readUnsignedShort,readInt:a.readInt,readUnsignedInt:a.readUnsignedInt,readFloat:a.readFloat,readDouble:a.readDouble,readMultiByte:a.readMultiByte,
readObject:function(){return AMFUtils.encodings[this.objectEncoding].read(this)},readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,toString:a.toString,clear:a.clear,_compress:a.compress,_uncompress:a.uncompress},"static":{defaultObjectEncoding:{get:function(){return ByteArray.DEFAULT_OBJECT_ENCODING},set:function(a){ByteArray.DEFAULT_OBJECT_ENCODING=a}}}};return d},ProxyClass:ProxyClass,ErrorClass:l("Error"),DefinitionErrorClass:l("DefinitionError"),EvalErrorClass:l("EvalError"),RangeErrorClass:l("RangeError"),
ReferenceErrorClass:l("ReferenceError"),SecurityErrorClass:l("SecurityError"),SyntaxErrorClass:l("SyntaxError"),TypeErrorClass:l("TypeError"),URIErrorClass:l("URIError"),VerifyErrorClass:l("VerifyError"),UninitializedErrorClass:l("UninitializedError"),ArgumentErrorClass:l("ArgumentError"),DateClass:function(a,d,b,e){a=new Class("Date",Date,r(Date));a.extendBuiltin(e);a.native={instance:Date.prototype,"static":Date};return a},MathClass:function(){var a=new Class("Math");a.native={"static":Math};return a},
RegExpClass:m,DictionaryClass:DictionaryClass,XMLClass:XMLClass,XMLListClass:XMLListClass,QNameClass:QNameClass,JSONClass:function(a,d,b,e){function f(a){if("object"!==typeof a)return a;for(var d=Object.keys(a),b=a instanceof Array?[]:{},e=0;e<d.length;e++)b.asSetPublicProperty(d[e],f(a[d[e]]));return b}function g(a){if("object"!==typeof a)return a;for(var d=Object.keys(a),b=a instanceof Array?[]:{},e=0;e<d.length;e++){var f=d[e],l=f;isNumeric(f)||(l=Multiname.getNameFromPublicQualifiedName(f));b[l]=
g(a[f])}return b}function l(){}a=new Class("JSON",l,r(l));a.extend(e);a.native={"static":{parseCore:function(a){return f(JSON.parse(a))},stringifySpecializedToString:function(a,d,b,e){return JSON.stringify(g(a),b,e)}}};return a},ShumwayClass:function(a,d,b,e){function f(){}a=new Class("Shumway",f,r(f));a.extend(e);a.native={"static":{info:function(a){console.info(a)},json:function(a){return JSON.stringify(a)},eval:function(a){return eval(a)},"debugger":function(){debugger}}};return a},CapabilitiesClass:function(a,
d,b,e){function f(){}a=new Class("Capabilities",f,r(f));a.extend(e);a.native={"static":{playerType:{get:function(){return"AVMPlus"}}}};return a},FileClass:function(a,d,b,e){function f(){}a=new Class("File",f,r(f));a.extend(e);a.native={"static":{exists:function(){notImplemented("File.exists");return!1},read:function(a){return snarf(a)},write:function(){notImplemented("File.write");return!0},readByteArray:function(a){var d=AVM2.currentDomain().getClass("flash.utils.ByteArray").createInstance();d.writeRawBytes(snarf(a,
"binary"));return d},writeByteArray:function(a,d){write("bin/"+a,d.getBytes());return!0}}};return a},DomainClass:function(a,d,b,e){a=new Class("File",b,r(b));a.extend(e);a.native={instance:{init:function(a){this.base=a;this.nativeObject=new ApplicationDomain(AVM2.instance,a?a.nativeObject:null)},loadBytes:function(a){this.nativeObject.executeAbc(new AbcFile(a.readRawBytes()))},getClass:function(a){return this.nativeObject.getClass(a)}},"static":{currentDomain:{get:function(){var a=Object.create(b.prototype);
a.nativeObject=AVM2.currentDomain();return a}}}};return a},SystemClass:function(a,d,b,e){a=new Class("System",b,r(b));a.extend(e);a.native={"static":{swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},getArgv:function(){return[]},getRunmode:function(){return"mixed"}}};return a},getQualifiedClassName:p(function(a){if(null===a)return"null";if(void 0===a)return"void";switch(typeof a){case "number":return(a|0)===a?"int":"Number";case "string":return"String";case "boolean":return"Boolean";
case "object":if(a instanceof Date)return"Date";var d;a instanceof Class?d=a:a.class?d=a.class:a.classInfo&&(d=a);if(d)return a=d.classInfo.instanceInfo.name,(d=a.namespaces[0].uri)?d+"::"+a.name:a.name}return notImplemented(a+" ("+typeof a+")")}),getQualifiedSuperclassName:p(function(a){switch(typeof a){case "number":case "string":case "boolean":return"Object";case "function":return"Function";case "object":if(a instanceof Date)return"Object";var d;a.class?d=a.class:a.classInfo&&(d=a);return d&&d.baseClass?
(a=d.baseClass.classInfo.instanceInfo.name,(d=a.namespaces[0].uri)?d+"::"+a.name:a.name):"Object"}return notImplemented(a+" (superOf "+typeof a+")")}),getDefinitionByName:p(function(a){a=String(a).replace("::",".");return AVM2.currentDomain().getClass(a)}),describeTypeJSON:p(function(a,d){function b(a){return Multiname.getPublicQualifiedName(a)}function e(a){var d=a.name;return(a=a.namespaces[0])&&a.uri?a.uri+"::"+d:d}function f(a){var d={};d[r]=a.name;d[F]=a.value.map(function(a){return a});return d}
var g=b("declaredBy"),l=b("metadata"),m=b("access"),p=b("uri"),r=b("name"),D=b("type"),G=b("returnType"),F=b("value");b("key");var Q=b("parameters"),T=b("optional"),S=a.classInfo?a:Object.getPrototypeOf(a).class;!0;var Y=S.classInfo,I={};I[r]=e(Y.instanceInfo.name);I[b("isDynamic")]=S===a?!0:!(Y.instanceInfo.flags&1);I[b("isStatic")]=S===a;I[b("isFinal")]=S===a?!0:!(Y.instanceInfo.flags&2);if(d&256){var J=b("traits"),O=function(a){!0;for(var d=0;a&&d<a.length;d++){var b=a[d];if(V[b.kind]&&(b.name.getNamespace().isPublic()||
b.name.uri)){var u=e(b.name);if($[u]){var v=$[u];v[m]="readwrite";2===b.kind&&(v[D]=e(b.methodInfo.returnType))}else{v={};if(L&&b.metadata){var w=v[l]=[],F;for(F in b.metadata)w.push(f(b.metadata[F]))}else v[l]=null;v[g]=ha;v[p]=void 0===b.name.uri?null:b.name.uri;v[r]=u;if(b.typeName||b.methodInfo&&b.methodInfo.returnType)switch(v[b.kind===TRAIT_Method?G:D]=e(0===b.kind?b.typeName:b.methodInfo.returnType),b.kind){case 0:v[m]="readwrite";ga.push(v);break;case 1:u=v[Q]=[];b=b.methodInfo.parameters;
for(w=0;w<b.length;w++){var I=b[w],J={};J[D]=I.type?e(I.type):"*";J[T]="value"in I;u.push(J)}Z.push(v);break;case 2:case 3:v[m]=2===b.kind?"read":"write",ba.push(v),$[u]=v}}}}},V=[d&8,d&32,d&16,d&16],M=d&2,L=d&64,P={},K=P[b("bases")]=M?[]:null;if(d&4){var R=P[b("interfaces")]=[];if(d&512)for(var U in S.implementedInterfaces)R.push(e(S.implementedInterfaces[U].name))}else P[b("interfaces")]=null;var ga=P[b("variables")]=d&8?[]:null,ba=P[b("accessors")]=d&16?[]:null,Z=P[b("methods")]=d&32?[]:null,$=
{};for(U=!1;S;){var ha=e(S.classInfo.instanceInfo.name);M&&U?K.push(ha):U=!0;d&512?O(S.classInfo.instanceInfo.traits):O(S.classInfo.traits);S=S.baseClass}I[J]=P}J=null;Y.metadata&&(J=Object.keys(Y.metadata).map(function(a){return f(Y.metadata[a])}));I[l]=J;return I}),original:jsGlobal[VM_NATIVE_BUILTIN_ORIGINALS]}}();function getNative(a){a=a.split(".");for(var b=natives,d=0,e=a.length;d<e;d++)b=b&&b[a[d]];!0;return b}var filter=new Option("f","filter","string","SpciMsmNtu","[S]ource, constant[p]ool, [c]lasses, [i]nstances, [M]etadata, [s]cripts, [m]ethods, multi[N]ames, S[t]atistics, [u]tf");
function traceArray(a,b,d,e){0!==d.length&&(a.enter(b+" {"),d.forEach(function(d){d.trace(a,e)}),a.leave("}"))}
AbcFile.prototype.trace=function(a){0<=filter.value.indexOf("p")&&this.constantPool.trace(a);0<=filter.value.indexOf("N")&&this.constantPool.traceMultinamesOnly(a);0<=filter.value.indexOf("c")&&traceArray(a,"classes",this.classes);0<=filter.value.indexOf("i")&&traceArray(a,"instances",this.instances);0<=filter.value.indexOf("M")&&traceArray(a,"metadata",this.metadata);0<=filter.value.indexOf("s")&&traceArray(a,"scripts",this.scripts);0<=filter.value.indexOf("m")&&traceArray(a,"methods",this.methods,
this);0<=filter.value.indexOf("S")&&traceSource(a,this);0<=filter.value.indexOf("t")&&traceStatistics(a,this);0<=filter.value.indexOf("u")&&print(JSON.stringify({strings:this.constantPool.strings,positionAfterUTFStrings:this.constantPool.positionAfterUTFStrings},null,2))};
ConstantPool.prototype.trace=function(a){a.enter("constantPool {");for(var b in this)"namespaces"===b?(a.enter("namespaces {"),this.namespaces.forEach(function(d,b){a.writeLn((""+b).padRight(" ",3)+(d?d.toString():"*"))}),a.leave("}")):this[b]instanceof Array&&(a.enter(b+" "+this[b].length+" {"),a.writeArray(this[b]),a.leave("}"));a.leave("}")};ConstantPool.prototype.traceMultinamesOnly=function(a){a.writeArray(this.multinames,null,!0)};
ClassInfo.prototype.trace=function(a){a.enter("class "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};MetaDataInfo.prototype.trace=function(a){a.enter(this+" {");this.value.forEach(function(b){a.writeLn((b.key?b.key+": ":"")+'"'+b.value+'"')});a.leave("}")};InstanceInfo.prototype.trace=function(a){a.enter("instance "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};ScriptInfo.prototype.trace=function(a){a.enter("script "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};
Trait.prototype.trace=function(a){if(this.metadata)for(var b in this.metadata)this.metadata.hasOwnProperty(b)&&this.metadata[b].trace(a);a.writeLn(this)};function traceAbc(a,b){b.trace(a)}
function traceOperand(a,b,d){var e=0;switch(a.size){case "s08":e=d.readS8();break;case "u08":e=d.readU8();break;case "s16":e=d.readS16();break;case "s24":e=d.readS24();break;case "u30":e=d.readU30();break;case "u32":e=d.readU32();break;default:!0}d="";switch(a.type){case "":break;case "I":d=b.constantPool.ints[e];break;case "U":d=b.constantPool.uints[e];break;case "D":d=b.constantPool.doubles[e];break;case "S":d=b.constantPool.strings[e];break;case "N":d=b.constantPool.namespaces[e];break;case "CI":d=
b.classes[e];break;case "M":return b.constantPool.multinames[e];default:d="?"}return a.name+":"+e+(""===d?"":" ("+d+")")}function traceOperands(a,b,d,e){e=e||!1;var f=d.position,g="";null===a.operands?g="null":a.operands.forEach(function(e,f){g+=traceOperand(e,b,d);f<a.operands.length-1&&(g+=", ")});e&&d.seek(f);return g}
MethodInfo.prototype.trace=function(a){var b=this.abc;a.enter("method"+(this.name?" "+this.name:"")+" {");a.writeLn("flags: "+getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL  NATIVE SET_DXN HAS_PARAM_NAMES".split(" ")));a.writeLn("parameters: "+this.parameters.map(function(a){return(a.type?Multiname.getQualifiedName(a.type)+"::":"")+a.name}));if(this.code){var d=new AbcStream(this.code);traceArray(a,"traits",this.traits);for(a.enter("code {");0<d.remaining();){var e=d.readU8(),
f=opcodeTable[e],g;g=(""+d.position).padRight(" ",6);switch(e){case 27:g+=f.name+": defaultOffset: "+d.readS24();e=d.readU30();g+=", caseCount: "+e;for(f=0;f<e+1;f++)g+=" offset: "+d.readS24();a.writeLn(g);break;default:f?(g+=f.name.padRight(" ",20),f.operands?(0<f.operands.length&&(g+=traceOperands(f,b,d)),a.writeLn(g)):!0):!0}}a.leave("}")}a.leave("}")};
var SourceTracer=function(){function a(a){return void 0===a?"undefined":null===a?"null":"string"===typeof a?'"'+a+'"':String(a)}function b(d,b){return d.parameters.map(function(d){var e=d.name;b||(d.type&&(e+=":"+d.type.getName()),void 0!==d.value&&(e+=" = "+a(d.value)));return e}).join(", ")}function d(a){this.writer=a}d.prototype={traceTraits:function(d,f,g){var l=this.writer,m=this;d.forEach(function(d){var e;e=Multiname.getAccessModifier(d.name);var u=d.name.namespaces[0].uri;u&&("http://adobe.com/AS3/2006/builtin"===
u&&(u="AS3"),e="public"===e?g===u?"":u:e);f&&(e+=" static");if(d.isSlot()||d.isConst())m.traceMetadata(d.metadata),e=d.isConst()?e+" const":e+" var",e+=" "+d.name.getName(),d.typeName&&(e+=":"+d.typeName.getName()),d.value&&(e+=" = "+a(d.value)),l.writeLn(e+";");else if(d.isMethod()||d.isGetter()||d.isSetter()){m.traceMetadata(d.metadata);u=d.methodInfo;d.attributes&2&&(e+=" override");u.isNative()&&(e+=" native");e=e+" function"+(d.isGetter()?" get":d.isSetter()?" set":"");e+=" "+d.name.getName();
e+="("+b(u)+")";e+=u.returnType?":"+u.returnType.getName():"";var v;d.holder instanceof ClassInfo?(v=d.holder.instanceInfo.name,v.getName()):d.holder instanceof InstanceInfo&&(v=d.holder.name,v.getName());d.isGetter()||d.isSetter();u.isNative();u.isNative()?l.writeLn(e+";"):g?l.writeLn(e+";"):l.writeLn(e+' { notImplemented("'+d.name.getName()+'"); }')}else d.isClass()?(v=d.classInfo.instanceInfo.name,l.enter("package "+v.namespaces[0].uri+" {\n"),m.traceMetadata(d.metadata),m.traceClass(d.classInfo),
l.leave("\n}"),m.traceClassStub(d)):notImplemented()})},traceClassStub2:function(a){function d(a){var e=[];a.forEach(function(a){(a.isMethod()||a.isGetter()||a.isSetter())&&a.methodInfo.isNative()&&e.push(a)});e.forEach(function(a,d){var f=a.methodInfo,l=a.name.getName();g.writeLn("// "+l+" :: "+(f.parameters.length?b(f):"void")+" -> "+(f.returnType?f.returnType.getName():"any"));var m;m=a.isGetter()?'"get '+l+'"':a.isSetter()?'"set '+l+'"':l;g.enter(m+": function "+l+"("+b(f,!0)+") {");g.writeLn('  notImplemented("'+
p+"."+l+'");');g.leave("}"+(d===e.length-1?"":",\n"))})}var g=this.writer,l=a.classInfo,m=l.instanceInfo,p=m.name.getName();a=a.metadata?a.metadata.native:null;if(!a)return!1;g.writeLn("Cut and paste the following into `native.js' and edit accordingly");g.writeLn("8< --------------------------------------------------------------");g.enter("natives."+a.cls+" = function "+a.cls+"(runtime, scope, instanceConstructor, baseClass) {");g.writeLn('var c = new Class("'+p+'", instanceConstructor, ApplicationDomain.passthroughCallable(instanceConstructor));');
g.writeLn("c.extend(baseClass);\n");g.enter("c.nativeStatics = {");d(l.traits,!0);g.leave("};\n");g.enter("c.nativeMethods = {");d(m.traits);g.leave("};\n");g.writeLn("return c;");g.leave("};");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClassStub:function(a){function d(a,e,f){function l(a,d){var e=a.methodInfo,p=a.name.getName(),r="// ("+(e.parameters.length?b(e):"void")+") -> "+(e.returnType?e.returnType.getName():"any"),u=p;a.isGetter()?u="get":
a.isSetter()&&(u="set");g.enter(u+": function "+p+"("+b(e,!0)+") { "+r);g.writeLn('notImplemented("'+m+"."+p+'");');f||(a.isGetter()?g.writeLn("return this._"+p+";"):a.isSetter()&&g.writeLn("this._"+p+" = "+e.parameters[0].name+";"));g.leave("}"+(d?",":""))}var p=a;a={properties:p.filter(function(a){return!e&&!(a.isMethod()||a.isGetter()||a.isSetter())}),methods:p.filter(function(a){return(a.isMethod()||a.isGetter()||a.isSetter())&&e===a.methodInfo.isNative()})};var y=[],B=createEmptyObject();a.methods.forEach(function(a){var d=
a.name.getName();a.isGetter()||a.isSetter()?(B[d]||(B[d]=[]),B[d].push(a)):y.push(a)});for(p=0;p<y.length;p++)l(y[p],p<y.length-1);for(var A=toKeyValueArray(B),s=0;s<A.length;s++){g.enter(A[s][0]+": {");for(var E=A[s][1],p=0;p<E.length;p++)l(E[p],p<E.length-1);g.leave("}"+(s<A.length-1?",":""))}a.properties.forEach(function(d,b){var e=d.name.getName(),f=b===a.properties.length-1;d.name.getNamespace().isPublic()&&g.writeLn(e+": "+("'public "+d.name.name+"'")+(f?"":","))})}var g=this.writer;a=a.classInfo;
var l=a.instanceInfo,m=l.name.getName();g.writeLn("Cut and paste the following glue and edit accordingly.");g.writeLn("Class "+l);g.writeLn("8< --------------------------------------------------------------");var p=l.name.namespaces[0].uri;g.enter("var "+m+"Definition = (function () {");g.enter("return {");g.writeLn("// ("+b(l.init,!1)+")");g.writeLn('__class__: "'+p+"."+m+'",');g.enter("initialize: function () {");g.leave("},");g.enter("__glue__: {");g.enter("native: {");g.enter("static: {");d(a.traits,
!0,!0);g.leave("},");g.enter("instance: {");d(l.traits,!0);g.leave("}");g.leave("},");g.enter("script: {");g.writeLn("instance: Glue.ALL");g.leave("}");g.leave("}");g.leave("};");g.leave("}).call(this);");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClass:function(a){var d=this.writer,g=a.instanceInfo,l=g.name,m=Multiname.getAccessModifier(l);g.isFinal()&&(m+=" final");g.isSealed()||(m+=" dynamic");m+=g.isInterface()?" interface ":" class ";m+=l.getName();
g.superName&&"Object"!==g.superName.getName()&&(m+=" extends "+g.superName.getName());g.interfaces.length&&(m+=" implements "+g.interfaces.map(function(a){return a.getName()}).join(", "));d.enter(m+" {");g.isInterface()||d.writeLn("public function "+l.getName()+"("+b(g.init)+") {}");var p;g.isInterface()&&(p=l.namespaces[0].uri+":"+l.name);this.traceTraits(a.traits,!0,p);this.traceTraits(g.traits,!1,p);d.leave("}")},traceMetadata:function(a){var d=this.writer,b;for(b in a)a.hasOwnProperty(b)&&0!==
b.indexOf("__")&&d.writeLn("["+b+"("+a[b].value.map(function(a){return(a.key?a.key+"=":"")+'"'+a.value+'"'}).join(", ")+")]")}};return d}();function traceSource(a,b){var d=new SourceTracer(a);b.scripts.forEach(function(a){d.traceTraits(a.traits)})}
function traceStatistics(a,b){var d=new Shumway.Metrics.Counter(!0),e=new Shumway.Metrics.Counter(!0),f=new Shumway.Metrics.Counter(!0),g=new Shumway.Metrics.Counter(!0),l={},m={},p={};b.classes.forEach(function(a){l[a.instanceInfo.name.name]=!0});b.scripts.forEach(function(a){a.traits.forEach(function(a){if(a.isClass()){var d=a.classInfo.instanceInfo.superName?a.classInfo.instanceInfo.superName.name:"?";d in l||e.count(d);a.classInfo.traits.forEach(function(a){a.isMethod()?m[a.name.name]=!0:p[a.name.name]=
!0});a.classInfo.instanceInfo.traits.forEach(function(a){a.isMethod()&&!(a.attributes&2)?m[a.name.name]=!0:p[a.name.name]=!0})}})});var r=new Shumway.Metrics.Counter(!0);b.methods.forEach(function(a){function e(a){var d=0;switch(a.size){case "s08":d=w.readS8();break;case "u08":d=w.readU8();break;case "s16":d=w.readS16();break;case "s24":d=w.readS24();break;case "u30":d=w.readU30();break;case "u32":d=w.readU32();break;default:!0}var f="";switch(a.type){case "":break;case "I":f=b.constantPool.ints[d];
break;case "U":f=b.constantPool.uints[d];break;case "D":f=b.constantPool.doubles[d];break;case "S":f=b.constantPool.strings[d];break;case "N":f=b.constantPool.namespaces[d];break;case "CI":f=b.classes[d];break;case "M":f=b.constantPool.multinames[d];break;default:f="?"}return f}if(a.code)for(var w=new AbcStream(a.code);0<w.remaining();){a=w.readU8();var z=opcodeTable[a],y=null;if(z)switch(r.count(z.name),z.operands&&(y=z.operands.map(e)),a){case 65:case 67:continue;case 70:case 76:case 79:case 68:case 69:case 78:y[0]&&
!(y[0].name in m)&&f.count(y[0].name);break;case 74:y[0]&&!(y[0].name in l)&&d.count(y[0].name);break;case 102:case 97:y[0]&&!(y[0].name in p)&&g.count(y[0].name)}}});a.writeLn(JSON.stringify({definedClasses:l,definedMethods:m,definedProperties:p,libraryClasses:d.counts,librarySuperClasses:e.counts,libraryMethods:f.counts,libraryProperties:g.counts,operations:r.counts},null,2))}
(function(a){var b=a.AVM2||(a.AVM2={}),d=function(a,d,b){b.flags=d.flags;b.name=d.isRuntimeName()?a.pop():d.name;b.namespaces=d.isRuntimeNamespace()?[a.pop()]:d.namespaces},e=a.AVM2.Runtime.Scope,f=a.AVM2.Runtime.asCoerceByMultiname,g=a.AVM2.Runtime.asGetSlot,l=a.AVM2.Runtime.asSetSlot,m=a.AVM2.Runtime.asHasNext2,p=a.AVM2.Runtime.asCoerce,r=a.AVM2.Runtime.asCoerceString,u=a.AVM2.Runtime.asAsType,v=a.AVM2.Runtime.asTypeOf,w=a.AVM2.Runtime.asIsInstanceOf,z=a.AVM2.Runtime.asIsType,y=a.AVM2.Runtime.applyType,
B=a.AVM2.Runtime.createFunction,A=a.AVM2.Runtime.createClass,s=a.AVM2.Runtime.getDescendants,E=a.AVM2.Runtime.checkFilter,H=a.AVM2.Runtime.asAdd,D=a.AVM2.Runtime.translateError,G=a.AVM2.Runtime.asCreateActivation,F=a.AVM2.Runtime.sliceArguments,Q=a.ObjectUtilities.boxValue,T=a.ArrayUtilities.popManyInto,S=a.AVM2.Runtime.construct,Y=a.AVM2.ABC.Multiname,I=function(a){this.parent=a;this.stack=[];this.isWith=[]};I.prototype.push=function(a,d){this.stack.push(a);this.isWith.push(!!d)};I.prototype.get=
function(a){return this.stack[a]};I.prototype.clear=function(){this.stack.length=0;this.isWith.length=0};I.prototype.pop=function(){this.isWith.pop();this.stack.pop()};I.prototype.topScope=function(){this.scopes||(this.scopes=[]);for(var a=this.parent,d=0;d<this.stack.length;d++){var b=this.stack[d],f=this.isWith[d],g=this.scopes[d];if(!g||g.parent!==a||g.object!==b||g.isWith!==f)g=this.scopes[d]=new e(a,b,f);a=g}return a};var J=function(){};J.interpretMethod=function(b,e,J,L){!0;Counter.count("Interpret Method");
var P=e.abc,K=P.constantPool.ints,R=P.constantPool.uints,U=P.constantPool.doubles,ga=P.constantPool.strings,ba=P.methods,Z=P.constantPool.multinames,$=P.applicationDomain,ha=e.exceptions;b=[b];for(var C=[],sa=new I(J),fa=e.parameters.length,aa=L.length,ca,ma=0;ma<fa;ma++){var X=e.parameters[ma];ca=ma<aa?L[ma]:X.value;X.type&&!X.type.isAnyName()&&(ca=f($,X.type,ca));b.push(ca)}e.needsRest()?b.push(F(L,fa)):e.needsArguments()&&b.push(F(L,0));L=e.analysis.bytecodes;var ea,ya,Ca,za,la,oa,fa=[],aa=Y.TEMPORARY,
X=0,Sa=L.length;a:for(;X<Sa;)try{var N=L[X],da=N.op;switch(da|0){case 3:throw C.pop();case 4:d(C,Z[N.index],aa);C.push(C.pop().asGetSuper(J,aa.namespaces,aa.name,aa.flags));break;case 5:ca=C.pop();d(C,Z[N.index],aa);C.pop().asSetSuper(J,aa.namespaces,aa.name,aa.flags,ca);break;case 8:b[N.index]=void 0;break;case 12:oa=C.pop();la=C.pop();X=!(la<oa)?N.offset:X+1;continue;case 24:oa=C.pop();la=C.pop();X=la>=oa?N.offset:X+1;continue;case 13:oa=C.pop();la=C.pop();X=!(la<=oa)?N.offset:X+1;continue;case 23:oa=
C.pop();la=C.pop();X=la>oa?N.offset:X+1;continue;case 14:oa=C.pop();la=C.pop();X=!(la>oa)?N.offset:X+1;continue;case 22:oa=C.pop();la=C.pop();X=la<=oa?N.offset:X+1;continue;case 15:oa=C.pop();la=C.pop();X=!(la>=oa)?N.offset:X+1;continue;case 21:oa=C.pop();la=C.pop();X=la<oa?N.offset:X+1;continue;case 16:X=N.offset;continue;case 17:X=C.pop()?N.offset:X+1;continue;case 18:X=!C.pop()?N.offset:X+1;continue;case 19:oa=C.pop();la=C.pop();X=la==oa?N.offset:X+1;continue;case 20:oa=C.pop();la=C.pop();X=la!=
oa?N.offset:X+1;continue;case 25:oa=C.pop();la=C.pop();X=la===oa?N.offset:X+1;continue;case 26:oa=C.pop();la=C.pop();X=la!==oa?N.offset:X+1;continue;case 27:ya=C.pop();if(0>ya||ya>=N.offsets.length)ya=N.offsets.length-1;X=N.offsets[ya];continue;case 28:sa.push(Q(C.pop()),!0);break;case 29:sa.pop();break;case 30:ya=C.pop();C[C.length-1]=Q(C[C.length-1]).asNextName(ya);break;case 35:ya=C.pop();C[C.length-1]=Q(C[C.length-1]).asNextValue(ya);break;case 50:za=m(b[N.object],b[N.index]);b[N.object]=za.object;
b[N.index]=za.index;C.push(!!za.index);break;case 32:C.push(null);break;case 33:C.push(void 0);break;case 36:case 37:C.push(N.value);break;case 44:C.push(ga[N.index]);break;case 45:C.push(K[N.index]);break;case 46:C.push(R[N.index]);break;case 47:C.push(U[N.index]);break;case 38:C.push(!0);break;case 39:C.push(!1);break;case 40:C.push(NaN);break;case 41:C.pop();break;case 42:C.push(C[C.length-1]);break;case 43:ea=C[C.length-1];C[C.length-1]=C[C.length-2];C[C.length-2]=ea;break;case 48:sa.push(Q(C.pop()),
!1);break;case 64:C.push(B(ba[N.index],sa.topScope(),!0));break;case 65:T(C,N.argCount,fa);ea=C.pop();C[C.length-1]=C[C.length-1].apply(ea,fa);break;case 66:T(C,N.argCount,fa);C[C.length-1]=S(C[C.length-1],fa);break;case 71:return;case 72:return e.returnType?f($,e.returnType,C.pop()):C.pop();case 73:T(C,N.argCount,fa);ea=C.pop();J.object.baseClass.instanceConstructorNoInitialize.apply(ea,fa);break;case 74:T(C,N.argCount,fa);d(C,Z[N.index],aa);ea=Q(C[C.length-1]);ea=ea.asConstructProperty(aa.namespaces,
aa.name,aa.flags,fa);C[C.length-1]=ea;break;case 75:a.Debug.notImplemented("OP.callsuperid");break;case 76:case 70:case 79:T(C,N.argCount,fa);d(C,Z[N.index],aa);za=Q(C.pop()).asCallProperty(aa.namespaces,aa.name,aa.flags,76===da,fa);79!==da&&C.push(za);break;case 69:case 78:T(C,N.argCount,fa);d(C,Z[N.index],aa);za=C.pop().asCallSuper(J,aa.namespaces,aa.name,aa.flags,fa);78!==da&&C.push(za);break;case 83:T(C,N.argCount,fa);C[C.length-1]=y($,C[C.length-1],fa);break;case 85:ea={};for(ma=0;ma<N.argCount;ma++)ca=
C.pop(),ea[Y.getPublicQualifiedName(C.pop())]=ca;C.push(ea);break;case 86:ea=[];T(C,N.argCount,fa);ea.push.apply(ea,fa);C.push(ea);break;case 87:!0;C.push(G(e));break;case 88:C[C.length-1]=A(P.classes[N.index],C[C.length-1],sa.topScope());break;case 89:d(C,Z[N.index],aa);C.push(s(C.pop(),aa));break;case 90:!0;C.push(ha[N.index].scopeObject);break;case 94:case 93:d(C,Z[N.index],aa);C.push(sa.topScope().findScopeProperty(aa.namespaces,aa.name,aa.flags,$,93===da,!1));break;case 96:Ca=Z[N.index];ea=sa.topScope().findScopeProperty(Ca.namespaces,
Ca.name,Ca.flags,$,!0,!1);C.push(ea.asGetProperty(Ca.namespaces,Ca.name,Ca.flags));break;case 104:case 97:ca=C.pop();d(C,Z[N.index],aa);Q(C.pop()).asSetProperty(aa.namespaces,aa.name,aa.flags,ca);break;case 98:C.push(b[N.index]);break;case 99:b[N.index]=C.pop();break;case 100:C.push(J.global.object);break;case 101:C.push(sa.get(N.index));break;case 102:d(C,Z[N.index],aa);C[C.length-1]=Q(C[C.length-1]).asGetProperty(aa.namespaces,aa.name,aa.flags);break;case 106:d(C,Z[N.index],aa);C[C.length-1]=Q(C[C.length-
1]).asDeleteProperty(aa.namespaces,aa.name,aa.flags);break;case 108:C[C.length-1]=g(C[C.length-1],N.index);break;case 109:ca=C.pop();ea=C.pop();l(ea,N.index,ca);break;case 112:C[C.length-1]+="";break;case 131:case 115:C[C.length-1]|=0;break;case 136:case 116:C[C.length-1]>>>=0;break;case 132:case 117:C[C.length-1]=+C[C.length-1];break;case 129:case 118:C[C.length-1]=!!C[C.length-1];break;case 120:C[C.length-1]=E(C[C.length-1]);break;case 128:C[C.length-1]=p($.getType(Z[N.index]),C[C.length-1]);break;
case 130:break;case 133:C[C.length-1]=r(C[C.length-1]);break;case 135:C[C.length-2]=u(C.pop(),C[C.length-1]);break;case 137:ea=C[C.length-1];C[C.length-1]=void 0==ea?null:ea;break;case 144:C[C.length-1]=-C[C.length-1];break;case 145:++C[C.length-1];break;case 146:++b[N.index];break;case 147:--C[C.length-1];break;case 148:--b[N.index];break;case 149:C[C.length-1]=v(C[C.length-1]);break;case 150:C[C.length-1]=!C[C.length-1];break;case 151:C[C.length-1]=~C[C.length-1];break;case 160:C[C.length-2]=H(C[C.length-
2],C.pop());break;case 161:C[C.length-2]-=C.pop();break;case 162:C[C.length-2]*=C.pop();break;case 163:C[C.length-2]/=C.pop();break;case 164:C[C.length-2]%=C.pop();break;case 165:C[C.length-2]<<=C.pop();break;case 166:C[C.length-2]>>=C.pop();break;case 167:C[C.length-2]>>>=C.pop();break;case 168:C[C.length-2]&=C.pop();break;case 169:C[C.length-2]|=C.pop();break;case 170:C[C.length-2]^=C.pop();break;case 171:C[C.length-2]=C[C.length-2]==C.pop();break;case 172:C[C.length-2]=C[C.length-2]===C.pop();
break;case 173:C[C.length-2]=C[C.length-2]<C.pop();break;case 174:C[C.length-2]=C[C.length-2]<=C.pop();break;case 175:C[C.length-2]=C[C.length-2]>C.pop();break;case 176:C[C.length-2]=C[C.length-2]>=C.pop();break;case 177:C[C.length-2]=w(C.pop(),C[C.length-1]);break;case 178:C[C.length-1]=z($.getType(Z[N.index]),C[C.length-1]);break;case 179:C[C.length-2]=z(C.pop(),C[C.length-1]);break;case 180:C[C.length-2]=Q(C.pop()).asHasProperty(null,C[C.length-1]);break;case 192:C[C.length-1]=(C[C.length-1]|0)+
1;break;case 193:C[C.length-1]=(C[C.length-1]|0)-1;break;case 194:b[N.index]=(b[N.index]|0)+1;break;case 195:b[N.index]=(b[N.index]|0)-1;break;case 196:C[C.length-1]=~C[C.length-1];break;case 197:C[C.length-2]=C[C.length-2]+C.pop()|0;break;case 198:C[C.length-2]=C[C.length-2]-C.pop()|0;break;case 199:C[C.length-2]=C[C.length-2]*C.pop()|0;break;case 208:case 209:case 210:case 211:C.push(b[da-208]);break;case 212:case 213:case 214:case 215:b[da-212]=C.pop();break;case 239:case 240:case 241:break;default:a.Debug.notImplemented(a.AVM2.opcodeName(da))}X++}catch(ta){if(1>
ha.length)throw ta;for(var ta=D($,ta),ma=0,Aa=ha.length;ma<Aa;ma++){var Da=ha[ma];if(X>=Da.start&&X<=Da.end&&(!Da.typeName||$.getType(Da.typeName).isInstance(ta))){C.length=0;C.push(ta);sa.clear();X=Da.offset;continue a}}throw ta;}};b.Interpreter=J})(Shumway||(Shumway={}));
var release=Shumway.AVM2.Runtime.enableVerifier.value=!0,avm2Root=SHUMWAY_ROOT+"avm2/",builtinPath=avm2Root+"generated/builtin/builtin.abc",avm1Path=avm2Root+"generated/avm1lib/avm1lib.abc",BinaryFileReader=function(){function a(a,d){this.url=a;this.responseType=d||"arraybuffer"}a.prototype={readAll:function(a,d){var e=this.url,f=new XMLHttpRequest;f.open("GET",this.url,!0);f.responseType=this.responseType;a&&(f.onprogress=function(d){a(f.response,d.loaded,d.total)});f.onreadystatechange=function(){4===
f.readyState&&(200!==f.status&&0!==f.status?(unexpected("Path: "+e+" not found."),d(null,f.statusText)):d(f.response))};f.send(null)},readAsync:function(a,d,e,f,g){var l=new XMLHttpRequest({mozSystem:!0}),m=this.url;l.open(this.method||"GET",m,!0);var p;try{l.responseType="moz-chunked-arraybuffer",p="moz-chunked-arraybuffer"!==l.responseType}catch(r){p=!0}p&&(l.responseType="arraybuffer");l.onprogress=function(d){p||a(new Uint8Array(l.response),{loaded:d.loaded,total:d.total})};l.onreadystatechange=
function(){2===l.readyState&&g&&g(m,l.status,l.getAllResponseHeaders());if(4===l.readyState){200!==l.status&&0!==l.status&&d(l.statusText);if(p){var r=l.response;a(new Uint8Array(r),{loaded:r.byteLength,total:r.byteLength})}f&&f()}else 2===l.readyState&&e&&e()};l.send(null)}};return a}(),libraryAbcs;function grabAbc(a){var b=libraryScripts[a];return b?new AbcFile(new Uint8Array(libraryAbcs,b.offset,b.length),a):null}var avm2;
function createAVM2(a,b,d,e,f,g){avm2=new AVM2(e,f,function(a){(new BinaryFileReader(d)).readAll(null,function(d){m=new AbcFile(new Uint8Array(d),"avm1.abc");avm2.systemDomain.executeAbc(m);a()})});var l,m;AVM2.loadPlayerglobal(b.abcs,b.catalog).then(function(){(new BinaryFileReader(a)).readAll(null,function(a){l=new AbcFile(new Uint8Array(a),"builtin.abc");avm2.builtinsLoaded=!1;avm2.systemDomain.onMessage.register("classCreated",Stubs.onClassCreated);avm2.systemDomain.executeAbc(l);avm2.builtinsLoaded=
!0;console.info(JSON.stringify(Counter.toJSON()));console.timeEnd("Load AVM2");g(avm2)})})}
(function(a){a=a.AVM1||(a.AVM1={});var b=function(a,b){this.array=a;this.position=0;this.end=a.length;this.readANSI=6>b;var f=new ArrayBuffer(4);(new Int32Array(f))[0]=1;if(!(new Uint8Array(f))[0])throw Error("big-endian platform");};b.prototype.readUI8=function(){return this.array[this.position++]};b.prototype.readUI16=function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=a+2;return b};b.prototype.readSI16=function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=
a+2;return 32768>b?b:b-65536};b.prototype.readInteger=function(){var a=this.position,b=this.array,b=b[a]|b[a+1]<<8|b[a+2]<<16|b[a+3]<<24;this.position=a+4;return b};b.prototype.readFloat=function(){var a=this.position,b=this.array,f=new ArrayBuffer(4),g=new Uint8Array(f);g[0]=b[a];g[1]=b[a+1];g[2]=b[a+2];g[3]=b[a+3];this.position=a+4;return(new Float32Array(f))[0]};b.prototype.readDouble=function(){var a=this.position,b=this.array,f=new ArrayBuffer(8),g=new Uint8Array(f);g[4]=b[a];g[5]=b[a+1];g[6]=
b[a+2];g[7]=b[a+3];g[0]=b[a+4];g[1]=b[a+5];g[2]=b[a+6];g[3]=b[a+7];this.position=a+8;return(new Float64Array(f))[0]};b.prototype.readBoolean=function(){return!!this.readUI8()};b.prototype.readANSIString=function(){for(var a="",b;b=this.readUI8();)a+=String.fromCharCode(b);return a};b.prototype.readUTF8String=function(){for(var a="",b;b=this.readUI8();)if(128>b)a+=String.fromCharCode(b);else{if(128===(b&192))throw Error("Invalid UTF8 encoding");var f=192,g=5;do{var l=f>>1|128;if((b&l)===f)break;f=
l;--g}while(0<=g);f=b&(1<<g)-1;for(l=5;l>=g;--l){b=this.readUI8();if(128!==(b&192))throw Error("Invalid UTF8 encoding");f=f<<6|b&63}a=65536<=f?a+String.fromCharCode(f-65536>>10&1023|55296,f&1023|56320):a+String.fromCharCode(f)}return a};b.prototype.readString=function(){return this.readANSI?this.readANSIString():this.readUTF8String()};b.prototype.readBytes=function(a){var b=this.position,f=Math.max(this.end-b,0);f<a&&(a=f);f=this.array.subarray(b,b+a);this.position=b+a;return f};a.ActionsDataStream=
b})(Shumway||(Shumway={}));
(function(a){a=a.AVM1||(a.AVM1={});var b=a.ActionCode||(a.ActionCode={});b[b.None=0]="None";b[b.ActionGotoFrame=129]="ActionGotoFrame";b[b.ActionGetURL=131]="ActionGetURL";b[b.ActionNextFrame=4]="ActionNextFrame";b[b.ActionPreviousFrame=5]="ActionPreviousFrame";b[b.ActionPlay=6]="ActionPlay";b[b.ActionStop=7]="ActionStop";b[b.ActionToggleQuality=8]="ActionToggleQuality";b[b.ActionStopSounds=9]="ActionStopSounds";b[b.ActionWaitForFrame=138]="ActionWaitForFrame";b[b.ActionSetTarget=139]="ActionSetTarget";
b[b.ActionGoToLabel=140]="ActionGoToLabel";b[b.ActionPush=150]="ActionPush";b[b.ActionPop=23]="ActionPop";b[b.ActionAdd=10]="ActionAdd";b[b.ActionSubtract=11]="ActionSubtract";b[b.ActionMultiply=12]="ActionMultiply";b[b.ActionDivide=13]="ActionDivide";b[b.ActionEquals=14]="ActionEquals";b[b.ActionLess=15]="ActionLess";b[b.ActionAnd=16]="ActionAnd";b[b.ActionOr=17]="ActionOr";b[b.ActionNot=18]="ActionNot";b[b.ActionStringEquals=19]="ActionStringEquals";b[b.ActionStringLength=20]="ActionStringLength";
b[b.ActionMBStringLength=49]="ActionMBStringLength";b[b.ActionStringAdd=33]="ActionStringAdd";b[b.ActionStringExtract=21]="ActionStringExtract";b[b.ActionMBStringExtract=53]="ActionMBStringExtract";b[b.ActionStringLess=41]="ActionStringLess";b[b.ActionToInteger=24]="ActionToInteger";b[b.ActionCharToAscii=50]="ActionCharToAscii";b[b.ActionMBCharToAscii=54]="ActionMBCharToAscii";b[b.ActionAsciiToChar=51]="ActionAsciiToChar";b[b.ActionMBAsciiToChar=55]="ActionMBAsciiToChar";b[b.ActionJump=153]="ActionJump";
b[b.ActionIf=157]="ActionIf";b[b.ActionCall=158]="ActionCall";b[b.ActionGetVariable=28]="ActionGetVariable";b[b.ActionSetVariable=29]="ActionSetVariable";b[b.ActionGetURL2=154]="ActionGetURL2";b[b.ActionGotoFrame2=159]="ActionGotoFrame2";b[b.ActionSetTarget2=32]="ActionSetTarget2";b[b.ActionGetProperty=34]="ActionGetProperty";b[b.ActionSetProperty=35]="ActionSetProperty";b[b.ActionCloneSprite=36]="ActionCloneSprite";b[b.ActionRemoveSprite=37]="ActionRemoveSprite";b[b.ActionStartDrag=39]="ActionStartDrag";
b[b.ActionEndDrag=40]="ActionEndDrag";b[b.ActionWaitForFrame2=141]="ActionWaitForFrame2";b[b.ActionTrace=38]="ActionTrace";b[b.ActionGetTime=52]="ActionGetTime";b[b.ActionRandomNumber=48]="ActionRandomNumber";b[b.ActionCallFunction=61]="ActionCallFunction";b[b.ActionCallMethod=82]="ActionCallMethod";b[b.ActionConstantPool=136]="ActionConstantPool";b[b.ActionDefineFunction=155]="ActionDefineFunction";b[b.ActionDefineLocal=60]="ActionDefineLocal";b[b.ActionDefineLocal2=65]="ActionDefineLocal2";b[b.ActionDelete=
58]="ActionDelete";b[b.ActionDelete2=59]="ActionDelete2";b[b.ActionEnumerate=70]="ActionEnumerate";b[b.ActionEquals2=73]="ActionEquals2";b[b.ActionGetMember=78]="ActionGetMember";b[b.ActionInitArray=66]="ActionInitArray";b[b.ActionInitObject=67]="ActionInitObject";b[b.ActionNewMethod=83]="ActionNewMethod";b[b.ActionNewObject=64]="ActionNewObject";b[b.ActionSetMember=79]="ActionSetMember";b[b.ActionTargetPath=69]="ActionTargetPath";b[b.ActionWith=148]="ActionWith";b[b.ActionToNumber=74]="ActionToNumber";
b[b.ActionToString=75]="ActionToString";b[b.ActionTypeOf=68]="ActionTypeOf";b[b.ActionAdd2=71]="ActionAdd2";b[b.ActionLess2=72]="ActionLess2";b[b.ActionModulo=63]="ActionModulo";b[b.ActionBitAnd=96]="ActionBitAnd";b[b.ActionBitLShift=99]="ActionBitLShift";b[b.ActionBitOr=97]="ActionBitOr";b[b.ActionBitRShift=100]="ActionBitRShift";b[b.ActionBitURShift=101]="ActionBitURShift";b[b.ActionBitXor=98]="ActionBitXor";b[b.ActionDecrement=81]="ActionDecrement";b[b.ActionIncrement=80]="ActionIncrement";b[b.ActionPushDuplicate=
76]="ActionPushDuplicate";b[b.ActionReturn=62]="ActionReturn";b[b.ActionStackSwap=77]="ActionStackSwap";b[b.ActionStoreRegister=135]="ActionStoreRegister";b[b.ActionInstanceOf=84]="ActionInstanceOf";b[b.ActionEnumerate2=85]="ActionEnumerate2";b[b.ActionStrictEquals=102]="ActionStrictEquals";b[b.ActionGreater=103]="ActionGreater";b[b.ActionStringGreater=104]="ActionStringGreater";b[b.ActionDefineFunction2=142]="ActionDefineFunction2";b[b.ActionExtends=105]="ActionExtends";b[b.ActionCastOp=43]="ActionCastOp";
b[b.ActionImplementsOp=44]="ActionImplementsOp";b[b.ActionTry=143]="ActionTry";b[b.ActionThrow=42]="ActionThrow";b[b.ActionFSCommand2=45]="ActionFSCommand2";b[b.ActionStrictMode=137]="ActionStrictMode";var d=function(a,d){this.bytes=a;this.id=d};a.AS2ActionsData=d;var e=function(a){this.registerNumber=a};a.ParsedPushRegisterAction=e;var f=function(a){this.constantIndex=a};a.ParsedPushConstantAction=f;b=a.ArgumentAssignmentType||(a.ArgumentAssignmentType={});b[b.None=0]="None";b[b.Argument=1]="Argument";
b[b.This=2]="This";b[b.Arguments=4]="Arguments";b[b.Super=8]="Super";b[b.Global=16]="Global";b[b.Parent=32]="Parent";b[b.Root=64]="Root";b=function(a){this.stream=a};Object.defineProperty(b.prototype,"position",{get:function(){return this.stream.position},set:function(a){this.stream.position=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"eof",{get:function(){return this.stream.position>=this.stream.end},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"length",
{get:function(){return this.stream.end},enumerable:!0,configurable:!0});b.prototype.readNext=function(){var a=this.stream,b=a.position,p=a.readUI8(),r=128<=p?a.readUI16():0,r=a.position+r,u=null;switch(p|0){case 129:var v=a.readUI16(),u=a.readUI8(),w=!1;6!==u&&7!==u?console.error("Unexpected gotoFrame next code: "+u):(r++,w=6===u);u=[v,w];break;case 131:v=a.readString();u=a.readString();u=[v,u];break;case 138:var v=a.readUI16(),z=a.readUI8(),u=[v,z];break;case 139:u=[a.readString()];break;case 140:u=
[a.readString()];break;case 150:for(u=[];a.position<r;){v=a.readUI8();switch(v|0){case 0:v=a.readString();break;case 1:v=a.readFloat();break;case 2:v=null;break;case 3:v=void 0;break;case 4:v=new e(a.readUI8());break;case 5:v=a.readBoolean();break;case 6:v=a.readDouble();break;case 7:v=a.readInteger();break;case 8:v=new f(a.readUI8());break;case 9:v=new f(a.readUI16());break;default:console.error("Unknown value type: "+v);a.position=r;continue}u.push(v)}break;case 153:v=a.readSI16();u=[v];break;case 157:v=
a.readSI16();u=[v];break;case 154:v=a.readUI8();u=[v];break;case 159:v=a.readUI8();u=[v];v&2&&u.push(a.readUI16());break;case 141:z=a.readUI8();u=[z];break;case 136:for(var z=a.readUI16(),v=[],y=0;y<z;y++)v.push(a.readString());u=[v];break;case 155:u=a.readString();z=a.readUI16();w=[];for(y=0;y<z;y++)w.push(a.readString());v=a.readUI16();r+=v;v=new d(a.readBytes(v),this.dataId+"_f"+a.position);u=[v,u,w];break;case 148:v=a.readUI16();r+=v;u=[new d(a.readBytes(v),this.dataId+"_w"+a.position)];break;
case 135:var B=a.readUI8(),u=[B];break;case 142:for(var u=a.readString(),z=a.readUI16(),A=a.readUI8(),v=a.readUI16(),s=[],w=[],y=0;y<z;y++){var B=a.readUI8(),E=a.readString();w.push(E);B&&(s[B]={type:1,name:E,index:y})}z=1;v&1&&(s[z++]={type:2});v&4&&(s[z++]={type:4});v&16&&(s[z++]={type:8});v&64&&(s[z++]={type:64});v&128&&(s[z++]={type:32});v&256&&(s[z++]={type:16});z=0;v&2&&(z|=2);v&8&&(z|=4);v&32&&(z|=8);v=a.readUI16();r+=v;v=new d(a.readBytes(v),this.dataId+"_f"+a.position);u=[v,u,w,A,s,z];break;
case 143:v=a.readUI8();u=!!(v&4);w=!!(v&2);v=!!(v&1);z=a.readUI16();y=a.readUI16();s=a.readUI16();A=u?a.readUI8():a.readString();r+=z+y+s;z=new d(a.readBytes(z),this.dataId+"_t"+a.position);y=new d(a.readBytes(y),this.dataId+"_c"+a.position);s=new d(a.readBytes(s),this.dataId+"_z"+a.position);u=[u,A,z,v,y,w,s];break;case 137:u=[a.readUI8()]}a.position=r;return{position:b,actionCode:p,actionName:g[p],args:u}};b.prototype.skip=function(a){for(var d=this.stream;0<a&&d.position<d.end;){var b=128<=d.readUI8()?
d.readUI16():0;d.position+=b;a--}};a.ActionsDataParser=b;var g={"0":"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",
33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",53:"ActionMBStringExtract",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",
60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",
85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction2",143:"ActionTry",148:"ActionWith",
150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"}})(Shumway||(Shumway={}));
(function(a){a=a.AVM1||(a.AVM1={});var b=function(){};b.prototype.analyze=function(a){for(var b=[],f=[0],g=[!0],l=[0];0<l.length;){var m=l.shift();if(!b[m])for(a.position=m;!a.eof&&!b[m];){var p=a.readNext();if(0===p.actionCode)break;var r=a.position,u={action:p,next:r,conditionalJumpTo:-1},v=0,w=!1,z=!1;switch(p.actionCode){case 138:case 141:w=!0;a.skip(138===p.actionCode?p.args[1]:p.args[0]);v=a.position;a.position=r;break;case 153:w=z=!0;v=r+p.args[0];break;case 157:w=!0;v=r+p.args[0];break;case 42:case 62:case 0:w=
z=!0,v=a.length}if(w){if(0>v||v>a.length)console.error("jump outside the action block;"),v=a.length;z?u.next=v:u.conditionalJumpTo=v;g[v]||(f.push(v),l.push(v),g[v]=!0)}b[m]=u;if(z)break;m=r}}var y=[];f.forEach(function(a){if(b[a]){var d=[],f=a;do f=b[f],d.push(f),f=f.next;while(!g[f]&&b[f]);y.push({label:a,items:d,jump:f})}});return{actions:b,blocks:y,dataId:a.dataId}};a.ActionsDataAnalyzer=b})(Shumway||(Shumway={}));
__extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);d.prototype=b.prototype;a.prototype=new d};
(function(a){var b=a.AVM1||(a.AVM1={}),d=function(a){return"object"===typeof a&&a&&a instanceof avm1lib.AS2MovieClip},e=function(a){if(null===a)return"null";var b=typeof a;return"function"===b?"object":"object"===b&&d(a)?"movieclip":b},f=function(a){return"object"!==e(a)?a:a.valueOf()},g=function(a){return"object"!==e(a)?a:a instanceof Date&&6<=Fa.instance.swfVersion?a.toString():a.valueOf()},l=function(a){switch(e(a)){default:case "undefined":case "null":return!1;case "boolean":return a;case "number":return 0!==
a&&!isNaN(a);case "string":return 0!==a.length;case "movieclip":case "object":return!0}},m=function(a){a=f(a);switch(e(a)){case "undefined":case "null":return 7<=Fa.instance.swfVersion?NaN:0;case "boolean":return a?1:0;case "number":return a;case "string":return""===a&&5>Fa.instance.swfVersion?0:+a;default:return 5<=Fa.instance.swfVersion?NaN:0}},p=function(a){a=m(a);return isNaN(a)||!isFinite(a)||0===a?0:a|0},r=function(a){switch(e(a)){case "undefined":return 7<=Fa.instance.swfVersion?"undefined":
"";case "null":return"null";case "boolean":return a?"true":"false";case "number":return a.toString();case "string":return a;case "movieclip":return a.__targetPath;case "object":var d=a.toString!==Function.prototype.toString?a.toString():a;return"string"===typeof d?d:"function"===typeof a?"[type Function]":"[type Object]"}},u=function(a,d){var b=f(a),e=f(d);return"string"===typeof b&&"string"===typeof e?b<e:m(b)<m(e)},v=function(a,b){if(bc.getPublicQualifiedName(b)in a)return b;if(Wb(b))return null;
if(d(a)&&a.__lookupChild(b))return b;if(6<Fa.instance.swfVersion)return null;var e=null,f=b.toLowerCase();z(a,function(a){a.toLowerCase()===f&&(e=a)},null);return e},w=function(a){return a&&a.asGetPublicProperty("prototype")},z=function(a,b,e){cc(a,b,e);if(d(a))for(var f=a._nativeAS3Object,g=0,l=f._children.length;g<l;g++){var m=f._children[g].name;a.asHasProperty(void 0,m,0)||b.call(e,m)}},y=function(a){return"object"===typeof a&&null!==a&&"instanceConstructor"in a},B=function(a){var d=a.asGetPublicProperty("prototype");
return"undefined"===typeof Proxy?(console.error("ES6 proxies are not found"),d):Proxy.create({getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(d,a)},getPropertyDescriptor:function(a){for(var b=d;b;b=Object.getPrototypeOf(b)){var e=Object.getOwnPropertyDescriptor(b,a);if(e)return e}},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(d)},getPropertyNames:function(){for(var a=Object.getOwnPropertyNames(d),b=Object.getPrototypeOf(d);b;b=Object.getPrototypeOf(b))a=
a.concat(Object.getOwnPropertyNames(b));return a},defineProperty:function(b,e){e&&("function"===typeof e.value&&"_setClass"in e.value&&e.value._setClass(a),"function"===typeof e.get&&"_setClass"in e.get&&e.get._setClass(a),"function"===typeof e.set&&"_setClass"in e.set&&e.set._setClass(a));return Object.defineProperty(d,b,e)},"delete":function(a){return delete d[a]},fix:function(){}})},A=function(a,d,b){var e=a.split(/[\/.]/g);""===e[e.length-1]&&e.pop();if(""===e[0]||"_level0"===e[0]||"_root"===
e[0])d=b,e.shift();for(;0<e.length;){b=d;d=d.__lookupChild(e[0]);if(!d)throw Error(e[0]+" (expr "+a+") is not found in "+b._target);e.shift()}return d},s=function(a,d){if(a===Array){var b=d;1==d.length&&"number"===typeof d[0]&&(b=[],b.length=d[0]);return b}if(a===Boolean||a===Number||a===String||a===Function)return a.apply(null,d);if(a===Date)switch(d.length){case 0:return new Date;case 1:return new Date(d[0]);default:return new Date(d[0],d[1],2<d.length?d[2]:1,3<d.length?d[3]:0,4<d.length?d[4]:0,
5<d.length?d[5]:0,6<d.length?d[6]:0)}if(a===Object)return{}},E=function(a,d){if(isNaN(a)||0>a||a>d||a!=(0|a))throw Error("Invalid number of arguments: "+a);},H=function(a){var d=+a.pop();E(d,a.length);for(var b=[],e=0;e<d;e++)b.push(a.pop());return b},D=function(a,d){var b=a.context,e=a.global;if(d)try{var f=A(d,b.currentTarget||b.defaultTarget,e.asGetPublicProperty("_root"));b.currentTarget=f}catch(g){throw b.currentTarget=null,g;}else b.currentTarget=null},G=function(a,d,e,f,g,l,m){var p=a.context,
r=a.global,u=a.scopeContainer,s=a.scope,v=a.actionTracer,w=p.defaultTarget,y=a.constantPool,z=null;if(l)for(a=0;a<l.length;a++)if((g=l[a])&&1===g.type)z||(z=[]),z[l[a].index]=!0;var A;A=a=function(){var a,e={};m&4||e.asSetPublicProperty("arguments",arguments);m&2||e.asSetPublicProperty("this",this);m&8||e.asSetPublicProperty("super",nb);e.asSetPublicProperty("__class",A);a=u.create(e);var g,db=[];if(l)for(g=0;g<l.length;g++){var B=l[g];if(B)switch(B.type){case 1:db[g]=arguments[B.index];break;case 2:db[g]=
this;break;case 4:db[g]=arguments;break;case 8:db[g]=nb;break;case 16:db[g]=r;break;case 32:db[g]=s.asGetPublicProperty("_parent");break;case 64:db[g]=r.asGetPublicProperty("_root")}}for(g=0;g<arguments.length||g<f.length;g++)(!z||!z[g])&&e.asSetPublicProperty(f[g],arguments[g]);e=Fa.instance;g=p.isActive;var B=p.defaultTarget,C=p.currentTarget;try{Fa.instance=p;g||(p.abortExecutionAt=b.avm1TimeoutDisabled.value?Number.MAX_VALUE:Date.now()+1E3,p.errorsIgnored=0,p.isActive=!0);p.defaultTarget=w;p.currentTarget=
null;v.indent();p.stackDepth++;if(256<=p.stackDepth)throw new Ra("long running script -- AVM1 recursion limit is reached");return Va(d,a,y,db)}finally{p.defaultTarget=B,p.currentTarget=C,p.isActive=g,p.stackDepth--,v.unindent(),Fa.instance=e}};a._setClass=function(a){A=a};a.instanceConstructor=a;a.debugName="avm1 "+(e||"<function>");e&&(a.name=e);return a},F=function(a,d,b){var e=a.global;a=a.context;a=a.currentTarget||a.defaultTarget;var f,g;if(0<=d.indexOf(":")){g=d.split(":");f=A(g[0],a,e.asGetPublicProperty("_root"));
if(!f)throw Error(g[0]+" is undefined");g=g[1]}else if(0<=d.indexOf(".")){d=d.split(".");g=d.pop();f=e;for(e=0;e<d.length;e++)if(f=f.asGetPublicProperty(d[e])||f[d[e]],!f)throw Error(d.slice(0,e+1)+" is undefined");}if(!f)return null;e=v(f,g);return(d=null!==e)||b?{obj:f,name:e||g,resolved:d}:null},Q=function(a,b){var e=a.scopeContainer,f=a.context,f=f.currentTarget||f.defaultTarget,g=a.scope;if(g.asHasProperty(void 0,b,0))return g.asGetPublicProperty(b);var l=F(a,b);if(l)return l.obj.asGetPublicProperty(l.name);
if(l=v(g,b))return g.asGetPublicProperty(l);for(;e;e=e.next)if(l=v(e.scope,b),null!==l)return e.scope.asGetPublicProperty(l);if(f.asHasProperty(void 0,b,0))return f.asGetPublicProperty(b);if("this"===b)return f;if(e=d(f)&&f.__lookupChild(b))return e},T=function(a,d){var b=Q(a,d);if(!(b instanceof Object))throw Error('Object "'+d+'" is not found');return b},S=function(a,d){var b=a.global,e=d[0];d[1]?b.gotoAndPlay(e+1):b.gotoAndStop(e+1)},Y=function(a,d){a.global.getURL(d[0],d[1])},I=function(a){a.global.nextFrame()},
J=function(a){a.global.prevFrame()},O=function(a){a.global.play()},V=function(a){a.global.stop()},M=function(a){a.global.toggleHighQuality()},L=function(a){a.global.stopAllSounds()},P=function(a,d){return!a.global.ifFrameLoaded(d[0])},K=function(a,d){D(a,d[0])},R=function(a,d){a.global.gotoLabel(d[0])},U=function(d,b){var e=d.registers,f=d.constantPool,g=d.stack;b.forEach(function(d){d instanceof a.AVM1.ParsedPushConstantAction?g.push(f[d.constantIndex]):d instanceof a.AVM1.ParsedPushRegisterAction?
g.push(e[d.registerNumber]):g.push(d)})},ga=function(a){a.stack.pop()},ba=function(a){a=a.stack;var d=m(a.pop()),b=m(a.pop());a.push(d+b)},Z=function(a){a=a.stack;var d=m(a.pop()),b=m(a.pop());a.push(b-d)},$=function(a){a=a.stack;var d=m(a.pop()),b=m(a.pop());a.push(d*b)},ha=function(a){var d=a.stack;a=a.isSwfVersion5;var b=m(d.pop()),b=m(d.pop())/b;d.push(a?b:isFinite(b)?b:"#ERROR#")},C=function(a){var d=a.stack;a=a.isSwfVersion5;var b=m(d.pop()),e=m(d.pop()),b=b==e;d.push(a?b:b?1:0)},sa=function(a){var d=
a.stack;a=a.isSwfVersion5;var b=m(d.pop()),b=m(d.pop())<b;d.push(a?b:b?1:0)},fa=function(a){var d=a.stack;a=a.isSwfVersion5;var b=l(d.pop()),e=l(d.pop()),b=b&&e;d.push(a?b:b?1:0)},aa=function(a){var d=a.stack;a=a.isSwfVersion5;var b=l(d.pop()),e=l(d.pop()),b=b||e;d.push(a?b:b?1:0)},ca=function(a){var d=a.stack;a=a.isSwfVersion5;var b=!l(d.pop());d.push(a?b:b?1:0)},ma=function(a){var d=a.stack;a=a.isSwfVersion5;var b=r(d.pop()),e=r(d.pop()),b=b==e;d.push(a?b:b?1:0)},X=function(a){var d=a.stack;a=a.global;
var b=r(d.pop());d.push(a.length(b))},ea=function(a){var d=a.stack;a=a.global;var b=r(d.pop());d.push(a.length(b))},ya=function(a){a=a.stack;var d=r(a.pop()),b=r(a.pop());a.push(b+d)},Ca=function(a){var d=a.stack;a=a.global;var b=d.pop(),e=d.pop(),f=r(d.pop());d.push(a.substring(f,e,b))},za=function(a){var d=a.stack;a=a.global;var b=d.pop(),e=d.pop(),f=r(d.pop());d.push(a.mbsubstring(f,e,b))},la=function(a){var d=a.stack;a=a.isSwfVersion5;var b=r(d.pop()),b=r(d.pop())<b;d.push(a?b:b?1:0)},oa=function(a){var d=
a.stack;d.push(a.global.int(d.pop()))},Sa=function(a){var d=a.stack;a=a.global;var b=d.pop();a=a.ord(b);d.push(a)},N=function(a){var d=a.stack;a=a.global;var b=d.pop();a=a.mbord(b);d.push(a)},da=function(a){var d=a.stack;a=a.global;var b=+d.pop();a=a.chr(b);d.push(a)},ta=function(a){var d=a.stack;a=a.global;var b=+d.pop();a=a.mbchr(b);d.push(a)},Aa=function(){},Da=function(a){return!!a.stack.pop()},ua=function(a){var d=a.global;a=a.stack.pop();d.call(a)},La=function(a){var d=a.stack,b=""+d.pop(),
e=d.length;d.push(void 0);d[e]=Q(a,b)},eb=function(a){var d=a.stack,b=d.pop();a:{var d=""+d.pop(),e=a.scopeContainer,f=a.context,g=f.currentTarget||f.defaultTarget,l=a.scope;if(f.currentTarget)g.asSetPublicProperty(d,b);else if(l.asHasProperty(void 0,d,0))l.asSetPublicProperty(d,b);else if(a=F(a,d,!0))a.obj.asSetPublicProperty(a.name,b);else{for(a=e;a.next;a=a.next)if(e=v(a.scope,d),null!==e){a.scope.asSetPublicProperty(e,b);break a}g.asSetPublicProperty(d,b)}}},va=function(a,d){var b=a.global,e=
a.stack,f=d[0],g=e.pop(),e=e.pop(),l;f&1?l="GET":f&2&&(l="POST");f&64?f&128?b.loadVariables(e,g,l):b.loadMovie(e,g,l):b.getURL(e,g,l)},pa=function(a,d){var b=a.global,e=d[0],f=[a.stack.pop()];e&2&&f.push(d[1]);(e&1?b.gotoAndPlay:b.gotoAndStop).apply(b,f)},Ia=function(a){var d=a.stack.pop();D(a,d)},fb=function(a){var d=a.global;a=a.stack;var b=a.pop(),e=a.pop(),f=a.length;a.push(void 0);a[f]=d.getAS2Property(e,b)},ia=function(a){var d=a.global,b=a.stack;a=b.pop();var e=b.pop(),b=b.pop();d.setAS2Property(b,
e,a)},sb=function(a){var d=a.global,b=a.stack;a=b.pop();var e=b.pop(),b=b.pop();d.duplicateMovieClip(b,e,a)},Kb=function(a){var d=a.global;a=a.stack.pop();d.removeMovieClip(a)},kb=function(a){var d=a.global,b=a.stack;a=b.pop();var e=b.pop(),b=!b.pop()?null:{y2:b.pop(),x2:b.pop(),y1:b.pop(),x1:b.pop()};a=[a,e];b&&(a=a.concat(b.x1,b.y1,b.x2,b.y2));d.startDrag.apply(d,a)},tb=function(a){a.global.stopDrag()},Lb=function(a){var d=a.global;a=a.stack.pop();return!d.ifFrameLoaded(a)},Mb=function(a){var d=
a.global;a=a.stack.pop();d.trace(a)},$a=function(a){a.stack.push(a.global.getTimer())},ub=function(a){var d=a.stack;d.push(a.global.random(d.pop()))},xb=function(a){var d=a.stack,b=a.scope,e=d.pop(),f=H(d),g=d.length;d.push(void 0);a=Q(a,e);if(!(a instanceof Function))throw Error('Function "'+e+'" is not found');b=a.apply(b,f);d[g]=b},Ta=function(a){var d=a.stack,b=d.pop(),e=d.pop(),f=H(d),g,l=d.length;d.push(void 0);if(null!==b&&void 0!==b&&""!==b){if(null===e||void 0===e)throw Error("Cannot call method "+
b+" of "+typeof e);e!==nb?g=Object(e):(g=w(Q(a,"__class").__super),e=Q(a,"this"));a=v(g,b);if(null===a)throw Error("Method "+b+" is not defined.");b=g.asGetPublicProperty(a).apply(e,f)}else b=e!==nb?e.apply(e,f):Q(a,"__class").__super.apply(Q(a,"this"),f);d[l]=b},ka=function(a,d){a.constantPool=d[0]},Ma=function(a,d){var b=a.stack,e=a.scope,f=d[1],g=G(a,d[0],f,d[2],0,null,0);f?e.asSetPublicProperty(f,g):b.push(g)},wa=function(a){var d=a.stack;a=a.scope;var b=d.pop(),d=d.pop();a.asSetPublicProperty(d,
b)},yb=function(a){var d=a.scope;a=a.stack.pop();d.asSetPublicProperty(a,void 0)},Ea=function(a){a=a.stack;var d=a.pop(),b=a.pop();b.asSetPublicProperty(d,void 0);a.push(b.asDeleteProperty(void 0,d,0))},Na=function(a){var d=a.stack,b;a:{b=d.pop();for(a=a.scopeContainer;a;a=a.next)if(a.scope.asHasProperty(void 0,b,0)){a.scope.asSetPublicProperty(b,void 0);b=a.scope.asDeleteProperty(void 0,b,0);break a}b=!1}d.push(b)},ob=function(a){var d=a.stack,b=d.pop();d.push(null);a=T(a,b);z(a,function(a){d.push(a)},
null)},qa=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(d==b)},Ha=function(a){a=a.stack;var b=a.pop(),e=a.pop();"prototype"===b?a.push(B(e)):(b=v(Object(e),b),a.push(null===b?void 0:!Object(e).asHasProperty(void 0,b,0)&&d(Object(e))?Object(e).__lookupChild(b):Object(e).asGetPublicProperty(b)))},pb=function(a){a=a.stack;var d=H(a);a.push(d)},ab=function(a){a=a.stack;var d=+a.pop();E(d,a.length>>1);for(var b={},e=0;e<d;e++){var f=a.pop(),g=a.pop();b.asSetPublicProperty(g,f)}a.push(b)},Qa=function(a){a=
a.stack;var d=a.pop(),b=a.pop(),e=H(a),f,g=a.length;a.push(void 0);if(null!==d&&void 0!==d&&""!==d){f=v(b,d);if(null===f)throw Error("Method "+d+" is not defined.");if(null===b||void 0===b)throw Error("Cannot call new using method "+f+" of "+typeof b);d=b.asGetPublicProperty(f)}else{if(null===b||void 0===b)throw Error("Cannot call new using "+typeof b);d=b}y(b)?b=Vb(b,e):(b=Object.create(w(d)||w(Object)),d.apply(b,e));b.constructor=d;a[g]=b},Ja=function(a){var d=a.stack,b=d.pop();a=T(a,b);var b=H(d),
e=d.length;d.push(void 0);var f=s(a,b);"undefined"===typeof f&&(y(a)?f=Vb(a,b):(f=Object.create(w(a)||w(Object)),a.apply(f,b)),f.constructor=a);d[e]=f},Oa=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.pop().asSetPublicProperty(b,d)},Ua=function(a){a=a.stack;var d=a.pop();a.push("movieclip"===e(d)?d._target:void 0)},na=function(a,d){var b=d[0],e=a.stack.pop(),f=a.constantPool,g=a.registers,e=a.scopeContainer.create(Object(e));Va(b,e,f,g)},hc=function(a){a=a.stack;a.push(m(a.pop()))},Xa=function(a){a=
a.stack;a.push(r(a.pop()))},ja=function(a){a=a.stack;var d=a.pop(),d=e(d);a.push(d)},ra=function(a){a=a.stack;var d=g(a.pop()),b=g(a.pop());"string"===typeof d||"string"===typeof b?a.push(r(b)+r(d)):a.push(m(b)+m(d))},Ba=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(u(b,d))},gb=function(a){a=a.stack;var d=m(a.pop()),b=m(a.pop());a.push(b%d)},hb=function(a){a=a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b&d)},zb=function(a){a=a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b<<d)},Pa=function(a){a=
a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b|d)},W=function(a){a=a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b>>d)},lb=function(a){a=a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b>>>d)},Nb=function(a){a=a.stack;var d=p(a.pop()),b=p(a.pop());a.push(b^d)},xa=function(a){a=a.stack;var d=m(a.pop());d--;a.push(d)},Ab=function(a){a=a.stack;var d=m(a.pop());d++;a.push(d)},Ob=function(a){a=a.stack;a.push(a[a.length-1])},bb=function(a){a.isEndOfActions=!0},qb=function(a){a=a.stack;a.push(a.pop(),a.pop())},
Bb=function(a,d){var b=a.stack;a.registers[d[0]]=b[b.length-1]},Pb=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(Object(b)instanceof d?!0:!1)},vb=function(a){var d=a.stack;a=d.pop();d.push(null);z(a,function(a){d.push(a)},null)},rb=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(b===d)},Qb=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(u(d,b))},Cb=function(a){var d=a.stack;a=a.isSwfVersion5;var b=r(d.pop()),b=r(d.pop())>b;d.push(a?b:b?1:0)},Rb=function(a,d){var b=a.stack,e=a.scope,
f=d[1],g=G(a,d[0],f,d[2],d[3],d[4],d[5]);f?e.asSetPublicProperty(f,g):b.push(g)},Db=function(a){var d=a.stack;a=d.pop();var d=d.pop(),b=Object.create(a.traitsPrototype||w(a),{constructor:{value:d,enumerable:!1}});d.__super=a;d.prototype=b},Eb=function(a){a=a.stack;var d=a.pop(),b=a.pop();a.push(d instanceof b?d:null)},Fb=function(a){a=a.stack;var d=a.pop(),b=+a.pop();E(b,a.length);for(var e=[],f=0;f<b;f++)e.push(a.pop());d._as2Interfaces=e},Sb=function(a,d){var b=d[5],e=d[3],f=d[1],g=d[2],l=d[4],
m=d[6],p=a.context,r=a.scopeContainer,u=a.scope,s=a.constantPool,v=a.registers,w=p.isTryCatchListening;try{p.isTryCatchListening=!0,Va(g,r,s,v)}catch(y){p.isTryCatchListening=w;if(!e)throw y;if(!(y instanceof Ga))throw y;"string"===typeof f?u.asSetPublicProperty(f,y.error):v[f]=y.error;Va(l,r,s,v)}finally{p.isTryCatchListening=w,b&&Va(m,r,s,v)}},wb=function(a){a=a.stack.pop();throw new Ga(a);},Tb=function(a){var d=a.stack,b=a.global,e=H(d);a=d.length;d.push(void 0);b=b.fscommand.apply(null,e);d[a]=
b},Ub=function(){},ac=function(a){return function(d,e){var f;try{a(d,e),d.recoveringFromError=!1}catch(g){f=d.context;if(b.avm1ErrorsEnabled.value&&!f.isTryCatchListening||g instanceof Ra)throw g;if(g instanceof Ga)throw g;TelemetryService.reportTelemetry({topic:"error",error:1});if(!d.recoveringFromError){if(1E3<=f.errorsIgnored++)throw new Ra("long running script -- AVM1 errors limit is reached");console.error("AVM1 error: "+g);avm2.exceptions.push({source:"avm1",message:g.message,stack:g.stack});
d.recoveringFromError=!0}}}},Va=function(d,e,f,g){var l=Fa.instance;if(!d.ir){var m=new a.AVM1.ActionsDataStream(d.bytes,l.swfVersion),m=new a.AVM1.ActionsDataParser(m);m.dataId=d.id;var p=new a.AVM1.ActionsDataAnalyzer;d.ir=p.analyze(m);if(b.avm1CompilerEnabled.value)try{var r=new Yb;d.ir.compiled=r.generate(d.ir)}catch(u){console.error("Unable to compile AVM1 function: "+u)}}d=d.ir;var m=d.compiled,r=[],s=5<=l.swfVersion,v=Jb.get(),p=e.scope;e={context:l,global:l.globals,scopeContainer:e,scope:p,
actionTracer:v,constantPool:f,registers:g,stack:r,isSwfVersion5:s,recoveringFromError:!1,isEndOfActions:!1};p._nativeAS3Object&&p._nativeAS3Object._deferScriptExecution&&(l.deferScriptExecution=!0);if(m)return m(e);f=0;l=l.abortExecutionAt;if(b.avm1DebuggerEnabled.value&&(b.Debugger.pause||b.Debugger.breakpoints[d.dataId]))debugger;for(g=d.actions[0];g&&!e.isEndOfActions;){if(0===f++%1E3&&Date.now()>=l)throw new Ra("long running script -- AVM1 instruction hang timeout");m=e;p=s=void 0;try{var s=m,
w=g.action,y=w.actionCode,z=w.args;s.actionTracer.print(w,s.stack);v=!1;switch(y|0){case 129:S(s,z);break;case 131:Y(s,z);break;case 4:I(s);break;case 5:J(s);break;case 6:O(s);break;case 7:V(s);break;case 8:M(s);break;case 9:L(s);break;case 138:v=P(s,z);break;case 139:K(s,z);break;case 140:R(s,z);break;case 150:U(s,z);break;case 23:ga(s);break;case 10:ba(s);break;case 11:Z(s);break;case 12:$(s);break;case 13:ha(s);break;case 14:C(s);break;case 15:sa(s);break;case 16:fa(s);break;case 17:aa(s);break;
case 18:ca(s);break;case 19:ma(s);break;case 20:X(s);break;case 49:ea(s);break;case 33:ya(s);break;case 21:Ca(s);break;case 53:za(s);break;case 41:la(s);break;case 24:oa(s);break;case 50:Sa(s);break;case 54:N(s);break;case 51:da(s);break;case 55:ta(s);break;case 153:break;case 157:v=Da(s,z);break;case 158:ua(s);break;case 28:La(s);break;case 29:eb(s);break;case 154:va(s,z);break;case 159:pa(s,z);break;case 32:Ia(s);break;case 34:fb(s);break;case 35:ia(s);break;case 36:sb(s);break;case 37:Kb(s);break;
case 39:kb(s);break;case 40:tb(s);break;case 141:v=Lb(s,z);break;case 38:Mb(s);break;case 52:$a(s);break;case 48:ub(s);break;case 61:xb(s);break;case 82:Ta(s);break;case 136:ka(s,z);break;case 155:Ma(s,z);break;case 60:wa(s);break;case 65:yb(s);break;case 58:Ea(s);break;case 59:Na(s);break;case 70:ob(s);break;case 73:qa(s);break;case 78:Ha(s);break;case 66:pb(s);break;case 67:ab(s);break;case 83:Qa(s);break;case 64:Ja(s);break;case 79:Oa(s);break;case 69:Ua(s);break;case 148:na(s,z);break;case 74:hc(s);
break;case 75:Xa(s);break;case 68:ja(s);break;case 71:ra(s);break;case 72:Ba(s);break;case 63:gb(s);break;case 96:hb(s);break;case 99:zb(s);break;case 97:Pa(s);break;case 100:W(s);break;case 101:lb(s);break;case 98:Nb(s);break;case 81:xa(s);break;case 80:Ab(s);break;case 76:Ob(s);break;case 62:bb(s);break;case 77:qb(s);break;case 135:Bb(s,z);break;case 84:Pb(s);break;case 85:vb(s);break;case 102:rb(s);break;case 103:Qb(s);break;case 104:Cb(s);break;case 142:Rb(s,z);break;case 105:Db(s);break;case 43:Eb(s);
break;case 44:Fb(s);break;case 143:Sb(s,z);break;case 42:wb(s);break;case 45:Tb(s);break;case 137:break;case 0:s.isEndOfActions=!0;break;default:throw Error("Unknown action code: "+y);}p=v;m.recoveringFromError=!1}catch(A){s=m.context;if(b.avm1ErrorsEnabled.value&&!s.isTryCatchListening||A instanceof Ra)throw A;if(A instanceof Ga)throw A;TelemetryService.reportTelemetry({topic:"error",error:1});if(!m.recoveringFromError){if(1E3<=s.errorsIgnored++)throw new Ra("long running script -- AVM1 errors limit is reached");
console.error("AVM1 error: "+A);avm2.exceptions.push({source:"avm1",message:A.message,stack:A.stack});m.recoveringFromError=!0}}g=p?g.conditionalJumpTo:g.next;g=d.actions[g]}return r.pop()},bc=a.AVM2.ABC.Multiname,cc=a.AVM2.Runtime.forEachPublicProperty,Vb=a.AVM2.Runtime.construct,Wb=a.isNumeric,dc=a.Debug.notImplemented,mb=a.Options.Option,Wa=shumwayOptions.register(new a.Options.OptionSet("AVM1"));b.avm1TraceEnabled=Wa.register(new mb("t1","traceAvm1","boolean",!1,"trace AVM1 execution"));b.avm1ErrorsEnabled=
Wa.register(new mb("e1","errorsAvm1","boolean",!1,"fail on AVM1 errors"));b.avm1TimeoutDisabled=Wa.register(new mb("ha1","nohangAvm1","boolean",!1,"disable fail on AVM1 hang"));b.avm1CompilerEnabled=Wa.register(new mb("ca1","compileAvm1","boolean",!0,"compiles AVM1 code"));b.avm1DebuggerEnabled=Wa.register(new mb("da1","debugAvm1","boolean",!1,"allows AVM1 code debugging"));b.Debugger={pause:!1,breakpoints:{}};var Gb=function(a,d){this.scope=a;this.next=d};Gb.prototype.create=function(a){return new Gb(a,
this)};var Fa,Ka=function(){};Ka.create=function(a){return new Hb(a)};Ka.prototype.flushPendingScripts=function(){};Ka.prototype.addAsset=function(){};Ka.prototype.getAsset=function(){};Ka.prototype.resolveTarget=function(){};Ka.prototype.resolveLevel=function(){};Ka.prototype.addToPendingScripts=function(){};Ka.instance=null;Fa=Ka;b.AS2Context=Fa;var Hb,ib=Fa,Ya=function(a){ib.call(this);this.swfVersion=a;this.globals=new avm1lib.AS2Globals;this.initialScope=new Gb(this.globals,null);this.assets=
{};this.executionProhibited=this.isActive=!1;this.stackDepth=this.abortExecutionAt=0;this.isTryCatchListening=!1;this.errorsIgnored=0;this.deferScriptExecution=!0;this.pendingScripts=[]};__extends(Ya,ib);Ya.prototype.addAsset=function(a,d){this.assets[a]=d};Ya.prototype.getAsset=function(a){return this.assets[a]};Ya.prototype.resolveTarget=function(a){var d=this.currentTarget||this.defaultTarget;a?"string"===typeof a&&(a=A(a,d,this.globals.asGetPublicProperty("_root"))):a=d;if("object"!==typeof a||
null===a||!("_nativeAS3Object"in a))throw Error("Invalid AS2 target object: "+Object.prototype.toString.call(a));return a};Ya.prototype.resolveLevel=function(a){return this.resolveTarget(this.globals["_level"+a])};Ya.prototype.addToPendingScripts=function(a){this.deferScriptExecution?this.pendingScripts.push(a):a()};Ya.prototype.flushPendingScripts=function(){for(var a=this.pendingScripts;a.length;)a.shift()();this.deferScriptExecution=!1};Hb=Ya;var Ga=function(a){this.error=a},Ra,Ib=Error,Xb=function(a,
d){Ib.call(this,a);this.error=d};__extends(Xb,Ib);Ra=Xb;b.executeActions=function(a,d,e){if(!d.executionProhibited){var f=Jb.get(),g=d.initialScope.create(e),l=Fa.instance;try{Fa.instance=d,d.isActive=!0,d.abortExecutionAt=b.avm1TimeoutDisabled.value?Number.MAX_VALUE:Date.now()+1E3,d.errorsIgnored=0,d.defaultTarget=e,d.currentTarget=null,f.message("ActionScript Execution Starts"),f.indent(),Va(a,g,[],[])}catch(m){throw m instanceof Ra&&(console.error("Disabling AVM1 execution"),d.executionProhibited=
!0),m;}finally{d.isActive=!1,d.defaultTarget=null,d.currentTarget=null,f.unindent(),f.message("ActionScript Execution Stops"),Fa.instance=l}}};var nb={},Yb,Za=function(){if(!Za.cachedCalls){var a=Za,d;d=b.avm1ErrorsEnabled.value?function(a){return a}:ac;d={ActionGotoFrame:d(S),ActionGetURL:d(Y),ActionNextFrame:d(I),ActionPreviousFrame:d(J),ActionPlay:d(O),ActionStop:d(V),ActionToggleQuality:d(M),ActionStopSounds:d(L),ActionWaitForFrame:d(P),ActionSetTarget:d(K),ActionGoToLabel:d(R),ActionPush:d(U),
ActionPop:d(ga),ActionAdd:d(ba),ActionSubtract:d(Z),ActionMultiply:d($),ActionDivide:d(ha),ActionEquals:d(C),ActionLess:d(sa),ActionAnd:d(fa),ActionOr:d(aa),ActionNot:d(ca),ActionStringEquals:d(ma),ActionStringLength:d(X),ActionMBStringLength:d(ea),ActionStringAdd:d(ya),ActionStringExtract:d(Ca),ActionMBStringExtract:d(za),ActionStringLess:d(la),ActionToInteger:d(oa),ActionCharToAscii:d(Sa),ActionMBCharToAscii:d(N),ActionAsciiToChar:d(da),ActionMBAsciiToChar:d(ta),ActionJump:d(Aa),ActionIf:d(Da),
ActionCall:d(ua),ActionGetVariable:d(La),ActionSetVariable:d(eb),ActionGetURL2:d(va),ActionGotoFrame2:d(pa),ActionSetTarget2:d(Ia),ActionGetProperty:d(fb),ActionSetProperty:d(ia),ActionCloneSprite:d(sb),ActionRemoveSprite:d(Kb),ActionStartDrag:d(kb),ActionEndDrag:d(tb),ActionWaitForFrame2:d(Lb),ActionTrace:d(Mb),ActionGetTime:d($a),ActionRandomNumber:d(ub),ActionCallFunction:d(xb),ActionCallMethod:d(Ta),ActionConstantPool:d(ka),ActionDefineFunction:d(Ma),ActionDefineLocal:d(wa),ActionDefineLocal2:d(yb),
ActionDelete:d(Ea),ActionDelete2:d(Na),ActionEnumerate:d(ob),ActionEquals2:d(qa),ActionGetMember:d(Ha),ActionInitArray:d(pb),ActionInitObject:d(ab),ActionNewMethod:d(Qa),ActionNewObject:d(Ja),ActionSetMember:d(Oa),ActionTargetPath:d(Ua),ActionWith:d(na),ActionToNumber:d(hc),ActionToString:d(Xa),ActionTypeOf:d(ja),ActionAdd2:d(ra),ActionLess2:d(Ba),ActionModulo:d(gb),ActionBitAnd:d(hb),ActionBitLShift:d(zb),ActionBitOr:d(Pa),ActionBitRShift:d(W),ActionBitURShift:d(lb),ActionBitXor:d(Nb),ActionDecrement:d(xa),
ActionIncrement:d(Ab),ActionPushDuplicate:d(Ob),ActionReturn:d(bb),ActionStackSwap:d(qb),ActionStoreRegister:d(Bb),ActionInstanceOf:d(Pb),ActionEnumerate2:d(vb),ActionStrictEquals:d(rb),ActionGreater:d(Qb),ActionStringGreater:d(Cb),ActionDefineFunction2:d(Rb),ActionExtends:d(Db),ActionCastOp:d(Eb),ActionImplementsOp:d(Fb),ActionTry:d(Sb),ActionThrow:d(wb),ActionFSCommand2:d(Tb),ActionStrictMode:d(Ub)};a.cachedCalls=d}};Za.prototype.convertArgs=function(d,b,e){for(var f=[],g=0;g<d.length;g++){var l=
d[g];if("object"===typeof l&&null!==l&&!Array.isArray(l))if(l instanceof a.AVM1.ParsedPushConstantAction){var m="",p=e.constantPool;p&&(m=p[l.constantIndex],m=void 0===m?"undefined":JSON.stringify(m),m=0<=m.indexOf("*/")?"":" /* "+m+" */");f.push("constantPool["+l.constantIndex+"]"+m)}else l instanceof a.AVM1.ParsedPushRegisterAction?f.push("registers["+l.registerNumber+"]"):l instanceof a.AVM1.AS2ActionsData?(m="code_"+b+"_"+g,e[m]=l,f.push("res."+m)):dc("Unknown AVM1 action argument type");else void 0===
l?f.push("undefined"):f.push(JSON.stringify(l))}return f.join(",")};Za.prototype.convertAction=function(a,d,b){switch(a.action.actionCode){case 153:case 62:return"";case 136:return b.constantPool=a.action.args[0],"  constantPool = ["+this.convertArgs(a.action.args[0],d,b)+"];\n  ectx.constantPool = constantPool;\n";case 150:return"  stack.push("+this.convertArgs(a.action.args,d,b)+");\n";case 138:case 141:return"  if (calls."+a.action.actionName+"(ectx,["+this.convertArgs(a.action.args,d,b)+"])) { position = "+
a.conditionalJumpTo+"; break; }\n";case 157:return"  if (!!stack.pop()) { position = "+a.conditionalJumpTo+"; break; }\n";default:return"  calls."+a.action.actionName+"(ectx"+(a.action.args?",["+this.convertArgs(a.action.args,d,b)+"]":"")+");\n"}};Za.prototype.checkAvm1Timeout=function(a){if(Date.now()>=a.context.abortExecutionAt)throw new Ra("long running script -- AVM1 instruction hang timeout");};Za.prototype.generate=function(a){var d=this,e=a.blocks,f={},g=0;a=a.dataId;var l="return function avm1gen_"+
a+"(ectx) {\nvar position = 0;\nvar checkTimeAfter = 0;\nvar constantPool = ectx.constantPool, registers = ectx.registers, stack = ectx.stack;\n";b.avm1DebuggerEnabled.value&&(l+="/* Running "+a+" */ if (Shumway.AVM1.Debugger.pause || Shumway.AVM1.Debugger.breakpoints."+a+") { debugger; }\n");l+="while (!ectx.isEndOfActions) {\nif (checkTimeAfter <= 0) { checkTimeAfter = 1000; checkTimeout(ectx); }\nswitch(position) {\n";e.forEach(function(a){l+=" case "+a.label+":\n";a.items.forEach(function(a){l+=
d.convertAction(a,g++,f)});l+="  position = "+a.jump+";\n  checkTimeAfter -= "+a.items.length+";\n  break;\n"});l+=" default: ectx.isEndOfActions = true; break;\n}\n}\nreturn stack.pop();};";return(new Function("calls","res","checkTimeout",l))(Za.cachedCalls,f,this.checkAvm1Timeout)};Yb=Za;var Jb,jb=function(){};jb.get=function(){return b.avm1TraceEnabled.value?jb.tracer:jb.nullTracer};var cb=0;jb.tracer={print:function(a,d){for(var b=a.position,e=a.actionCode,f=a.actionName,g=[],l=0;l<d.length;l++){var m=
d[l];g.push(m&&"object"===typeof m?"["+(m.constructor&&m.constructor.name?m.constructor.name:"Object")+"]":m)}l=Array(cb+1).join("..");console.log("AVM1 trace: "+l+b+": "+f+"("+e.toString(16)+"), stack="+g)},indent:function(){cb++},unindent:function(){cb--},message:function(a){console.log("AVM1 trace: ------- "+a)}};jb.nullTracer={print:function(){},indent:function(){},unindent:function(){},message:function(){}};Jb=jb})(Shumway||(Shumway={}));
var MAX_SNAP_DRAW_SCALE_TO_CACHE=8,CACHE_SNAP_DRAW_AFTER=3,BitmapDefinition=function(){function a(a){this._bitmapData&&(this._bitmapData._changeNotificationTarget=null);if(this._bitmapData=a)this._bitmapData._changeNotificationTarget=this;a?(a=a._drawable,this._bbox={xMin:0,yMin:0,xMax:20*a.width,yMax:20*a.height}):this._bbox={xMin:0,yMin:0,xMax:0,yMax:0};this._drawableChanged();this._invalidateBounds();this._invalidateTransform()}return{__class__:"flash.display.Bitmap",draw:function(a,d,e){if(this._bitmapData){var f;
a.save();if("auto"===this._pixelSnapping||"always"===this._pixelSnapping){d=this._getConcatenatedTransform(null,!0);var g=Math.abs(Math.round(d.a)),l=Math.abs(Math.round(d.d));1<=g&&8>=g&&1<=l&&8>=l&&0.001>=Math.abs(Math.abs(d.a)/g-1)&&0.001>=Math.abs(Math.abs(d.d)/l-1)&&0.001>=Math.abs(d.b)&&0.001>=Math.abs(d.c)?1===g&&1===l?g=!0:(f=g+"x"+l,this._snapImageCache.size!==f&&(this._snapImageCache.size=f,this._snapImageCache.hits=0,this._snapImageCache.image=null),3===++this._snapImageCache.hits&&this._cacheSnapImage(f,
g,l),f=this._snapImageCache.image,g=!!f):g=!1;g&&a.setTransform(0>d.a?-1:1,0,0,0>d.d?-1:1,d.tx/20|0,d.ty/20|0)}e.setAlpha(a,!0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=this._smoothing;a.drawImage(f||this._bitmapData._getDrawable(),0,0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=!1;a.restore();traceRenderer.value&&frameWriter.writeLn("Bitmap.draw() snapping: "+this._pixelSnapping+", dimensions: "+this._bitmapData._drawable.width+" x "+this._bitmapData._drawable.height)}},_drawableChanged:function(){this._invalidate();
this._snapImageCache.image=null;this._snapImageCache.hints=0},_cacheSnapImage:function(a,d,e){Counter.count("Cache scaled image");var f=this._bitmapData._getDrawable(),g=document.createElement("canvas");g.width=d*f.width;g.height=e*f.height;d=g.getContext("2d");d.imageSmoothingEnabled=d.mozImageSmoothingEnabled=this._smoothing;d.drawImage(f,0,0,f.width,f.height,0,0,g.width,g.height);var l=this._snapImageCache,m=document.createElement("img");l._tmp=[g,m];"toBlob"in g?g.toBlob(function(d){l.size===
a&&(m.onload=function(){URL.revokeObjectURL(d);l.size===a&&(l.image=m)},m.src=URL.createObjectURL(d))}):(m.onload=function(){l.size===a&&(l.image=m)},m.src=g.toDataURL())},initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(b,d,e){this._pixelSnapping="never"===d||"always"===d?d:"auto";this._smoothing=!!e;this._snapImageCache={hits:0,size:"",image:null};!b&&this.symbol&&(d=this.symbol,b=new flash.display.BitmapData(d.width,d.height,!0,0),b._ctx.imageSmoothingEnabled=this._smoothing,
b._ctx.mozImageSmoothingEnabled=this._smoothing,b._ctx.drawImage(d.img,0,0),b._ctx.imageSmoothingEnabled=!1,b._ctx.mozImageSmoothingEnabled=!1);a.call(this,b||null)},pixelSnapping:{get:function(){return this._pixelSnapping},set:function(a){this._pixelSnapping=a}},smoothing:{get:function(){return this._smoothing},set:function(a){this._smoothing=a}},bitmapData:{get:function(){return this._bitmapData},set:a}}}}}}.call(this),CACHE_DRAWABLE_AFTER=10,BitmapDataDefinition=function(){function a(a,d,b,l,m,
p){255>p&&a.clearRect(d,b,l,m);0<p&&a.fillRect(d,b,l,m)}var b={__class__:"flash.display.BitmapData",initialize:function(){this._changeNotificationTarget=null;this._locked=!1;this._requested=0;this._cache=null;this.symbol&&(this._img=this.symbol.img,this._skipCopyToCanvas=this.symbol.skipCopyToCanvas)},_checkCanvas:function(){if(null===this._drawable)throw ArgumentError();},ctor:function(a,d,b,l){this._img?(a=this._img.naturalWidth||this._img.width,d=this._img.naturalHeight||this._img.height):(isNaN(a+
d)||0>=a||0>=d)&&throwError("ArgumentError",Errors.ArgumentError);this._transparent=void 0===b?!0:!!b;this._backgroundColor=void 0===l?4294967295:l;this._transparent||(this._backgroundColor|=4278190080);this._skipCopyToCanvas?this._drawable=this._img:(b=document.createElement("canvas"),this._ctx=b.getContext("2d"),b.width=a|0,b.height=d|0,this._drawable=b,(!this._transparent||!this._img&&this._backgroundColor)&&this.fillRect(new flash.geom.Rectangle(0,0,a|0,d|0),this._backgroundColor),this._img&&
this._ctx.drawImage(this._img,0,0))},dispose:function(){this._ctx=null;this._drawable.width=0;this._drawable.height=0;this._drawable=null},draw:function(a,d,b,l,m,p){this._checkCanvas();b=this._ctx;b.save();b.beginPath();m&&(0<m.width&&0<m.height)&&(b.rect(m.x,m.y,m.width,m.height),b.clip());d&&b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty);b.globalCompositeOperation=getBlendModeName(l);b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=!!p;flash.display.BitmapData.class.isInstanceOf(a)?b.drawImage(a._drawable,
0,0):(new RenderVisitor(a,b,null,!0)).startFragment(d);b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=!1;b.restore();this._invalidate()},fillRect:function(d,b){this._checkCanvas();this._transparent||(b|=4278190080);var g=this._ctx;g.fillStyle=argbUintToStr(b);a(g,d.x,d.y,d.width,d.height,b>>>24&255);this._invalidate()},getPixel:function(a,d){this._checkCanvas();var b=this._ctx.getImageData(a,d,1,1).data;return dataToRGB(b)},getPixel32:function(a,d){this._checkCanvas();var b=this._ctx.getImageData(a,
d,1,1).data;return dataToARGB(b)},_invalidate:function(a){a&&somewhatImplemented("BitmapData._invalidate(changeRect)");this._locked||(this._changeNotificationTarget&&this._changeNotificationTarget._drawableChanged(),this._requested=0,this._cache=null)},_getDrawable:function(){if(this._img===this._drawable)return this._drawable;this._requested++;if(10<=this._requested){if(!this._cache){Counter.count("Cache drawable");var a=document.createElement("img");"toBlob"in this._drawable?this._drawable.toBlob(function(d){a.src=
URL.createObjectURL(d);a.onload=function(){URL.revokeObjectURL(d)}}):a.src=this._drawable.toDataURL();this._cache=a}if(0<this._cache.width)return this._cache}return this._drawable},setPixel:function(a,d,b){this.fillRect({x:a,y:d,width:1,height:1},b|4278190080);this._invalidate()},setPixel32:function(a,d,b){this.fillRect({x:a,y:d,width:1,height:1},b);this._invalidate()},copyPixels:function(a,d,b,l,m,p){l&&notImplemented("BitmapData.copyPixels w/ alpha");l=d.width;m=d.height;var r=d.x;d=d.y;var u=b.x;
b=b.y;var v=-Math.min(0,r,u),w=-Math.min(0,d,b),z=Math.min(0,this._ctx.canvas.width-u-l,a._drawable.width-r-l)-v,y=Math.min(0,this._ctx.canvas.height-b-m,a._drawable.height-d-m)-w;p||this._ctx.clearRect(u,b,l,m);0<l+z&&0<m+y&&this._ctx.drawImage(a._drawable,r+v,d+w,l+z,m+y,u+v,b+w,l+z,m+y);this._invalidate()},lock:function(){this._locked=!0},unlock:function(a){this._locked=!1;this._invalidate(a)},clone:function(){this._checkCanvas();var a=new flash.display.BitmapData(this._drawable.width,this._drawable.height,
!0,0);a._ctx.drawImage(this._drawable,0,0);return a},scroll:function(d,b){this._checkCanvas();this._ctx.draw(this._drawable,d,b);this._ctx.save();var g=this._img?0:this._backgroundColor;this._transparent||(g|=4278190080);var l=g>>>24&255;this._ctx.fillStyle=argbUintToStr(g);var g=this._drawable.width,m=this._drawable.height;0<d?a(this._ctx,0,0,d,m,l):0>d&&a(this._ctx,g+d,0,-d,m,l);0<b?a(this._ctx,0,0,g,b,l):0>b&&a(this._ctx,m+b,g,-b,l);this._ctx.restore();this._invalidate()},get width(){return this._drawable.width},
get height(){return this._drawable.height}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{ctor:b.ctor,fillRect:b.fillRect,dispose:b.dispose,getPixel:b.getPixel,getPixel32:b.getPixel32,setPixel:b.setPixel,setPixel32:b.setPixel32,copyPixels:b.copyPixels,lock:b.lock,unlock:b.unlock,draw:b.draw,clone:b.clone,scroll:b.scroll,width:d(b,"width"),height:d(b,"height")}}};return b}.call(this);function dataToRGB(a){return a[0]<<16|a[1]<<8|a[2]}
function dataToARGB(a){return a[3]<<24|dataToRGB(a)}
var DisplayObjectDefinition=function(){var a,b=1,d={advanceFrame:!1,enterFrame:!0,constructChildren:!1,frameConstructed:!0,executeFrame:!1,exitFrame:!0,render:!0},e={x:0,y:0},f={__class__:"flash.display.DisplayObject",initialize:function(){var d=flash.display.BlendMode.class;this._alpha=1;this._animated=!1;this._bitmap=this._bbox=null;this._blendMode=d.NORMAL;this._bounds={xMin:0,xMax:0,yMin:0,yMax:0,invalid:!0};this._cacheAsBitmap=!1;this._children=[];this._clipDepth=null;this._currentTransform=
{a:1,b:0,c:0,d:1,tx:0,ty:0};this._concatenatedTransform={a:1,b:0,c:0,d:1,tx:0,ty:0,invalid:!0};this._graphics=this._cxform=this._current3DTransform=null;this._filters=[];this._loader=null;this._mouseChildren=!0;this._mouseOver=!1;this._mouseY=this._mouseX=0;this._opaqueBackground=this._name=null;this._owned=!1;this._parent=null;this._rotation=0;this._rotationCos=1;this._rotationSin=0;this._scale9Grid=null;this._scaleY=this._scaleX=1;this._stage=null;this._visible=!0;this._destroyed=this._wasCachedAsBitmap=
this._hidden=!1;this._scrollRect=this._maskedObject=null;this._invalid=!1;this._region=null;this._depth=this._index=this._level=-1;this._invisible=this._isContainer=!1;this._zindex=0;a=[d.NORMAL,d.NORMAL,d.LAYER,d.MULTIPLY,d.SCREEN,d.LIGHTEN,d.DARKEN,d.DIFFERENCE,d.ADD,d.SUBTRACT,d.INVERT,d.ALPHA,d.ERASE,d.OVERLAY,d.HARDLIGHT,d.SHADER];if(d=this.symbol){this._animated=d.animated||!1;this._bbox=d.bbox||null;this._blendMode=this._resolveBlendMode(d.blendMode);this._children=d.children||[];this._clipDepth=
d.clipDepth||null;this._cxform=d.cxform||null;this._loader=d.loader||null;this._name=d.name||null;this._owned=d.owned||!1;this._parent=d.parent||null;this._level=isNaN(d.level)?-1:d.level;this._index=isNaN(d.index)?-1:d.index;this._depth=isNaN(d.depth)?-1:d.depth;this._root=d.root||null;this._stage=d.stage||null;var b=d.scale9Grid;b&&(this._scale9Grid=new flash.geom.Rectangle(b.left,b.top,b.right-b.left,b.bottom-b.top));(d=d.currentTransform)&&this._setTransformMatrix(d,!1)}this._accessibilityProperties=
null;var e=this;this._onBroadcastMessage=function(a){e._listeners[a]&&e._dispatchEvent(a)}},_addEventListener:function(a,b,e,f){!1===d[a]?avm2.systemDomain.onMessage.register(a,b):(a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.register(a,this._onBroadcastMessage),this._addEventListenerImpl(a,b,e,f))},_removeEventListener:function(a,b,e){!1===d[a]?avm2.systemDomain.onMessage.unregister(a,b):(this._removeEventListenerImpl(a,b,e),a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.unregister(a,
this._onBroadcastMessage))},_resolveBlendMode:function(d){return a[d]||flash.display.BlendMode.class.NORMAL},_getConcatenatedTransform:function(a,d){var b=this._stage;if(this===this._stage)return d?this._concatenatedTransform:this._currentTransform;if(a===this._parent)return this._currentTransform;var e=null,f,g;for(f=this;f!==b;)f._concatenatedTransform.invalid&&(e=f),f===a&&(g=f._concatenatedTransform),f=f._parent;if(e)if(this._parent===b)e=this._concatenatedTransform,f=this._currentTransform,e.a=
f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty;else{var w=[];for(f=this;f!==e;)w.push(f),f=f._parent;var z=e;do{var y=z._parent,e=z._concatenatedTransform;f=z._currentTransform;y?y!==b&&(y=y._concatenatedTransform,e.a=f.a*y.a+f.b*y.c,e.b=f.a*y.b+f.b*y.d,e.c=f.c*y.a+f.d*y.c,e.d=f.d*y.d+f.c*y.b,e.tx=f.tx*y.a+y.tx+f.ty*y.c,e.ty=f.ty*y.d+y.ty+f.tx*y.b):(e.a=f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty);e.invalid=!1;f=w.pop();z=z._children;for(y=0;y<z.length;y++){var B=z[y];B!==f&&(B._concatenatedTransform.invalid=
!0)}z=f}while(z)}else e=this._concatenatedTransform;return a&&a!==this._stage?(f=g||a._getConcatenatedTransform(null,!1),b=1,w=g=0,z=1,B=y=0,f.b||f.c?(z=1/(f.a*f.d-f.b*f.c),b=f.d*z,g=-f.b*z,w=-f.c*z,z*=f.a,y=-(b*f.tx+w*f.ty),B=-(g*f.tx+z*f.ty)):(b=1/f.a,z=1/f.d,y=f.tx*-b,B=f.ty*-z),{a:b*e.a+w*e.b,b:g*e.a+z*e.b,c:b*e.c+w*e.d,d:g*e.c+z*e.d,tx:b*e.tx+w*e.ty+y,ty:g*e.tx+z*e.ty+B}):d&&b?(f=b._concatenatedTransform,{a:e.a*f.a,b:e.b*f.d,c:e.c*f.a,d:e.d*f.d,tx:e.tx*f.a+f.tx,ty:e.ty*f.d+f.ty}):e},_applyCurrentTransform:function(a){var d=
this._getConcatenatedTransform(null,!1),b=a.x,e=a.y;a.x=d.a*b+d.c*e+d.tx|0;a.y=d.d*e+d.b*b+d.ty|0},_applyConcatenatedInverseTransform:function(a){var d=this._getConcatenatedTransform(null,!1),b=1/(d.a*d.d-d.b*d.c),e=a.x-d.tx,f=a.y-d.ty;a.x=(d.d*e-d.c*f)*b|0;a.y=(d.a*f-d.b*e)*b|0},_hitTest:function(a,d,b,f,g){if(a){e.x=d;e.y=b;this._applyConcatenatedInverseTransform(e);g=this._getContentBounds();if(!(e.x>=g.xMin&&e.x<g.xMax&&e.y>=g.yMin&&e.y<g.yMax))return!1;if(!f||!this._graphics)return!0;if(this._graphics){a=
this._graphics._paths;f=0;for(g=a.length;f<g;f++){var v=a[f];if(v.isPointInPath(e.x,e.y))return!0;if(v.strokeStyle){var w=v._strokePath;w||(w=v.strokePath(v.drawingStyles),v._strokePath=w);if(w.isPointInPath(e.x,e.y))return!0}}}a=this._children;f=0;for(g=a.length;f<g;f++)if(v=a[f],v._hitTest&&v._hitTest(!0,d,b,!0,null))return!0;return!1}f=this.getBounds(this._stage);g=g.getBounds(g._stage);d=Math.max(f.xMin,g.xMin);b=Math.max(f.yMin,g.yMin);d=Math.min(f.xMax,g.xMax)-d;b=Math.min(f.yMax,g.yMax)-b;
return 0<d&&0<b},_invalidate:function(){this._invalid=!0},_invalidateBounds:function(){for(var a=this;a&&!a._bounds.invalid;)a._bounds.invalid=!0,a=a._parent},_invalidateTransform:function(){this._concatenatedTransform.invalid=!0;this._parent&&this._parent._invalidateBounds()},_setTransformMatrix:function(a,d){var b=a.a,e=a.b,f=a.c,g=a.d,w,z;d?(w=20*a.tx|0,z=20*a.ty|0):(w=a.tx,z=a.ty);var y=0!==b?Math.atan(e/b):0<e?Math.PI/2:-Math.PI/2;this._rotation=180*y/Math.PI;this._rotationCos=Math.cos(y);this._rotationSin=
Math.sin(y);y=Math.sqrt(b*b+e*e);this._scaleX=0<b?y:-y;y=Math.sqrt(g*g+f*f);this._scaleY=0<g?y:-y;y=this._currentTransform;y.a=b;y.b=e;y.c=f;y.d=g;y.tx=w;y.ty=z;this._invalidateTransform()},get accessibilityProperties(){return this._accessibilityProperties},set accessibilityProperties(a){this._accessibilityProperties=a},get alpha(){return this._alpha},set alpha(a){a!==this._alpha&&(this._invalidate(),this._alpha=a,this._animated=!1)},get blendMode(){return this._blendMode},set blendMode(d){0<=a.indexOf(d)?
this._blendMode=d:throwError("ArgumentError",Errors.InvalidEnumError,"blendMode");this._animated=!1},get cacheAsBitmap(){return this._cacheAsBitmap},set cacheAsBitmap(a){this._cacheAsBitmap=this._filters.length?!0:a;this._animated=!1},get filters(){return this._filters},set filters(a){a.length?(this._filters.length||(this._wasCachedAsBitmap=this._cacheAsBitmap),this._cacheAsBitmap=!0):this._cacheAsBitmap=this._wasCachedAsBitmap;this._filters=a;this._animated=!1},get height(){var a=this._getContentBounds(),
d=this._currentTransform;return Math.abs(d.b)*(a.xMax-a.xMin)+Math.abs(d.d)*(a.yMax-a.yMin)|0},set height(a){if(!(0>a)){var d=Math.abs(this._rotationCos),b=Math.abs(this._rotationSin),e=this._getContentBounds(),f=b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin);f&&(this.scaleX=this.width/(d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin)),this.scaleY=a/f)}},get loaderInfo(){return this._loader&&this._loader._contentLoaderInfo||this._parent.loaderInfo},get mask(){return this._mask},set mask(a){if(this._mask!==a){this._invalidate();
a&&a._maskedObject&&(a._maskedObject.mask=null);if(this._mask=a)a._maskedObject=this;this._animated=!1}},get name(){return this._name||(this._name="instance"+b++)},set name(a){this._name=a},get mouseX(){if(!this._stage)return 0;e.x=this._stage._mouseX;e.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(e);return e.x},get mouseY(){if(!this._stage)return 0;e.x=this._stage._mouseX;e.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(e);return e.y},get opaqueBackground(){return this._opaqueBackground},
set opaqueBackground(a){this._opaqueBackground=a;this._animated=!1},get parent(){return-1<this._index?this._parent:null},get root(){return this._stage&&this._stage._root},get rotation(){return this._rotation},set rotation(a){a%=360;180<a&&(a-=360);if(a!==this._rotation){this._invalidate();this._invalidateTransform();this._rotation=a;var d;switch(a){case 0:case 360:a=1;d=0;break;case 90:case -270:a=0;d=1;break;case 180:case -180:a=-1;d=0;break;case 270:case -90:a=0;d=-1;break;default:d=this._rotation/
180*Math.PI,a=Math.cos(d),d=Math.sin(d)}this._rotationCos=a;this._rotationSin=d;var b=this._currentTransform;b.a=a*this._scaleX;b.b=d*this._scaleX;b.c=-d*this._scaleY;b.d=a*this._scaleY;this._animated=!1}},get rotationX(){return 0},set rotationX(a){somewhatImplemented("DisplayObject.rotationX")},get rotationY(){return 0},set rotationY(a){somewhatImplemented("DisplayObject.rotationY")},get rotationZ(){return this.rotation},set rotationZ(a){this.rotation=a;somewhatImplemented("DisplayObject.rotationZ")},
get stage(){return this._stage},get scaleX(){return this._scaleX},set scaleX(a){if(a!==this._scaleX){this._invalidate();this._invalidateTransform();this._scaleX=a;var d=this._currentTransform;d.a=this._rotationCos*a;d.b=this._rotationSin*a;this._animated=!1}},get scaleY(){return this._scaleY},set scaleY(a){if(a!==this._scaleY){this._invalidate();this._invalidateTransform();this._scaleY=a;var d=this._currentTransform;d.c=-this._rotationSin*a;d.d=this._rotationCos*a;this._animated=!1}},get scaleZ(){return 1},
set scaleZ(a){somewhatImplemented("DisplayObject.scaleZ")},get scale9Grid(){return this._scale9Grid},set scale9Grid(a){somewhatImplemented("DisplayObject.scale9Grid");this._scale9Grid=a;this._animated=!1},get scrollRect(){return this._scrollRect},set scrollRect(a){somewhatImplemented("DisplayObject.scrollRect");this._scrollRect=a},get transform(){return new flash.geom.Transform(this)},set transform(a){var d=this.transform;d.colorTransform=a.colorTransform;a.matrix3D?d.matrix3D=a.matrix3D:d.matrix=
a.matrix},get visible(){return this._visible},set visible(a){a!==this._visible&&(this._invalidate(),this._visible=a,this._animated=!1)},get width(){var a=this._getContentBounds(),d=this._currentTransform;return Math.abs(d.a)*(a.xMax-a.xMin)+Math.abs(d.c)*(a.yMax-a.yMin)|0},set width(a){if(!(0>a)){var d=Math.abs(this._rotationCos),b=Math.abs(this._rotationSin),e=this._getContentBounds(),f=d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin);f&&(this.scaleY=this.height/(b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin)),this.scaleX=
a/f)}},get x(){return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.tx=a,this._animated=!1)},get y(){return this._currentTransform.ty},set y(a){a!==this._currentTransform.ty&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.ty=a,this._animated=!1)},get z(){return 0},set z(a){somewhatImplemented("DisplayObject.z")},_getContentBounds:function(){var a=this._bounds;if(a.invalid){var d=this._bbox,
b=Number.MAX_VALUE,e=Number.MIN_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE;if(d)b=d.xMin,e=d.xMax,f=d.yMin,g=d.yMax;else{for(var d=this._children,w=d.length,z=0;z<w;z++){var y=d[z];if(flash.display.DisplayObject.class.isInstanceOf(y))var B=y.getBounds(this),y=B.xMin,A=B.yMin,s=B.xMax,B=B.yMax,b=Math.min(b,y,s),e=Math.max(e,y,s),f=Math.min(f,A,B),g=Math.max(g,A,B)}this._graphics&&(B=this._graphics._getBounds(!0),B.xMin!==B.xMax&&B.yMin!==B.yMax&&(y=B.xMin,A=B.yMin,s=B.xMax,B=B.yMax,b=Math.min(b,y,
s),e=Math.max(e,y,s),f=Math.min(f,A,B),g=Math.max(g,A,B)))}b===Number.MAX_VALUE&&(b=e=f=g=0);a.xMin=b;a.xMax=e;a.yMin=f;a.yMax=g;a.invalid=!1}return a},_getRegion:function(a){var d,b=this._filters;if(b.length){var e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE,w=Number.MIN_VALUE;if(this._graphics&&(d=this._graphics._getBounds(!0)))e=d.xMin,f=d.xMax,g=d.yMin,w=d.yMax;for(var z=this._children,y=0;y<z.length;y++)d=z[y]._getRegion(this),d.xMin<e&&(e=d.xMin),d.xMax>f&&(f=d.xMax),d.yMin<g&&(g=
d.yMin),d.yMax>w&&(w=d.yMax);if(e===Number.MAX_VALUE)return{xMin:0,xMax:0,yMin:0,yMax:0};d={xMin:e,xMax:f,yMin:g,yMax:w};for(y=0;y<b.length;y++)b[y]._updateFilterBounds(d)}else d=this._graphics?this._graphics._getBounds(!0):this._getContentBounds();return this._getTransformedRect(d,a)},getBounds:function(a){return this._getTransformedRect(this._getContentBounds(),a)},_getTransformedRect:function(a,d){if(!d||d===this)return a;var b=a.xMin,e=a.xMax,f=a.yMin,g=a.yMax;if(0===e-b||0===g-f)return{xMin:0,
yMin:0,xMax:0,yMax:0};var w=d&&!flash.display.DisplayObject.class.isInstanceOf(d)?d:this._getConcatenatedTransform(d,!1),z=w.a*b+w.c*f+w.tx|0,y=w.b*b+w.d*f+w.ty|0,B=w.a*e+w.c*f+w.tx|0,f=w.b*e+w.d*f+w.ty|0,A=w.a*e+w.c*g+w.tx|0,e=w.b*e+w.d*g+w.ty|0,s=w.a*b+w.c*g+w.tx|0,b=w.b*b+w.d*g+w.ty|0,g=0;z>B&&(g=z,z=B,B=g);A>s&&(g=A,A=s,s=g);y>f&&(g=y,y=f,f=g);e>b&&(g=e,e=b,b=g);return{xMin:z<A?z:A,yMin:y<e?y:e,xMax:B>s?B:s,yMax:f>b?f:b}},hitTestObject:function(a){return this._hitTest(!1,0,0,!1,a)},hitTestPoint:function(a,
d,b){return this._hitTest(!0,a,d,b,null)},destroy:function(){this._destroyed||(this._destroyed=!0,this.cleanupBroadcastListeners())},cleanupBroadcastListeners:function(){var a=this._listeners,d;for(d in a)avm2.systemDomain.onMessage.unregister(d,this._onBroadcastMessage)}},g=Object.getOwnPropertyDescriptor;f.__glue__={"native":{instance:{root:g(f,"root"),stage:g(f,"stage"),name:g(f,"name"),parent:g(f,"parent"),mask:g(f,"mask"),visible:g(f,"visible"),x:{get:function(){return this.x/20},set:function(a){this.x=
20*a|0}},y:{get:function(){return this.y/20},set:function(a){this.y=20*a|0}},z:{get:function(){return this.z/20},set:function(a){this.z=20*a|0}},scaleX:g(f,"scaleX"),scaleY:g(f,"scaleY"),scaleZ:g(f,"scaleZ"),mouseX:{get:function(){return this.mouseX/20},set:function(a){this.mouseX=20*a|0}},mouseY:{get:function(){return this.mouseY/20},set:function(a){this.mouseY=20*a|0}},rotation:g(f,"rotation"),rotationX:g(f,"rotationX"),rotationY:g(f,"rotationY"),rotationZ:g(f,"rotationZ"),alpha:g(f,"alpha"),width:{get:function(){return this.width/
20},set:function(a){this.width=20*a|0}},height:{get:function(){return this.height/20},set:function(a){this.height=20*a|0}},_hitTest:function(a,d,b,e,f){return this._hitTest(a,20*d|0,20*b|0,e,f)},cacheAsBitmap:g(f,"cacheAsBitmap"),opaqueBackground:g(f,"opaqueBackground"),scrollRect:g(f,"scrollRect"),filters:g(f,"filters"),blendMode:g(f,"blendMode"),transform:g(f,"transform"),scale9Grid:g(f,"scale9Grid"),loaderInfo:g(f,"loaderInfo"),accessibilityProperties:g(f,"accessibilityProperties"),globalToLocal:function(a){e.x=
20*a.x|0;e.y=20*a.y|0;this._applyConcatenatedInverseTransform(e);return new flash.geom.Point(e.x/20,e.y/20)},localToGlobal:function(a){e.x=20*a.x|0;e.y=20*a.y|0;this._applyCurrentTransform(e);return new flash.geom.Point(e.x/20,e.y/20)},getBounds:function(a){a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)},getRect:function(a){somewhatImplemented("DisplayObject.getRect");a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/
20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)}}}};return f}.call(this),DisplayObjectContainerDefinition=function(){var a={get mouseChildren(){return this._mouseChildren},set mouseChildren(a){this._mouseChildren=a},get numChildren(){return this._children.length},get tabChildren(){return this._tabChildren},set tabChildren(a){this._tabChildren=a},get textSnapshot(){notImplemented()},addChild:function(a){return this.addChildAt(a,this._children.length)},addChildAt:function(d,b){d===this&&throwError("ArgumentError",
Errors.CantAddSelfError);if(d._parent===this)return this.setChildIndex(d,b);var f=this._children;(0>b||b>f.length)&&throwError("RangeError",Errors.ParamRangeError);-1<d._index&&(avm2.systemDomain.getClass("flash.display.Loader").isInstanceOf(d._parent)?a.removeChild.call(d._parent,d):d._parent.removeChild(d));if(!this._sparse)for(var g=f.length;g&&g>b;g--)f[g-1]._index++;f.splice(b,0,d);d._invalidateTransform();d._owned=!1;d._parent=this;d._stage=this._stage;d._index=b;d._dispatchEvent("added",void 0,
!0);this._stage&&this._stage._addToStage(d);return d},areInaccessibleObjectsUnderPoint:function(){notImplemented()},contains:function(a){return a._parent===this},getChildAt:function(a){var b=this._children;(0>a||a>b.length)&&throwError("RangeError",Errors.ParamRangeError);a=b[a];return!flash.display.DisplayObject.class.isInstanceOf(a)?null:a},getChildByName:function(a){for(var b=this._children,f=0,g=b.length;f<g;f++)if(b[f].name===a)return this.getChildAt(f);return null},getChildIndex:function(a){a._parent!==
this&&throwError("ArgumentError",Errors.NotAChildError);return this._sparse?this._children.indexOf(a):a._index},getObjectsUnderPoint:function(){notImplemented()},removeChild:function(a){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);return this.removeChildAt(this.getChildIndex(a))},removeChildAt:function(a){var b=this._children;(0>a||a>=b.length)&&throwError("RangeError",Errors.ParamRangeError);var f=b[a];f._dispatchEvent("removed",void 0,!0);this._stage&&this._stage._removeFromStage(f);
if(!this._sparse)for(var g=b.length;g&&g>a;g--)b[g-1]._index--;b.splice(a,1);f._invalidateTransform();f._owned=!1;f._parent=null;f._index=-1;return f},setChildIndex:function(a,b){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);var f=this.getChildIndex(a);if(f!==b){var g=this._children;(0>b||b>g.length)&&throwError("RangeError",Errors.ParamRangeError);g.splice(f,1);g.splice(b,0,a);if(!this._sparse)for(f=f<b?f:b;f<g.length;)g[f]._index=f++;a._owned=!1;a._invalidate();return a}},
removeChildren:function(a,b){a=1>arguments.length?0:a|0;b=2>arguments.length?2147483647:b|0;var f=this._children.length;(0>a||0>b||b<a)&&throwError("RangeError",Errors.ParamRangeError);if(0!==f){b>f-1&&(b=f-1);for(f=b-a+1;f--;)this.removeChildAt(a)}},swapChildren:function(a,b){(a._parent!==this||b._parent!==this)&&throwError("ArgumentError",Errors.NotAChildError);this.swapChildrenAt(this.getChildIndex(a),this.getChildIndex(b))},swapChildrenAt:function(a,b){var f=this._children,g=f.length;(0>a||a>
g||0>b||b>g)&&throwError("RangeError",Errors.ParamRangeError);var g=f[a],l=f[b];f[a]=l;f[b]=g;g._index=b;l._index=a;g._owned=!1;l._owned=!1;g._invalidate();l._invalidate()},destroy:function(){this._destroyed||(this._destroyed=!0,this._children.forEach(function(a){a.destroy&&a.destroy()}),this.cleanupBroadcastListeners())}},b=Object.getOwnPropertyDescriptor;a.initialize=function(){this._tabChildren=this._mouseChildren=!0;this._sparse=!1;this._isContainer=!0};a.__glue__={"native":{instance:{numChildren:b(a,
"numChildren"),tabChildren:b(a,"tabChildren"),mouseChildren:b(a,"mouseChildren"),textSnapshot:b(a,"textSnapshot"),addChild:a.addChild,addChildAt:a.addChildAt,removeChild:a.removeChild,removeChildAt:a.removeChildAt,getChildIndex:a.getChildIndex,setChildIndex:a.setChildIndex,getChildAt:a.getChildAt,getChildByName:a.getChildByName,contains:a.contains,swapChildrenAt:a.swapChildrenAt,swapChildren:a.swapChildren,removeChildren:a.removeChildren}}};return a}.call(this),FrameLabelDefinition=function(){return{__class__:"flash.display.FrameLabel",
initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(a,b){this._name=a;this._frame=b},name:{get:function(){return this._name}},frame:{get:function(){return this._frame}}}}}}}.call(this),GraphicsDefinition=function(){var a={__class__:"flash.display.Graphics",initialize:function(){this._paths=[];this.beginPath();this._bitmap=null;this._parent=0;this.strokeBbox=this.bbox=null},_invalidate:function(){this.strokeBbox=this.bbox=null;this._parent._invalidate();this._parent._invalidateBounds()},
beginPath:function(){var a=this._currentPath;if(!a||!(0===a.commands.length||1===a.commands.length&&1===a.commands[0])){var d=this._currentPath=new ShapePath(null,null);this._paths.push(d);a&&(d.fillStyle=a.fillStyle,d.lineStyle=a.lineStyle,d.fillRule=a.fillRule)}},_drawPathObject:function(a){"flash.display.GraphicsPath"===a.__class__?this.drawPath(a.commands,a.data,a.winding):"flash.display.GraphicsTrianglePath"===a.__class__&&this.drawTriangles(a.vertices,a.indices,a.uvtData,a.culling)},draw:function(a,
d,e,f){for(var g=this._paths,l=0;l<g.length;l++)g[l].draw(a,d,e,f)},beginFill:function(a,d){void 0===d&&(d=1);this.beginPath();this._currentPath.fillStyle=d?{style:rgbIntAlphaToStr(a,d)}:null},beginGradientFill:function(a,d,e,f,g,l,m,p){a=createGradientStyle(a,d,e,f,g,l,m,p);this.beginPath();this._currentPath.fillStyle=a},beginBitmapFill:function(a,d,e,f){this.beginPath();this._currentPath.fillStyle=createPatternStyle(a,d,!1!==e,!!f)},clear:function(){this._invalidate();this._paths=[];this._currentPath=
null;this.beginPath()},copyFrom:function(){notImplemented("Graphics#copyFrom")},cubicCurveTo:function(a,d,e,f,g,l){this._invalidate();this._currentPath.cubicCurveTo(20*a|0,20*d|0,20*e|0,20*f|0,20*g|0,20*l|0)},curveTo:function(a,d,e,f){this._invalidate();this._currentPath.curveTo(20*a|0,20*d|0,20*e|0,20*f|0)},drawCircle:function(a,d,e){var f=2*e;this.drawRoundRect(a-e,d-e,f,f,f,f)},drawEllipse:function(a,d,e,f){this.drawRoundRect(a,d,e,f,e,f)},drawPath:function(a,d,e){this._invalidate();this.beginPath();
this._currentPath.fillRule=e||"evenOdd";this._currentPath.commands=a;this._currentPath.data=d},drawRect:function(a,d,e,f){isNaN(e+f)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();this._currentPath.rect(20*a|0,20*d|0,20*e|0,20*f|0)},drawRoundRect:function(a,d,e,f,g,l){(isNaN(e+f+g)||void 0!==l&&isNaN(l))&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();void 0===l&&(l=g);a=20*a|0;d=20*d|0;e=20*e|0;f=20*f|0;if(!l||!g)this._currentPath.rect(a,d,e,f);
else{g=20*(g/2)|0;l=20*(l/2)|0;var m=e/2|0,p=f/2|0;g>m&&(g=m);l>p&&(l=p);m===g&&p===l?g===l?this._currentPath.circle(a+g,d+l,g):this._currentPath.ellipse(a+g,d+l,g,l):(e=a+e,f=d+f,m=a+g,g=e-g,p=d+l,l=f-l,this._currentPath.moveTo(e,l),this._currentPath.curveTo(e,f,g,f),this._currentPath.lineTo(m,f),this._currentPath.curveTo(a,f,a,l),this._currentPath.lineTo(a,p),this._currentPath.curveTo(a,d,m,d),this._currentPath.lineTo(g,d),this._currentPath.curveTo(e,d,e,p),this._currentPath.lineTo(e,l))}},drawRoundRectComplex:function(a,
d,e,f,g,l,m,p){isNaN(e+f+g+l+m+p)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();a=20*a|0;d=20*d|0;e=20*e|0;f=20*f|0;if(!g&&!l&&!m&&!p)this._currentPath.rect(a,d,e,f);else{g=20*g|0;l=20*l|0;m=20*m|0;p=20*p|0;e=a+e;f=d+f;var r=a+g;this._currentPath.moveTo(e,f-p);this._currentPath.curveTo(e,f,e-p,f);this._currentPath.lineTo(a+m,f);this._currentPath.curveTo(a,f,a,f-m);this._currentPath.lineTo(a,d+g);this._currentPath.curveTo(a,d,r,d);this._currentPath.lineTo(e-l,d);this._currentPath.curveTo(e,
d,e,d+l);this._currentPath.lineTo(e,f-p)}},drawTriangles:function(a,d,e,f){if(!(null===a||0===a.length)){var g=a.length/2;d?d.length%3&&throwError("ArgumentError",Errors.InvalidParamError):a.length%6&&throwError("ArgumentError",Errors.InvalidParamError);e&&e.length!=2*g&&e.length!=3*g&&throwError("ArgumentError",Errors.InvalidParamError);"none"!==f&&"negative"!==f&&"positive"!==f&&throwError("ArgumentError",Errors.InvalidEnumError,"culling");notImplemented("Graphics#drawTriangles")}},endFill:function(){this.beginPath();
this._currentPath.fillStyle=null},lineBitmapStyle:function(a,d,e,f){this.beginPath();this._currentPath.lineStyle=createPatternStyle(a,d,e,f)},lineGradientStyle:function(a,d,e,f,g,l,m,p){a=createGradientStyle(a,d,e,f,g,l,m,p);this.beginPath();this._currentPath.lineStyle=a},lineStyle:function(a,d,e,f,g,l,m,p){this.beginPath();a?(void 0===e&&(e=1),void 0===p&&(p=3),this._currentPath.lineStyle={style:rgbIntAlphaToStr(d,e),lineCap:l||"round",lineJoin:l||"round",width:20*a|0,miterLimit:2*p}):this._currentPath.lineStyle=
null},lineTo:function(a,d){this._invalidate();this._currentPath.lineTo(20*a|0,20*d|0)},moveTo:function(a,d){this._currentPath.moveTo(20*a|0,20*d|0)},_getBounds:function(a){var d=a?this.strokeBbox:this.bbox;if(d)return d;for(var d=this._paths,e=[],f=[],g=[],l=[],m=0,p=d.length;m<p;m++){var r=d[m];if(r.commands.length&&(r=r.getBounds(a)))e.push(r.xMin),f.push(r.yMin),g.push(r.xMax),l.push(r.yMax)}d=0===e.length?{xMin:0,yMin:0,xMax:0,yMax:0}:{xMin:Math.min.apply(Math,e),yMin:Math.min.apply(Math,f),xMax:Math.max.apply(Math,
g),yMax:Math.max.apply(Math,l)};a?this.strokeBbox=d:this.bbox=d;return d}};a.__glue__={"native":{instance:{beginFill:a.beginFill,beginGradientFill:a.beginGradientFill,beginBitmapFill:a.beginBitmapFill,beginFillObject:a.beginFillObject,beginStrokeObject:a.beginStrokeObject,clear:a.clear,copyFrom:a.copyFrom,cubicCurveTo:a.cubicCurveTo,curveTo:a.curveTo,drawCircle:a.drawCircle,drawEllipse:a.drawEllipse,drawPath:a.drawPath,drawRect:a.drawRect,drawRoundRect:a.drawRoundRect,drawRoundRectComplex:a.drawRoundRectComplex,
drawTriangles:a.drawTriangles,endFill:a.endFill,lineBitmapStyle:a.lineBitmapStyle,lineGradientStyle:a.lineGradientStyle,lineStyle:a.lineStyle,moveTo:a.moveTo,lineTo:a.lineTo}}};return a}.call(this);function createPatternStyle(a,b,d,e){return{style:factoryCtx.createPattern(a._drawable,!1===d?"no-repeat":"repeat"),transform:b?{a:b.a,b:b.b,c:b.c,d:b.d,e:b.tx,f:b.ty}:{a:1,b:0,c:0,d:1,e:0,f:0},smooth:e}}
function createGradientStyle(a,b,d,e,f,g,l,m){null===a||void 0===a&&throwError("TypeError",Errors.NullPointerError,"type");null===b||void 0===a&&throwError("TypeError",Errors.NullPointerError,"colors");"linear"===a||"radial"===a||throwError("ArgumentError",Errors.InvalidEnumError,"type");g=[];l=0;for(var p=b.length;l<p;l++)g.push({ratio:e[l]/255,color:rgbIntAlphaToStr(b[l],d[l])});return{style:"linear"===a?buildLinearGradientFactory(g):buildRadialGradientFactory(m||0,g),transform:f?{a:819.2*f.a,b:819.2*
f.b,c:819.2*f.c,d:819.2*f.d,e:f.tx,f:f.ty}:{a:819.2,b:0,c:0,d:819.2,e:0,f:0}}}function drawGraphicsData(a){if(null!==a)for(var b=0;b<a.length;b++){var d=a[b];flash.display.IGraphicsPath.class.isInstanceOf(d)?this._drawPathObject(d):flash.display.IGraphicsStroke.class.isInstanceOf(d)?this.beginStrokeObject(d):flash.display.IGraphicsFill.class.isInstanceOf(d)&&this.beginFillObject(d)}}
var InteractiveObjectDefinition=function(){var a={initialize:function(){this._contextMenu=null;this._doubleClickEnabled=!1;this._focusRect=null;this._mouseEnabled=!0;this._tabEnabled=!1},get accessibilityImplementation(){return null},set accessibilityImplementation(a){somewhatImplemented("accessibilityImplementation")},get contextMenu(){somewhatImplemented("contextMenu");return this._contextMenu},set contextMenu(a){somewhatImplemented("contextMenu");this._contextMenu=a},get doubleClickEnabled(){return this._doubleClickEnabled},
set doubleClickEnabled(a){this._doubleClickEnabled=a},get focusRect(){return this._focusRect},set focusRect(a){this._focusRect=a},get mouseEnabled(){return this._mouseEnabled},set mouseEnabled(a){this._mouseEnabled=a},get needsSoftKeyboard(){return!1},set needsSoftKeyboard(a){notImplemented()},get softKeyboardInputAreaOfInterest(){return null},set softKeyboardInputAreaOfInterest(a){notImplemented()},get tabEnabled(){return this._tabEnabled},set tabEnabled(a){var b=this._tabEnabled;this._tabEnabled=
a;b!==a&&this._dispatchEvent(new flash.events.Event("tabEnabledChange",!1,!1))},requestSoftKeyboard:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{tabEnabled:b(a,"tabEnabled"),tabIndex:{get:function(){return this._tabIndex},set:function(a){this._tabIndex=a}},focusRect:b(a,"focusRect"),mouseEnabled:b(a,"mouseEnabled"),doubleClickEnabled:b(a,"doubleClickEnabled"),accessibilityImplementation:b(a,"accessibilityImplementation"),softKeyboardInputAreaOfInterest:b(a,
"softKeyboardInputAreaOfInterest"),needsSoftKeyboard:b(a,"needsSoftKeyboard"),contextMenu:b(a,"contextMenu"),requestSoftKeyboard:a.requestSoftKeyboard}}};return a}.call(this),$RELEASE=!1,LoaderDefinition=function(){var a=Shumway.AVM1.AS2Context,b=Shumway.AVM1.executeActions,d=Shumway.AVM1.AS2ActionsData,e=document.head;e.insertBefore(document.createElement("style"),e.firstChild);var f=document.styleSheets[0],e={__class__:"flash.display.Loader",initialize:function(){this._contentLoaderInfo=new flash.display.LoaderInfo;
this._contentLoaderInfo._loader=this;this._dictionary={};this._dictionaryResolved={};this._displayList=null;this._timeline=[];this._worker=this._uncaughtErrorEvents=this._lastPromise=null;var a=AVM2.currentAbc();a&&a.env.loader&&(this._contentLoaderInfo._loaderURL=a.env.loader._contentLoaderInfo._url)},_commitData:function(a){switch(a.command){case "init":this._init(a.result);break;case "progress":this._updateProgress(a.result);break;case "complete":var d=new Promise(function(a){avm2.systemDomain.onMessage.register("frameConstructed",
function r(d){"frameConstructed"===d&&(a(),avm2.systemDomain.onMessage.unregister("frameConstructed",r))})});this._lastPromise.then(function(){this._contentLoaderInfo._dispatchEvent("parsed")}.bind(this));Promise.all([d,this._lastPromise]).then(function(){this._content._complete=!0;this._contentLoaderInfo._dispatchEvent("complete")}.bind(this));(a=a.stats)&&TelemetryService.reportTelemetry(a);this._worker&&this._worker.terminate();break;case "empty":this._lastPromise=Promise.resolve();break;case "error":this._contentLoaderInfo._dispatchEvent("ioError",
flash.events.IOErrorEvent);break;default:if(0===a.id)break;a.isSymbol?this._commitSymbol(a):"frame"===a.type?this._commitFrame(a):"image"===a.type&&this._commitImage(a)}},_updateProgress:function(a){var d=this._contentLoaderInfo;d._bytesLoaded=a.bytesLoaded||0;d._bytesTotal=a.bytesTotal||0;a=new flash.events.ProgressEvent("progress",!1,!1,d._bytesLoaded,d._bytesTotal);d._dispatchEvent(a)},_buildFrame:function(a,d,b,e){var f=this._dictionary,u=this._dictionaryResolved,v={},w=[],z=e.depths;if(a)for(var y=
a.depths,B=0;B<y.length;B++){var A=y[B];null!==z[A]&&(v[A]=a[A],w.push(A))}for(A in z)if(y=z[A]){if(y.move){var B=y,y=cloneObject(a[A]),s;for(s in B){var E=B[s];E&&(y[s]=E)}}y.symbolId&&((B=f[y.symbolId])&&!u[y.symbolId]&&b.push(B),y=cloneObject(y),Object.defineProperty(y,"symbolInfo",{get:function(a,d){return function(){return a[d]}}(u,y.symbolId)}));v[A]||w.push(A);v[A]=y}w.sort(sortNumeric);v.depths=w;for(B=e.repeat;B--;)d.push(v);return v},_commitFrame:function(a){var e=a.abcBlocks,f=a.actionBlocks,
p=a.initActionBlocks,r=a.exports,u=a.symbolClasses,v=a.sceneData,w=this,z=w._dictionary,y=w._contentLoaderInfo,B=w._timeline,A=B.length+1,s,E=new Promise(function(a){s=a}),H=a.labelName,D=this._lastPromise;this._lastPromise=E;E=[D];this._displayList=this._buildFrame(this._displayList,B,E,a,A);var G=B.length;a.bgcolor?y._backgroundColor=a.bgcolor:isNullOrUndefined(y._backgroundColor)&&(y._backgroundColor={red:255,green:255,blue:255,alpha:255});Promise.all(E).then(function(){if(e&&w._isAvm2Enabled)for(var a=
avm2.applicationDomain,d=0,b=e.length;d<b;d++){var f=new AbcFile(e[d].data,"abc_block_"+d);f.env.loader=w;e[d].flags?a.loadAbc(f):a.executeAbc(f)}if(u&&w._isAvm2Enabled){for(var g=[],d=0,b=u.length;d<b;d++)if(a=u[d],f=z[a.symbolId])f.then(function(a){return function(d){d.className=a;avm2.applicationDomain.getClass(a).setSymbol(d.props)}}(a.className)),g.push(f);return Promise.all(g)}if(r&&!w._isAvm2Enabled){g=[];d=0;for(b=r.length;d<b;d++)if(a=r[d],f=z[a.symbolId])f.then(function(a){return function(d){w._avm1Context.addAsset(a,
d.props)}}(a.className)),g.push(f);return Promise.all(g)}}).then(function(){var e=w._content,l;if(e){if(e._framesLoaded=G,H&&e._labelMap&&void 0===e._labelMap[H]){e._labelMap[H]=A;for(var r=0,u=e.symbol.scenes.length;r<u;r++)if(P=e.symbol.scenes[r],A>=P._startFrame&&A<=P._endFrame){P.labels.push(new flash.display.FrameLabel(H,A-P._startFrame));break}}}else{r=w._parent;!0;e=w._dictionaryResolved[0];u=avm2.applicationDomain.getClass(e.className);e=u.createAsSymbol({framesLoaded:G,loader:w,parent:r||
w,index:r?0:-1,level:r?0:-1,timeline:B,totalFrames:e.props.totalFrames,stage:w._stage,complete:a.complete});if(!w._isAvm2Enabled){var z=w._avm1Context,D=e;if(r&&r!==w._stage){for(D=r.loaderInfo._loader;D._parent&&D._parent!==w._stage;)D=D._parent.loaderInfo._loader;if(D._isAvm2Enabled){somewhatImplemented("AVM1Movie");this._worker&&this._worker.terminate();return}D=D._content}D=D._getAS2Object();z.globals.asSetPublicProperty("_root",D);z.globals.asSetPublicProperty("_level0",D);z.globals.asSetPublicProperty("_level1",
D);var E=w.loaderInfo._parameters;for(l in E)l in D||(D[l]=E[l])}r&&r==w._stage&&0===w._stage._children.length?(r._frameRate=y._frameRate,r._stageHeight=y._height,r._stageWidth=y._width,r._root=e,r._setup()):w._children.push(e);l=e.symbol.labelMap=createEmptyObject();if(v){for(var D=[],O=e.symbol.totalFrames-1,V=v.scenes,M=v.labels,r=V.length;r--;){for(var L=V[r],E=L.offset,P=[],K=M.length;K--;){var R=M[K];R.frame>=E&&R.frame<=O&&(l[R.name]=R.frame+1,P.unshift(new flash.display.FrameLabel(R.name,
R.frame-E+1)))}var P=new flash.display.Scene(L.name,P,O-E+1);P._startFrame=E+1;P._endFrame=O+1;D.unshift(P);O=E-1}e.symbol.scenes=D}else P=[],H&&(l[H]=A,P.push(new flash.display.FrameLabel(H,A))),P=new flash.display.Scene("Scene 1",P,e.symbol.totalFrames),P._startFrame=1,P._endFrame=e.symbol.totalFrames,e.symbol.scenes=[P];w._stage&&(w._stage._children[0]=e);u.instanceConstructor.call(e);w._content=e}a.startSounds&&e._registerStartSounds(A,a.startSounds);a.soundStream&&e._initSoundStream(a.soundStream);
a.soundStreamBlock&&e._addSoundStreamBlock(A,a.soundStreamBlock);if(!w._isAvm2Enabled){z=w._avm1Context;if(p)for(r=0;r<p.length;r++)u=p[r].spriteId,l=new d(p[r].actionsData,"f"+A+"s"+u+"i"+r),e.addFrameScript(A-1,function(a,d,e){if(!e.executed)return e.executed=!0,b(a,z,this._getAS2Object())}.bind(e,l,u,{executed:!1}));if(f)for(r=0;r<f.length;r++)l=new d(f[r],"f"+A+"i"+r),e.addFrameScript(A-1,function(a){return function(){return b(a,z,this._getAS2Object())}}(l))}1===A&&y._dispatchEvent(new flash.events.Event("init",
!1,!1));s(a)})},_commitImage:function(a){var d=this,b;this._lastPromise=new Promise(function(a){b=a});var e=new Image;a.props.img=e;e.onload=function(){var e=avm2.systemDomain.getClass("flash.display.Bitmap"),f=avm2.systemDomain.getClass("flash.display.BitmapData"),p=a.props;p.parent=d._parent;p.stage=d._stage;p.skipCopyToCanvas=!0;p=f.createAsSymbol(p);f.instanceConstructor.call(p,0,0,!0,4294967295);f=e.createAsSymbol(p);e.instanceConstructor.call(f,p);f._parent=d;d._children.push(f);d._invalidateBounds();
d._content=f;b(a);e=d._contentLoaderInfo;e._width=f.width;e._height=f.height;e._dispatchEvent("init")};e.src=URL.createObjectURL(a.data);a.data=null},_commitSymbol:function(a){var e=this._dictionary,m=this._dictionaryResolved;if("updates"in a)e[a.id].then(function(d){for(var b in a.updates)d.props[b]=a.updates[b]});else{var p="flash.display.DisplayObject",r=a.require,u=[],v={symbolId:a.id,loader:this},w,z=new Promise(function(a){w=a});if(r&&r.length)for(var y=0,B=r.length;y<B;y++){var A=r[y],s=e[A];
s&&!m[A]&&u.push(s)}switch(a.type){case "button":var B={},E;for(E in a.states){for(var A=[],r={},s=a.states[E],H=Object.keys(s),y=0;y<H.length;y++){var D=H[y],G=s[D],F=e[G.symbolId];F&&!m[G.symbolId]&&u.push(F);A.push(F);r[D]=Object.create(G,{symbolInfo:{get:function(a,d){return function(){return a[d]}}(m,G.symbolId)}})}H.sort(sortNumeric);r.depths=H;B[E]={className:"flash.display.Sprite",props:{loader:this,timeline:[r]}}}p="flash.display.SimpleButton";v.states=B;v.buttonActions=a.buttonActions;break;
case "font":if(fromCharCode.apply(null,a.codes)&&(f.insertRule('@font-face{font-family:"'+a.uniqueName+'";src:url(data:font/opentype;base64,'+btoa(a.data)+")}",f.cssRules.length),!/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.test(window.navigator.userAgent))){var Q=document.createElement("div");Q.setAttribute("style",'position: absolute; top: 0; right: 0;visibility: hidden; z-index: -500;font-family:"'+a.uniqueName+'";');Q.textContent="font test";document.body.appendChild(Q);y=new Promise(function(a){setTimeout(function(){a();
document.body.removeChild(Q)},200)});u.push(y)}p="flash.text.Font";v.name=a.name;v.uniqueName=a.uniqueName;v.charset=a.charset;v.bold=a.bold;v.italic=a.italic;v.metrics=a.metrics;this._registerFont(p,v);break;case "image":var T=new Image,S,y=new Promise(function(a){S=a});T.onload=function(){if(a.mask){var d=document.createElement("canvas");d.width=a.width;d.height=a.height;var b=d.getContext("2d");b.drawImage(T,0,0);for(var e=b.getImageData(0,0,a.width,a.height),f=e.data,l=a.mask,m=e.width*e.height,
p=0,r=3;p<m;p++,r+=4)f[r]=l[p];b.putImageData(e,0,0);v.img=d}S()};T.src=URL.createObjectURL(a.data);u.push(y);p="flash.display.Bitmap";v.img=T;v.width=a.width;v.height=a.height;break;case "label":y=new Function("c,r,ct",a.data);p="flash.text.StaticText";v.bbox=a.bbox;v.draw=y;break;case "text":v.bbox=a.bbox;v.html=a.html;"label"===a.type?p="flash.text.StaticText":(p="flash.text.TextField",v.tag=a.tag,v.variableName=a.variableName);break;case "shape":p=a.morph?"flash.display.MorphShape":"flash.display.Shape";
v.bbox=a.bbox;v.strokeBbox=a.strokeBbox;v.paths=a.paths;v.dictionaryResolved=m;break;case "sound":if(!a.pcm&&!PLAY_USING_AUDIO_TAG){var Y,y=new Promise(function(a){Y=a});MP3DecoderSession.processAll(a.packaged.data,function(a,d,b,e){a.pcm=d||new Uint8Array(0);Y();e&&console.error("ERROR: "+e)}.bind(null,v));u.push(y)}p="flash.media.Sound";v.sampleRate=a.sampleRate;v.channels=a.channels;v.pcm=a.pcm;v.packaged=a.packaged;break;case "binary":v.data=a.data;break;case "sprite":r=null;E=a.frameCount;A=
{};s=1;G=a.frames;H=[];D=[];y=0;for(B=G.length;y<B;y++){F=G[y];s=H.length+1;F.labelName&&(A[F.labelName]=s);if(F.startSounds){D[s]=F.startSounds;for(var I=0;I<F.startSounds.length;I++){var J=F.startSounds[I].soundId,O=e[J];O&&!m[J]&&u.push(O)}}r=this._buildFrame(r,H,u,F,s)}r={};if(!this._isAvm2Enabled&&a.frameScripts){B=a.frameScripts;for(y=0;y<B.length;y+=2)s=B[y]+1,G=function(a,d){return function(){return b(a,d._avm1Context,this._getAS2Object())}}(new d(B[y+1],"s"+a.id+"f"+s+"i"+(r[s]?r[s].length:
0)),this),r[s]?r[s].push(G):r[s]=[G]}p="flash.display.MovieClip";v.timeline=H;v.framesLoaded=E;v.labelMap=A;v.frameScripts=r;v.totalFrames=E;v.startSoundRegistrations=D}e[a.id]=z;Promise.all(u).then(function(){var d={className:p,props:v};m[a.id]=d;w(d)})}},_registerFont:function(a,d){this._vmPromise.then(function(){var b=avm2.applicationDomain.getClass(a),e=b.createAsSymbol(d);b.instanceConstructor.call(e)})},_init:function(a){var d=this,b=d._contentLoaderInfo;b._swfVersion=a.swfVersion;var e=a.bbox;
b._width=e.xMax-e.xMin;b._height=e.yMax-e.yMin;b._frameRate=a.frameRate;var f,u,v=new Promise(function(a,d){f=a;u=d});v.resolve=f;v.reject=u;b=new Promise(function(b){v.then(function(){var e={className:"flash.display.MovieClip",props:{totalFrames:a.frameCount}};d._dictionaryResolved[0]=e;b(e)})});d._dictionary[0]=b;d._lastPromise=b;d._vmPromise=v;d._isAvm2Enabled=a.fileAttributes.doAbc;this._setup()},_load:function(a){flash.net.URLRequest.class.isInstanceOf(a)&&(this._contentLoaderInfo._url=a._url);
var d;d=new Worker(SHUMWAY_ROOT+"shumway-worker.js");var b=this;b._worker=d;d.onmessage=function(a){"exception"===a.data.type?avm2.exceptions.push({source:"parser",message:a.data.message,stack:a.data.stack}):b._commitData(a.data)};if(flash.net.URLRequest.class.isInstanceOf(a)){var e=FileLoadingService.createSession();e.onprogress=function(a,b){d.postMessage({data:a,progress:b})};e.onerror=function(a){b._commitData({command:"error",error:a})};e.onopen=function(){d.postMessage("pipe:")};e.onclose=function(){d.postMessage({data:null})};
e.open(a._toFileRequest())}else d.postMessage(a)},_setup:function(){var d=this,b=d._stage;if(d._isAvm2Enabled)avm2.systemDomain.getClass("flash.ui.Mouse")._stage=b,d._vmPromise.resolve();else if(avm2.loadAVM1){var e=function(){var e=a.create(d._contentLoaderInfo._swfVersion);e.stage=b;d._avm1Context=e;avm1lib.AS2Key.class.__bind(b);avm1lib.AS2Mouse.class.__bind(b);b._addEventListener("frameConstructed",e.flushPendingScripts.bind(e),!1,Number.MAX_VALUE);d._vmPromise.resolve()};avm2.isAVM1Loaded?a.instance?
(d._avm1Context=a.instance,d._vmPromise.resolve()):e():(avm2.isAVM1Loaded=!0,avm2.loadAVM1(e))}else d._vmPromise.reject("AVM1 loader is not found")},get contentLoaderInfo(){return this._contentLoaderInfo},get content(){somewhatImplemented("Loader.content");return this._content}};e.__glue__={"native":{instance:{content:Object.getOwnPropertyDescriptor(e,"content"),contentLoaderInfo:Object.getOwnPropertyDescriptor(e,"contentLoaderInfo"),_getJPEGLoaderContextdeblockingfilter:function(){return 0},_load:e._load,
_loadBytes:function(a,d,b,e,f,u,v,w,z){this._load(a.a,d,b,e,f,u,v,w,z)},_unload:function(){somewhatImplemented("Loader._unload, do we even need to do anything here?")},_close:function(){somewhatImplemented("Loader._close")},_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");this._uncaughtErrorEvents=a}}}};return e}.call(this),LoaderInfoDefinition=
function(){return{__class__:"flash.display.LoaderInfo",initialize:function(){this._bytes=this._backgroundColor=this._actionScriptVersion=null;this._bytesTotal=this._bytesLoaded=0;this._uncaughtErrorEvents=this._width=this._url=this._swfVersion=this._loaderURL=this._loader=this._height=this._frameRate=this._contentType=this._content=null},__glue__:{"native":{"static":{getLoaderInfoByDefinition:function(){notImplemented("LoaderInfo.getLoaderInfoByDefinition")}},instance:{_getArgs:function(){var a=this._parameters,
b={},d;for(d in a)b[Multiname.getPublicQualifiedName(d)]=a[d];return b},_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");this._uncaughtErrorEvents=a},loaderURL:{get:function(){return this._loaderURL}},url:{get:function(){return this._url}},isURLInaccessible:{get:function(){return this._isURLInaccessible}},bytesLoaded:{get:function(){return this._bytesLoaded}},
bytesTotal:{get:function(){return this._bytesTotal}},applicationDomain:{get:function(){return new flash.system.ApplicationDomain(avm2.applicationDomain)}},swfVersion:{get:function(){return this._swfVersion}},actionScriptVersion:{get:function(){return this._actionScriptVersion}},frameRate:{get:function(){return this._frameRate}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},contentType:{get:function(){return this._contentType}},sharedEvents:{get:function(){return this._sharedEvents}},
parentSandboxBridge:{get:function(){return this._parentSandboxBridge},set:function(a){this._parentSandboxBridge=a}},childSandboxBridge:{get:function(){return this._childSandboxBridge},set:function(a){this._childSandboxBridge=a}},sameDomain:{get:function(){return this._sameDomain}},childAllowsParent:{get:function(){return this._childAllowsParent}},parentAllowsChild:{get:function(){return this._parentAllowsChild}},loader:{get:function(){return this._loader}},content:{get:function(){return this._loader._content}},
bytes:{get:function(){return this._bytes}}}},script:{instance:scriptProperties("public",["swfVersion","bytesTotal","bytesLoaded","parameters","uncaughtErrorEvent"])}}}}.call(this),MorphShapeDefinition=function(){return{__class__:"flash.display.MorphShape",initialize:function(){var a=this._graphics=new flash.display.Graphics,b=this.symbol;b&&b.paths&&(a._paths=b.paths,a.bbox=b.bbox,a.strokeBbox=b.strokeBbox,this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox))},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),
MovieClipDefinition=function(){var a={__class__:"flash.display.MovieClip",initialize:function(){this._currentFrame=this._playHead=1;this._currentLabel=this._currentFrameLabel=null;this._currentScene=0;this._enabled=!0;this._frameScripts={};this._framesLoaded=1;this._isPlaying=!1;this._labelMap={};this._sceneFrameMap={};this._sceneMap={};this._timeline=this._scenes=null;this._totalFrames=1;this._startSoundRegistrations=[];this._complete=this._allowFrameNavigation=!0;var a=this.symbol;if(a){this._timeline=
a.timeline||null;this._framesLoaded=a.framesLoaded||1;this._labelMap=Object.create(a.labelMap||null);this._frameScripts=Object.create(a.frameScripts||null);this._totalFrames=a.totalFrames||1;this._startSoundRegistrations=a.startSoundRegistrations||[];this._scenes=a.scenes||null;this._complete=!1===a.complete?!1:!0;var a=this._labelMap,b;for(b in a)1==a[b]&&(this._currentFrameLabel=this._currentLabel=b)}this._enterFrame(1);var f=this;this._onExecuteFrame=function l(){f._removeEventListener("executeFrame",
l);f._allowFrameNavigation=!1;f._callFrame(f._currentFrame);f._allowFrameNavigation=!0;f._playHead!==f._currentFrame&&f._gotoFrame(f._playHead,!0);f._postConstructChildren()};this._addEventListener("executeFrame",this._onExecuteFrame);if(this._complete&&1>=this._totalFrames)return this;this._onAdvanceFrame=function(){var a=f._playHead+1;if(f._complete&&a>f._totalFrames)a=1;else if(a>f._framesLoaded)return;f._updateDisplayList(a);f._sparse&&f._addEventListener("constructChildren",f._onConstructChildren);
f._startSounds(a);f._enterFrame(a);a in f._frameScripts&&f._addEventListener("executeFrame",f._onExecuteFrame)};this._onConstructChildren=function m(){f._removeEventListener("constructChildren",m);f._constructChildren()};this.play()},_updateDisplayList:function(a){this._destructChildren(a);this._declareChildren(a)},_declareChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1])for(var b=null,f=this._currentDisplayList,g=a.depths,l=this._children.length,
m=g.length;m--;){for(var p=g[m],r=p|0;f&&f.depth>r;)b=f,f=f.next;var u=null;f&&f.depth===r&&(u=f.obj)&&u._owned&&(l=this.getChildIndex(u));r=f&&f.depth===r?f.cmd:null;if((p=a[p])&&p!==r)r&&u&&p.symbolId===r.symbolId&&p.ratio===r.ratio?(u._animated&&(u._invalidate(),p.hasMatrix&&u._setTransformMatrix(p.matrix,!1),p.hasCxform&&(u._cxform=p.cxform),p.clip&&(u._clipDepth=p.clipDepth),p.hasName&&(u.name=p.name),p.blend&&(u._blendMode=this._resolveBlendMode(p.blendMode))),f.cmd=p):(u=this._addTimelineChild(p,
l),u.next=f,b?b.next=u:this._currentDisplayList=u,b=u)}}},_destructChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1]){for(var f=null,g=this._currentDisplayList,b=null;g;){var l=g.cmd,m=a[g.depth];!m||m.symbolId!==l.symbolId||m.ratio!==l.ratio?(l=g.next,f?f.next=l:this._currentDisplayList=l,g.next=b,b=g,g=l):(f=g,g=g.next)}for(;b;){if((a=b.obj)&&a._owned)this._sparse=!0,this.removeChild(a),a.destroy(),a._isPlaying&&a.stop();b=b.next}}}},_gotoFrame:function(a,
b){var f=a!==this._currentFrame;this._allowFrameNavigation||!this._loader._isAvm2Enabled?(f&&(this._updateDisplayList(a),this._enterFrame(a)),this._constructChildren(),this._loader._isAvm2Enabled&&10<=this.loaderInfo._swfVersion?(f&&this._addEventListener("executeFrame",this._onExecuteFrame),f=avm2.systemDomain,f.broadcastMessage("frameConstructed"),f.broadcastMessage("executeFrame"),f.broadcastMessage("exitFrame")):(f&&(b||!this._loader._isAvm2Enabled)&&this._callFrame(a),this._postConstructChildren())):
f&&(this._playHead=a)},_enterFrame:function(a){if(a!==this._currentFrame){this._currentFrameLabel=null;1===a&&(this._currentLabel=null);var b=this._labelMap,f;for(f in b)if(b[f]===a){this._currentFrameLabel=this._currentLabel=f;break}if(this._scenes){b=this._scenes;f=0;for(var g=b.length;f<g;f++){var l=b[f];if(a>=l._startFrame&&a<=l._endFrame){this._currentScene=f;break}}}this._playHead=this._currentFrame=a}},_callFrame:function(a){if(isNaN(a)&&(a=this._labelMap[a],void 0===a))return;if(a in this._frameScripts){a=
this._frameScripts[a];try{for(var b=0,f=a.length;b<f;b++)a[b].call(this)}catch(g){throw TelemetryService.reportTelemetry({topic:"error",error:2}),this.stop(),g;}}},_gotoButtonState:function(a){this._enabled&&this.gotoLabel("_"+a)},_getAbsFrameNum:function(a,b){1>a&&(a=1);if(b&&this._scenes&&1<this._scenes.length)for(var f=this._scenes,g=0;g<f.length;g++){var l=f[g];if(l.name===b){a+=l._startFrame-1;a>l._endFrame&&(a=l._endFrame);break}}return a>this._framesLoaded?this._framesLoaded:a},_registerStartSounds:function(a,
b){this._startSoundRegistrations[a]=b},_initSoundStream:function(a){this._soundStream=new MovieClipSoundStream(a,this)},_addSoundStreamBlock:function(a,b){this._soundStream.appendBlock(a,b)},_startSounds:function(a){var b=this._startSoundRegistrations[a];if(b)for(var f=this._sounds||(this._sounds={}),g=this.loaderInfo._loader,l=0;l<b.length;l++){var m=b[l],p=m.soundId,m=m.soundInfo,r=f[p];if(!r){var u=g._dictionaryResolved[p];if(!u)continue;r=avm2.systemDomain.findClass(u.className)?avm2.systemDomain.getClass(u.className):
avm2.applicationDomain.getClass(u.className);u=r.createAsSymbol(u.props);r.instanceConstructor.call(u);f[p]=r={object:u}}r.channel&&(r.channel.stop(),r.channel=null);m.stop||(r.channel=r.object.play(0,m.hasLoops?m.loopCount:0))}this._soundStream&&this._soundStream.playFrame(a)},_getAS2Object:function(){if(!this._as2Object)if(this._avm1SymbolClass){var a=this,b=this._avm1SymbolClass,f=function(){this.init(a);b.call(this)};f.prototype=Object.create(b.prototype);f.instanceConstructor=f;f.debugName="avm1 <symbol constructor wrapper>";
construct(f,[])}else new avm1lib.AS2MovieClip(this);return this._as2Object},get currentFrame(){var a=this._currentFrame;return this._scenes?a-this.currentScene._startFrame+1:a},get currentFrameLabel(){return this._currentFrameLabel},get currentLabel(){return this._currentLabel},get currentLabels(){if(this._scenes)return this._scenes[this._currentScene].labels;var a=[],b=this._labelMap,f;for(f in b)a.push(new flash.display.FrameLabel(f,b[f]));return a},get currentScene(){return this._scenes?this._scenes[this._currentScene]:
new flash.display.Scene("",this.currentLabels,this._framesLoaded)},get enabled(){return this._enabled},set enabled(a){this._enabled=a},get framesLoaded(){return this._framesLoaded},get totalFrames(){return this._totalFrames},get scenes(){return this._scenes||[new flash.display.Scene("",this.currentLabels,this._framesLoaded)]},get trackAsMenu(){return!1},set trackAsMenu(a){notImplemented()},addFrameScript:function(){for(var a=this._frameScripts,b=0,f=arguments.length;b<f;b+=2){var g=arguments[b]+1,
l=arguments[b+1];if(l){var m=a[g];m?m.push(l):a[g]=[l];g===this._currentFrame&&this._addEventListener("executeFrame",this._onExecuteFrame)}}},gotoAndPlay:function(a,b){this.play();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoAndStop:function(a,b){this.stop();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoLabel:function(a){a=this._labelMap[a];void 0!==a&&this._gotoFrame(a)},isPlaying:function(){return this._isPlaying},nextFrame:function(){this.stop();
this._currentFrame<this._framesLoaded&&this._gotoFrame(this._currentFrame+1)},nextScene:function(){this._scenes&&this._currentScene<this._scenes.length-1&&this._gotoFrame(this._scenes[this._currentScene+1]._startFrame)},play:function(){this._isPlaying||this._complete&&1>=this._totalFrames||(this._isPlaying=!0,this._addEventListener("advanceFrame",this._onAdvanceFrame))},prevFrame:function(){this.stop();1<this._currentFrame&&this._gotoFrame(this._currentFrame-1)},prevScene:function(){this._scenes&&
0<this._currentScene&&this._gotoFrame(this._scenes[this._currentScene-1]._startFrame)},stop:function(){this._isPlaying&&!(this._complete&&1>=this._totalFrames)&&(this._isPlaying=!1,this._removeEventListener("advanceFrame",this._onAdvanceFrame))}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{currentFrame:b(a,"currentFrame"),framesLoaded:b(a,"framesLoaded"),totalFrames:b(a,"totalFrames"),trackAsMenu:b(a,"trackAsMenu"),scenes:b(a,"scenes"),currentScene:b(a,"currentScene"),currentLabel:b(a,
"currentLabel"),currentFrameLabel:b(a,"currentFrameLabel"),enabled:b(a,"enabled"),isPlaying:b(a,"isPlaying"),play:a.play,stop:a.stop,nextFrame:a.nextFrame,prevFrame:a.prevFrame,gotoAndPlay:a.gotoAndPlay,gotoAndStop:a.gotoAndStop,addFrameScript:a.addFrameScript,prevScene:a.prevScene,nextScene:a.nextScene}}};return a}.call(this),MovieClipSoundStream=function(){function a(a,b){var f;try{f=b.addSourceBuffer("audio/mpeg"),a.mediaSource=b,a.sourceBuffer=f,a.rawFrames.forEach(function(a){f.appendBuffer(a)}),
delete a.rawFrames}catch(g){console.error("MediaSource mp3 playback is not supported: "+g)}}function b(d,b){this.movieClip=b;this.data={sampleRate:d.sampleRate,channels:d.channels};this.seekIndex=[];this.position=0;var f="mp3"===d.format;if(f&&PLAY_USING_AUDIO_TAG){var g=document.createElement("audio");g.preload="metadata";var l=g.loop=!1,m,p;g.addEventListener("timeupdate",function(){if(l){var a=g.currentTime-m,d=performance.now()-p;b._stage._frameScheduler.setDelta(d-1E3*a)}else m=g.currentTime,
p=performance.now(),l=!0,b._stage._frameScheduler.startTrackDelta()});g.addEventListener("pause",function(){b._stage._frameScheduler.endTrackDelta();l=!1});g.addEventListener("seeking",function(){b._stage._frameScheduler.endTrackDelta();l=!1});if(g.canPlayType("audio/mpeg")){this.element=g;"undefined"!==typeof MediaSource?(f=new MediaSource,f.addEventListener("sourceopen",a.bind(null,this,f)),g.src=URL.createObjectURL(f)):console.warn("MediaSource is not supported");this.rawFrames=[];return}}this.data.pcm=
new Float32Array(d.samplesCount*d.channels);if(f){var r=this;r.decoderPosition=0;r.decoderSession=new MP3DecoderSession;r.decoderSession.onframedata=function(a){var d=r.decoderPosition;r.data.pcm.set(a,d);r.decoderPosition=d+a.length}.bind(this);r.decoderSession.onerror=function(a){console.error("ERROR: MP3DecoderSession: "+a)}}}b.prototype={appendBlock:function(a,b){var f=this.position;this.seekIndex[a]=f+b.seek*this.data.channels;this.position=f+b.samplesCount*this.data.channels;if(this.sourceBuffer)this.sourceBuffer.appendBuffer(b.data);
else if(this.rawFrames)this.rawFrames.push(b.data);else{var g=this.decoderSession;g?g.pushAsync(b.data):this.data.pcm.set(b.pcm,f)}},playFrame:function(a){if(!isNaN(this.seekIndex[a])){var b=this.element;if(b){var f=this.data,g=this.seekIndex[a]/f.sampleRate/f.channels;if(!this.channel&&(this.movieClip._complete||this.sourceBuffer))this.sourceBuffer||(a=new Blob(this.rawFrames),b.src=URL.createObjectURL(a)),a=flash.media.SoundChannel.class,f=a.createAsSymbol({element:b}),a.instanceConstructor.call(f),
this.channel=f,this.waitFor=this.expectedFrame=0;else if(this.sourceBuffer||!isNaN(b.duration))this.mediaSource&&this.movieClip._complete&&(this.mediaSource.endOfStream(),this.mediaSource=null),f=b.currentTime,this.expectedFrame!==a?b.paused?(b.play(),b.addEventListener("playing",function p(){b.removeEventListener("playing",p);b.currentTime=g})):b.currentTime=g:0<this.waitFor?this.waitFor<=g&&(b.paused&&b.play(),this.waitFor=0):1<f-g?(console.warn("Sound is faster than frames by "+(f-g)),this.waitFor=
f-0.25,b.pause()):1<g-f&&(console.warn("Sound is slower than frames by "+(g-f)),b.currentTime=g+0.25),this.expectedFrame=a+1}else if(!this.sound){a=flash.media.Sound.class;var l=a.createAsSymbol(this.data);a.instanceConstructor.call(l);f=l.play();this.sound=l;this.channel=f}}}};return b}(),NativeMenuDefinition=function(){return{__class__:"flash.display.NativeMenu",initialize:function(){},__glue__:{"native":{"static":{},instance:{}}}}}.call(this),NativeMenuItemDefinition=function(){return{__class__:"flash.display.NativeMenuItem",
initialize:function(){},__glue__:{"native":{"static":{},instance:{enabled:{get:function(){somewhatImplemented("NativeMenuItem.enabled");return this._enabled},set:function(a){somewhatImplemented("NativeMenuItem.enabled");this._enabled=a}}}}}}}.call(this),SceneDefinition=function(){return{__class__:"flash.display.Scene",initialize:function(){this._endFrame=this._startFrame=1},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{name:{get:function(){notImplemented("Scene.name");
return this._name}},labels:{get:function(){notImplemented("Scene.labels");return this._labels}},numFrames:{get:function(){notImplemented("Scene.numFrames");return this._numFrames}}}}}}}.call(this),ShaderDefinition=function(){return{__class__:"flash.display.Shader",initialize:function(){this._data=null},__glue__:{"native":{"static":{},instance:{data:{get:function(){return this._data},set:function(a){this._data=a}},precisionHint:{get:function(){return this._precisionHint},set:function(a){this._precisionHint=
a}}}},script:{instance:Glue.ALL}}}}.call(this),ShaderDataDefinition=function(){return{__class__:"flash.display.ShaderData",initialize:function(){this._byteCode=null},__glue__:{"native":{"static":{},instance:{_setByteCode:function(a){this._byteCode=a}}},script:{instance:Glue.ALL}}}}.call(this),ShapeDefinition=function(){return{__class__:"flash.display.Shape",initialize:function(){var a=this._graphics=new flash.display.Graphics;a._parent=this;var b=this.symbol;if(b&&b.paths){a._paths=b.paths;for(var d=
0;d<b.paths.length;d++)b.paths[d]=finishShapePath(b.paths[d],b.dictionaryResolved);a.bbox=b.bbox;a.strokeBbox=b.strokeBbox;this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox);this.ratio=b.ratio||0}},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),SimpleButtonDefinition=function(){var a=Shumway.AVM1.executeActions,b=Shumway.AVM1.AS2ActionsData,d=[0,37,39,36,35,45,46,0,8,0,0,0,0,13,38,40,33,34,9,27],e=[0,0,1,128,64,0,0,
32,2,0,0,4,256,16,8,0];return{__class__:"flash.display.SimpleButton",initialize:function(){this._enabled=this._useHandCursor=!0;this._trackAsMenu=!1;this._hitTestState=this._downState=this._overState=this._upState=null;this._currentButtonState="up";this._mouseChildren=!1;this._buttonMode=!0;this._avm1StateCode=this._prevAvm1StateCode=0;this._avm1MouseEvents=null;this._isContainer=!0;var a=this.symbol;if(a){var d=a.states;d.down&&(this._downState=this._constructState(d.down,this));d.hitTest&&(this._hitTestState=
this._constructState(d.hitTest,this));d.over&&(this._overState=this._constructState(d.over,this));d.up&&(this._upState=this._constructState(d.up,this))}this._loader&&(!this._loader._isAvm2Enabled&&a&&a.buttonActions)&&this._addEventListener("addedToStage",function(){this._initAvm1Events(a.buttonActions,"s"+a.symbolId+"e")}.bind(this),!1)},_constructState:function(a){var d=avm2.systemDomain.findClass(a.className)?avm2.systemDomain.getClass(a.className):avm2.applicationDomain.getClass(a.className);
a=d.createAsSymbol(a.props);d.instanceConstructor.call(a);1===a._children.length&&(a=a._children[0],a._parent=null,a._index=-1);return a},_updateButton:function(){var a=null;switch(this._currentButtonState){case "up":a=this._upState;break;case "over":a=this._overState;break;case "down":a=this._downState}if(a){var d=this._children[0];if(d){if(d===a)return;this._stage&&this._stage._removeFromStage(d);d._invalidateTransform()}a?(this._children[0]=a,a._parent=this,a._invalidateTransform(),this._stage&&
this._stage._addToStage(a)):this._children.shift()}},_gotoButtonState:function(a){this._invalidateBounds();this._currentButtonState=a;this._updateButton();this._avm1MouseEvents&&this._processAvm1MouseEvents(this._avm1MouseEvents)},_getRegion:function(a){if(!this._hitTestState)return{xMin:0,yMin:0,xMax:0,yMax:0};var d=this._hitTestState.getBounds(null);return this._getTransformedRect(d,a)},_getAS2Object:function(){this._as2Object||new avm1lib.AS2Button(this);return this._as2Object},_initAvm1Events:function(e,
g){for(var l=this._loader._avm1Context,m=null,p=0;p<e.length;p++){var r=e[p],u=function(d){return a(d,l,this._getAS2Object())}.bind(this.parent,new b(r.actionsData,g+p)),v=r.mouseEventFlags;v&&(this._avm1MouseEvents||(this._avm1MouseEvents=[])).push({flags:v,listener:u});if(r=r.keyPress)m=m||(m=[]),m.push({keyCode:d[r]||0,charCode:r,listener:u})}if(m){var w=function(a){for(var d=0;d<m.length;d++){var b=m[d];(b.keyCode?b.keyCode===a.keyCode:b.charCode===a.charCode)&&b.listener()}},z=flash.events.KeyboardEvent;
this.stage._addEventListener(z.class.KEY_DOWN,w,!1);this._addEventListener("removedFromStage",function(a){a._removeEventListener(z.class.KEY_DOWN,w,!1)}.bind(this,this.stage),!1)}},_processAvm1MouseEvents:function(a){var d=this._avm1StateCode,b=("down"===this._currentButtonState?1:0)|("up"!==this._currentButtonState?2:0);if(d!==b){this._prevAvm1StateCode=d;this._avm1StateCode=b;d=e[d<<2|b];for(b=0;b<a.length;b++){var m=a[b];0!==(m.flags&d)&&m.listener()}}},__glue__:{"native":{instance:{_updateButton:function(){this._updateButton()},
useHandCursor:{get:function(){return this._useHandCursor},set:function(a){this._useHandCursor=a}},enabled:{get:function(){return this._enabled},set:function(a){this._enabled=a}},trackAsMenu:{get:function(){notImplemented("SimpleButton.trackAsMenu");return this._trackAsMenu},set:function(a){notImplemented("SimpleButton.trackAsMenu");this._trackAsMenu=a}},upState:{get:function(){return this._upState},set:function(a){this._upState=a;this._updateButton()}},overState:{get:function(){return this._overState},
set:function(a){this._overState=a;this._updateButton()}},downState:{get:function(){return this._downState},set:function(a){this._downState=a;this._updateButton()}},hitTestState:{get:function(){return this._hitTestState},set:function(a){a!==this._hitTestState&&(this._invalidate(),this._hitTestState=a)}},soundTransform:{get:function(){notImplemented("SimpleButton.soundTransform");return this._soundTransform},set:function(a){notImplemented("SimpleButton.soundTransform");this._soundTransform=a}}}}}}}.call(this),
SpriteDefinition=function(){var a=Shumway.AVM1.executeActions,b=Shumway.AVM1.AS2ActionsData,d={__class__:"flash.display.Sprite",initialize:function(){this._buttonMode=!1;this._hitArea=null;this._useHandCursor=!0;this._currentDisplayList=this._hitTarget=null;var a=this.symbol;if(a){if(this._graphics=a.graphics||new flash.display.Graphics,a.timeline&&(a=a.timeline[0]))for(var d=a.depths,b=0;b<d.length;b++){var e=a[d[b]];e&&(e=this._addTimelineChild(e),e.next=this._currentDisplayList,this._currentDisplayList=
e)}}else this._graphics=new flash.display.Graphics;this._graphics._parent=this},_addTimelineChild:function(a,d){var b=a.symbolInfo,e=Object.create(b.props);e.symbolId=a.symbolId;e.depth=a.depth;a.clip&&(e.clipDepth=a.clipDepth);a.hasCxform&&(e.cxform=a.cxform);a.hasMatrix&&(e.currentTransform=a.matrix);a.hasName&&(e.name=a.name);a.hasRatio&&(e.ratio=a.ratio/65535);a.blend&&(e.blendMode=a.blendMode);b={cmd:a,depth:a.depth,className:b.className,props:e,events:a.events,obj:null};void 0!==d?this._children.splice(d,
0,b):this._children.push(b);this._sparse=!0;return b},_constructChildren:function(){if(this._sparse){for(var a=this._loader,d=this._children,b=0;b<d.length;b++){var e=d[b];Counter.count("constructChild");if(flash.display.DisplayObject.class.isInstanceOf(e))e._index=b;else{var p=avm2.systemDomain.findClass(e.className)?avm2.systemDomain.getClass(e.className):avm2.applicationDomain.getClass(e.className),r=Object.create(e.props),u=r.name;r.animated=!0;r.owned=!0;r.parent=this;r.stage=this._stage;-1<
this._level&&(r.level=this._level+1);r.index=b;var v=p.createAsSymbol(r);u&&(this[Multiname.getPublicQualifiedName(u)]=v);p.instanceConstructor.call(v);flash.display.BitmapData.class.isInstanceOf(v)&&(p=v,v=flash.display.Bitmap.class.createAsSymbol(r),flash.display.Bitmap.class.instanceConstructor.call(v,p));a._isAvm2Enabled?v._dispatchEvent("load"):(this._initAvm1Bindings(v,u,e.events,"s"+r.symbolId+"c"),v._dispatchEvent("init"),v._dispatchEvent("construct"),v._needLoadEvent=!0);v._dispatchEvent("added",
void 0,!0);this._stage&&this._stage._addToStage(v);d[b]=v;e.obj=v}}this._sparse=!1}},_postConstructChildren:function(){var a=this._loader;if(a&&!a._isAvm2Enabled)for(var a=this._children,d=0;d<a.length;d++){var b=a[d];b._needLoadEvent&&(b._needLoadEvent=!1,b._dispatchEvent("load"))}},_duplicate:function(a,d){var b=this._loader,e=this._parent,p=e._children,r=this.class,u=this.symbol,v=Object.create(u);v.name=a;v.parent=e;v.depth=d;v=r.createAsSymbol(v);a&&(b&&!b._isAvm2Enabled&&!e.asHasProperty(void 0,
a,0,!1))&&e.asSetPublicProperty(a,v);r.instanceConstructor.call(v);v._index=p.length;p.push(v);b._isAvm2Enabled||(e._initAvm1Bindings(v,a,u&&u.events,"s"+u.symbolId+"d"),v._dispatchEvent("init"),v._dispatchEvent("construct"));v._dispatchEvent("load");v._dispatchEvent("added");this._stage&&v._invalidate();return v},_insertChildAtDepth:function(a){this.addChild(a);var d=a._name,b=this._loader;d&&(b&&!b._isAvm2Enabled&&!this._getAS2Object().asHasProperty(void 0,d,0,!0))&&this._getAS2Object().asSetPublicProperty(d,
a._getAS2Object())},_initAvm1Bindings:function(d,e,l,m){var p=this._loader._avm1Context,r=d.symbol;r&&r.variableName&&d._getAS2Object().asSetPublicProperty("variable",r.variableName);if(l){for(var r=[],u=0;u<l.length;u++){var v=l[u];if(v.eoe)break;var w=function(d){return a(d,p,this._getAS2Object())}.bind(d,new b(v.actionsData,m+u)),z;for(z in v)if(0===z.indexOf("on")&&v[z]){var y=z[2].toLowerCase()+z.substring(3),B=d;switch(y){case "enterFrame":y="frameConstructed";break;case "initialize":y="init";
break;case "mouseDown":case "mouseUp":case "mouseMove":B=this._stage}B._addEventListener(y,w,!1);r.push({name:y,fn:w,target:B})}}0<r.length&&d._addEventListener("removed",function(a,d){if(d._target===this)for(var b=0;b<a.length;b++)a[b].target._removeEventListener(a[b].name,a[b].fn,!1)}.bind(d,r),!1)}e&&(this._getAS2Object&&d._getAS2Object)&&this._getAS2Object().asSetPublicProperty(e,d._getAS2Object())},_gotoButtonState:function(){},get buttonMode(){return this._buttonMode},set buttonMode(a){this._buttonMode=
a},get graphics(){return this._graphics},get hitArea(){return this._hitArea},set hitArea(a){if(this._hitArea!==a&&(a&&a._hitTarget&&(a._hitTarget.hitArea=null),this._hitArea=a))a._hitTarget=this},get soundTransform(){notImplemented()},set soundTransform(a){notImplemented()},get useHandCursor(){return this._useHandCursor},set useHandCursor(a){this._useHandCursor=a;this._stage&&(this._stage._mouseMoved=!0)},startDrag:function(){notImplemented()},startTouchDrag:function(){notImplemented()},stopDrag:function(){notImplemented()},
stopTouchDrag:function(){notImplemented()}},e=Object.getOwnPropertyDescriptor;d.__glue__={"native":{instance:{graphics:e(d,"graphics"),buttonMode:e(d,"buttonMode"),dropTarget:e(d,"dropTarget"),startDrag:d.startDrag,stopDrag:d.stopDrag,startTouchDrag:d.startTouchDrag,stopTouchDrag:d.stopTouchDrag,constructChildren:d._constructChildren,hitArea:e(d,"hitArea"),useHandCursor:e(d,"useHandCursor"),soundTransform:e(d,"soundTransform")}}};return d}.call(this),StageDefinition=function(){return{__class__:"flash.display.Stage",
initialize:function(){this._frameRate=24;this._scaleMode="showAll";this._align="";this._stageHeight=this._stageWidth=0;this._quality="high";this._color=4294967295;this._stage=this;this._deferRenderEvent=!1;this._focus=null;this._showDefaultContextMenu=!0;this._displayState="normal";this._colorCorrection="default";this._stageFocusRect=!0;this._fullScreenSourceRect=null;this._wmodeGPU=!1;this._qtree=this._root=null;this._invalidRegions=new RegionCluster;this._mouseMoved=!1;this._mouseTarget=this;this._mouseEvents=
[];this._cursor="auto";this._stageVideos=[];this._concatenatedTransform.invalid=!1},_setup:function(){this._qtree=new QuadTree(0,0,this._stageWidth,this._stageHeight,null);this._invalid=!0},_addToStage:function(a){a._stage=this;a._level=a._parent._level+1;a._invalid=!0;for(var b=a._children,d=0;d<b.length;d++){var e=b[d];null===e._stage&&this._addToStage(e)}a._dispatchEvent("addedToStage")},_removeFromStage:function(a){for(var b=a._children,d=0;d<b.length;d++)b[d]._stage&&this._removeFromStage(b[d]);
a._dispatchEvent("removedFromStage");a._stage=null;a._level=-1;a._region&&(this._qtree.remove(a._region),this._invalidRegions.insert(a._region),a._region=null)},_processInvalidations:function(a){for(var b=this._qtree,d=this._invalidRegions,e=[],f=0,g=this._children,l=g.length;l--;){var m=g[l];a&&(m._invalid=!0);m._invisible=!m._visible;e.push(m)}for(;e.length;){for(var p=e.pop(),r=p._concatenatedTransform,g=p._children,l=g.length;l--;)m=g[l],flash.display.DisplayObject.class.isInstanceOf(m)&&(p._invalid&&
(m._invalid=!0),r.invalid&&(m._concatenatedTransform.invalid=!0),m._invisible=p._invisible||!m._visible,e.push(m));p._level&&r.invalid&&(l=p._currentTransform,g=p._parent._concatenatedTransform,r.a=l.a*g.a+l.b*g.c,r.b=l.a*g.b+l.b*g.d,r.c=l.c*g.a+l.d*g.c,r.d=l.d*g.d+l.c*g.b,r.tx=l.tx*g.a+g.tx+l.ty*g.c,r.ty=l.ty*g.d+g.ty+l.tx*g.b,r.invalid=!1);l=p._region;r=p._getRegion(r);g=p._invisible||!r||0===r.xMax-r.xMin||0===r.yMax-r.yMin||0>=r.xMax||r.xMin>=this._stageWidth||0>=r.yMax||r.yMin>=this._stageHeight;
p._invalid&&(l&&d.insert(l),!g&&(!l||r.xMin!==l.xMin||r.yMin!==l.yMin||r.xMax!==l.xMax||r.yMax!==l.yMax)&&d.insert(r));g?l&&(b.remove(l),p._region=null):l?(l.xMin=r.xMin,l.xMax=r.xMax,l.yMin=r.yMin,l.yMax=r.yMax,b.update(l)):(r.obj=p,b.insert(r),p._region=r);p._zindex=f++}e=new ShapePath;if(a)return e.rect(0,0,this._stageWidth,this._stageHeight),d.reset(),e;a=d.retrieve();for(l=0;l<a.length;l++){for(var g=a[l],f=g.xMin-g.xMin%20-40,p=g.yMin-g.yMin%20-40,r=g.xMax-g.xMax%20+80,g=g.yMax-g.yMax%20+80,
m=b.retrieve(f,r,p,g),u=0;u<m.length;u++)m[u].obj._invalid=!0;e.rect(f,p,r-f,g-p)}d.reset();return e},_handleMouseButtons:function(){if(0!==this._mouseEvents.length)switch(this._mouseEvents.shift()){case "mousedown":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("down");this._mouseTarget._dispatchEvent("mouseDown");break;case "mouseup":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("over"),this._mouseTarget._dispatchEvent("mouseUp")}},_handleMouse:function(){for(var a=
this._mouseX,b=this._mouseY,d=this._qtree.retrieve(a,a,b,b),e=[],f=0;f<d.length;f++){var g=d[f].obj,l=!1;if(flash.display.SimpleButton.class.isInstanceOf(g)){if(!g._enabled)continue;var m=g._hitTestState;m._parent=g;l=m._hitTest(!0,a,b,!0);m._parent=null}else l=g._hitTest(!0,a,b,!0);if(l){l=null;flash.display.InteractiveObject.class.isInstanceOf(g)||(l=g,g=g._parent);do g._mouseEnabled?null===l&&(l=g):l=null,g=g._parent;while(g);e.push(l)}}var p;if(e.length){e.sort(sortByZindex);for(f=e.length;f--;){p=
null;g=e[f];if(!flash.display.InteractiveObject.class.isInstanceOf(g))for(a=f;a--;)e[a]._parent===g._parent&&flash.display.InteractiveObject.class.isInstanceOf(e[a])&&(g=e[a],f=a);do{if(flash.display.InteractiveObject.class.isInstanceOf(g)&&(!p||!g._mouseChildren)&&!g._hitArea)p=g;g=g._parent}while(g);if(!(p!==e[f]&&flash.display.SimpleButton.class.isInstanceOf(p)))break}}p?p._hitTarget&&(p=p._hitTarget):p=this;if(p===this._mouseTarget)p._dispatchEvent("mouseMove");else{this._mouseTarget._buttonMode&&
this._mouseTarget._gotoButtonState("up");this._mouseTarget._dispatchEvent("mouseOut");e=this._mouseTarget;f=e._parent;a=p;b=a._parent;for(d="auto";0<=e._level&&e!==b;)e._hasEventListener("rollOut")&&e._dispatchEvent("rollOut"),e=e._parent;for(;0<=a._level&&a!==f;)a._hasEventListener("rollOver")&&a._dispatchEvent("rollOver"),a._buttonMode&&a._useHandCursor&&(d="pointer"),a=a._parent;p._buttonMode&&p._gotoButtonState("over");p._dispatchEvent("mouseOver");this._mouseTarget=p;this._cursor=d}},_as2SetLevel:function(a,
b){somewhatImplemented("Stage._as2SetLevel");this.addChild(b)},__glue__:{"native":{instance:{invalidate:function(){this._deferRenderEvent=this._invalid=!0},isFocusInaccessible:function(){notImplemented("Stage.isFocusInaccessible")},set_displayState:function(a){somewhatImplemented("Stage.set_displayState");this._displayState=a},get_simulatedFullScreenWidth:function(){notImplemented("Stage.get_simulatedFullScreenWidth")},get_simulatedFullScreenHeight:function(){notImplemented("Stage.get_simulatedFullScreenHeight")},
removeChildAt:function(){notImplemented("Stage.removeChildAt")},swapChildrenAt:function(){notImplemented("Stage.swapChildrenAt")},requireOwnerPermissions:function(){somewhatImplemented("Stage.requireOwnerPermissions")},frameRate:{get:function(){return this._frameRate},set:function(a){this._frameRate=a}},scaleMode:{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a;this._invalid=!0}},align:{get:function(){return this._align},set:function(a){this._align=a;this._invalid=!0}},stageWidth:{get:function(){return this._stageWidth/
20},set:function(a){notImplemented("Stage.stageWidth");this._stageWidth=20*a|0}},stageHeight:{get:function(){return this._stageHeight/20},set:function(a){notImplemented("Stage.stageHeight");this._stageHeight=20*a|0}},showDefaultContextMenu:{get:function(){return this._showDefaultContextMenu},set:function(a){somewhatImplemented("Stage.showDefaultContextMenu");this._showDefaultContextMenu=a}},focus:{get:function(){return this._focus},set:function(a){somewhatImplemented("Stage.focus");this._focus=a}},
colorCorrection:{get:function(){return this._colorCorrection},set:function(a){notImplemented("Stage.colorCorrection");this._colorCorrection=a}},colorCorrectionSupport:{get:function(){return!1}},stageFocusRect:{get:function(){return this._stageFocusRect},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._stageFocusRect=a}},quality:{get:function(){return this._quality},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._quality=a}},displayState:{get:function(){return this._displayState},
set:function(a){this._displayState=a}},simulatedDisplayState:{get:function(){notImplemented("Stage.simulatedDisplayState");return this._simulatedDisplayState},set:function(a){notImplemented("Stage.simulatedDisplayState");this._simulatedDisplayState=a}},fullScreenSourceRect:{get:function(){return this._fullScreenSourceRect},set:function(a){notImplemented("Stage.fullScreenSourceRect");this._fullScreenSourceRect=a}},simulatedFullScreenSourceRect:{get:function(){notImplemented("Stage.simulatedFullScreenSourceRect");
return this._simulatedFullScreenSourceRect},set:function(a){notImplemented("Stage.simulatedFullScreenSourceRect");this._simulatedFullScreenSourceRect=a}},stageVideos:{get:function(){somewhatImplemented("Stage.stageVideos");return this._stageVideos}},stage3Ds:{get:function(){notImplemented("Stage.stage3Ds");return this._stage3Ds}},color:{get:function(){return this._color},set:function(a){this._color=a;this._invalid=!0}},fullScreenWidth:{get:function(){notImplemented("Stage.fullScreenWidth");return this._fullScreenWidth}},
fullScreenHeight:{get:function(){notImplemented("Stage.fullScreenHeight");return this._fullScreenHeight}},wmodeGPU:{get:function(){somewhatImplemented("Stage.wmodeGPU");return this._wmodeGPU}},softKeyboardRect:{get:function(){notImplemented("Stage.softKeyboardRect");return this._softKeyboardRect}},allowsFullScreen:{get:function(){return!1}},displayContextInfo:{get:function(){notImplemented("Stage.displayContextInfo");return this._displayContextInfo}}}}}}}.call(this),EventDefinition=function(){return{__class__:"flash.events.Event",
initialize:function(){this._isDefaultPrevented=this._stopImmediatePropagation=this._stopPropagation=!1;this._currentTarget=this._target=null;this._eventPhase=2},__glue__:{"native":{instance:{ctor:function(a,b,d){Counter.count("Event: "+a);this._type=a;this._bubbles=b;this._cancelable=d},stopPropagation:function(){this._stopPropagation=!0},stopImmediatePropagation:function(){this._stopImmediatePropagation=this._stopPropagation=!0},preventDefault:function(){this._cancelable&&(this._isDefaultPrevented=
!0)},isDefaultPrevented:function(){return this._isDefaultPrevented},type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}}}},script:{"static":Glue.ALL,instance:{clone:"open public clone"}}}}}.call(this),EventDispatcherDefinition=function(){function a(a,f,g,l){var m=
a._target,p=f._type||f;a=a._listeners[p];if(l||"string"===typeof f&&d[f]||f._bubbles){for(var r=[],u=m._parent;u;)u._hasEventListener(p)&&r.push(u),u=u._parent;if(!a&&!r.length)return!0;for(var v=!0,u=r.length;u--&&v;)var v=r[u],w=v._captureListeners[p],v=b(w,f,g,l,m,v,1);a&&v&&(v=b(a,f,g,l,m));for(u=0;u<r.length&&v;u++)v=r[u],w=v._listeners[p],v=b(w,f,g,l,m,v,3)}else a&&b(a,f,g,l,m);return!f._isDefaultPrevented}function b(a,b,g,l,m,p,r){if(a){a=a.slice();l=!0;try{for(var u=0;u<a.length;u++){var v=
a[u],w=v.handleEvent.methodInfo;if(w&&w.parameters.length&&!w.parameters[0].isUsed)v.handleEvent();else if(l&&("string"===typeof b?g?b=new g(b):d[b]?(b=new flash.events.MouseEvent(b,d[b]),m._stage&&(b._localX=m.mouseX,b._localY=m.mouseY)):b=new flash.events.Event(b):b._target&&(b=b.clone()),b._target=m,b._currentTarget=p||m,b._eventPhase=r||2,l=!1),v.handleEvent(b),b._stopImmediatePropagation)break}}catch(z){throw avm2.exceptions.push({source:"avm2",message:z.message,stack:z.stack}),z;}}return!b._stopPropagation}
var d={click:!0,contextMenu:!0,doubleClick:!0,middleClick:!0,middleMouseDown:!0,middleMouseUp:!0,mouseDown:!0,mouseMove:!0,mouseOut:!0,mouseOver:!0,mouseUp:!0,mouseWheel:!0,releaseOutside:!0,rightClick:!0,rightMouseDown:!0,rightMouseUp:!0,rollOut:!1,rollOver:!1};return{__class__:"flash.events.EventDispatcher",initialize:function(){this._target=this;this._listeners={};this._captureListeners={}},_addEventListenerImpl:function(a,d,b,l){"function"!==typeof d&&throwError("TypeError",Errors.CheckTypeFailedError,
d,"Function");var m=b?this._captureListeners:this._listeners;b=m[a];var p={handleEvent:d,priority:l||0};if(b){for(m=a=b.length;m--;){var r=b[m];if(r.handleEvent===d)return;l>r.priority&&(a=m)}b.splice(a,0,p)}else m[a]=[p]},_addEventListener:function(a,d,b,l){this._addEventListenerImpl(a,d,b,l)},_removeEventListenerImpl:function(a,d,b){"function"!==typeof d&&throwError("TypeError",Errors.CheckTypeFailedError,d,"Function");b=b?this._captureListeners:this._listeners;var l=b[a];if(l)for(var m=0;m<l.length;m++)if(l[m].handleEvent===
d){l.splice(m,1);l.length||(b[a]=null);break}},_removeEventListener:function(a,d,b){this._removeEventListenerImpl(a,d,b)},_hasEventListener:function(a){return this._listeners[a]||this._captureListeners[a]},_dispatchEvent:function(d,b,g){a(this,d,b,g)},__glue__:{"native":{instance:{ctor:function(a){this._target=a||this},addEventListener:function(a,d,b,l){this._addEventListener(a,d,b,l)},removeEventListener:function(a,d,b){this._removeEventListener(a,d,b)},hasEventListener:function(a){return this._hasEventListener(a)},
willTrigger:function(a){var d=this._target;do if(d._hasEventListener(a))return!0;while(d=d._parent);return!1},dispatchEventFunction:function(d){return a(this,d)}}}}}}.call(this),KeyboardEventDefinition=function(){return{__class__:"flash.events.KeyboardEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("KeyboardEvent.updateAfterEvent")},charCode:{get:function(){return this._charCode},set:function(a){this._charCode=a}},ctrlKey:{get:function(){return this._ctrlKey},set:function(a){this._ctrlKey=
a}},altKey:{get:function(){return this._altKey},set:function(a){this._altKey=a}},shiftKey:{get:function(){return this._shiftKey},set:function(a){this._shiftKey=a}}}},script:{"static":Glue.ALL,instance:{keyCode:"public keyCode"}}}}}.call(this),MouseEventDefinition=function(){return{__class__:"flash.events.MouseEvent",initialize:function(){this._localY=this._localX=NaN},__glue__:{"native":{instance:{updateAfterEvent:function(){},getStageX:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,
!1);return(a.a*this._localX+a.c*this._localY+a.tx)/20}return this._localX/20},getStageY:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,!1);return(a.d*this._localY+a.b*this._localX+a.ty)/20}return this._localY/20},localX:{get:function(){return this._localX/20},set:function(a){this._localX=20*a|0}},localY:{get:function(){return this._localY/20},set:function(a){this._localY=20*a|0}}}},script:{"static":Glue.ALL}}}}.call(this),TextEventDefinition=function(){return{__class__:"flash.events.TextEvent",
__glue__:{"native":{instance:{copyNativeData:function(){notImplemented("TextEvent.copyNativeData")}}}}}}.call(this),TimerEventDefinition=function(){return{__class__:"flash.events.TimerEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("TimerEvent.updateAfterEvent")}}}}}}.call(this),ExternalInterfaceDefinition=function(){function a(a,b){if(d.hasOwnProperty(a))return d[a](a,b)}var b=!1,d={};return{__class__:"flash.external.ExternalInterface",initialize:function(){},__glue__:{"native":{"static":{_initJS:function(){b||
(TelemetryService.reportTelemetry({topic:"feature",feature:1}),b=!0,FirefoxCom.initJS(a))},_getPropNames:function(a){var d=[];forEachPublicProperty(a,function(a){d.push(a)});return d},_addCallback:function(a,b,g){FirefoxCom.request("externalCom",{action:"register",functionName:a,remove:g});g?delete d[a]:d[a]=b},_evalJS:function(a){return FirefoxCom.requestSync("externalCom",{action:"eval",expression:a})},_callOut:function(a){return FirefoxCom.requestSync("externalCom",{action:"call",request:a})},
available:{get:function(){return!0}},objectID:{get:function(){return FirefoxCom.requestSync("externalCom",{action:"getId"})}},activeX:{get:function(){return!1}}},instance:{}}}}}.call(this),BevelFilterDefinition=function(){return{__class__:"flash.filters.BevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),BitmapFilterDefinition=function(){return{__class__:"flash.filters.BitmapFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),
BlurFilterDefinition=function(){return{__class__:"flash.filters.BlurFilter",initialize:function(){},_updateFilterBounds:function(a){var b=20*this._blurX*this._quality,d=20*this._blurY*this._quality;a.xMin-=b;a.xMax+=b;a.yMin-=d;a.yMax+=d},__glue__:{"native":{"static":{},instance:{blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=
a}}}}}}}.call(this),ColorMatrixFilterDefinition=function(){return{__class__:"flash.filters.ColorMatrixFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{"native":{instance:{matrix:{get:function(){return this._matrix},set:function(a){this._matrix=a}}}}}}}.call(this),ConvolutionFilterDefinition=function(){return{__class__:"flash.filters.ConvolutionFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),DisplacementMapFilterDefinition=function(){return{__class__:"flash.filters.DisplacementMapFilter",
initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),DropShadowFilterDefinition=function(){return{__class__:"flash.filters.DropShadowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=this._angle*Math.PI/180,d=Math.sin(b)*this._distance,b=Math.cos(b)*this._distance,e=20*this._blurX*this._quality,f=20*this._blurY*this._quality;a.xMin-=e-(0<b?0:b);a.xMax+=e+Math.abs(b);a.yMin-=f-(0<d?0:d);a.yMax+=f+Math.abs(d)},__glue__:{"native":{instance:{distance:{get:function(){return this._distance},
set:function(a){this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._angle=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},hideObject:{get:function(){return this._hideObject},set:function(a){this._hideObject=a}},inner:{get:function(){return this._inner},
set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GlowFilterDefinition=function(){return{__class__:"flash.filters.GlowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=20*this._blurX*this._quality,d=20*this._blurY*this._quality;a.xMin-=b;
a.xMax+=b;a.yMin-=d;a.yMax+=d},__glue__:{"native":{"static":{},instance:{color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=
a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GradientBevelFilterDefinition=function(){return{__class__:"flash.filters.GradientBevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),GradientGlowFilterDefinition=function(){return{__class__:"flash.filters.GradientGlowFilter",initialize:function(){},_updateFilterBounds:function(){},
__glue__:{}}}.call(this),ShaderFilterDefinition=function(){return{__class__:"flash.filters.ShaderFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),ColorTransformDefinition=function(){return{__class__:"flash.geom.ColorTransform",__glue__:{script:{instance:Glue.ALL}}}}.call(this),MatrixDefinition=function(){return{__class__:"flash.geom.Matrix",__glue__:{script:{instance:Glue.ALL}}}}.call(this),Matrix3DDefinition=function(){function a(a,b,f,g,l,m,p){var r=b*b,
u=f*f,v=g*g,w=r+u+v,z=Math.sqrt(w);b/=z;f/=z;g/=z;r/=w;u/=w;v/=w;w=Math.cos(a);a=Math.sin(a);return new flash.geom.Matrix3D([r+(u+v)*w,b*f*(1-w)+g*a,b*g*(1-w)-f*a,0,b*f*(1-w)-g*a,u+(r+v)*w,f*g*(1-w)+b*a,0,b*g*(1-w)+f*a,f*g*(1-w)-b*a,v+(r+u)*w,0,(l*(u+v)-b*(m*f+p*g))*(1-w)+(m*g-p*f)*a,(m*(r+v)-f*(l*b+p*g))*(1-w)+(p*b-l*g)*a,(p*(r+u)-g*(l*b+m*f))*(1-w)+(l*f-m*b)*a,1])}var b=new Uint32Array([0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]);return{__class__:"flash.geom.Matrix3D",initialize:function(){},__glue__:{"native":{"static":{interpolate:function(){notImplemented("Matrix3D.interpolate")}},
instance:{ctor:function(a){this._matrix=new Float32Array(16);a&&16<=a.length?this.copyRawDataFrom(a,0,!1):this.identity()},clone:function(){return new flash.geom.Matrix3D(this._matrix)},copyToMatrix3D:function(a){a._matrix.set(this._matrix)},append:function(a){var b=a._matrix,f=this._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],u=b[5],v=b[9],w=b[13],z=b[2],y=b[6],B=b[10],A=b[14],s=b[3],E=b[7],H=b[11],b=b[15],D=f[0],G=f[4],F=f[8],Q=f[12],T=f[1],S=f[5],Y=f[9],I=f[13],J=f[2],O=f[6],
V=f[10],M=f[14],L=f[3],P=f[7],K=f[11],f=f[15];a[0]=g*D+l*T+m*J+p*L;a[1]=r*D+u*T+v*J+w*L;a[2]=z*D+y*T+B*J+A*L;a[3]=s*D+E*T+H*J+b*L;a[4]=g*G+l*S+m*O+p*P;a[5]=r*G+u*S+v*O+w*P;a[6]=z*G+y*S+B*O+A*P;a[7]=s*G+E*S+H*O+b*P;a[8]=g*F+l*Y+m*V+p*K;a[9]=r*F+u*Y+v*V+w*K;a[10]=z*F+y*Y+B*V+A*K;a[11]=s*F+E*Y+H*V+b*K;a[12]=g*Q+l*I+m*M+p*f;a[13]=r*Q+u*I+v*M+w*f;a[14]=z*Q+y*I+B*M+A*f;a[15]=s*Q+E*I+H*M+b*f},prepend:function(a){var b=this._matrix,f=a._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],u=b[5],
v=b[9],w=b[13],z=b[2],y=b[6],B=b[10],A=b[14],s=b[3],E=b[7],H=b[11],b=b[15],D=f[0],G=f[4],F=f[8],Q=f[12],T=f[1],S=f[5],Y=f[9],I=f[13],J=f[2],O=f[6],V=f[10],M=f[14],L=f[3],P=f[7],K=f[11],f=f[15];a[0]=g*D+l*T+m*J+p*L;a[1]=r*D+u*T+v*J+w*L;a[2]=z*D+y*T+B*J+A*L;a[3]=s*D+E*T+H*J+b*L;a[4]=g*G+l*S+m*O+p*P;a[5]=r*G+u*S+v*O+w*P;a[6]=z*G+y*S+B*O+A*P;a[7]=s*G+E*S+H*O+b*P;a[8]=g*F+l*Y+m*V+p*K;a[9]=r*F+u*Y+v*V+w*K;a[10]=z*F+y*Y+B*V+A*K;a[11]=s*F+E*Y+H*V+b*K;a[12]=g*Q+l*I+m*M+p*f;a[13]=r*Q+u*I+v*M+w*f;a[14]=z*Q+
y*I+B*M+A*f;a[15]=s*Q+E*I+H*M+b*f},invert:function(){var a=this.determinant;if(1E-7>Math.abs(a))return!1;var a=1/a,b=this._matrix,f=b[0],g=b[1],l=b[2],m=b[3],p=b[4],r=b[5],u=b[6],v=b[7],w=b[8],z=b[9],y=b[10],B=b[11],A=b[12],s=b[13],E=b[14],H=b[15];b[0]=a*(r*(y*H-E*B)-z*(u*H-E*v)+s*(u*B-y*v));b[1]=-a*(g*(y*H-E*B)-z*(l*H-E*m)+s*(l*B-y*m));b[2]=a*(g*(u*H-E*v)-r*(l*H-E*m)+s*(l*v-u*m));b[3]=-a*(g*(u*B-y*v)-r*(l*B-y*m)+z*(l*v-u*m));b[4]=-a*(p*(y*H-E*B)-w*(u*H-E*v)+A*(u*B-y*v));b[5]=a*(f*(y*H-E*B)-w*(l*
H-E*m)+A*(l*B-y*m));b[6]=-a*(f*(u*H-E*v)-p*(l*H-E*m)+A*(l*v-u*m));b[7]=a*(f*(u*B-y*v)-p*(l*B-y*m)+w*(l*v-u*m));b[8]=a*(p*(z*H-s*B)-w*(r*H-s*v)+A*(r*B-z*v));b[9]=-a*(f*(z*H-s*B)-w*(g*H-s*m)+A*(g*B-z*m));b[10]=a*(f*(r*H-s*v)-p*(g*H-s*m)+A*(g*v-r*m));b[11]=-a*(f*(r*B-z*v)-p*(g*B-z*m)+w*(g*v-r*m));b[12]=-a*(p*(z*E-s*y)-w*(r*E-s*u)+A*(r*y-z*u));b[13]=a*(f*(z*E-s*y)-w*(g*E-s*l)+A*(g*y-z*l));b[14]=-a*(f*(r*E-s*u)-p*(g*E-s*l)+A*(g*u-r*l));b[15]=a*(f*(r*y-z*u)-p*(g*y-z*l)+w*(g*u-r*l));return!0},identity:function(){var a=
this._matrix;a[0]=a[5]=a[10]=a[15]=1;a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},decompose:function(){notImplemented("Matrix3D.decompose")},recompose:function(){notImplemented("Matrix3D.recompose")},appendTranslation:function(a,b,f){var g=this._matrix,l=g[3],m=g[7],p=g[11],r=g[15];g[0]+=a*l;g[1]+=b*l;g[2]+=f*l;g[4]+=a*m;g[5]+=b*m;g[6]+=f*m;g[8]+=a*p;g[9]+=b*p;g[10]+=f*p;g[12]+=a*r;g[13]+=b*r;g[14]+=f*r},appendRotation:function(d,b,f){this.append(a(d/180*Math.PI,b.x,b.y,b.z,
f?f.x:0,f?f.y:0,f?f.z:0))},appendScale:function(a,b,f){var g=this._matrix;g[0]*=a;g[1]*=b;g[2]*=f;g[4]*=a;g[5]*=b;g[6]*=f;g[8]*=a;g[9]*=b;g[10]*=f;g[12]*=a;g[13]*=b;g[14]*=f},prependTranslation:function(a,b,f){var g=this._matrix,l=g[1],m=g[5],p=g[9],r=g[2],u=g[6],v=g[10],w=g[3],z=g[7],y=g[11];g[12]+=g[0]*a+g[4]*b+g[8]*f;g[13]+=l*a+m*b+p*f;g[14]+=r*a+u*b+v*f;g[15]+=w*a+z*b+y*f},prependRotation:function(d,b,f){this.prepend(a(d/180*Math.PI,b.x,b.y,b.z,f?f.x:0,f?f.y:0,f?f.z:0))},prependScale:function(a,
b,f){var g=this._matrix;g[0]*=a;g[1]*=a;g[2]*=a;g[3]*=a;g[4]*=b;g[5]*=b;g[6]*=b;g[7]*=b;g[8]*=f;g[9]*=f;g[10]*=f;g[11]*=f},transformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a+b[12],b[1]*f+b[5]*g+b[9]*a+b[13],b[2]*f+b[6]*g+b[10]*a+b[14])},deltaTransformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a,b[1]*f+b[5]*g+b[9]*a,b[2]*f+b[6]*g+b[10]*a)},transformVectors:function(a,b){for(var f=
this._matrix,g=f[0],l=f[4],m=f[8],p=f[12],r=f[1],u=f[5],v=f[9],w=f[13],z=f[2],y=f[6],B=f[10],f=f[14],A=0;A<a.length-2;A+=3){var s=a.asGetNumericProperty(A),E=a.asGetNumericProperty(A+1),H=a.asGetNumericProperty(A+2);b.push(g*s+l*E+m*H+p);b.push(r*s+u*E+v*H+w);b.push(z*s+y*E+B*H+f)}},transpose:function(){var a=this._matrix,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[5]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b},pointAt:function(){notImplemented("Matrix3D.pointAt")},
interpolateTo:function(){notImplemented("Matrix3D.interpolateTo")},copyFrom:function(a){this._matrix.set(a._matrix)},copyRawDataTo:function(a,e,f){var g=this._matrix;if(f){f=0;for(e|=0;16>f;f++,e++)a.asSetNumericProperty(e,g[b[f]])}else{f=0;for(e|=0;16>f;f++,e++)a.asSetNumericProperty(e,g[f])}},copyRawDataFrom:function(a,e,f){var g=this._matrix;if(f){f=0;for(e|=0;16>f;f++,e++)g[b[f]]=a.asGetNumericProperty(e)||0}else{f=0;for(e|=0;16>f;f++,e++)g[f]=a.asGetNumericProperty(e)||0}},copyRowTo:function(a,
b){var f=a|0,g=this._matrix;b.x=g[f];b.y=g[f+4];b.z=g[f+8];b.w=g[f+12]},copyColumnTo:function(a,b){var f=a<<2,g=this._matrix;b.x=g[f];b.y=g[f+1];b.z=g[f+2];b.w=g[f+3]},copyRowFrom:function(a,b){var f=a|0,g=this._matrix;g[f]=b.x;g[f+4]=b.y;g[f+8]=b.z;g[f+12]=b.w},copyColumnFrom:function(a,b){var f=a<<2,g=this._matrix;g[f]=b.x;g[f+1]=b.y;g[f+2]=b.z;g[f+3]=b.w},rawData:{get:function(){var a=new Float64Vector;this.copyRawDataTo(a,0,!1);return a},set:function(a){this.copyRawDataFrom(a,0,!1)}},position:{get:function(){var a=
this._matrix;return new flash.geom.Vector3D(a[12],a[13],a[14])},set:function(a){var b=this._matrix;b[12]=a.x;b[13]=a.y;b[14]=a.z}},determinant:{get:function(){var a=this._matrix,b=a[4],f=a[8],g=a[12],l=a[5],m=a[9],p=a[13],r=a[6],u=a[10],v=a[14],w=a[7],z=a[11],y=a[15];return a[0]*(l*(u*y-z*v)-r*(m*y-z*p)+w*(m*v-u*p))-a[1]*(b*(u*y-z*v)-r*(f*y-z*g)+w*(f*v-u*g))+a[2]*(b*(m*y-z*p)-l*(f*y-z*g)+w*(f*p-m*g))-a[3]*(b*(m*v-u*p)-l*(f*v-u*g)+r*(f*p-m*g))}}}},script:{instance:Glue.ALL}}}}.call(this),PointDefinition=
function(){return{__class__:"flash.geom.Point",__glue__:{script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),RectangleDefinition=function(){return{__class__:"flash.geom.Rectangle",__glue__:{script:{instance:Glue.ALL}}}}.call(this),TransformDefinition=function(){var a={__class__:"flash.geom.Transform",get colorTransform(){var a=this._target._cxform;return a?new flash.geom.ColorTransform(a.redMultiplier/256,a.greenMultiplier/256,a.blueMultiplier/256,a.alphaMultiplier/256,a.redOffset,a.greenOffset,
a.blueOffset,a.alphaOffset):new flash.geom.ColorTransform},set colorTransform(a){avm2.systemDomain.getClass("flash.geom.ColorTransform").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.ColorTransform");this._target._cxform={redMultiplier:256*a.redMultiplier,greenMultiplier:256*a.greenMultiplier,blueMultiplier:256*a.blueMultiplier,alphaMultiplier:256*a.alphaMultiplier,redOffset:a.redOffset,greenOffset:a.greenOffset,blueOffset:a.blueOffset,alphaOffset:a.alphaOffset};
this._target._invalidate()},get concatenatedColorTransform(){var a=this.colorTransform;a.concat(this._target.parent.transform.concatenatedColorTransform);return a},get concatenatedMatrix(){if(this._target._current3DTransform)return null;var a=this._target._getConcatenatedTransform(null,!1);return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},get matrix(){if(this._target._current3DTransform)return null;var a=this._target._currentTransform;return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/
20,a.ty/20)},set matrix(a){flash.geom.Matrix.class.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix");var b=this._target;b._invalidate();b._setTransformMatrix(a,!0);b._current3DTransform=null;b._animated=!1},get matrix3D(){var a=this._target._current3DTransform;return a&&a.clone()},set matrix3D(a){avm2.systemDomain.getClass("flash.geom.Matrix3D").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix3D");var b=a.rawData;this.matrix=
new flash.geom.Matrix(b.asGetPublicProperty(0),b.asGetPublicProperty(1),b.asGetPublicProperty(4),b.asGetPublicProperty(5),b.asGetPublicProperty(12),b.asGetPublicProperty(13));this._target._current3DTransform=a},ctor:function(a){this._target=a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{colorTransform:b(a,"colorTransform"),concatenatedColorTransform:b(a,"concatenatedColorTransform"),concatenatedMatrix:b(a,"concatenatedMatrix"),matrix:b(a,"matrix"),matrix3D:b(a,"matrix3D"),ctor:a.ctor}}};
return a}.call(this),Vector3DDefinition=function(){return{__class__:"flash.geom.Vector3D",initialize:function(){},__glue__:{script:{instance:Glue.ALL}}}}.call(this),ID3InfoDefinition=function(){return{__glue__:{script:{instance:{songName:"public songName",genre:"public genre",artist:"public artist",track:"public track",album:"public album",year:"public year",comment:"public comment"}}}}}.call(this),MicrophoneDefinition=function(){return{__class__:"flash.media.Microphone",initialize:function(){},__glue__:{"native":{"static":{getMicrophone:function(){notImplemented("Microphone.getMicrophone")},
getEnhancedMicrophone:function(){notImplemented("Microphone.getEnhancedMicrophone")},names:{get:function(){notImplemented("Microphone.names")}},isSupported:{get:function(){notImplemented("Microphone.isSupported")}}},instance:{setSilenceLevel:function(){notImplemented("Microphone.setSilenceLevel")},setUseEchoSuppression:function(){notImplemented("Microphone.setUseEchoSuppression")},setLoopBack:function(){notImplemented("Microphone.setLoopBack")},gain:{set:function(a){notImplemented("Microphone.gain");
this._gain=a},get:function(){notImplemented("Microphone.gain");return this._gain}},rate:{set:function(a){notImplemented("Microphone.rate");this._rate=a},get:function(){notImplemented("Microphone.rate");return this._rate}},codec:{set:function(a){notImplemented("Microphone.codec");this._codec=a},get:function(){notImplemented("Microphone.codec");return this._codec}},framesPerPacket:{get:function(){notImplemented("Microphone.framesPerPacket");return this._framesPerPacket},set:function(a){notImplemented("Microphone.framesPerPacket");
this._framesPerPacket=a}},encodeQuality:{get:function(){notImplemented("Microphone.encodeQuality");return this._encodeQuality},set:function(a){notImplemented("Microphone.encodeQuality");this._encodeQuality=a}},noiseSuppressionLevel:{get:function(){notImplemented("Microphone.noiseSuppressionLevel");return this._noiseSuppressionLevel},set:function(a){notImplemented("Microphone.noiseSuppressionLevel");this._noiseSuppressionLevel=a}},enableVAD:{get:function(){notImplemented("Microphone.enableVAD");return this._enableVAD},
set:function(a){notImplemented("Microphone.enableVAD");this._enableVAD=a}},activityLevel:{get:function(){notImplemented("Microphone.activityLevel");return this._activityLevel}},index:{get:function(){notImplemented("Microphone.index");return this._index}},muted:{get:function(){notImplemented("Microphone.muted");return this._muted}},name:{get:function(){notImplemented("Microphone.name");return this._name}},silenceLevel:{get:function(){notImplemented("Microphone.silenceLevel");return this._silenceLevel}},
silenceTimeout:{get:function(){notImplemented("Microphone.silenceTimeout");return this._silenceTimeout}},useEchoSuppression:{get:function(){notImplemented("Microphone.useEchoSuppression");return this._useEchoSuppression}},soundTransform:{get:function(){notImplemented("Microphone.soundTransform");return this._soundTransform},set:function(a){notImplemented("Microphone.soundTransform");this._soundTransform=a}},enhancedOptions:{get:function(){notImplemented("Microphone.enhancedOptions");return this._enhancedOptions},
set:function(a){notImplemented("Microphone.enhancedOptions");this._enhancedOptions=a}}}},script:{instance:Glue.ALL}}}}.call(this),PLAY_USING_AUDIO_TAG=!0,SoundDefinition=function(){function a(a,d){var b=document.createElement("audio");if(b.canPlayType(a.mimeType)){b.preload="metadata";var l=new Blob([a.data],{type:a.mimeType});b.src=URL.createObjectURL(l);b.load();b.addEventListener("loadedmetadata",function(){d({duration:1E3*this.duration})})}else d({duration:0})}var b={initialize:function(){this._playQueue=
[];this._url=null;this._bytesLoaded=this._bytesTotal=this._length=0;this._id3=new flash.media.ID3Info;var d=this.symbol;if(d){var b={};d.pcm&&(b.sampleRate=d.sampleRate,b.channels=d.channels,b.pcm=d.pcm,b.end=d.pcm.length);b.completed=!0;d.packaged&&(b.data=d.packaged.data.buffer,b.mimeType=d.packaged.mimeType);var g=this;a(b,function(a){g._length=a.duration});this._soundData=b}TelemetryService.reportTelemetry({topic:"feature",feature:5})},close:function(){somewhatImplemented("Sound.close")},extract:function(){notImplemented("Sound.extract")},
_load:function(d){if(d){var b=this,g=this._stream=new flash.net.URLStream,l=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance(),m=0,p={completed:!1};g._addEventListener("progress",function(a){b._bytesLoaded=a[Multiname.getPublicQualifiedName("bytesLoaded")];b._bytesTotal=a[Multiname.getPublicQualifiedName("bytesTotal")];var d=g.bytesAvailable;g.readBytes(l,m,d);m+=d;b._dispatchEvent(a)});g._addEventListener("complete",function(d){b._dispatchEvent(d);p.data=l.a;p.mimeType="audio/mpeg";
p.completed=!0;b._soundData=p;a(p,function(a){b._length=a.duration});b._playQueue.forEach(function(a){a.channel._playSoundDataViaAudio(p,a.startTime)})});g.load(d)}},loadCompressedDataFromByteArray:function(){notImplemented("Sound#loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){notImplemented("Sound#loadPCMFromByteArray")},play:function(a,d,b){a=a||0;d=d||0;var l=new flash.media.SoundChannel;l._sound=this;l._soundTransform=isNullOrUndefined(b)?new flash.media.SoundTransform:b;this._playQueue.push({channel:l,
startTime:a});this._soundData&&l._playSoundDataViaAudio(this._soundData,a,d);return l},get bytesLoaded(){return this._bytesLoaded},get bytesTotal(){return this._bytesTotal},get id3(){return this._id3},get isBuffering(){notImplemented("Sound#isBuffering")},get isURLInaccessible(){notImplemented("Sound#isURLInaccessible")},get length(){return this._length},get url(){return this._url}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{close:b.close,extract:b.extract,_load:b._load,loadCompressedDataFromByteArray:b.loadCompressedDataFromByteArray,
loadPCMFromByteArray:b.loadPCMFromByteArray,play:b.play,bytesLoaded:d(b,"bytesLoaded"),bytesTotal:d(b,"bytesTotal"),id3:d(b,"id3"),isBuffering:d(b,"isBuffering"),isURLInaccessible:d(b,"isURLInaccessible"),length:d(b,"length"),url:d(b,"url")}}};return b}.call(this),SoundChannelDefinition=function(){return{initialize:function(){this._element=null;this._rightPeak=this._leftPeak=this._position=0;this._pcmData=null;this._soundTransform=new flash.media.SoundTransform;this._soundMixerClass=avm2.systemDomain.getClass("flash.media.SoundMixer");
var a=this.symbol;a&&(this._element=a.element||null);this._element&&this._registerWithSoundMixer()},_registerWithSoundMixer:function(){this._soundMixerClass.native.static._registerChannel(this)},_unregisterWithSoundMixer:function(){this._soundMixerClass.native.static._unregisterChannel(this)},_applySoundTransform:function(){var a=this._soundTransform._volume;this._soundMixerClass._soundTransform&&(a*=this._soundMixerClass._soundTransform._volume);a*=this._soundMixerClass.native.static._getMasterVolume();
this._element&&(this._element.volume=clamp(a,0,1))},_playSoundDataViaChannel:function(a,b,d){this._registerWithSoundMixer();var e=this,f=Math.round(b/1E3*a.sampleRate)*a.channels,g=f;this._position=b;this._audioChannel=createAudioChannel(a.sampleRate,a.channels);this._audioChannel.ondatarequested=function(b){var m=a.end;if(g>=m&&a.completed)e._unregisterWithSoundMixer(),e._audioChannel.stop(),e._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));else{var p=b.count;b=b.data;var r=a.pcm;do{for(var u=
Math.min(m-g,p),v=0;v<u;v++)b[v]=r[g++];p-=u;if(g>=m){if(!d)break;d--;g=f}}while(0<p);e._position=1E3*(g/a.sampleRate/a.channels)}};this._audioChannel.start();this._applySoundTransform()},_playSoundDataViaAudio:function(a,b,d){if(a.mimeType){this._registerWithSoundMixer();this._position=b;var e=this,f=0,g=document.createElement("audio");g.canPlayType(a.mimeType)?(g.preload="metadata",g.loop=0<d,a=new Blob([a.data],{type:a.mimeType}),g.src=URL.createObjectURL(a),g.addEventListener("loadeddata",function(){g.currentTime=
b/1E3;g.play()}),g.addEventListener("timeupdate",function(){var a=g.currentTime;d&&f>a&&(--d,d||(g.loop=!1),a<b/1E3&&(g.currentTime=b/1E3));e._position=1E3*(f=a)}),g.addEventListener("ended",function(){e._unregisterWithSoundMixer();e._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));e._element=null}),this._element=g,this._applySoundTransform()):console.error('ERROR: "'+a.mimeType+'" type playback is not supported by the browser')}},__glue__:{"native":{"static":{},instance:{stop:function(){this._element&&
(this._unregisterWithSoundMixer(),this._element.pause());this._audioChannel&&(this._unregisterWithSoundMixer(),this._audioChannel.stop())},position:{get:function(){return this._position}},leftPeak:{get:function(){return this._leftPeak}},rightPeak:{get:function(){return this.rightPeak}},soundTransform:{get:function(){somewhatImplemented("SoundChannel.soundTransform");return new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundChannel.soundTransform");
this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;this._applySoundTransform()}}}},script:{instance:scriptProperties("public",["stop"])}}}}.call(this);function createAudioChannel(a,b){if(WebAudioChannel.isSupported)return new WebAudioChannel(a,b);error("PCM data playback is not supported by the browser")}function AudioResampler(a,b){this.sourceRate=a;this.targetRate=b;this.tail=[];this.sourceOffset=0}
AudioResampler.prototype={ondatarequested:function(){},getData:function(a,b){for(var d=this.sourceRate/this.targetRate,e=this.sourceOffset,f=Math.ceil((b-1)*d+e)+1,g=[],l=0;l<a.length;l++)g.push(new Float32Array(f));this.ondatarequested({data:g,count:f});for(l=0;l<a.length;l++){for(var m=a[l],p=g[l],r=0;r<b;r++){var u=r*d+e,v=u|0,w=Math.ceil(u)|0,z=0>v?this.tail[l]:p[v];v===w?m[r]=z:(u-=v,m[r]=z*(1-u)+p[w]*u)}this.tail[l]=p[f-1]}this.sourceOffset=(b-1)*d+e-(f-1)}};
function WebAudioChannel(a,b){var d=WebAudioChannel.context;d||(d="undefined"!==typeof AudioContext?new AudioContext:new webkitAudioContext,WebAudioChannel.context=d);this.context=d;this.contextSampleRate=d.sampleRate||44100;this.channels=b;this.sampleRate=a;this.contextSampleRate!=a&&(this.resampler=new AudioResampler(a,this.contextSampleRate),this.resampler.ondatarequested=function(a){this.requestData(a.data,a.count)}.bind(this))}
WebAudioChannel.prototype={start:function(){var a=this.context.createScriptProcessor?this.context.createScriptProcessor(2048,0,this.channels):this.context.createJavaScriptNode(2048,0,this.channels),b=this;a.onaudioprocess=function(a){for(var e=[],f=0;f<b.channels;f++)e.push(a.outputBuffer.getChannelData(f));a=e[0].length;b.resampler?b.resampler.getData(e,a):b.requestData(e,a)};a.connect(this.context.destination);this.source=a},stop:function(){this.source.disconnect(this.context.destination)},requestData:function(a,
b){var d=this.channels,e=new Float32Array(b*d);this.ondatarequested({data:e,count:e.length});for(var f=0,g=0;f<b;f++)for(var l=0;l<d;l++)a[l][f]=e[g++]}};WebAudioChannel.isSupported=function(){return"undefined"!==typeof AudioContext||"undefined"!=typeof webkitAudioContext}();
var SoundMixerDefinition=function(){var a=1,b=[];return{__class__:"flash.media.SoundMixer",initialize:function(){},__glue__:{"native":{"static":{_registerChannel:function(a){b.push(a)},_unregisterChannel:function(a){a=b.indexOf(a);0<=a&&b.splice(a,1)},_getMasterVolume:function(){return a},_setMasterVolume:function(d){a=d;b.forEach(function(a){a._applySoundTransform()})},stopAll:function(){b.forEach(function(a){a.stop()});b=[]},computeSpectrum:function(a){somewhatImplemented("SoundMixer.computeSpectrum");
for(var b=new Float32Array(1024),f=0;1024>f;f++)b[f]=Math.random();a.writeRawBytes(b);a.position=0},areSoundsInaccessible:function(){notImplemented("SoundMixer.areSoundsInaccessible")},bufferTime:{get:function(){notImplemented("SoundMixer.bufferTime")},set:function(){notImplemented("SoundMixer.bufferTime")}},soundTransform:{get:function(){somewhatImplemented("SoundMixer.soundTransform");return isNullOrUndefined(this._soundTransform)?new flash.media.SoundTransform:new flash.media.SoundTransform(this._soundTransform._volume,
this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundMixer.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;b.forEach(function(a){a._applySoundTransform()})}},audioPlaybackMode:{get:function(){notImplemented("SoundMixer.audioPlaybackMode")},set:function(){notImplemented("SoundMixer.audioPlaybackMode")}},useSpeakerphoneForVoice:{get:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")},set:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")}}},
instance:{}}}}}.call(this),SoundTransformDefinition=function(){return{__class__:"flash.media.SoundTransform",initialize:function(){},_updateTransform:function(){somewhatImplemented("SoundTransform._updateTransform")},__glue__:{"native":{"static":{},instance:{volume:{get:function(){return this._volume},set:function(a){this._volume=a;this._updateTransform()}},leftToLeft:{get:function(){return this._leftToLeft},set:function(a){this._leftToLeft=a;this._updateTransform()}},leftToRight:{get:function(){return this._leftToRight},
set:function(a){this._leftToRight=a;this._updateTransform()}},rightToRight:{get:function(){return this._rightToRight},set:function(a){this._rightToRight=a;this._updateTransform()}},rightToLeft:{get:function(){return this._rightToLeft},set:function(a){this._rightToLeft=a;this._updateTransform()}}}},script:{instance:{pan:"public pan"}}}}}.call(this),StageVideoDefinition=function(){return{__class__:"flash.media.StageVideo",initialize:function(){},__glue__:{"native":{"static":{},instance:{attachNetStream:function(){notImplemented("StageVideo.attachNetStream")},
attachCamera:function(){notImplemented("StageVideo.attachCamera")},viewPort:{get:function(){notImplemented("StageVideo.viewPort");return this._viewPort},set:function(a){notImplemented("StageVideo.viewPort");this._viewPort=a}},pan:{set:function(a){notImplemented("StageVideo.pan");this._pan=a},get:function(){notImplemented("StageVideo.pan");return this._pan}},zoom:{set:function(a){notImplemented("StageVideo.zoom");this._zoom=a},get:function(){notImplemented("StageVideo.zoom");return this._zoom}},depth:{set:function(a){notImplemented("StageVideo.depth");
this._depth=a},get:function(){notImplemented("StageVideo.depth");return this._depth}},videoWidth:{get:function(){notImplemented("StageVideo.videoWidth");return this._videoWidth}},videoHeight:{get:function(){notImplemented("StageVideo.videoHeight");return this._videoHeight}},colorSpaces:{get:function(){notImplemented("StageVideo.colorSpaces");return this._colorSpaces}}}}}}}.call(this),VideoDefinition=function(){var a={initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:4})},
attachNetStream:function(a){this._netStream!==a&&(this._netStream&&this._netStream._videoReady.then(function(a){this._element=null;this._added&&(a.remove(),this._added=!1)}.bind(this)),(this._netStream=a)&&a._videoReady.then(function(d){this._element=d;a._videoMetadataReady.then(function(){this._element.width=this._videoWidth=this._element.videoWidth;this._element.height=this._videoHeight=this._element.videoHeight;this.stage&&(this.stage._invalid=!0)}.bind(this))}.bind(this)))},ctor:function(a,d){if(!a||
0>a)a=320;if(!d||0>d)d=240;this._bbox={xMin:0,yMin:0,xMax:20*a,yMax:20*d};this._initialWidth=this._videoWidth=a;this._initialHeight=this._videoHeight=d;this._element=this._netStream=null;this._added=!1},draw:function(a,d,e,f){if(this._element){!this._added&&this._stage&&(this._stage._domContainer.appendChild(this._element),this._added=!0);var g=this._initialWidth,l=this._initialHeight;d=this._getConcatenatedTransform(null,!0);e=this.stage&&this.stage._contentsScaleFactor||1;var m=d.a/e,p=d.b/e,r=
d.c/e,u=d.d/e,v=d.tx/20/e,w=d.ty/20/e;0<g&&0<l&&(a.save(),a.beginPath(),a.rect(0,0,g,l),a.clip(),a.clearRect(0,0,g,l),a.restore(),f.forEach(function(a){a.save();a.setTransform(m,p,r,u,v,w);a.save();a.beginPath();a.rect(0,0,g,l);a.clip();a.clearRect(0,0,g,l);a.restore();a.restore()}));a=g/this._videoWidth;f=l/this._videoHeight;a="transform: matrix("+a*m+","+a*p+","+f*r+","+f*u+","+v+","+w+");";this._currentCssTransform!==a&&(this._currentCssTransform=a,this._element.setAttribute("style","position: absolute; top:0; left:0; z-index: -100;transform-origin: 0px 0px 0;"+
a+"-webkit-transform-origin: 0px 0px 0; -webkit-"+a))}}};a.__glue__={"native":{instance:{attachNetStream:a.attachNetStream,ctor:a.ctor,smoothing:{get:function(){return this._smoothing},set:function(a){somewhatImplemented("Video.smoothing");this._smoothing=a}},videoHeight:{get:function(){return this._videoHeight}},videoWidth:{get:function(){return this._videoWidth}}}}};return a}.call(this),FileFilterDefinition=function(){return{__class__:"flash.net.FileFilter",initialize:function(){this._macType=this._extension=
this._description=null},__glue__:{"native":{"static":{},instance:{description:{get:function(){return this._description},set:function(a){this._description=a}},extension:{get:function(){return this._extension},set:function(a){this._extension=a}},macType:{get:function(){return this._macType},set:function(a){this._macType=a}}}}}}}.call(this),LocalConnectionDefinition=function(){return{__class__:"flash.net.LocalConnection",initialize:function(){},__glue__:{"native":{"static":{},instance:{close:function(){notImplemented("LocalConnection.close")},
connect:function(){notImplemented("LocalConnection.connect")},send:function(){notImplemented("LocalConnection.send")},allowDomain:function(){notImplemented("LocalConnection.allowDomain")},allowInsecureDomain:function(){notImplemented("LocalConnection.allowInsecureDomain")},domain:{get:function(){somewhatImplemented("LocalConnection.domain");var a=FileLoadingService.resolveUrl("/");return(a=/:\/\/(.+?)[:?#\/]/.exec(a))&&a[1]}},client:{get:function(){notImplemented("LocalConnection.client");return this._client},
set:function(a){notImplemented("LocalConnection.client");this._client=a}},isPerUser:{get:function(){notImplemented("LocalConnection.isPerUser");return this._isPerUser},set:function(a){notImplemented("LocalConnection.isPerUser");this._isPerUser=a}}}}}}}.call(this),NetConnectionDefinition=function(){return{__class__:"flash.net.NetConnection",initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:6})},_invoke:function(a){var b=!1;switch(a){case 2:b=!0}(b?somewhatImplemented:
notImplemented)("NetConnection._invoke ("+a+")")},__glue__:{"native":{"static":{defaultObjectEncoding:{get:function b(){return b},set:function d(){somewhatImplemented("NetConnection.defaultObjectEncoding");return d}}},instance:{ctor:function(){this._uri=null;this._connected=!1;this._client=null;this._proxyType="none";this._objectEncoding=3},connect:function(d){var e=flash.events.NetStatusEvent;somewhatImplemented("NetConnection.connect");(this._uri=d)?this._dispatchEvent(new e(e.class.NET_STATUS,
!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Failed"}))):(this._connected=!0,this._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Success"}))))},call:function(){notImplemented("NetConnection.call")},connected:{get:function(){return this._connected}},uri:{get:function(){return this._uri}},client:{get:function(){return this._client},set:function(d){this._client=d}},objectEncoding:{get:function(){return this._objectEncoding},set:function(d){somewhatImplemented("NetConnection.objectEncoding");
this._objectEncoding=d}},proxyType:{get:function(){return this._proxyType},set:function(d){notImplemented("NetConnection.proxyType");this._proxyType=d}},connectedProxyType:{get:function(){notImplemented("NetConnection.connectedProxyType");return this._connectedProxyType}},usingTLS:{get:function(){somewhatImplemented("NetConnection.usingTLS");return!1}},protocol:{get:function(){notImplemented("NetConnection.protocol");return this._protocol}},maxPeerConnections:{get:function(){notImplemented("NetConnection.maxPeerConnections");
return this._maxPeerConnections},set:function(d){notImplemented("NetConnection.maxPeerConnections");this._maxPeerConnections=d}},nearID:{get:function(){notImplemented("NetConnection.nearID");return this._nearID}},farID:{get:function(){notImplemented("NetConnection.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetConnection.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetConnection.farNonce");return this._farNonce}},unconnectedPeerStreams:{get:function(){notImplemented("NetConnection.unconnectedPeerStreams");
return this._unconnectedPeerStreams}},invoke:function(d){return this._invoke(d,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(d,e){return this._invoke.call(this,d,e)}}}}}}.call(this),USE_MEDIASOURCE_API=!1,NetStreamDefinition=function(){return{__class__:"flash.net.NetStream",initialize:function(){},_invoke:function(a,b){var d=!1,e,f=this._videoElement;switch(a){case 4:this._videoState.bufferTime=b[0];d=!0;break;case 202:switch(b[1]){case "pause":d=!0;f&&(!1!==b[3]&&!f.paused?
f.pause():!0!==b[3]&&f.paused&&f.play(),f.currentTime=b[4]/1E3);break;case "seek":d=!0,f&&!f.paused&&(f.currentTime=b[3]/1E3)}break;case 300:e=f?f.currentTime:0;d=!0;break;case 302:e=this._videoState.bufferTime;d=!0;break;case 303:e=f?f.duration:0;d=!0;break;case 305:e="full"===this._videoState.buffer?100:"progress"===this._videoState.buffer?50:0;d=!0;break;case 306:e=100,d=!0}(d?somewhatImplemented:notImplemented)("NetStream._invoke ("+a+")");return e},_createVideoElement:function(a){var b=flash.events.NetStatusEvent,
d=this;/\.mp4$/i.test(a)&&/Intel Mac OS X.*?Firefox\/\d+/.test(window.navigator.userAgent)&&(a="http://videos-cdn.mozilla.net/brand/Mozilla_2011_Story.webm");var e=document.createElement("video");e.preload="metadata";e.src=a;e.addEventListener("play",function(){d._videoState.started||(d._videoState.started=!0,d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Start",level:"status"}))))});e.addEventListener("ended",function(){d._videoState.started=!1;d._dispatchEvent(new b(b.class.NET_STATUS,
!1,!1,wrapJSObject({code:"NetStream.Play.Stop",level:"status"})))});e.addEventListener("loadeddata",function(){d._videoState.buffer="full";d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Full",level:"status"})))});e.addEventListener("progress",function(){d._videoState.buffer="progress"});e.addEventListener("waiting",function(){d._videoState.buffer="empty";d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Empty",level:"status"})))});
e.addEventListener("loadedmetadata",function(){d._videoMetadataReady.resolve({videoWidth:e.videoWidth,videoHeight:e.videoHeight});if(d._client){var a={};a.asSetPublicProperty("width",e.videoWidth);a.asSetPublicProperty("height",e.videoHeight);a.asSetPublicProperty("duration",e.duration);d._client.asCallPublicProperty("onMetaData",[a])}});e.addEventListener("error",function(a){d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:4===a.target.error.code?"NetStream.Play.NoSupportedTrackFound":
3===a.target.error.code?"NetStream.Play.FileStructureInvalid":"NetStream.Play.StreamNotFound",level:"error"})))});e.play();this._videoElement=e;this._videoReady.resolve(e)},__glue__:{script:{instance:scriptProperties("public",["appendBytes","appendBytesAction"])},"native":{"static":{},instance:{ctor:function(){somewhatImplemented("NetStream.ctor");this._mediaSource=this._contentTypeHint=null;this._checkPolicyFile=!0;this._videoElement=null;var a,b;this._videoReady=new Promise(function(d,e){a=d;b=
e});this._videoReady.resolve=a;this._videoReady.reject=b;var d,e;this._videoMetadataReady=new Promise(function(a,b){d=a;e=b});this._videoMetadataReady.resolve=d;this._videoMetadataReady.reject=e;this._videoState={started:!1,buffer:"empty",bufferTime:0.1}},onResult:function(){notImplemented("NetStream.onResult")},dispose:function(){notImplemented("NetStream.dispose")},play:function(a){var b=!1;b&&"undefined"===typeof MediaSource&&(console.warn("MediaSource API is not enabled, falling back to regular playback"),
b=!1);if(b){var d=new MediaSource;d.addEventListener("sourceopen",function(){this._mediaSource=d}.bind(this));d.addEventListener("sourceend",function(){this._mediaSource=null}.bind(this));this._createVideoElement(window.URL.createObjectURL(d));if(a){a=new flash.net.URLRequest(a);a._checkPolicyFile=this._checkPolicyFile;var e=new flash.net.URLStream;e._addEventListener("httpStatus",function(a){if((a=a.asGetPublicProperty("responseHeaders").filter(function(a){return"Content-Type"===a.asGetPublicProperty("name")})[0])&&
"application/octet-stream"!==a.asGetPublicProperty("value"))this._contentTypeHint=a.asGetPublicProperty("value")}.bind(this));e._addEventListener("progress",function(){var a=e.bytesAvailable,d=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance();e.readBytes(d,0,a);this.appendBytes(d)}.bind(this));e._addEventListener("complete",function(){this.appendBytesAction("endSequence")}.bind(this));e.load(a)}}else somewhatImplemented("NetStream.play"),this._createVideoElement(FileLoadingService.resolveUrl(a))},
play2:function(){notImplemented("NetStream.play2")},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,b){return this._invoke.call(this,a,b)},appendBytes:function(a){this._mediaSource&&(this._mediaSourceBuffer||(this._mediaSourceBuffer=this._mediaSource.addSourceBuffer(this._contentTypeHint)),this._mediaSourceBuffer.appendBuffer(new Uint8Array(a.a,0,a.length)));somewhatImplemented("NetStream.appendBytes")},appendBytesAction:function(a){"endSequence"===
a&&this._mediaSource&&this._mediaSource.endOfStream();somewhatImplemented("NetStream.appendBytesAction")},info:{get:function(){notImplemented("NetStream.info");return this._info}},multicastInfo:{get:function(){notImplemented("NetStream.multicastInfo");return this._multicastInfo}},soundTransform:{get:function(){return this._soundTransform},set:function(a){somewhatImplemented("NetStream.soundTransform");this._soundTransform=a}},checkPolicyFile:{get:function(){return this._checkPolicyFile},set:function(a){this._checkPolicyFile=
a}},client:{get:function(){somewhatImplemented("NetStream.client");return this._client},set:function(a){somewhatImplemented("NetStream.client");this._client=a}},objectEncoding:{get:function(){notImplemented("NetStream.objectEncoding");return this._objectEncoding}},multicastPushNeighborLimit:{get:function(){notImplemented("NetStream.multicastPushNeighborLimit");return this._multicastPushNeighborLimit},set:function(a){notImplemented("NetStream.multicastPushNeighborLimit");this._multicastPushNeighborLimit=
a}},multicastWindowDuration:{get:function(){notImplemented("NetStream.multicastWindowDuration");return this._multicastWindowDuration},set:function(a){notImplemented("NetStream.multicastWindowDuration");this._multicastWindowDuration=a}},multicastRelayMarginDuration:{get:function(){notImplemented("NetStream.multicastRelayMarginDuration");return this._multicastRelayMarginDuration},set:function(a){notImplemented("NetStream.multicastRelayMarginDuration");this._multicastRelayMarginDuration=a}},multicastAvailabilityUpdatePeriod:{get:function(){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");
return this._multicastAvailabilityUpdatePeriod},set:function(a){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");this._multicastAvailabilityUpdatePeriod=a}},multicastFetchPeriod:{get:function(){notImplemented("NetStream.multicastFetchPeriod");return this._multicastFetchPeriod},set:function(a){notImplemented("NetStream.multicastFetchPeriod");this._multicastFetchPeriod=a}},multicastAvailabilitySendToAll:{get:function(){notImplemented("NetStream.multicastAvailabilitySendToAll");return this._multicastAvailabilitySendToAll},
set:function(a){notImplemented("NetStream.multicastAvailabilitySendToAll");this._multicastAvailabilitySendToAll=a}},farID:{get:function(){notImplemented("NetStream.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetStream.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetStream.farNonce");return this._farNonce}},peerStreams:{get:function(){notImplemented("NetStream.peerStreams");return this._peerStreams}},audioReliable:{get:function(){notImplemented("NetStream.audioReliable");
return this._audioReliable},set:function(a){notImplemented("NetStream.audioReliable");this._audioReliable=a}},videoReliable:{get:function(){notImplemented("NetStream.videoReliable");return this._videoReliable},set:function(a){notImplemented("NetStream.videoReliable");this._videoReliable=a}},dataReliable:{get:function(){notImplemented("NetStream.dataReliable");return this._dataReliable},set:function(a){notImplemented("NetStream.dataReliable");this._dataReliable=a}},audioSampleAccess:{get:function(){notImplemented("NetStream.audioSampleAccess");
return this._audioSampleAccess},set:function(a){notImplemented("NetStream.audioSampleAccess");this._audioSampleAccess=a}},videoSampleAccess:{get:function(){notImplemented("NetStream.videoSampleAccess");return this._videoSampleAccess},set:function(a){notImplemented("NetStream.videoSampleAccess");this._videoSampleAccess=a}},useHardwareDecoder:{get:function(){notImplemented("NetStream.useHardwareDecoder");return this._useHardwareDecoder},set:function(a){notImplemented("NetStream.useHardwareDecoder");
this._useHardwareDecoder=a}},useJitterBuffer:{get:function(){notImplemented("NetStream.useJitterBuffer");return this._useJitterBuffer},set:function(a){notImplemented("NetStream.useJitterBuffer");this._useJitterBuffer=a}},videoStreamSettings:{get:function(){notImplemented("NetStream.videoStreamSettings");return this._videoStreamSettings},set:function(a){notImplemented("NetStream.videoStreamSettings");this._videoStreamSettings=a}}}}}}}.call(this),ObjectEncodingDefinition=function(){return{__class__:"flash.net.ObjectEncoding",
initialize:function(){},__glue__:{"native":{"static":{dynamicPropertyWriter:{get:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")},set:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")}}},instance:{}}}}}.call(this),ResponderDefinition=function(){var a={ctor:function(){}};a.__glue__={"native":{instance:{ctor:a.ctor}}};return a}.call(this),SharedObjectDefinition=function(){var a=3,b=createEmptyObject();return{__class__:"flash.net.SharedObject",initialize:function(){this._data=
this._path=null;this._objectEncoding=a;TelemetryService.reportTelemetry({topic:"feature",feature:3})},__glue__:{"native":{"static":{deleteAll:function(){notImplemented("SharedObject.deleteAll")},getDiskUsage:function(){notImplemented("SharedObject.getDiskUsage")},getLocal:function(a,e){var f=(e||"")+"/"+a;if(b[f])return b[f];var g=new flash.net.SharedObject;g._path=f;f=sessionStorage.getItem(f);g._data=f?JSON.parse(f):{};return g},getRemote:function(){notImplemented("SharedObject.getRemote")},defaultObjectEncoding:{get:function(){return a},
set:function(d){a=d}}},instance:{setDirty:function(){somewhatImplemented("SharedObject.setDirty")},invoke:function(a){var b=a;Array.prototype.slice.call(arguments,1);var f=!1,g;switch(b){case 4:g=JSON.stringify(this._data).length-2;f=!0;break;case 6:this._data={};sessionStorage.removeItem(this._path);f=!0;break;case 2:sessionStorage.setItem(this._path,JSON.stringify(this._data));g=f=!0;break;case 3:f=!0}(f?somewhatImplemented:notImplemented)("SharedObject.invoke ("+b+")");return g},invokeWithArgsArray:function e(a,
b){return e.call(this,a,b)},data:{get:function(){return this._data}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=a}},client:{get:function(){notImplemented("SharedObject.client");return this._client},set:function(a){notImplemented("SharedObject.client");this._client=a}}}}}}}.call(this),SocketDefinition=function(){return{__class__:"flash.net.Socket",initialize:function(){this._connected=!1},__glue__:{"native":{"static":{},instance:{internalGetSecurityErrorMessage:function(){somewhatImplemented("Socket.internalGetSecurityErrorMessage");
return"SecurityErrorEvent"},internalConnect:function(a,b){somewhatImplemented("Socket.internalConnect");throwError("SecurityError",Errors.SocketConnectError,a,b)},didFailureOccur:function(){somewhatImplemented("Socket.didFailureOccur");return!0},readBytes:function(){notImplemented("Socket.readBytes")},writeBytes:function(){notImplemented("Socket.writeBytes")},writeBoolean:function(){notImplemented("Socket.writeBoolean")},writeByte:function(){notImplemented("Socket.writeByte")},writeShort:function(){notImplemented("Socket.writeShort")},
writeInt:function(){notImplemented("Socket.writeInt")},writeUnsignedInt:function(){notImplemented("Socket.writeUnsignedInt")},writeFloat:function(){notImplemented("Socket.writeFloat")},writeDouble:function(){notImplemented("Socket.writeDouble")},writeMultiByte:function(){notImplemented("Socket.writeMultiByte")},writeUTF:function(){notImplemented("Socket.writeUTF")},writeUTFBytes:function(){notImplemented("Socket.writeUTFBytes")},readBoolean:function(){notImplemented("Socket.readBoolean")},readByte:function(){notImplemented("Socket.readByte")},
readUnsignedByte:function(){notImplemented("Socket.readUnsignedByte")},readShort:function(){notImplemented("Socket.readShort")},readUnsignedShort:function(){notImplemented("Socket.readUnsignedShort")},readInt:function(){notImplemented("Socket.readInt")},readUnsignedInt:function(){notImplemented("Socket.readUnsignedInt")},readFloat:function(){notImplemented("Socket.readFloat")},readDouble:function(){notImplemented("Socket.readDouble")},readMultiByte:function(){notImplemented("Socket.readMultiByte")},
readUTF:function(){notImplemented("Socket.readUTF")},readUTFBytes:function(){notImplemented("Socket.readUTFBytes")},internalClose:function(){notImplemented("Socket.internalClose")},flush:function(){notImplemented("Socket.flush")},writeObject:function(){notImplemented("Socket.writeObject")},readObject:function(){notImplemented("Socket.readObject")},bytesAvailable:{get:function(){notImplemented("Socket.bytesAvailable");return this._bytesAvailable}},connected:{get:function(){somewhatImplemented("Socket.connected");
return this._connected}},objectEncoding:{get:function(){notImplemented("Socket.objectEncoding");return this._objectEncoding},set:function(a){notImplemented("Socket.objectEncoding");this._objectEncoding=a}},endian:{get:function(){notImplemented("Socket.endian");return this._endian},set:function(a){notImplemented("Socket.endian");this._endian=a}},bytesPending:{get:function(){notImplemented("Socket.bytesPending");return this._bytesPending}}}},script:{instance:Glue.ALL}}}}.call(this),URLLoaderDefinition=
function(){return{initialize:function(){},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{data:"public data",dataFormat:"public dataFormat",bytesTotal:"public bytesTotal",bytesLoaded:"public bytesLoaded",load:"public load"}}}}}.call(this),URLRequestDefinition=function(){function a(){var a={};a.url=this._url;a.method=this._method;a.checkPolicyFile=this._checkPolicyFile;if(this._data)if(a.mimeType=this._contentType,avm2.systemDomain.getClass("flash.utils.ByteArray").isInstanceOf(this._data))a.data=
new Uint8Array(this._data.a,0,this._data.length);else{var d=this._data.asGetPublicProperty("toString").call(this._data);if("GET"===this._method){var b=a.url.lastIndexOf("?");a.url=(0>b?a.url:a.url.substring(0,b))+"?"+d}else a.data=d}return a}var b={initialize:function(){this._url=null;this._method="GET";this._digest=this._data=null;this._contentType="application/x-www-form-urlencoded";this._requestHeaders=null;this._checkPolicyFile=!0;this._toFileRequest=a},setMethod:function(a){this._method=a},setRequestHeaders:function(a){this._requestHeaders=
a},get contentType(){return this._contentType},set contentType(a){this._contentType=a},get data(){return this._data},set data(a){this._data=a},get digest(){return this._digest},set digest(a){this._digest=a},get method(){return this._method},set method(a){this._method=a},get requestHeaders(){return this._requestHeaders},set requestHeaders(a){this._requestHeaders=a},get url(){return this._url},set url(a){this._url=a}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{setMethod:b.setMethod,
setRequestHeaders:b.setRequestHeaders,contentType:d(b,"contentType"),data:d(b,"data"),digest:d(b,"digest"),method:d(b,"method"),requestHeaders:d(b,"requestHeaders"),url:d(b,"url")}}};return b}.call(this),URLStreamDefinition=function(){var a={initialize:function(){this._stream=null;this._littleEndian=this._connected=!1},close:function(){this._session.close()},load:function(a){var b=FileLoadingService.createSession(),f=this,g=!0;b.onprogress=function(a,d){if(g){g=!1;var b=Math.max(d.bytesTotal,a.length),
e=new ArrayBuffer(b);f._stream=new Stream(e,0,0,b)}else f._stream.end+a.length>f._stream.bytes.length&&(b=f._stream.end+a.length,e=new ArrayBuffer(b),b=new Stream(e,0,0,b),b.push(f._stream.bytes.subarray(0,f._stream.end)),f._stream=b);f._stream.push(a);b=avm2.systemDomain.getClass("flash.events.ProgressEvent");f._dispatchEvent(b.createInstance(["progress",!1,!1,d.bytesLoaded,d.bytesTotal]))};b.onerror=function(a){f._connected=!1;f._stream||(f._stream=new Stream(new ArrayBuffer(0),0,0,0));f._dispatchEvent(new flash.events.IOErrorEvent(flash.events.IOErrorEvent.class.IO_ERROR,
!1,!1,a))};b.onopen=function(){f._connected=!0;f._dispatchEvent(new flash.events.Event("open",!1,!1))};b.onhttpstatus=function(a,d,b){var e=avm2.systemDomain.getClass("flash.events.HTTPStatusEvent"),g=avm2.systemDomain.getClass("flash.net.URLRequestHeader");d=e.createInstance(["httpStatus",!1,!1,d]);var v=[];b.split(/(?:\n|\r?\n)/g).forEach(function(d){if(d=/^([^:]+): (.*)$/.exec(d))v.push(g.createInstance([d[1],d[2]])),"Location"===d[1]&&(a=d[2])});d.asSetPublicProperty("responseHeaders",v);d.asSetPublicProperty("responseURL",
a);f._dispatchEvent(d)};b.onclose=function(){f._connected=!1;f._stream||(f._stream=new Stream(new ArrayBuffer(0),0,0,0));f._dispatchEvent(new flash.events.Event("complete",!1,!1))};b.open(a._toFileRequest());this._session=b},readBoolean:function(){notImplemented("URLStream.readBoolean")},readByte:function(){var a=this._stream;a.ensure(1);return a.bytes[a.pos++]},readBytes:function(a,b,f){if(0>f)throw"Invalid length argument";var g=this._stream;f?g.ensure(f):f=g.remaining();a.writeRawBytes(g.bytes.subarray(g.pos,
g.pos+f),b,f);g.pos+=f},readDouble:function(){notImplemented("URLStream.readDouble")},readFloat:function(){notImplemented("URLStream.readFloat")},readInt:function(){notImplemented("URLStream.readInt")},readMultiByte:function(){notImplemented("URLStream.readMultiByte")},readObject:function(){notImplemented("URLStream.readObject")},readShort:function(){notImplemented("URLStream.readShort")},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(a){if(0>a)throw"Invalid length argument";
var b=this._stream;b.ensure(a);var f=utf8encode(b.bytes.subarray(b.pos,b.pos+a));b.pos+=a;return f},readUnsignedByte:function(){notImplemented("URLStream.readUnsignedByte")},readUnsignedInt:function(){notImplemented("URLStream.readUnsignedInt")},readUnsignedShort:function(){var a=this._stream;a.ensure(2);var b=a.getUint16(a.pos,this._littleEndian);a.pos+=2;return b},get bytesAvailable(){return this._stream.remaining()},get connected(){return this._connected},get endian(){return this._littleEndian?
"littleEndian":"bigEndian"},set endian(a){this._littleEndian="littleEndian"==a},get objectEncoding(){notImplemented("URLStream.objectEncoding")},set objectEncoding(a){notImplemented("URLStream.objectEncoding")}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{close:a.close,load:a.load,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readDouble:a.readDouble,readFloat:a.readFloat,readInt:a.readInt,readMultiByte:a.readMultiByte,readObject:a.readObject,readShort:a.readShort,
readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,readUnsignedByte:a.readUnsignedByte,readUnsignedInt:a.readUnsignedInt,readUnsignedShort:a.readUnsignedShort,bytesAvailable:b(a,"bytesAvailable"),connected:b(a,"connected"),endian:b(a,"endian"),objectEncoding:b(a,"objectEncoding")}}};return a}.call(this),ApplicationDomainDefinition=function(){return{__class__:"flash.system.ApplicationDomain",initialize:function(){},__glue__:{"native":{"static":{currentDomain:{get:function(){return new flash.system.ApplicationDomain(AVM2.currentDomain())}},
MIN_DOMAIN_MEMORY_LENGTH:{get:function(){notImplemented("ApplicationDomain.MIN_DOMAIN_MEMORY_LENGTH")}}},instance:{ctor:function(a){a instanceof ApplicationDomain?this.nativeObject=a:(a=a?a.nativeObject:AVM2.currentDomain().system,this.nativeObject=new ApplicationDomain(a.vm,a))},getDefinition:function(a){a=a.replace("::",".");return this.nativeObject.getProperty(Multiname.fromSimpleName(a),!0,!0)},hasDefinition:function(a){if(void 0===a)return!1;a=a.replace("::",".");return!!this.nativeObject.findDomainProperty(Multiname.fromSimpleName(a),
!1,!1)},getQualifiedDefinitionNames:function(){notImplemented("ApplicationDomain.getQualifiedDefinitionNames")},parentDomain:{get:function(){var a=this.nativeObject.base;return!a?void 0:new flash.system.ApplicationDomain(a)}},domainMemory:{get:function(){notImplemented("ApplicationDomain.domainMemory");return this._domainMemory},set:function(a){notImplemented("ApplicationDomain.domainMemory");this._domainMemory=a}}}},script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),CapabilitiesDefinition=
function(){var a={},b,d=window.navigator.userAgent;0<d.indexOf("Macintosh")?b="Mac OS 10.5.2":0<d.indexOf("Windows")?b="Windows XP":0<d.indexOf("Linux")?b="Linux":/(iPad|iPhone|iPod|Android)/.test(d)?b="iPhone3,1":notImplemented();a.__glue__={"native":{"static":{version:{get:function(){return"SHUMWAY 10,0,0,0"},enumerable:!0},os:{get:function(){return b},enumerable:!0},serverString:{get:function(){var a=toKeyValueArray({OS:b}).map(function(a){return a[0]+"="+encodeURIComponent(a[1])}).join("&");somewhatImplemented("Capabilities.serverString: "+
a);return a}},hasAccessibility:{get:function(){somewhatImplemented("Capabilities.hasAccessibility");return!1}},isDebugger:{get:function(){return!1}},screenResolutionX:{get:function(){return window.screen.width}},screenResolutionY:{get:function(){return window.screen.height}},manufacturer:{get:function(){somewhatImplemented("Capabilities.manufacturer");return"Mozilla Research"}},language:{get:function(){somewhatImplemented("Capabilities.language");return"en"}},playerType:{get:function(){somewhatImplemented("Capabilities.playerType");
return"PlugIn"}}}},script:{"static":scriptProperties("public",["version","os"])}};return a}.call(this),FSCommandDefinition=function(){return{__glue__:{"native":{"static":{_fscommand:function(a,b){console.log("FSCommand: "+a+"; "+b);switch(a.toLowerCase()){case "quit":renderingTerminated=!0;break;case "debugger":debugger}}}}}}}.call(this),SecurityDefinition=function(){var a;return{__class__:"flash.system.Security",initialize:function(){},__glue__:{"native":{"static":{allowDomain:function(){somewhatImplemented('Security.allowDomain ["'+
Array.prototype.join.call(arguments,'", "')+'"]')},allowInsecureDomain:function(){somewhatImplemented("Security.allowInsecureDomain")},loadPolicyFile:function(){somewhatImplemented("Security.loadPolicyFile")},duplicateSandboxBridgeInputArguments:function(){notImplemented("Security.duplicateSandboxBridgeInputArguments")},duplicateSandboxBridgeOutputArgument:function(){notImplemented("Security.duplicateSandboxBridgeOutputArgument")},showSettings:function(){notImplemented("Security.showSettings")},exactSettings:{get:function(){return a},
set:function(b){a=b}},disableAVM1Loading:{get:function(){notImplemented("Security.disableAVM1Loading")},set:function(){notImplemented("Security.disableAVM1Loading")}},sandboxType:{get:function(){somewhatImplemented("Security.sandboxType");return"remote"}},pageDomain:{get:function(){somewhatImplemented("Security.pageDomain");var a=FileLoadingService.resolveUrl("/").split("/");a.pop();return a.pop()}}}}}}}.call(this),SecurityDomainDefinition=function(){return{__class__:"flash.system.SecurityDomain",
initialize:function(){},_currentDomain:null,__glue__:{"native":{"static":{currentDomain:{get:function(){return this._currentDomain}}},instance:{ctor_impl:function(){notImplemented("SecurityDomain.ctor_impl")},domainID:{get:function(){notImplemented("SecurityDomain.domainID");return this._domainID}}}}}}}.call(this),SystemDefinition=function(){return{__class__:"flash.system.System",initialize:function(){},__glue__:{"native":{"static":{setClipboard:function(a){FirefoxCom.request("setClipboard",a);TelemetryService.reportTelemetry({topic:"feature",
feature:2})},pause:function(){somewhatImplemented("System.pause")},resume:function(){somewhatImplemented("System.resume")},exit:function(){somewhatImplemented("System.exit");renderingTerminated=!0},gc:function(){somewhatImplemented("System.gc")},pauseForGCIfCollectionImminent:function(){notImplemented("System.pauseForGCIfCollectionImminent")},disposeXML:function(){notImplemented("System.disposeXML")},ime:{get:function(){notImplemented("System.ime")}},totalMemoryNumber:{get:function(){return performance.memory?
performance.memory.usedJSHeapSize:0}},freeMemory:{get:function(){notImplemented("System.freeMemory")}},privateMemory:{get:function(){return 0}},processCPUUsage:{get:function(){notImplemented("System.processCPUUsage")}},useCodePage:{get:function(){somewhatImplemented("System.useCodePage");return!1},set:function(){notImplemented("System.useCodePage")}},vmVersion:{get:function(){somewhatImplemented("System.vmVersion");return"1.0 shumway"}},swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},
getArgv:function(){return[]},getRunmode:function(){return"mixed"}},instance:{}}}}}.call(this),FontDefinition=function(){function a(){if(f)return f;var a=window.navigator.userAgent;return f=-1<a.indexOf("Windows")?DEVICE_FONT_METRICS_WIN:/(Macintosh|iPad|iPhone|iPod|Android)/.test(a)?DEVICE_FONT_METRICS_MAC:DEVICE_FONT_METRICS_LINUX}var b=[],d=Object.create(null),e=Object.create(null),f,g={__class__:"flash.text.Font",initialize:function(){var a=this.symbol;a&&(this._fontName=a.name||null,this._uniqueName=
a.uniqueName,this._fontStyle=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",a=a.metrics,a.height=a.ascent+a.descent+a.leading,this._metrics=a,this._fontType="embedded",b.push(this),d[this._uniqueName]=this,a=this._fontName.toLowerCase()+"_"+this._fontStyle+"_embedded",e[a]=this)},get fontName(){return this._fontName},get fontStyle(){return this._fontStyle},get fontType(){return this._fontType},hasGlyphs:function(){return!0},getFont:function(d,b,f){f=d.toLowerCase()+"_"+b+(f?"_embedded":
"_device");var g=e[f];if(g)return g;g=new flash.text.Font;g._fontName=g._uniqueName=d;g._fontStyle=b;g._fontType="device";d=a()[d];d||(d=a().serif,g._fontName=g._uniqueName="serif");g._metrics={ascent:d[0],descent:d[1],leading:d[2]};g._metrics.height=d[0]+d[1]+d[2];return e[f]=g},getFontByUniqueName:function(a){return d[a]}},l=Object.getOwnPropertyDescriptor;g.__glue__={"native":{instance:{fontName:l(g,"fontName"),fontStyle:l(g,"fontStyle"),fontType:l(g,"fontType"),hasGlyphs:g.hasGlyphs},"static":{enumerateFonts:function(){return b.slice()},
registerFont:function(){somewhatImplemented("Font.registerFont")}}}};return g}.call(this),DEVICE_FONT_METRICS_WIN={serif:[1,0.25,0],"sans-serif":[1,0.25,0],monospace:[1,0.25,0],"birch std":[0.9167,0.25,0],"blackoak std":[1,0.3333,0],"chaparral pro":[0.8333,0.3333,0],"chaparral pro light":[0.8333,0.3333,0],"charlemagne std":[0.9167,0.25,0],"cooper std black":[0.9167,0.25,0],"giddyup std":[0.8333,0.3333,0],"hobo std":[1.0833,0.3333,0],"kozuka gothic pro b":[1,0.4167,0],"kozuka gothic pro el":[1.0833,
0.25,0],"kozuka gothic pro h":[1,0.4167,0],"kozuka gothic pro l":[1,0.3333,0],"kozuka gothic pro m":[1.0833,0.3333,0],"kozuka gothic pro r":[1,0.3333,0],"kozuka mincho pro b":[1.0833,0.25,0],"kozuka mincho pro el":[1.0833,0.25,0],"kozuka mincho pro h":[1.1667,0.25,0],"kozuka mincho pro l":[1.0833,0.25,0],"kozuka mincho pro m":[1.0833,0.25,0],"kozuka mincho pro r":[1.0833,0.25,0],"mesquite std":[0.9167,0.25,0],"minion pro cond":[1,0.3333,0],"minion pro med":[1,0.3333,0],"minion pro smbd":[1,0.3333,
0],"myriad arabic":[1,0.4167,0],"nueva std":[0.75,0.25,0],"nueva std cond":[0.75,0.25,0],"ocr a std":[0.8333,0.25,0],"orator std":[1.0833,0.25,0],"poplar std":[0.9167,0.25,0],"prestige elite std":[0.9167,0.25,0],"rosewood std regular":[0.8333,0.3333,0],"stencil std":[1,0.3333,0],"trajan pro":[1,0.25,0],"kozuka gothic pr6n b":[1.4167,0.4167,0],"kozuka gothic pr6n el":[1.4167,0.3333,0],"kozuka gothic pr6n h":[1.4167,0.4167,0],"kozuka gothic pr6n l":[1.4167,0.3333,0],"kozuka gothic pr6n m":[1.5,0.3333,
0],"kozuka gothic pr6n r":[1.4167,0.3333,0],"kozuka mincho pr6n b":[1.3333,0.3333,0],"kozuka mincho pr6n el":[1.3333,0.3333,0],"kozuka mincho pr6n h":[1.4167,0.3333,0],"kozuka mincho pr6n l":[1.3333,0.3333,0],"kozuka mincho pr6n m":[1.3333,0.3333,0],"kozuka mincho pr6n r":[1.3333,0.3333,0],"letter gothic std":[1,0.25,0],"minion pro":[1,0.3333,0],"myriad hebrew":[0.8333,0.3333,0],"myriad pro":[0.9167,0.25,0],"myriad pro cond":[0.9167,0.25,0],"myriad pro light":[1,0.25,0],marlett:[1,0,0],arial:[1,0.25,
0],"arabic transparent":[1,0.25,0],"arial baltic":[1,0.25,0],"arial ce":[1,0.25,0],"arial cyr":[1,0.25,0],"arial greek":[1,0.25,0],"arial tur":[1,0.25,0],batang:[0.8333,0.1667,0],batangche:[0.8333,0.1667,0],gungsuh:[0.8333,0.1667,0],gungsuhche:[0.8333,0.1667,0],"courier new":[1,0.25,0],"courier new baltic":[1,0.25,0],"courier new ce":[1,0.25,0],"courier new cyr":[1,0.25,0],"courier new greek":[1,0.25,0],"courier new tur":[1,0.25,0],daunpenh:[0.6667,0.6667,0],dokchampa:[1.4167,0.5833,0],"estrangelo edessa":[0.75,
0.3333,0],euphemia:[1.0833,0.3333,0],gautami:[1.1667,0.8333,0],vani:[1.0833,0.75,0],gulim:[0.8333,0.1667,0],gulimche:[0.8333,0.1667,0],dotum:[0.8333,0.1667,0],dotumche:[0.8333,0.1667,0],impact:[1.0833,0.25,0],"iskoola pota":[1,0.3333,0],kalinga:[1.0833,0.5,0],kartika:[1,0.4167,0],"khmer ui":[1.0833,0.3333,0],"lao ui":[1,0.25,0],latha:[1.0833,0.4167,0],"lucida console":[0.75,0.25,0],"malgun gothic":[1,0.25,0],mangal:[1.0833,0.3333,0],meiryo:[1.0833,0.4167,0],"meiryo ui":[1,0.25,0],"microsoft himalaya":[0.5833,
0.4167,0],"microsoft jhenghei":[1,0.3333,0],"microsoft yahei":[1.0833,0.3333,0],mingliu:[0.8333,0.1667,0],pmingliu:[0.8333,0.1667,0],mingliu_hkscs:[0.8333,0.1667,0],"mingliu-extb":[0.8333,0.1667,0],"pmingliu-extb":[0.8333,0.1667,0],"mingliu_hkscs-extb":[0.8333,0.1667,0],"mongolian baiti":[0.8333,0.25,0],"ms gothic":[0.8333,0.1667,0],"ms pgothic":[0.8333,0.1667,0],"ms ui gothic":[0.8333,0.1667,0],"ms mincho":[0.8333,0.1667,0],"ms pmincho":[0.8333,0.1667,0],"mv boli":[1.1667,0.25,0],"microsoft new tai lue":[1,
0.4167,0],nyala:[0.9167,0.3333,0],"microsoft phagspa":[1.0833,0.25,0],"plantagenet cherokee":[1,0.4167,0],raavi:[1.0833,0.6667,0],"segoe script":[1.0833,0.5,0],"segoe ui":[1,0.25,0],"segoe ui semibold":[1,0.25,0],"segoe ui light":[1,0.25,0],"segoe ui symbol":[1,0.25,0],shruti:[1.0833,0.5,0],simsun:[0.8333,0.1667,0],nsimsun:[0.8333,0.1667,0],"simsun-extb":[0.8333,0.1667,0],sylfaen:[1,0.3333,0],"microsoft tai le":[1,0.3333,0],"times new roman":[1,0.25,0],"times new roman baltic":[1,0.25,0],"times new roman ce":[1,
0.25,0],"times new roman cyr":[1,0.25,0],"times new roman greek":[1,0.25,0],"times new roman tur":[1,0.25,0],tunga:[1.0833,0.75,0],vrinda:[1,0.4167,0],"shonar bangla":[0.8333,0.5,0],"microsoft yi baiti":[0.8333,0.1667,0],tahoma:[1,0.1667,0],"microsoft sans serif":[1.0833,0.1667,0],"angsana new":[0.9167,0.4167,0],aparajita:[0.75,0.4167,0],"cordia new":[0.9167,0.5,0],ebrima:[1.0833,0.5,0],gisha:[0.9167,0.25,0],kokila:[0.8333,0.3333,0],leelawadee:[0.9167,0.25,0],"microsoft uighur":[1.0833,0.5,0],moolboran:[0.6667,
0.6667,0],symbol:[1,0.25,0],utsaah:[0.8333,0.4167,0],vijaya:[1.0833,0.25,0],wingdings:[0.9167,0.25,0],andalus:[1.3333,0.4167,0],"arabic typesetting":[0.8333,0.5,0],"simplified arabic":[1.3333,0.5,0],"simplified arabic fixed":[1,0.4167,0],"sakkal majalla":[0.9167,0.5,0],"traditional arabic":[1.3333,0.5,0],aharoni:[0.75,0.25,0],david:[0.75,0.25,0],frankruehl:[0.75,0.25,0],fangsong:[0.8333,0.1667,0],simhei:[0.8333,0.1667,0],kaiti:[0.8333,0.1667,0],"browallia new":[0.8333,0.4167,0],"lucida sans unicode":[1.0833,
0.25,0],"arial black":[1.0833,0.3333,0],calibri:[0.9167,0.25,0],cambria:[0.9167,0.25,0],"cambria math":[3.0833,2.5,0],candara:[0.9167,0.25,0],"comic sans ms":[1.0833,0.3333,0],consolas:[0.9167,0.25,0],constantia:[0.9167,0.25,0],corbel:[0.9167,0.25,0],"franklin gothic medium":[1,0.3333,0],gabriola:[1.1667,0.6667,0],georgia:[1,0.25,0],"palatino linotype":[1.0833,0.3333,0],"segoe print":[1.25,0.5,0],"trebuchet ms":[1.0833,0.4167,0],verdana:[1,0.1667,0],webdings:[1.0833,0.5,0],"lucida bright":[0.9167,
0.25,0],"lucida sans":[0.9167,0.25,0],"lucida sans typewriter":[0.9167,0.25,0],"gentium basic":[0.8333,0.25,0],"dejavu serif condensed":[0.9167,0.25,0],arimo:[1,0.25,0],"dejavu sans condensed":[0.9167,0.25,0],"dejavu sans":[0.9167,0.25,0],"dejavu sans light":[0.9167,0.25,0],opensymbol:[0.8333,0.1667,0],"gentium book basic":[0.8333,0.25,0],"dejavu sans mono":[0.9167,0.25,0],"dejavu serif":[0.9167,0.25,0],"calibri light":[0.9167,0.25,0]},DEVICE_FONT_METRICS_MAC={"al bayan plain":[1,0.5,0],"al bayan bold":[1,
0.5833,0],"american typewriter":[0.9167,0.25,0],"american typewriter bold":[0.9167,0.25,0],"american typewriter condensed":[0.9167,0.25,0],"american typewriter condensed bold":[0.9167,0.25,0],"american typewriter condensed light":[0.8333,0.25,0],"american typewriter light":[0.9167,0.25,0],"andale mono":[0.9167,0.25,0],"apple symbols":[0.6667,0.25,0],"arial bold italic":[0.9167,0.25,0],"arial bold":[0.9167,0.25,0],"arial italic":[0.9167,0.25,0],"arial hebrew":[0.75,0.3333,0],"arial hebrew bold":[0.75,
0.3333,0],arial:[0.9167,0.25,0],"arial narrow":[0.9167,0.25,0],"arial narrow bold":[0.9167,0.25,0],"arial narrow bold italic":[0.9167,0.25,0],"arial narrow italic":[0.9167,0.25,0],"arial rounded mt bold":[0.9167,0.25,0],"arial unicode ms":[1.0833,0.25,0],"avenir black":[1,0.3333,0],"avenir black oblique":[1,0.3333,0],"avenir book":[1,0.3333,0],"avenir book oblique":[1,0.3333,0],"avenir heavy":[1,0.3333,0],"avenir heavy oblique":[1,0.3333,0],"avenir light":[1,0.3333,0],"avenir light oblique":[1,0.3333,
0],"avenir medium":[1,0.3333,0],"avenir medium oblique":[1,0.3333,0],"avenir oblique":[1,0.3333,0],"avenir roman":[1,0.3333,0],"avenir next bold":[1,0.3333,0],"avenir next bold italic":[1,0.3333,0],"avenir next demi bold":[1,0.3333,0],"avenir next demi bold italic":[1,0.3333,0],"avenir next heavy":[1,0.3333,0],"avenir next heavy italic":[1,0.3333,0],"avenir next italic":[1,0.3333,0],"avenir next medium":[1,0.3333,0],"avenir next medium italic":[1,0.3333,0],"avenir next regular":[1,0.3333,0],"avenir next ultra light":[1,
0.3333,0],"avenir next ultra light italic":[1,0.3333,0],"avenir next condensed bold":[1,0.3333,0],"avenir next condensed bold italic":[1,0.3333,0],"avenir next condensed demi bold":[1,0.3333,0],"avenir next condensed demi bold italic":[1,0.3333,0],"avenir next condensed heavy":[1,0.3333,0],"avenir next condensed heavy italic":[1,0.3333,0],"avenir next condensed italic":[1,0.3333,0],"avenir next condensed medium":[1,0.3333,0],"avenir next condensed medium italic":[1,0.3333,0],"avenir next condensed regular":[1,
0.3333,0],"avenir next condensed ultra light":[1,0.3333,0],"avenir next condensed ultra light italic":[1,0.3333,0],ayuthaya:[1.0833,0.3333,0],baghdad:[0.9167,0.4167,0],"bangla mn":[0.9167,0.6667,0],"bangla mn bold":[0.9167,0.6667,0],"bangla sangam mn":[0.9167,0.4167,0],"bangla sangam mn bold":[0.9167,0.4167,0],baskerville:[0.9167,0.25,0],"baskerville bold":[0.9167,0.25,0],"baskerville bold italic":[0.9167,0.25,0],"baskerville italic":[0.9167,0.25,0],"baskerville semibold":[0.9167,0.25,0],"baskerville semibold italic":[0.9167,
0.25,0],"big caslon medium":[0.9167,0.25,0],"brush script mt italic":[0.9167,0.3333,0],chalkboard:[1,0.25,0],"chalkboard bold":[1,0.25,0],"chalkboard se bold":[1.1667,0.25,0],"chalkboard se light":[1.1667,0.25,0],"chalkboard se regular":[1.1667,0.25,0],chalkduster:[1,0.25,0],"charcoal cy":[1,0.25,0],cochin:[0.9167,0.25,0],"cochin bold":[0.9167,0.25,0],"cochin bold italic":[0.9167,0.25,0],"cochin italic":[0.9167,0.25,0],"comic sans ms":[1.0833,0.25,0],"comic sans ms bold":[1.0833,0.25,0],copperplate:[0.75,
0.25,0],"copperplate bold":[0.75,0.25,0],"copperplate light":[0.75,0.25,0],"corsiva hebrew":[0.6667,0.3333,0],"corsiva hebrew bold":[0.6667,0.3333,0],courier:[0.75,0.25,0],"courier bold":[0.75,0.25,0],"courier bold oblique":[0.75,0.25,0],"courier oblique":[0.75,0.25,0],"courier new bold italic":[0.8333,0.3333,0],"courier new bold":[0.8333,0.3333,0],"courier new italic":[0.8333,0.3333,0],"courier new":[0.8333,0.3333,0],biaukai:[0.8333,0.1667,0],damascus:[0.5833,0.4167,0],"damascus bold":[0.5833,0.4167,
0],"decotype naskh":[1.1667,0.6667,0],"devanagari mt":[0.9167,0.6667,0],"devanagari mt bold":[0.9167,0.6667,0],"devanagari sangam mn":[0.9167,0.4167,0],"devanagari sangam mn bold":[0.9167,0.4167,0],didot:[0.9167,0.3333,0],"didot bold":[1,0.3333,0],"didot italic":[0.9167,0.25,0],"euphemia ucas":[1.0833,0.25,0],"euphemia ucas bold":[1.0833,0.25,0],"euphemia ucas italic":[1.0833,0.25,0],"futura condensed extrabold":[1,0.25,0],"futura condensed medium":[1,0.25,0],"futura medium":[1,0.25,0],"futura medium italic":[1,
0.25,0],"gb18030 bitmap":[1,0.6667,0],"geeza pro":[0.9167,0.3333,0],"geeza pro bold":[0.9167,0.3333,0],geneva:[1,0.25,0],"geneva cy":[1,0.25,0],georgia:[0.9167,0.25,0],"georgia bold":[0.9167,0.25,0],"georgia bold italic":[0.9167,0.25,0],"georgia italic":[0.9167,0.25,0],"gill sans":[0.9167,0.25,0],"gill sans bold":[0.9167,0.25,0],"gill sans bold italic":[0.9167,0.25,0],"gill sans italic":[0.9167,0.25,0],"gill sans light":[0.9167,0.25,0],"gill sans light italic":[0.9167,0.25,0],"gujarati mt":[0.9167,
0.6667,0],"gujarati mt bold":[0.9167,0.6667,0],"gujarati sangam mn":[0.8333,0.4167,0],"gujarati sangam mn bold":[0.8333,0.4167,0],"gurmukhi mn":[0.9167,0.25,0],"gurmukhi mn bold":[0.9167,0.25,0],"gurmukhi sangam mn":[0.9167,0.3333,0],"gurmukhi sangam mn bold":[0.9167,0.3333,0],helvetica:[0.75,0.25,0],"helvetica bold":[0.75,0.25,0],"helvetica bold oblique":[0.75,0.25,0],"helvetica light":[0.75,0.25,0],"helvetica light oblique":[0.75,0.25,0],"helvetica oblique":[0.75,0.25,0],"helvetica neue":[0.9167,
0.25,0],"helvetica neue bold":[1,0.25,0],"helvetica neue bold italic":[1,0.25,0],"helvetica neue condensed black":[1,0.25,0],"helvetica neue condensed bold":[1,0.25,0],"helvetica neue italic":[0.9167,0.25,0],"helvetica neue light":[1,0.25,0],"helvetica neue light italic":[0.9167,0.25,0],"helvetica neue medium":[1,0.25,0],"helvetica neue ultralight":[0.9167,0.25,0],"helvetica neue ultralight italic":[0.9167,0.25,0],herculanum:[0.8333,0.1667,0],"hiragino kaku gothic pro w3":[0.9167,0.0833,0],"hiragino kaku gothic pro w6":[0.9167,
0.0833,0],"hiragino kaku gothic pron w3":[0.9167,0.0833,0],"hiragino kaku gothic pron w6":[0.9167,0.0833,0],"hiragino kaku gothic std w8":[0.9167,0.0833,0],"hiragino kaku gothic stdn w8":[0.9167,0.0833,0],"hiragino maru gothic pro w4":[0.9167,0.0833,0],"hiragino maru gothic pron w4":[0.9167,0.0833,0],"hiragino mincho pro w3":[0.9167,0.0833,0],"hiragino mincho pro w6":[0.9167,0.0833,0],"hiragino mincho pron w3":[0.9167,0.0833,0],"hiragino mincho pron w6":[0.9167,0.0833,0],"hiragino sans gb w3":[0.9167,
0.0833,0],"hiragino sans gb w6":[0.9167,0.0833,0],"hoefler text black":[0.75,0.25,0],"hoefler text black italic":[0.75,0.25,0],"hoefler text italic":[0.75,0.25,0],"hoefler text ornaments":[0.8333,0.1667,0],"hoefler text":[0.75,0.25,0],impact:[1,0.25,0],inaimathi:[0.8333,0.4167,0],"headlinea regular":[0.8333,0.1667,0],"pilgi regular":[0.8333,0.25,0],"gungseo regular":[0.8333,0.25,0],"pcmyungjo regular":[0.8333,0.25,0],"kailasa regular":[1.0833,0.5833,0],"kannada mn":[0.9167,0.25,0],"kannada mn bold":[0.9167,
0.25,0],"kannada sangam mn":[1,0.5833,0],"kannada sangam mn bold":[1,0.5833,0],"kefa bold":[0.9167,0.25,0],"kefa regular":[0.9167,0.25,0],"khmer mn":[1,0.6667,0],"khmer mn bold":[1,0.6667,0],"khmer sangam mn":[1.0833,0.6667,0],"kokonor regular":[1.0833,0.5833,0],krungthep:[1,0.25,0],kufistandardgk:[0.9167,0.5,0],"lao mn":[0.9167,0.4167,0],"lao mn bold":[0.9167,0.4167,0],"lao sangam mn":[1,0.3333,0],"apple ligothic medium":[0.8333,0.1667,0],"lihei pro":[0.8333,0.1667,0],"lisong pro":[0.8333,0.1667,
0],"lucida grande":[1,0.25,0],"lucida grande bold":[1,0.25,0],"malayalam mn":[1,0.4167,0],"malayalam mn bold":[1,0.4167,0],"malayalam sangam mn":[0.8333,0.4167,0],"malayalam sangam mn bold":[0.8333,0.4167,0],"marion bold":[0.6667,0.3333,0],"marion italic":[0.6667,0.3333,0],"marion regular":[0.6667,0.3333,0],"marker felt thin":[0.8333,0.25,0],"marker felt wide":[0.9167,0.25,0],"menlo bold":[0.9167,0.25,0],"menlo bold italic":[0.9167,0.25,0],"menlo italic":[0.9167,0.25,0],"menlo regular":[0.9167,0.25,
0],"microsoft sans serif":[0.9167,0.25,0],monaco:[1,0.25,0],"gurmukhi mt":[0.8333,0.4167,0],mshtakan:[0.9167,0.25,0],"mshtakan bold":[0.9167,0.25,0],"mshtakan boldoblique":[0.9167,0.25,0],"mshtakan oblique":[0.9167,0.25,0],"myanmar mn":[1,0.4167,0],"myanmar mn bold":[1,0.4167,0],"myanmar sangam mn":[0.9167,0.4167,0],nadeem:[0.9167,0.4167,0],"nanum brush script":[0.9167,0.25,0],nanumgothic:[0.9167,0.25,0],"nanumgothic bold":[0.9167,0.25,0],"nanumgothic extrabold":[0.9167,0.25,0],nanummyeongjo:[0.9167,
0.25,0],"nanummyeongjo bold":[0.9167,0.25,0],"nanummyeongjo extrabold":[0.9167,0.25,0],"nanum pen script":[0.9167,0.25,0],"optima bold":[0.9167,0.25,0],"optima bold italic":[0.9167,0.25,0],"optima extrablack":[1,0.25,0],"optima italic":[0.9167,0.25,0],"optima regular":[0.9167,0.25,0],"oriya mn":[0.9167,0.25,0],"oriya mn bold":[0.9167,0.25,0],"oriya sangam mn":[0.8333,0.4167,0],"oriya sangam mn bold":[0.8333,0.4167,0],osaka:[1,0.25,0],"osaka-mono":[0.8333,0.1667,0],"palatino bold":[0.8333,0.25,0],
"palatino bold italic":[0.8333,0.25,0],"palatino italic":[0.8333,0.25,0],palatino:[0.8333,0.25,0],papyrus:[0.9167,0.5833,0],"papyrus condensed":[0.9167,0.5833,0],"plantagenet cherokee":[0.6667,0.25,0],raanana:[0.75,0.25,0],"raanana bold":[0.75,0.25,0],"hei regular":[0.8333,0.1667,0],"kai regular":[0.8333,0.1667,0],stfangsong:[0.8333,0.1667,0],stheiti:[0.8333,0.1667,0],"heiti sc light":[0.8333,0.1667,0],"heiti sc medium":[0.8333,0.1667,0],"heiti tc light":[0.8333,0.1667,0],"heiti tc medium":[0.8333,
0.1667,0],stkaiti:[0.8333,0.1667,0],"kaiti sc black":[1.0833,0.3333,0],"kaiti sc bold":[1.0833,0.3333,0],"kaiti sc regular":[1.0833,0.3333,0],stsong:[0.8333,0.1667,0],"songti sc black":[1.0833,0.3333,0],"songti sc bold":[1.0833,0.3333,0],"songti sc light":[1.0833,0.3333,0],"songti sc regular":[1.0833,0.3333,0],stxihei:[0.8333,0.1667,0],sathu:[0.9167,0.3333,0],silom:[1,0.3333,0],"sinhala mn":[0.9167,0.25,0],"sinhala mn bold":[0.9167,0.25,0],"sinhala sangam mn":[1.1667,0.3333,0],"sinhala sangam mn bold":[1.1667,
0.3333,0],"skia regular":[0.75,0.25,0],symbol:[0.6667,0.3333,0],"tahoma negreta":[1,0.1667,0],"tamil mn":[0.9167,0.25,0],"tamil mn bold":[0.9167,0.25,0],"tamil sangam mn":[0.75,0.25,0],"tamil sangam mn bold":[0.75,0.25,0],"telugu mn":[0.9167,0.25,0],"telugu mn bold":[0.9167,0.25,0],"telugu sangam mn":[1,0.5833,0],"telugu sangam mn bold":[1,0.5833,0],thonburi:[1.0833,0.25,0],"thonburi bold":[1.0833,0.25,0],"times bold":[0.75,0.25,0],"times bold italic":[0.75,0.25,0],"times italic":[0.75,0.25,0],"times roman":[0.75,
0.25,0],"times new roman bold italic":[0.9167,0.25,0],"times new roman bold":[0.9167,0.25,0],"times new roman italic":[0.9167,0.25,0],"times new roman":[0.9167,0.25,0],"trebuchet ms bold italic":[0.9167,0.25,0],"trebuchet ms":[0.9167,0.25,0],"trebuchet ms bold":[0.9167,0.25,0],"trebuchet ms italic":[0.9167,0.25,0],verdana:[1,0.25,0],"verdana bold":[1,0.25,0],"verdana bold italic":[1,0.25,0],"verdana italic":[1,0.25,0],webdings:[0.8333,0.1667,0],"wingdings 2":[0.8333,0.25,0],"wingdings 3":[0.9167,
0.25,0],"yuppy sc regular":[1.0833,0.3333,0],"yuppy tc regular":[1.0833,0.3333,0],"zapf dingbats":[0.8333,0.1667,0],zapfino:[1.9167,1.5,0]},DEVICE_FONT_METRICS_LINUX={kacstfarsi:[1.0831,0.5215,0],meera:[0.682,0.4413,0],freemono:[0.8023,0.2006,0],undotum:[1.0029,0.2808,0],loma:[1.1634,0.4814,0],"century schoolbook l":[1.0029,0.3209,0],kacsttitlel:[1.0831,0.5215,0],undinaru:[1.0029,0.2407,0],ungungseo:[1.0029,0.2808,0],garuda:[1.3238,0.6017,0],rekha:[1.1232,0.2808,0],purisa:[1.1232,0.5215,0],"dejavu sans mono":[0.9628,
0.2407,0],vemana2000:[0.8825,0.8424,0],kacstoffice:[1.0831,0.5215,0],umpush:[1.2837,0.682,0],opensymbol:[0.8023,0.2006,0],sawasdee:[1.1232,0.4413,0],"urw palladio l":[1.0029,0.3209,0],freeserif:[0.9227,0.3209,0],kacstdigital:[1.0831,0.5215,0],"ubuntu condensed":[0.9628,0.2006,0],unpilgi:[1.0029,0.4413,0],mry_kacstqurn:[1.4442,0.7221,0],"urw gothic l":[1.0029,0.2407,0],dingbats:[0.8424,0.1605,0],"urw chancery l":[1.0029,0.3209,0],"phetsarath ot":[1.0831,0.5215,0],"tlwg typist":[0.8825,0.4012,0],kacstletter:[1.0831,
0.5215,0],utkal:[1.2035,0.6418,0],"dejavu sans light":[0.9628,0.2407,0],norasi:[1.2436,0.5215,0],"dejavu serif condensed":[0.9628,0.2407,0],kacstone:[1.2436,0.6418,0],"liberation sans narrow":[0.9628,0.2407,0],symbol:[1.043,0.3209,0],nanummyeongjo:[0.9227,0.2407,0],untitled1:[0.682,0.5616,0],"lohit gujarati":[0.9628,0.4012,0],"liberation mono":[0.8424,0.3209,0],kacstart:[1.0831,0.5215,0],mallige:[1.0029,0.682,0],"bitstream charter":[1.0029,0.2407,0],nanumgothic:[0.9227,0.2407,0],"liberation serif":[0.9227,
0.2407,0],"dejavu sans condensed":[0.9628,0.2407,0],ubuntu:[0.9628,0.2006,0],"courier 10 pitch":[0.8825,0.3209,0],"nimbus sans l":[0.9628,0.3209,0],takaopgothic:[0.8825,0.2006,0],"wenquanyi micro hei mono":[0.9628,0.2407,0],"dejavu sans":[0.9628,0.2407,0],kedage:[1.0029,0.682,0],kinnari:[1.3238,0.5215,0],tlwgmono:[0.8825,0.4012,0],"standard symbols l":[1.043,0.3209,0],"lohit punjabi":[1.2035,0.682,0],"nimbus mono l":[0.8424,0.2808,0],rachana:[0.682,0.5616,0],waree:[1.2436,0.4413,0],kacstposter:[1.0831,
0.5215,0],"khmer os":[1.2837,0.7622,0],freesans:[1.0029,0.3209,0],gargi:[0.9628,0.2808,0],"nimbus roman no9 l":[0.9628,0.3209,0],"dejavu serif":[0.9628,0.2407,0],"wenquanyi micro hei":[0.9628,0.2407,0],"ubuntu light":[0.9628,0.2006,0],tlwgtypewriter:[0.9227,0.4012,0],kacstpen:[1.0831,0.5215,0],"tlwg typo":[0.8825,0.4012,0],"mukti narrow":[1.2837,0.4413,0],"ubuntu mono":[0.8424,0.2006,0],"lohit bengali":[1.0029,0.4413,0],"liberation sans":[0.9227,0.2407,0],unbatang:[1.0029,0.2808,0],kacstdecorative:[1.1232,
0.5215,0],"khmer os system":[1.2436,0.6017,0],saab:[1.0029,0.682,0],kacsttitle:[1.0831,0.5215,0],"mukti narrow bold":[1.2837,0.4413,0],"lohit hindi":[1.0029,0.5215,0],kacstqurn:[1.0831,0.5215,0],"urw bookman l":[0.9628,0.2808,0],kacstnaskh:[1.0831,0.5215,0],kacstscreen:[1.0831,0.5215,0],pothana2000:[0.8825,0.8424,0],ungraphic:[1.0029,0.2808,0],"lohit tamil":[0.8825,0.361,0],kacstbook:[1.0831,0.5215,0]};DEVICE_FONT_METRICS_MAC.__proto__=DEVICE_FONT_METRICS_WIN;DEVICE_FONT_METRICS_LINUX.__proto__=DEVICE_FONT_METRICS_MAC;
var StaticTextDefinition=function(){var a={__class__:"flash.text.StaticText",initialize:function(){var a=this.symbol;a&&(this.draw=a.draw)},get text(){return this._text},set text(a){this._text=a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:b(a,"text")}}};return a}.call(this),StyleSheetDefinition=function(){return{__class__:"flash.text.StyleSheet",initialize:function(){},__glue__:{"native":{"static":{},instance:{_update:function(){somewhatImplemented("StyleSheet._update")},
_parseCSSInternal:function(){somewhatImplemented("StyleSheet._parseCSSInternal");return null},_parseCSSFontFamily:function(){notImplemented("StyleSheet._parseCSSFontFamily")},_parseColor:function(){notImplemented("StyleSheet._parseColor")},_styles:{get:function(){return this.__styles},set:function(a){somewhatImplemented("StyleSheet._styles");this.__styles=a}}}}}}}.call(this),TextFieldDefinition=function(){var a={__class__:"flash.text.TextField",initialize:function(){this._bbox={xMin:0,yMin:0,xMax:2E3,
yMax:2E3};var a={align:"LEFT",face:"serif",size:12,letterspacing:0,kerning:0,color:0,leading:0};this._content=new TextFieldContent(a);this._type="dynamic";this._embedFonts=!1;this._selectable=!0;this._autoSize="none";this._bottomScrollV=this._maxScrollV=this._scrollV=1;this._drawingOffsetH=0;this._border=this._background=!1;this._backgroundColor=16777215;this._backgroundColorStr="#ffffff";this._borderColor=0;this._borderColorStr="#000000";var b=this.symbol;if(b){var b=b.tag,f=b.bbox;this._currentTransform.tx+=
f.xMin;this._currentTransform.ty+=f.yMin;this._bbox.xMax=f.xMax-f.xMin;this._bbox.yMax=f.yMax-f.yMin;b.hasLayout&&(a.size=b.fontHeight/20,a.leading=(b.leading|0)/20);b.hasColor&&(a.color=rgbaObjToStr(b.color));b.hasFont&&(f=FontDefinition.getFontByUniqueName(b.font),a.font=f,a.face=f._fontName,a.bold=f.symbol.bold,a.italic=f.symbol.italic,a.str=this._content.makeFormatString(a));this._content.multiline=!!b.multiline;this._content.wordWrap=!!b.wordWrap;this._embedFonts=!!b.useOutlines;this._selectable=
!b.noSelect;this._border=!!b.border;switch(b.align){case 1:a.align="right";break;case 2:a.align="center";break;case 3:a.align="justified"}b.initialText?b.html?this.htmlText=b.initialText:this.text=b.initialText:this.text=""}else this._currentTransform.tx-=40,this._currentTransform.ty-=40,this._content.resolveFont(a,!1),this.text=""},_getAS2Object:function(){this._as2Object||new avm1lib.AS2TextField(this);return this._as2Object},replaceText:function(a,b,f){var g=this._content.text;this.text=g.substring(0,
a)+f+g.substring(b)},draw:function(a,b,f){this.ensureDimensions();var g=this._bbox;b=g.xMax/20;g=g.yMax/20;if(!(0>=b||0>=g)){a.save();a.beginPath();a.rect(0,0,b+1,g+1);a.clip();this._background&&(f.setFillStyle(a,this._backgroundColorStr),a.fill());this._border&&(f.setStrokeStyle(a,this._borderColorStr),a.lineCap="square",a.lineWidth=1,a.strokeRect(0.5,0.5,b|0,g|0));a.closePath();if(0!==this._content.lines.length){a.translate(2,2);a.save();f.setAlpha(a);b=this._content._textRuns;for(var g=this._content.lines[this._scrollV-
1].y,l=0;l<b.length;l++){var m=b[l];"f"===m.type?(a.restore(),a.font=m.format.str,f.setFillStyle(a,m.format.color),a.save(),f.setAlpha(a)):m.y<g||a.fillText(m.text,m.x-this._drawingOffsetH,m.y-g)}a.restore()}a.restore()}},invalidateDimensions:function(){this._invalidate();this._invalidateBounds();this._dimensionsValid=!1},ensureDimensions:function(){if(!this._dimensionsValid){var a=this._bbox,b=this._content.calculateMetrics(a,this._embedFonts);this._bottomScrollV=this._maxScrollV=this._scrollV=1;
var f=this._autoSize;if("none"===f){if(a=(a.yMax-80)/20,this._content.textHeight>a){b=this._content.lines;for(f=0;f<b.length;f++){var g=b[f];if(g.y+g.height>a){this._maxScrollV=f+1;this._bottomScrollV=0===f?1:f;break}}}}else{var g=Math.max(a.xMax/20-4,1),l=this._content.textWidth,m=0;if("mixed"!==b){switch(f){case "center":m=g-l>>1;break;case "right":m=g-l}if("left"===b)this._drawingOffsetH=0;else{var p;switch(f){case "left":p=g-l;break;case "center":p=m<<1;break;case "right":p=m}"center"===b&&(p>>=
1);this._drawingOffsetH=p}this._invalidateTransform();this._currentTransform.tx+=20*m|0;a.xMax=(20*l|0)+80}a.yMax=(20*this._content.textHeight|0)+80;console.log(a.yMax);this._invalidateBounds()}this._dimensionsValid=!0}},get text(){return this._content.text},set text(a){this._content.text=a;this.invalidateDimensions()},get htmlText(){return this._content.htmlText},set htmlText(a){this._content.htmlText=a;this.invalidateDimensions()},get defaultTextFormat(){var a=this._content.defaultTextFormat;return(new flash.text.TextFormat).fromObject(a)},
set defaultTextFormat(a){this._content.defaultTextFormat=a.toObject();this.invalidateDimensions()},getTextFormat:function(){return this.defaultTextFormat},setTextFormat:function(a){this.defaultTextFormat=a;this.text===this.htmlText&&(this.text=this.text);this.invalidateDimensions()},get x(){this.ensureDimensions();return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateBounds(),this._invalidateTransform(),this._currentTransform.tx=a)},get width(){this.ensureDimensions();
return this._bbox.xMax},set width(a){0>a||(this._bbox.xMax=a,this.invalidateDimensions())},get height(){this.ensureDimensions();return this._bbox.yMax},set height(a){0>a||(this._bbox.yMax=a,this._invalidate())},_getContentBounds:function(){this.ensureDimensions();return this._bbox},_getRegion:function(a){return this._getTransformedRect(this._getContentBounds(),a)},getLineMetrics:function(a){this.ensureDimensions();(0>a||a>=this._content.lines.length)&&throwError("RangeError",Errors.ParamRangeError);
a=this._content.lines[a];var b=a.largestFormat,f=b.font._metrics,b=b.size;return new flash.text.TextLineMetrics(a.x+2,a.width,a.height,f.ascent*b+0.49999|0,f.descent*b+0.49999|0,f.leading*b+0.49999+a.leading|0)},getCharBoundaries:function(){somewhatImplemented("TextField.getCharBoundaries");return new flash.geom.Rectangle(0,0,0,0)}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:b(a,"text"),defaultTextFormat:b(a,"defaultTextFormat"),draw:a.draw,htmlText:b(a,"htmlText"),replaceText:a.replaceText,
getTextFormat:a.getTextFormat,setTextFormat:a.setTextFormat,getCharBoundaries:a.getCharBoundaries,autoSize:{get:function(){return this._autoSize},set:function(a){this._autoSize!==a&&(this._autoSize=a,this.invalidateDimensions())}},multiline:{get:function(){return this._content.multiline},set:function(a){this._content.multiline!==a&&(this._content.multiline=a,this.invalidateDimensions())}},textColor:{get:function(){return this._content.textColor},set:function(a){this._content.textColor!==a&&(this._content.textColor=
a,this._invalidate())}},selectable:{get:function(){return this._selectable},set:function(a){somewhatImplemented("TextField.selectable");this._selectable=a}},wordWrap:{get:function(){return this._content.wordWrap},set:function(a){this._content.wordWrap!==a&&(this._content.wordWrap=a,this.invalidateDimensions())}},textHeight:{get:function(){this.ensureDimensions();return this._content.textHeight}},textWidth:{get:function(){this.ensureDimensions();return this._content.textWidth}},length:{get:function(){return this.text.length}},
numLines:{get:function(){this.ensureDimensions();return this._content.lines.length}},getLineMetrics:function(a){return this.getLineMetrics(a)},setSelection:function(){somewhatImplemented("TextField.setSelection")},scrollV:{get:function(){return this._scrollV},set:function(a){this.ensureDimensions();this._scrollV=a=Math.max(1,Math.min(this._maxScrollV,a))}},bottomScrollV:{get:function(){this.ensureDimensions();if(1===this._scrollV)return this._bottomScrollV;for(var a=(this._bbox.yMax-80)/20,b=this._content.lines,
f=b[this._scrollV-1].y,g=this._bottomScrollV;g<b.length;g++){var l=b[g];if(l.y+l.height+f>a)return g+1}}},maxScrollV:{get:function(){this.ensureDimensions();return this._maxScrollV}},maxScrollH:{get:function(){this.ensureDimensions();return Math.max(this._content.textWidth-this._bbox.xMax/20+4,0)}},background:{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._invalidate())}},backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor!==
a&&(this._backgroundColor=a,this._backgroundColorStr=rgbIntAlphaToStr(a,1),this._background&&this._invalidate())}},border:{get:function(){return this._border},set:function(a){this._border!==a&&(this._border=a,this._invalidate())}},borderColor:{get:function(){return this._borderColor},set:function(a){this._borderColor!==a&&(this._borderColor=a,this._borderColorStr=rgbIntAlphaToStr(a,1),this._border&&this._invalidate())}},type:{get:function(){return this._type},set:function(a){somewhatImplemented("TextField.type");
this._type=a}},embedFonts:{get:function(){return this._embedFonts},set:function(a){this.invalidateDimensions();this._embedFonts=a}},condenseWhite:{get:function(){return this._content.condenseWhite},set:function(a){somewhatImplemented("TextField.condenseWhite");this._content.condenseWhite=a}},sharpness:{get:function(){return this._sharpness},set:function(a){somewhatImplemented("TextField.sharpness");this._sharpness=a}}}}};return a}.call(this);
function TextFieldContent(a){this.defaultTextFormat=a;this.textHeight=this.textWidth=0;this.multiline=this.wordWrap=this.condenseWhite=!1;this.textColor=null;this._htmlText=this._text="";this._createTrunk();this._textRuns=null;this._htmlParser=document.createElement("p");this._measureCtx=document.createElement("canvas").getContext("2d")}TextFieldContent.knownNodeTypes={BR:!0,LI:!0,P:!0,B:!0,I:!0,FONT:!0,TEXTFORMAT:!0,U:!0,A:!0,IMG:!0,SPAN:!0};
TextFieldContent.WRAP_OPPORTUNITIES={" ":!0,".":!0,"-":!0,"\t":!0};TextFieldContent.TextLine=function(a){this.width=this.x=0;this.y=a;this.leading=this.height=0;this.runs=[];this.largestFormat=null};
TextFieldContent.prototype={get text(){return this._text},set text(a){a+="";if(this._text!==a){for(var b=[],d=0,e=0;e<a.length;){var f=a[e];if("\r"===f||"\n"===f)b.push(a.substring(d,e)),d=e,"\r"===f&&"\n"===a[e+1]&&e++;e++}b.push(a.substring(d,e));this._createTrunk();this._htmlText=this._text=a;this._tree.children[0].children[0]={type:"plain-text",lines:b}}},get htmlText(){return this._htmlText},set htmlText(a){this._htmlText!==a&&(this.defaultTextFormat.bold=!1,this.defaultTextFormat.italic=!1,
this._parseHtml(a))},calculateMetrics:function(a,b){var d=this.defaultTextFormat;this.resolveFont(d,b);this.lines=[];this._textRuns=[{type:"f",format:d}];var e=Math.max(a.xMax/20-4,1),f=Math.max(a.yMax/20-4,1),d={ctx:this._measureCtx,w:e,h:f,maxLineWidth:0,formats:[d],currentFormat:d,line:new TextFieldContent.TextLine(0),wordWrap:this.wordWrap,combinedAlign:null,textColor:this.textColor,embedFonts:b};this._collectRuns(d,this._tree);this._finishLine(d,!1);this.textWidth=d.maxLineWidth|0;this.textHeight=
d.line.y|0;return d.combinedAlign},makeFormatString:function(a){var b="";a.italic&&(b+="italic");a.bold&&(b+=" bold");return b+" "+a.size+"px "+(a.font._uniqueName||a.font._fontName)},resolveFont:function(a,b){var d=a.face.toLowerCase();"_sans"===d?d="sans-serif":"_serif"===d?d="serif":"_typewriter"===d&&(d="monospace");d=FontDefinition.getFont(d,a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",b);a.font=d},_parseHtml:function(a){this._htmlParser.innerHTML=a;var b=1!==this._htmlParser.childNodes.length?
this._htmlParser:this._htmlParser.childNodes[0];this._text="";this._htmlText=a;this._createTrunk();3===b.nodeType&&this._convertNode(b,this._tree.children[0].children);a=[b];var d,e;if(1==a.length&&"P"==b.localName.toUpperCase()){a=this._extractAttributes(b);d=this._tree.format;for(e in a)d[e]=a[e];a=b.childNodes;b=b.childNodes[0]}if(1==a.length&&"FONT"==b.localName.toUpperCase()){a=this._extractAttributes(b);d=this._tree.children[0].format;for(e in a)d[e]=a[e];a=b.childNodes}this._convertNodeList(a,
this._tree.children[0].children)},_createTrunk:function(){var a=this.defaultTextFormat;this._tree={type:"SPAN",format:{ALIGN:a.align},children:[]};this._tree.children[0]={type:"FONT",format:{FACE:a.face,LETTERSPACING:a.letterSpacing,KERNING:a.kerning,LEADING:a.leading,COLOR:a.color},children:[]}},_convertNode:function(a,b){if((1===a.nodeType||3===a.nodeType)&&!a.prefix){var d;if(3===a.nodeType){var e=a.textContent;d={type:"text",text:e,format:null,children:null};this._text+=e;b.push(d)}else d=a.localName.toUpperCase(),
!TextFieldContent.knownNodeTypes[d]||!1===this.multiline&&("P"===d||"BR"===d)?("SBR"===d&&b.push({type:"BR",text:null,format:null,children:null}),this._convertNodeList(a.childNodes,b)):(d={type:d,text:null,format:this._extractAttributes(a),children:[]},this._convertNodeList(a.childNodes,d.children),b.push(d))}},_convertNodeList:function(a,b){for(var d=a.length,e=0;e<d;e++)this._convertNode(a[e],b)},_extractAttributes:function(a){a=a.attributes;for(var b={},d=0;d<a.length;d++){var e=a[d];e.prefix||
(b[e.localName.toUpperCase()]=e.value)}return b},_collectRuns:function(a,b){var d=!1,e=!1;switch(b.type){case "plain-text":for(var d=b.lines,f=0;f<d.length;f++)this._addRunsForText(a,d[f]),f<d.length-1&&this._finishLine(a,!0);return;case "text":this._addRunsForText(a,b.text);return;case "BR":this._finishLine(a,!0);return;case "LI":case "P":this._finishLine(a,!1);this._pushFormat(a,b);e=!0;break;case "B":case "I":case "FONT":case "TEXTFORMAT":this._pushFormat(a,b),d=!0}for(f=0;f<b.children.length;f++)this._collectRuns(a,
b.children[f]);d&&this._popFormat(a);e&&this._finishLine(a,!0)},_addRunsForText:function(a,b){if(b)if(a.wordWrap)for(;b.length;){var d=a.ctx.measureText(b).width,e=a.w-a.line.width;0>=e&&(this._finishLine(a,!1),e=a.w-a.line.width);if(d<=e){this._addTextRun(a,b,d);break}else{for(d=b.length/d*e|0;a.ctx.measureText(b.substr(0,d)).width<e&&d<b.length;)d++;for(var f=d;-1<f;){if(TextFieldContent.WRAP_OPPORTUNITIES[b[f]]){f++;break}f--}if(-1===f){if(0<a.line.width){this._finishLine(a,!1);continue}for(;a.ctx.measureText(b.substr(0,
d)).width>e;)d--;0===d&&(d=1);f=d}e=b.substr(0,f);d=a.ctx.measureText(e).width;this._addTextRun(a,e,d);a.wordWrap&&this._finishLine(a,!1);b=b.substr(f)}}else this._addTextRun(a,b,a.ctx.measureText(b).width)},_addTextRun:function(a,b,d){if(0!==b.length){var e=a.line,f=a.currentFormat,g=f.size;b={type:"t",text:b,x:e.width};this._textRuns.push(b);a.line.runs.push(b);e.width+=d|0;0===e.leading&&f.leading>e.leading&&(e.leading=f.leading);if(!e.largestFormat||g>e.largestFormat.size)e.largestFormat=f}},
_finishLine:function(a,b){var d=a.line;if(0===d.runs.length){if(b){var e=a.currentFormat;a.line.y+=e.font._metrics.height*e.size+e.leading|0}}else{for(var f=d.runs,e=d.largestFormat,g=d.y+e.font._metrics.ascent*e.size,l=f.length;l--;)f[l].y=g;l=(a.currentFormat.align||"").toLowerCase();null===a.combinedAlign?a.combinedAlign=l:a.combinedAlign!==l&&(a.combinedAlign="mixed");if("center"===l||"right"===l){g=Math.max(a.w-d.width,0);"center"===l&&(g>>=1);for(l=f.length;l--;)f[l].x+=g}d.height=e.font._metrics.height*
e.size+d.leading|0;a.maxLineWidth=Math.max(a.maxLineWidth,d.width);this.lines.push(d);a.line=new TextFieldContent.TextLine(d.y+d.height)}},_pushFormat:function(a,b){var d=b.format,e=Object.create(a.formats[a.formats.length-1]),f=!1;switch(b.type){case "P":if(d.ALIGN===e.align)return;e.align=d.ALIGN;break;case "B":f=e.bold=!0;break;case "I":f=e.italic=!0;break;case "FONT":void 0!==d.COLOR&&(e.color=d.COLOR),void 0!==d.FACE&&(e.face=d.FACE,f=!0),void 0!==d.SIZE&&(e.size=parseFloat(d.SIZE)),void 0!==
d.LETTERSPACING&&(e.letterspacing=parseFloat(d.LETTERSPACING)),void 0!==d.KERNING&&(e.kerning=d.KERNING&&!0);case "TEXTFORMAT":void 0!==d.LEADING&&(e.leading=parseFloat(d.LEADING));void 0!==d.INDENT&&(a.line.x=d.INDENT,a.line.width+=d.INDENT|0);break;default:warning("Unknown format node encountered: "+b.type);return}null!==a.textColor&&(e.color=rgbIntAlphaToStr(a.textColor,1));f&&this.resolveFont(e,a.embedFonts);e.str=this.makeFormatString(e);a.formats.push(e);this._textRuns.push({type:"f",format:e});
a.currentFormat=e;a.ctx.font=e.str},_popFormat:function(a){a.formats.pop();var b=a.currentFormat=a.formats[a.formats.length-1];this._textRuns.push({type:"f",format:b});a.ctx.font=a.str}};
var TextFormatDefinition=function(){var a;return{__class__:"flash.text.TextFormat",initialize:function(){},fromObject:function(a){this._font=a.face||null;this._size="number"===typeof a.size?a.size:null;this._color="number"===typeof a.color?a.color:null;this._bold="boolean"===typeof a.bold?a.bold:null;this._italic="boolean"===typeof a.italic?a.italic:null;this._underline="boolean"===typeof a.underline?a.underline:null;this._url=a.url||null;this._target=a.target||null;this._align=a.align||null;this._leftMargin=
"number"===typeof a.leftMargin?a.leftMargin:null;this._rightMargin="number"===typeof a.rightMargin?a.rightMargin:null;this._indent="number"===typeof a.indent?a.indent:null;this._leading="number"===typeof a.leading?a.leading:null;return this},toObject:function(){return{face:this._font||"serif",size:this._size||12,color:this._color||0,bold:this._bold||!1,italic:this._italic||!1,underline:this._underline||!1,url:this._url,target:this._target,align:this._align||"left",leftMargin:this._leftMargin||0,rightMargin:this._rightMargin||
0,indent:this._indent||0,leading:this._leading||0}},as2GetTextExtent:function(b,d){a||(a=new flash.text.TextField,a._multiline=!0);!isNaN(d)&&0<d?(a.width=d+4,a._wordWrap=!0):a._wordWrap=!1;a.defaultTextFormat=this;a.text=b;a.ensureDimensions();var e={},f=a._textWidth,g=a._textHeight;e.asSetPublicProperty("width",f);e.asSetPublicProperty("height",g);e.asSetPublicProperty("textFieldWidth",f+4);e.asSetPublicProperty("textFieldHeight",g+4);f=a.getLineMetrics(0);e.asSetPublicProperty("ascent",f.asGetPublicProperty("ascent"));
e.asSetPublicProperty("descent",f.asGetPublicProperty("descent"));return e},__glue__:{"native":{"static":{},instance:{align:{get:function(){return this._align},set:function(a){this._align=a}},blockIndent:{get:function(){return this._blockIndent},set:function(a){this._blockIndent=a}},bold:{get:function(){return this._bold},set:function(a){this._bold=a}},bullet:{get:function(){return this._bullet},set:function(a){this._bullet=a}},color:{get:function(){return this._color},set:function(a){this._color=
a}},display:{get:function(){return this._display},set:function(a){this._display=a}},font:{get:function(){return this._font},set:function(a){this._font=a}},indent:{get:function(){return this._indent},set:function(a){this._indent=a}},italic:{get:function(){return this._italic},set:function(a){this._italic=a}},kerning:{get:function(){return this._kerning},set:function(a){this._kerning=a}},leading:{get:function(){return this._leading},set:function(a){this._leading=a}},leftMargin:{get:function(){return this._leftMargin},
set:function(a){this._leftMargin=a}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing=a}},rightMargin:{get:function(){return this._rightMargin},set:function(a){this._rightMargin=a}},size:{get:function(){return this._size},set:function(a){this._size=a}},tabStops:{get:function(){return this._tabStops},set:function(a){this._tabStops=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},underline:{get:function(){return this._underline},
set:function(a){this._underline=a}},url:{get:function(){return this._url},set:function(a){this._url=a}}}}}}}.call(this),ContentElementDefinition=function(){return{__class__:"flash.text.engine.ContentElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{textBlock:{get:function(){notImplemented("ContentElement.textBlock");return this._textBlock}},textBlockBeginIndex:{get:function(){notImplemented("ContentElement.textBlockBeginIndex");return this._textBlockBeginIndex}},elementFormat:{get:function(){return this._elementFormat},
set:function(a){somewhatImplemented("ContentElement.elementFormat");this._elementFormat=a}},eventMirror:{get:function(){return this._eventMirror},set:function(a){somewhatImplemented("ContentElement.eventMirror");this._eventMirror=a}},groupElement:{get:function(){notImplemented("ContentElement.groupElement");return this._groupElement}},rawText:{get:function(){notImplemented("ContentElement.rawText");return this._rawText}},text:{get:function(){notImplemented("ContentElement.text");return this._text}},
textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ContentElement.textRotation");this._textRotation=a}}}}}}}.call(this),ElementFormatDefinition=function(){return{__class__:"flash.text.engine.ElementFormat",initialize:function(){},__glue__:{"native":{"static":{},instance:{getFontMetrics:function(){notImplemented("ElementFormat.getFontMetrics")},alignmentBaseline:{get:function(){return this._alignmentBaseline},set:function(a){somewhatImplemented("ElementFormat.alignmentBaseline");
this._alignmentBaseline=a}},alpha:{get:function(){return this._alpha},set:function(a){somewhatImplemented("ElementFormat.alpha");this._alpha=a}},baselineShift:{get:function(){return this._baselineShift},set:function(a){somewhatImplemented("ElementFormat.baselineShift");this._baselineShift=a}},breakOpportunity:{get:function(){return this._breakOpportunity},set:function(a){somewhatImplemented("ElementFormat.breakOpportunity");this._breakOpportunity=a}},color:{get:function(){return this._color},set:function(a){somewhatImplemented("ElementFormat.color");
this._color=a}},dominantBaseline:{get:function(){return this._dominantBaseline},set:function(a){somewhatImplemented("ElementFormat.dominantBaseline");this._dominantBaseline=a}},fontDescription:{get:function(){return this._fontDescription},set:function(a){somewhatImplemented("ElementFormat.fontDescription");this._fontDescription=a}},digitCase:{get:function(){return this._digitCase},set:function(a){somewhatImplemented("ElementFormat.digitCase");this._digitCase=a}},digitWidth:{get:function(){return this._digitWidth},
set:function(a){somewhatImplemented("ElementFormat.digitWidth");this._digitWidth=a}},ligatureLevel:{get:function(){return this._ligatureLevel},set:function(a){somewhatImplemented("ElementFormat.ligatureLevel");this._ligatureLevel=a}},fontSize:{get:function(){return this._fontSize},set:function(a){somewhatImplemented("ElementFormat.fontSize");this._fontSize=a}},kerning:{get:function(){return this._kerning},set:function(a){somewhatImplemented("ElementFormat.kerning");this._kerning=a}},locale:{get:function(){return this._locale},
set:function(a){somewhatImplemented("ElementFormat.locale");this._locale=a}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ElementFormat.textRotation");this._textRotation=a}},trackingRight:{get:function(){return this._trackingRight},set:function(a){somewhatImplemented("ElementFormat.trackingRight");this._trackingRight=a}},trackingLeft:{get:function(){return this._trackingLeft},set:function(a){somewhatImplemented("ElementFormat.trackingLeft");this._trackingLeft=
a}},typographicCase:{get:function(){return this._typographicCase},set:function(a){somewhatImplemented("ElementFormat.typographicCase");this._typographicCase=a}},locked:{get:function(){notImplemented("ElementFormat.locked");return this._locked},set:function(a){notImplemented("ElementFormat.locked");this._locked=a}}}}}}}.call(this),FontDescriptionDefinition=function(){return{__class__:"flash.text.engine.FontDescription",initialize:function(){},__glue__:{"native":{"static":{isFontCompatible:function(){notImplemented("FontDescription.isFontCompatible")},
isDeviceFontCompatible:function(){notImplemented("FontDescription.isDeviceFontCompatible")}},instance:{renderingMode:{get:function(){return this._renderingMode},set:function(a){somewhatImplemented("FontDescription.renderingMode");this._renderingMode=a}},fontLookup:{get:function(){return this._fontLookup},set:function(a){somewhatImplemented("FontDescription.fontLookup");this._fontLookup=a}},fontName:{get:function(){return this._fontName},set:function(a){somewhatImplemented("FontDescription.fontName");
this._fontName=a}},fontPosture:{get:function(){return this._fontPosture},set:function(a){somewhatImplemented("FontDescription.fontPosture");this._fontPosture=a}},fontWeight:{get:function(){return this._fontWeight},set:function(a){somewhatImplemented("FontDescription.fontWeight");this._fontWeight=a}},cffHinting:{get:function(){return this._cffHinting},set:function(a){somewhatImplemented("FontDescription.cffHinting");this._cffHinting=a}},locked:{get:function(){notImplemented("FontDescription.locked");
return this._locked},set:function(a){notImplemented("FontDescription.locked");this._locked=a}}}},script:{"static":{},instance:{}}}}}.call(this),GroupElementDefinition=function(){return{__class__:"flash.text.engine.GroupElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{getElementAt:function(){notImplemented("GroupElement.getElementAt")},setElements:function(a){somewhatImplemented("GroupElement.setElements");this._elements=a},groupElements:function(){notImplemented("GroupElement.groupElements")},
ungroupElements:function(){notImplemented("GroupElement.ungroupElements")},mergeTextElements:function(){notImplemented("GroupElement.mergeTextElements")},splitTextElement:function(){notImplemented("GroupElement.splitTextElement")},replaceElements:function(){notImplemented("GroupElement.replaceElements")},getElementAtCharIndex:function(){notImplemented("GroupElement.getElementAtCharIndex")},elementCount:{get:function(){notImplemented("GroupElement.elementCount");return this._elementCount}}}}}}}.call(this),
SpaceJustifierDefinition=function(){return{__class__:"flash.text.engine.SpaceJustifier",initialize:function(){this._letterSpacing=!1;this._optimumSpacing=1;this._minimumSpacing=0.5;this._maximumSpacing=1.5},__glue__:{"native":{"static":{},instance:{cloneSpacing:function(a){somewhatImplemented("SpaceJustifier.cloneSpacing");a._optimumSpacing=this._optimumSpacing;a._minimumSpacing=this._minimumSpacing;a._maximumSpacing=this._maximumSpacing},letterSpacing:{get:function(){return this._letterSpacing},
set:function(a){somewhatImplemented("SpaceJustifier.letterSpacing");this._letterSpacing=a}},minimumSpacing:{get:function(){return this._minimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.minimumSpacing");this._minimumSpacing=a}},optimumSpacing:{get:function(){return this._optimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.optimumSpacing");this._optimumSpacing=a}},maximumSpacing:{get:function(){return this._maximumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.maximumSpacing");
this._maximumSpacing=a}}}}}}}.call(this),TextBlockDefinition=function(){return{__class__:"flash.text.engine.TextBlock",initialize:function(){this._lastLine=this._firstLine=null},__glue__:{"native":{"static":{},instance:{getTextJustifier:function(){return this._textJustifier},setTextJustifier:function(a){somewhatImplemented("TextBlock.setTextJustifier");this._textJustifier=a},getTabStops:function(){return this._tabStops},setTabStops:function(a){somewhatImplemented("TextBlock.setTabStops");this._tabStops=
a},findNextAtomBoundary:function(){notImplemented("TextBlock.findNextAtomBoundary")},findPreviousAtomBoundary:function(){notImplemented("TextBlock.findPreviousAtomBoundary")},findNextWordBoundary:function(){notImplemented("TextBlock.findNextWordBoundary")},findPreviousWordBoundary:function(){notImplemented("TextBlock.findPreviousWordBoundary")},getTextLineAtCharIndex:function(){notImplemented("TextBlock.getTextLineAtCharIndex")},DoCreateTextLine:function(a,b){somewhatImplemented("TextBlock.DoCreateTextLine");
if(a)return null;var d=new flash.text.engine.TextLine;d._textBlock=this;d._specifiedWidth=b;d._rawTextLength=0;d._textWidth=0;d._textHeight=0;d._ascent=0;d._descent=0;d._unjustifiedTextWidth=0;d._validity="valid";d._previousLine=null;d._nextLine=null;return this._lastLine=this._firstLine=d},releaseLineCreationData:function(){notImplemented("TextBlock.releaseLineCreationData")},releaseLines:function(){notImplemented("TextBlock.releaseLines")},dump:function(){notImplemented("TextBlock.dump")},applyNonLinearFontScaling:{get:function(){return this._applyNonLinearFontScaling},
set:function(a){somewhatImplemented("TextBlock.applyNonLinearFontScaling");this._applyNonLinearFontScaling=a}},baselineFontDescription:{get:function(){return this._baselineFontDescription},set:function(a){somewhatImplemented("TextBlock.baselineFontDescription");this._baselineFontDescription=a}},baselineFontSize:{get:function(){return this._baselineFontSize},set:function(a){somewhatImplemented("TextBlock.baselineFontSize");this._baselineFontSize=a}},baselineZero:{get:function(){return this._baselineZero},
set:function(a){somewhatImplemented("TextBlock.baselineZero");this._baselineZero=a}},content:{get:function(){return this._content},set:function(a){somewhatImplemented("TextBlock.content");this._content=a}},bidiLevel:{get:function(){return this._bidiLevel},set:function(a){somewhatImplemented("TextBlock.bidiLevel");this._bidiLevel=a}},firstInvalidLine:{get:function(){notImplemented("TextBlock.firstInvalidLine");return this._firstInvalidLine}},firstLine:{get:function(){somewhatImplemented("TextBlock.firstLine");
return this._firstLine}},lastLine:{get:function(){somewhatImplemented("TextBlock.lastLine");return this._lastLine}},textLineCreationResult:{get:function(){notImplemented("TextBlock.textLineCreationResult");return this._textLineCreationResult}},lineRotation:{get:function(){return this._lineRotation},set:function(a){somewhatImplemented("TextBlock.lineRotation");this._lineRotation=a}}}}}}}.call(this),TextElementDefinition=function(){return{__class__:"flash.text.engine.TextElement",initialize:function(){},
__glue__:{"native":{"static":{},instance:{replaceText:function(a,b,d){somewhatImplemented("TextElement.replaceText");var e=this._text||"";this._text=e.slice(0,a)+d+e.slice(b)},text:{set:function(a){somewhatImplemented("TextElement.text");this._text=a}}}}}}}.call(this),TextJustifierDefinition=function(){return{__class__:"flash.text.engine.TextJustifier",initialize:function(){this._lineJustification=this._locale=null},__glue__:{"native":{"static":{},instance:{setLocale:function(a){somewhatImplemented("TextJustifier.setLocale");
this._locale=a},locale:{get:function(){return this._locale}},lineJustification:{get:function(){return this._lineJustification},set:function(a){somewhatImplemented("TextJustifier.lineJustification");this._lineJustification=a}}}}}}}.call(this),TextLineDefinition=function(){return{__class__:"flash.text.engine.TextLine",initialize:function(){},__glue__:{"native":{"static":{},instance:{getAtomIndexAtPoint:function(){notImplemented("TextLine.getAtomIndexAtPoint")},getAtomIndexAtCharIndex:function(){notImplemented("TextLine.getAtomIndexAtCharIndex")},
getAtomBounds:function(){notImplemented("TextLine.getAtomBounds")},getAtomBidiLevel:function(){notImplemented("TextLine.getAtomBidiLevel")},getAtomTextRotation:function(){notImplemented("TextLine.getAtomTextRotation")},getAtomTextBlockBeginIndex:function(){notImplemented("TextLine.getAtomTextBlockBeginIndex")},getAtomTextBlockEndIndex:function(){notImplemented("TextLine.getAtomTextBlockEndIndex")},getAtomCenter:function(){notImplemented("TextLine.getAtomCenter")},getAtomWordBoundaryOnLeft:function(){notImplemented("TextLine.getAtomWordBoundaryOnLeft")},
getAtomGraphic:function(){notImplemented("TextLine.getAtomGraphic")},getBaselinePosition:function(){notImplemented("TextLine.getBaselinePosition")},dump:function(){notImplemented("TextLine.dump")},textBlock:{get:function(){notImplemented("TextLine.textBlock");return this._textBlock}},hasGraphicElement:{get:function(){notImplemented("TextLine.hasGraphicElement");return this._hasGraphicElement}},hasTabs:{get:function(){notImplemented("TextLine.hasTabs");return this._hasTabs}},nextLine:{get:function(){somewhatImplemented("TextLine.nextLine");
return this._nextLine}},previousLine:{get:function(){somewhatImplemented("TextLine.previousLine");return this._previousLine}},ascent:{get:function(){somewhatImplemented("TextLine.ascent");return this._ascent}},descent:{get:function(){somewhatImplemented("TextLine.descent");return this._descent}},textHeight:{get:function(){somewhatImplemented("TextLine.textHeight");return this._textHeight}},textWidth:{get:function(){somewhatImplemented("TextLine.textWidth");return this._textWidth}},totalAscent:{get:function(){notImplemented("TextLine.totalAscent");
return this._totalAscent}},totalDescent:{get:function(){notImplemented("TextLine.totalDescent");return this._totalDescent}},totalHeight:{get:function(){notImplemented("TextLine.totalHeight");return this._totalHeight}},textBlockBeginIndex:{get:function(){notImplemented("TextLine.textBlockBeginIndex");return this._textBlockBeginIndex}},rawTextLength:{get:function(){somewhatImplemented("TextLine.rawTextLength");return this._rawTextLength}},specifiedWidth:{get:function(){somewhatImplemented("TextLine.specifiedWidth");
return this._specifiedWidth}},unjustifiedTextWidth:{get:function(){somewhatImplemented("TextLine.unjustifiedTextWidth");return this._unjustifiedTextWidth}},validity:{get:function(){return this._validity},set:function(a){somewhatImplemented("TextLine.validity");this._validity=a}},atomCount:{get:function(){notImplemented("TextLine.atomCount");return this._atomCount}},mirrorRegions:{get:function(){notImplemented("TextLine.mirrorRegions");return this._mirrorRegions}}}}}}}.call(this),ContextMenuDefinition=
function(){return{__class__:"flash.ui.ContextMenu",initialize:function(){},__glue__:{"native":{"static":{_checkSupported:function(){notImplemented("ContextMenu._checkSupported")}},instance:{cloneLinkAndClipboardProperties:function(){notImplemented("ContextMenu.cloneLinkAndClipboardProperties")},builtInItems:{get:function(){somewhatImplemented("ContextMenu.builtInItems");return this._builtInItems},set:function(a){somewhatImplemented("ContextMenu.builtInItems");this._builtInItems=a}},customItems:{get:function(){somewhatImplemented("ContextMenu.customItems");
return this._customItems},set:function(a){somewhatImplemented("ContextMenu.customItems");this._customItems=a}},link:{get:function(){notImplemented("ContextMenu.link");return this._link},set:function(a){notImplemented("ContextMenu.link");this._link=a}},clipboardMenu:{get:function(){notImplemented("ContextMenu.clipboardMenu");return this._clipboardMenu},set:function(a){notImplemented("ContextMenu.clipboardMenu");this._clipboardMenu=a}},clipboardItems:{get:function(){notImplemented("ContextMenu.clipboardItems");
return this._clipboardItems},set:function(a){notImplemented("ContextMenu.clipboardItems");this._clipboardItems=a}}}}}}}.call(this),ContextMenuItemDefinition=function(){return{__class__:"flash.ui.ContextMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{caption:{get:function(){somewhatImplemented("ContextMenuItem.caption");return this._caption},set:function(a){somewhatImplemented("ContextMenuItem.caption");this._caption=a}},separatorBefore:{get:function(){somewhatImplemented("ContextMenuItem.separatorBefore");
return this._separatorBefore},set:function(a){somewhatImplemented("ContextMenuItem.separatorBefore");this._separatorBefore=a}},visible:{get:function(){somewhatImplemented("ContextMenuItem.visible");return this._visible},set:function(a){somewhatImplemented("ContextMenuItem.visible");this._visible=a}}}}}}}.call(this),ShumwayKeyboardListener={_lastKeyCode:0,_captureKeyPress:!1,_charCodeMap:[],focus:null,handleEvent:function(a){var b=a.keyCode;if("keydown"===a.type){this._lastKeyCode=b;if(this._captureKeyPress=
8===b||9===b||13===b||32===b||48<=b&&90>=b||145<b)return;this._charCodeMap[b]=0}else if("keypress"===a.type)if(this._captureKeyPress)b=this._lastKeyCode,this._charCodeMap[b]=a.charCode;else return;this.focus&&this.focus._dispatchEvent(new flash.events.KeyboardEvent("keyup"===a.type?"keyUp":"keyDown",!0,!1,"keyup"===a.type?this._charCodeMap[b]:a.charCode,"keyup"===a.type?a.keyCode:this._lastKeyCode,a.keyLocation,a.ctrlKey,a.altKey,a.shiftKey))}};window.addEventListener("keydown",ShumwayKeyboardListener);
window.addEventListener("keypress",ShumwayKeyboardListener);window.addEventListener("keyup",ShumwayKeyboardListener);
var KeyboardDefinition=function(){var a={get capsLock(){return!1},get hasVirtualKeyboard(){return!1},get numLock(){return!1},get physicalKeyboardType(){return"alphanumeric"},get isAccessible(){return!0}},b=Object.getOwnPropertyDescriptor;a.__glue__={script:{"static":scriptProperties("public","A ALTERNATE AUDIO B BACK BACKQUOTE BACKSLASH BACKSPACE BLUE C CAPS_LOCK CHANNEL_DOWN CHANNEL_UP COMMA COMMAND CONTROL D DELETE DOWN DVR E END ENTER EQUAL ESCAPE EXIT F F1 F10 F11 F12 F13 F14 F15 F2 F3 F4 F5 F6 F7 F8 F9 FAST_FORWARD G GREEN GUIDE H HELP HOME I INFO INPUT INSERT J K KEYNAME_BEGIN KEYNAME_BREAK KEYNAME_CLEARDISPLAY KEYNAME_CLEARLINE KEYNAME_DELETE KEYNAME_DELETECHAR KEYNAME_DELETELINE KEYNAME_DOWNARROW KEYNAME_END KEYNAME_EXECUTE KEYNAME_F1 KEYNAME_F10 KEYNAME_F11 KEYNAME_F12 KEYNAME_F13 KEYNAME_F14 KEYNAME_F15 KEYNAME_F16 KEYNAME_F17 KEYNAME_F18 KEYNAME_F19 KEYNAME_F2 KEYNAME_F20 KEYNAME_F21 KEYNAME_F22 KEYNAME_F23 KEYNAME_F24 KEYNAME_F25 KEYNAME_F26 KEYNAME_F27 KEYNAME_F28 KEYNAME_F29 KEYNAME_F3 KEYNAME_F30 KEYNAME_F31 KEYNAME_F32 KEYNAME_F33 KEYNAME_F34 KEYNAME_F35 KEYNAME_F4 KEYNAME_F5 KEYNAME_F6 KEYNAME_F7 KEYNAME_F8 KEYNAME_F9 KEYNAME_FIND KEYNAME_HELP KEYNAME_HOME KEYNAME_INSERT KEYNAME_INSERTCHAR KEYNAME_INSERTLINE KEYNAME_LEFTARROW KEYNAME_MENU KEYNAME_MODESWITCH KEYNAME_NEXT KEYNAME_PAGEDOWN KEYNAME_PAGEUP KEYNAME_PAUSE KEYNAME_PREV KEYNAME_PRINT KEYNAME_PRINTSCREEN KEYNAME_REDO KEYNAME_RESET KEYNAME_RIGHTARROW KEYNAME_SCROLLLOCK KEYNAME_SELECT KEYNAME_STOP KEYNAME_SYSREQ KEYNAME_SYSTEM KEYNAME_UNDO KEYNAME_UPARROW KEYNAME_USER L LAST LEFT LEFTBRACKET LIVE M MASTER_SHELL MENU MINUS N NEXT NUMBER_0 NUMBER_1 NUMBER_2 NUMBER_3 NUMBER_4 NUMBER_5 NUMBER_6 NUMBER_7 NUMBER_8 NUMBER_9 NUMPAD NUMPAD_0 NUMPAD_1 NUMPAD_2 NUMPAD_3 NUMPAD_4 NUMPAD_5 NUMPAD_6 NUMPAD_7 NUMPAD_8 NUMPAD_9 NUMPAD_ADD NUMPAD_DECIMAL NUMPAD_DIVIDE NUMPAD_ENTER NUMPAD_MULTIPLY NUMPAD_SUBTRACT O P PAGE_DOWN PAGE_UP PAUSE PERIOD PLAY PREVIOUS Q QUOTE R RECORD RED REWIND RIGHT RIGHTBRACKET S SEARCH SEMICOLON SETUP SHIFT SKIP_BACKWARD SKIP_FORWARD SLASH SPACE STOP STRING_BEGIN STRING_BREAK STRING_CLEARDISPLAY STRING_CLEARLINE STRING_DELETE STRING_DELETECHAR STRING_DELETELINE STRING_DOWNARROW STRING_END STRING_EXECUTE STRING_F1 STRING_F10 STRING_F11 STRING_F12 STRING_F13 STRING_F14 STRING_F15 STRING_F16 STRING_F17 STRING_F18 STRING_F19 STRING_F2 STRING_F20 STRING_F21 STRING_F22 STRING_F23 STRING_F24 STRING_F25 STRING_F26 STRING_F27 STRING_F28 STRING_F29 STRING_F3 STRING_F30 STRING_F31 STRING_F32 STRING_F33 STRING_F34 STRING_F35 STRING_F4 STRING_F5 STRING_F6 STRING_F7 STRING_F8 STRING_F9 STRING_FIND STRING_HELP STRING_HOME STRING_INSERT STRING_INSERTCHAR STRING_INSERTLINE STRING_LEFTARROW STRING_MENU STRING_MODESWITCH STRING_NEXT STRING_PAGEDOWN STRING_PAGEUP STRING_PAUSE STRING_PREV STRING_PRINT STRING_PRINTSCREEN STRING_REDO STRING_RESET STRING_RIGHTARROW STRING_SCROLLLOCK STRING_SELECT STRING_STOP STRING_SYSREQ STRING_SYSTEM STRING_UNDO STRING_UPARROW STRING_USER SUBTITLE T TAB U UP V VOD W X Y YELLOW Z CharCodeStrings".split(" "))},"native":{instance:{capsLock:b(a,
"capsLock"),hasVirtualKeyboard:b(a,"hasVirtualKeyboard"),numLock:b(a,"numLock"),physicalKeyboardType:b(a,"physicalKeyboardType"),isAccessible:b(a,"isAccessible")}}};return a}.call(this),MouseDefinition=function(){return{__class__:"flash.ui.Mouse",__glue__:{"native":{"static":{cursor:{get:function(){return"auto"},set:function(){notImplemented()}},supportsCursor:{get:function(){return!0}},supportsNativeCursor:{get:function(){return!0}},hide:function(){},show:function(){},registerCursor:function(){notImplemented()},
unregisterCursor:function(){notImplemented()}}}}}}.call(this),MouseCursorDataDefinition=function(){return{__class__:"flash.ui.MouseCursorData",initialize:function(){},__glue__:{"native":{"static":{},instance:{data:{get:function(){notImplemented("MouseCursorData.data");return this._data},set:function(a){notImplemented("MouseCursorData.data");this._data=a}},hotSpot:{get:function(){notImplemented("MouseCursorData.hotSpot");return this._hotSpot},set:function(a){notImplemented("MouseCursorData.hotSpot");
this._hotSpot=a}},frameRate:{get:function(){notImplemented("MouseCursorData.frameRate");return this._frameRate},set:function(a){notImplemented("MouseCursorData.frameRate");this._frameRate=a}}}}}}}.call(this),DictionaryDefinition=function(){return{__class__:"flash.utils.Dictionary",initialize:function(){},__glue__:{"native":{"static":{},instance:{init:function(){notImplemented("Dictionary.init")}}}}}}.call(this),TimerDefinition=function(){return{__class__:"flash.utils.Timer",initialize:function(){this._running=
!1},__glue__:{"native":{instance:{running:{get:function(){return this._running}},_start:function(a,b){this._running=!0;this.interval=setInterval(b,a)},stop:function(){this._running=!1;clearInterval(this.interval)},_tick:function(){this._running&&this._dispatchEvent(new flash.events.TimerEvent("timer",!0,!1))}}}}}}.call(this),AccessibilityDefinition=function(){return{__class__:"flash.accessibility.Accessibility",initialize:function(){},__glue__:{"native":{"static":{sendEvent:function(){notImplemented("Accessibility.sendEvent")},
updateProperties:function(){notImplemented("Accessibility.updateProperties")},active:{get:function(){somewhatImplemented("Accessibility.active");return!1}}},instance:{}}}}}.call(this),AS2ButtonDefinition=function(){var a={__class__:"avm1lib.AS2Button",initialize:function(){}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this._nativeAS3Object}},_init:function(a){Object.defineProperty(this,"_nativeAS3Object",{value:a});a._as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};
return a}.call(this),AS2GlobalsDefinition=function(){var a=Shumway.AVM1.AS2Context,b={__class__:"avm1lib.AS2Globals",initialize:function(){flash.text.TextFormat.prototype.asDefinePublicProperty("getTextExtent",{value:TextFormatDefinition.as2GetTextExtent,writable:!1,enumerable:!1,configurable:!1})}};b.__glue__={"native":{instance:{ASSetPropFlags:function(){},_addToPendingScripts:function(d,b,f){a.instance.addToPendingScripts(function(){b.apply(d,f)})},_setLevel:function(d,b){a.instance.stage._as2SetLevel(d,
b)},trace:function(a){avm2.applicationDomain.getProperty(Multiname.fromSimpleName("trace"),!0,!0)(a)}},"static":{_addInternalClasses:function(a){a.asSetPublicProperty("Object",Stubs.Object);a.asSetPublicProperty("Function",Stubs.Function);a.asSetPublicProperty("Array",Stubs.Array);a.asSetPublicProperty("Number",Stubs.Number);a.asSetPublicProperty("Math",avm2.systemDomain.getClass("Math"));a.asSetPublicProperty("Boolean",Stubs.Boolean);a.asSetPublicProperty("Date",Stubs.Date);a.asSetPublicProperty("RegExp",
Stubs.RegExp);a.asSetPublicProperty("String",Stubs.String)}}},script:{instance:Glue.ALL}};return b}.call(this),AS2MovieClipDefinition=function(){var a=Shumway.AVM1.AS2Context,b={__class__:"avm1lib.AS2MovieClip",initialize:function(){},_insertChildAtDepth:function(a,b){return this._nativeAS3Object._insertChildAtDepth(a,b)},_duplicate:function(a,b,f){return this._nativeAS3Object._duplicate(a,b,f)},_constructSymbol:function(d){var b=a.instance.classes&&a.instance.classes[d],f=a.instance.getAsset(d);
d=flash.display.MovieClip.class;f=d.createAsSymbol(f);f._avm1SymbolClass=b;d.instanceConstructor.call(f);this._nativeAS3Object.addChild(f);return f},_gotoLabel:function(a){this._nativeAS3Object.gotoLabel(a)},_callFrame:function(a){this._nativeAS3Object._callFrame(a)},init:function(a){a&&(Object.defineProperty(this,"_nativeAS3Object",{value:a}),a._as2Object=this,initDefaultListeners(this))}};b.__glue__={"native":{instance:{_as3Object:{get:function(){return this._nativeAS3Object}},_init:b.init,_insertChildAtDepth:b._insertChildAtDepth,
_duplicate:b._duplicate,_constructSymbol:b._constructSymbol,_callFrame:b._callFrame,_gotoLabel:b._gotoLabel}},script:{instance:Glue.ALL}};return b}.call(this),AS2MovieClipLoaderDefinition=function(){var a={__class__:"avm1lib.AS2MovieClipLoader",initialize:function(){},_setAS3Object:function(a){Object.defineProperty(this,"_nativeAS3Object",{value:a})},get _as3Object(){return this._nativeAS3Object},get _bytesLoaded(){return this._nativeAS3Object._contentLoaderInfo._bytesLoaded}},b=Object.getOwnPropertyDescriptor;
a.__glue__={"native":{instance:{_as3Object:b(a,"_as3Object"),_setAS3Object:a._setAS3Object,_bytesLoaded:b(a,"_bytesLoaded")}},script:{instance:Glue.ALL}};return a}.call(this),AS2TextFieldDefinition=function(){var a={__class__:"avm1lib.AS2TextField",initialize:function(){this._variable=""}};a.__glue__={"native":{instance:{variable:{get:function(){return this._variable},set:function(a){if(a!==this._variable){this._variable=a;var d=this._nativeAS3Object,e;if(0<=a.indexOf(".")||0<=a.indexOf(":")){var f=
a.split(/[.:\/]/g);a=f.pop();"_root"==f[0]||""===f[0]?(e=d.root._getAS2Object(),f.shift(),""===f[0]&&f.shift()):e=d._parent._getAS2Object();for(;0<f.length;){var g=f.shift();e=e.asGetPublicProperty(g)||e[g];if(!e)throw Error("Cannot find "+g+" variable");}}else e=d._parent._getAS2Object();e.asHasProperty(void 0,a,0)||e.asSetPublicProperty(a,d.text);d._addEventListener("advanceFrame",function(){d.text=""+e.asGetPublicProperty(a)})}}},_as3Object:{get:function(){return this._nativeAS3Object}},_init:function(a){Object.defineProperty(this,
"_nativeAS3Object",{value:a});a._as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2UtilsDefinition=function(){var a=Shumway.AVM1.AS2Context;return{__class__:"avm1lib.AS2Utils",initialize:function(){},__glue__:{"native":{"static":{getAS2Object:function(a){return a&&a._getAS2Object?a._getAS2Object():null},addProperty:function(a,d,e,f,g){a.asDefinePublicProperty(d,{get:e,set:f||void 0,enumerable:g,configurable:!0})},resolveTarget:function(b){return a.instance.resolveTarget(b)},
resolveLevel:function(b){return a.instance.resolveLevel(b)},currentStage:{get:function(){return a.instance.stage}},_installObjectMethods:function(){var b=Stubs.Object,d=b.asGetPublicProperty("prototype");b.asSetPublicProperty("registerClass",function(d,b){(a.instance.classes||(a.instance.classes={}))[d]=b});d.asDefinePublicProperty("addProperty",{value:function(a,d,b){if("string"!==typeof a||""===a||"function"!==typeof d||"function"!==typeof b&&null!==b)return!1;this.asDefinePublicProperty(a,{get:d,
set:b||void 0,configurable:!0,enumerable:!0});return!0},writable:!1,enumerable:!1,configurable:!1})}}}}}}.call(this);function initDefaultListeners(a){var b=a.asGetPublicProperty("_as2DefaultListeners");if(b)for(var d=0;d<b.length;d++){var e=b[d];e.asGetPublicProperty("setter").call(a,e.value)}}function bindNativeClassDefinition(a,b){natives[a]=function(a,e,f,g){a=new Class(void 0,f,ApplicationDomain.coerceCallable);a.extend(g);a.linkNatives(b);return a}}
var Stubs=new function(){function a(a,d,b){Object.defineProperty(a,b,{get:function(){var e=avm2.systemDomain.getClass(d);!0;Object.defineProperty(a,b,{value:e.instanceConstructor,writable:!1});return a[b]},configurable:!0})}function b(a,d,b){return{classSimpleName:a,nativeName:d,definition:b}}var d=this,e=createEmptyObject(),f={__glue__:{script:{instance:Glue.ALL,"static":Glue.ALL}}};this.getClassNames=function(){return Object.keys(e)};this.onClassCreated=function(a,d){var b=d.classInfo.instanceInfo.name.getOriginalName();
b in e&&d.link(e[b]||f)};"Boolean Date String Function Object Number Math Array RegExp".split(" ").forEach(function(b){a(d,b,b)});"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError".split(" ").forEach(function(b){a(d,b,b)});[b("flash.display.DisplayObject","DisplayObjectClass",DisplayObjectDefinition),b("flash.display.InteractiveObject","InteractiveObjectClass",InteractiveObjectDefinition),b("flash.display.DisplayObjectContainer",
"ContainerClass",DisplayObjectContainerDefinition),b("flash.display.Sprite","SpriteClass",SpriteDefinition),b("flash.display.MovieClip","MovieClipClass",MovieClipDefinition),b("flash.display.Shape","ShapeClass",ShapeDefinition),b("flash.display.Bitmap","BitmapClass",BitmapDefinition),b("flash.display.BitmapData","BitmapDataClass",BitmapDataDefinition),b("flash.display.Stage","StageClass",StageDefinition),b("flash.display.Loader","LoaderClass",LoaderDefinition),b("flash.display.LoaderInfo","LoaderInfoClass",
LoaderInfoDefinition),b("flash.display.Graphics","GraphicsClass",GraphicsDefinition),b("flash.display.SimpleButton","SimpleButtonClass",SimpleButtonDefinition),b("flash.display.MorphShape","MorphShapeClass",MorphShapeDefinition),b("flash.display.NativeMenu","MenuClass",NativeMenuDefinition),b("flash.display.NativeMenuItem","MenuItemClass",NativeMenuItemDefinition),b("flash.display.FrameLabel","FrameLabelClass",FrameLabelDefinition),b("flash.display.Scene"),b("flash.display.BlendMode"),b("flash.display.Shader",
"ShaderClass",ShaderDefinition),b("flash.display.ShaderData","ShaderDataClass",ShaderDataDefinition),b("flash.filters.BevelFilter","BevelFilterClass",BevelFilterDefinition),b("flash.filters.BitmapFilter","BitmapFilterClass",BitmapFilterDefinition),b("flash.filters.BlurFilter","BlurFilterClass",BlurFilterDefinition),b("flash.filters.ColorMatrixFilter","ColorMatrixFilterClass",ColorMatrixFilterDefinition),b("flash.filters.ConvolutionFilter","ConvolutionFilterClass",ConvolutionFilterDefinition),b("flash.filters.DisplacementMapFilter",
"DisplacementMapFilterClass",DisplacementMapFilterDefinition),b("flash.filters.DropShadowFilter","DropShadowFilterClass",DropShadowFilterDefinition),b("flash.filters.GlowFilter","GlowFilterClass",GlowFilterDefinition),b("flash.filters.GradientBevelFilter","GradientBevelFilterClass",GradientBevelFilterDefinition),b("flash.filters.GradientGlowFilter","GradientGlowFilterClass",GradientGlowFilterDefinition),b("flash.filters.ShaderFilter","ShaderFilterClass",ShaderFilterDefinition),b("flash.geom.Point",
"PointClass",PointDefinition),b("flash.geom.Rectangle","RectangleClass",RectangleDefinition),b("flash.geom.Matrix","MatrixClass",MatrixDefinition),b("flash.geom.Matrix3D","Matrix3DClass",Matrix3DDefinition),b("flash.geom.Vector3D","Vector3DClass",Vector3DDefinition),b("flash.geom.Transform","TransformClass",TransformDefinition),b("flash.geom.ColorTransform","ColorTransformClass",ColorTransformDefinition),b("flash.events.EventDispatcher","EventDispatcherClass",EventDispatcherDefinition),b("flash.events.Event",
"EventClass",EventDefinition),b("flash.events.IOErrorEvent"),b("flash.events.NetStatusEvent"),b("flash.events.KeyboardEvent","KeyboardEventClass",KeyboardEventDefinition),b("flash.events.MouseEvent","MouseEventClass",MouseEventDefinition),b("flash.events.TextEvent","TextEventClass",TextEventDefinition),b("flash.events.TimerEvent","TimerEventClass",TimerEventDefinition),b("flash.events.ProgressEvent"),b("flash.events.NetStatusEvent"),b("flash.external.ExternalInterface","ExternalInterfaceClass",ExternalInterfaceDefinition),
b("flash.ui.ContextMenu","ContextMenuClass",ContextMenuDefinition),b("flash.ui.ContextMenuItem","ContextMenuItemClass",ContextMenuItemDefinition),b("flash.ui.Keyboard","KeyboardClass",KeyboardDefinition),b("flash.ui.Mouse","MouseClass",MouseDefinition),b("flash.ui.MouseCursorData","MouseCursorDataClass",MouseCursorDataDefinition),b("flash.text.Font","FontClass",FontDefinition),b("flash.text.TextField","TextFieldClass",TextFieldDefinition),b("flash.text.StaticText","StaticTextClass",StaticTextDefinition),
b("flash.text.StyleSheet","StyleSheetClass",StyleSheetDefinition),b("flash.text.TextFormat","TextFormatClass",TextFormatDefinition),b("flash.text.TextLineMetrics"),b("flash.text.engine.ContentElement","ContentElementClass",ContentElementDefinition),b("flash.text.engine.ElementFormat","ElementFormatClass",ElementFormatDefinition),b("flash.text.engine.FontDescription","FontDescriptionClass",FontDescriptionDefinition),b("flash.text.engine.GroupElement","GroupElementClass",GroupElementDefinition),b("flash.text.engine.SpaceJustifier",
"SpaceJustifierClass",SpaceJustifierDefinition),b("flash.text.engine.TextBlock","TextBlockClass",TextBlockDefinition),b("flash.text.engine.TextElement","TextElementClass",TextElementDefinition),b("flash.text.engine.TextJustifier","TextJustifierClass",TextJustifierDefinition),b("flash.text.engine.TextLine","TextLineClass",TextLineDefinition),b("flash.media.Sound","SoundClass",SoundDefinition),b("flash.media.SoundChannel","SoundChannelClass",SoundChannelDefinition),b("flash.media.SoundMixer","SoundMixerClass",
SoundMixerDefinition),b("flash.media.SoundTransform","SoundTransformClass",SoundTransformDefinition),b("flash.media.Video","VideoClass",VideoDefinition),b("flash.media.ID3Info","ID3InfoClass",ID3InfoDefinition),b("flash.media.Microphone","MicrophoneClass",MicrophoneDefinition),b("flash.net.FileFilter","FileFilterClass",FileFilterDefinition),b("flash.net.NetConnection","NetConnectionClass",NetConnectionDefinition),b("flash.net.NetStream","NetStreamClass",NetStreamDefinition),b("flash.net.Responder",
"ResponderClass",ResponderDefinition),b("flash.net.URLRequest","URLRequestClass",URLRequestDefinition),b("flash.net.URLStream","URLStreamClass",URLStreamDefinition),b("flash.net.URLLoader","URLLoaderClass",URLLoaderDefinition),b("flash.net.SharedObject","SharedObjectClass",SharedObjectDefinition),b("flash.net.ObjectEncoding","ObjectEncodingClass",ObjectEncodingDefinition),b("flash.net.LocalConnection","LocalConnectionClass",LocalConnectionDefinition),b("flash.net.Socket","SocketClass",SocketDefinition),
b("flash.net.URLVariables"),b("packageInternal flash.system.FSCommand","FSCommandClass",FSCommandDefinition),b("flash.system.Capabilities","CapabilitiesClass",CapabilitiesDefinition),b("flash.system.System","SystemClass",SystemDefinition),b("flash.system.Security","SecurityClass",SecurityDefinition),b("flash.system.SecurityDomain","SecurityDomainClass",SecurityDomainDefinition),b("flash.system.ApplicationDomain","ApplicationDomainClass",ApplicationDomainDefinition),b("flash.accessibility.Accessibility",
"AccessibilityClass",AccessibilityDefinition),b("flash.utils.Timer","TimerClass",TimerDefinition),b("avm1lib.AS2Utils","AS2Utils",AS2UtilsDefinition),b("avm1lib.AS2Broadcaster"),b("avm1lib.AS2Key"),b("avm1lib.AS2Mouse"),b("avm1lib.AS2MovieClip","AS2MovieClip",AS2MovieClipDefinition),b("avm1lib.AS2Button","AS2Button",AS2ButtonDefinition),b("avm1lib.AS2TextField","AS2TextField",AS2TextFieldDefinition),b("avm1lib.AS2Stage"),b("avm1lib.AS2System"),b("avm1lib.AS2Color"),b("avm1lib.AS2Globals","AS2Globals",
AS2GlobalsDefinition),b("avm1lib.AS2MovieClipLoader","AS2MovieClipLoader",AS2MovieClipLoaderDefinition)].forEach(function(b){for(var d=Multiname.fromSimpleName(b.classSimpleName),f=d.getOriginalName().split("."),p=this,r=0,u=f.length-1;r<u;r++)p[f[r]]||(p[f[r]]={}),p=p[f[r]];a(p,b.classSimpleName,f[f.length-1]);b.nativeName&&bindNativeClassDefinition(b.nativeName,b.definition);e[d.getOriginalName()]=b.definition})};natives["FlashUtilScript::getAliasName"]=function(){return function(a){return a.debugName}};
natives["FlashUtilScript::getDefinitionByName"]=natives.getDefinitionByName;natives["FlashUtilScript::getTimer"]=function(){var a=Date.now();return function(){return Date.now()-a}};natives["FlashUtilScript::escapeMultiByte"]=function(){return escape};natives["FlashUtilScript::unescapeMultiByte"]=function(){return unescape};
natives["FlashNetScript::navigateToURL"]=function(){return function(a,b){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var d=a.url;/^fscommand:/i.test(d)?avm2.applicationDomain.getProperty(Multiname.fromSimpleName("flash.system.fscommand"),!0,!0).call(null,d.substring(10),b):window.open(FileLoadingService.resolveUrl(d),
b||"_parent")}};natives["FlashNetScript::sendToURL"]=function(){return function(a){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var b=FileLoadingService.createSession();b.onprogress=function(){};b.open(a)}};
natives["Toplevel::registerClassAlias"]=function(){return function(a,b){a||throwError("TypeError",Errors.NullPointerError,"aliasName");b||throwError("TypeError",Errors.NullPointerError,"classObject");AMFUtils.aliasesCache.classes.set(b,a);AMFUtils.aliasesCache.names[a]=b}};
natives["Toplevel::getClassByAlias"]=function(){return function(a){a||throwError("TypeError",Errors.NullPointerError,"aliasName");var b=AMFUtils.aliasesCache.names[a];b||throwError("ReferenceError",Errors.ClassNotFoundError,a);return b}};
